LavaPack.loadBundle([[6822,{"../../../../app/scripts/lib/util":290,"../../../../shared/constants/transaction":5451,"../../../../shared/lib/asset-utils":5460,"../../../components/component-library":6097,"../../../ducks/metamask/metamask":6632,"../../../helpers/constants/design-system":6645,"../../../helpers/utils/confirm-tx.util":6672,"../../../hooks/useFormatters":6773,"../../../hooks/useI18nContext":6777,"../../../hooks/useMultichainSelector":6787,"../../../selectors/assets":7531,"../../../selectors/multichain":7548,"../../../selectors/selectors":7555,"../util":6838,"bignumber.js":3648,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetMarketDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("bignumber.js"),i=e("../../../helpers/utils/confirm-tx.util"),l=e("../util"),c=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../hooks/useI18nContext"),m=e("../../../ducks/metamask/metamask"),f=e("../../../hooks/useMultichainSelector"),p=e("../../../selectors/multichain"),g=e("../../../selectors/assets"),h=e("../../../selectors/selectors"),y=e("../../../../shared/constants/transaction"),v=e("../../../../app/scripts/lib/util"),b=e("../../../../shared/lib/asset-utils"),k=e("../../../hooks/useFormatters");function x(e,t){return o.default.createElement(c.Box,{display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween},o.default.createElement(c.Text,{color:u.TextColor.textAlternative,variant:u.TextVariant.bodyMdMedium},e),t)}n.AssetMarketDetails=({asset:e,address:t})=>{var n,a,T,C,E;const w=(0,d.useI18nContext)(),_=(0,r.useSelector)(m.getCurrentCurrency),I=(0,f.useMultichainSelector)(p.getMultichainConversionRate),S=(0,r.useSelector)(h.getMarketData),M=(0,r.useSelector)(h.getCurrencyRates),A=(0,r.useSelector)(g.getAssetsRates),{formatCurrencyCompact:P,formatCompact:D}=(0,k.useFormatters)(),O=(0,b.isEvmChainId)(e.chainId),B=(0,f.useMultichainSelector)(p.getMultichainNativeCurrency),{type:F,symbol:N,chainId:R}=e,j=F===y.AssetType.native?null===(n=M[N])||void 0===n?void 0:n.conversionRate:(null===(a=M[B])||void 0===a?void 0:a.conversionRate)||0,$=(null==A||null===(T=A[t])||void 0===T?void 0:T.rate)||0,W=O?j:$,L=(0,v.getConversionRatesForNativeAsset)({conversionRates:A,chainId:R}),G=F===y.AssetType.native?null==L?void 0:L.marketData:null==A||null===(C=A[t])||void 0===C?void 0:C.marketData,q=O?null===(E=S[R])||void 0===E?void 0:E[t]:G;if(!(I>0&&q&&(q.marketCap>0||q.totalVolume>0||q.circulatingSupply>0||q.allTimeHigh>0||q.allTimeLow>0)))return null;const H=e=>e?new s.BigNumber("string"==typeof e?e:e.toString()).toNumber():0;let V=H(q.marketCap),U=H(q.totalVolume);const z=H(q.circulatingSupply);let Q=H(q.allTimeHigh),K=H(q.allTimeLow);return O&&(V*=W,U*=W,Q*=W,K*=W),o.default.createElement(c.Box,null,o.default.createElement(c.Box,{marginBottom:2,borderColor:u.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),o.default.createElement(c.Text,{variant:u.TextVariant.headingSm,paddingInline:4,paddingTop:2,paddingBottom:2},w("marketDetails")),o.default.createElement(c.Box,{paddingInline:4,display:u.Display.Flex,flexDirection:u.FlexDirection.Column,gap:2},V>0&&x(w("marketCap"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium,"data-testid":"asset-market-cap"},P(V,_))),U>0&&x(w("totalVolume"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},P(U,_))),z>0&&x(w("circulatingSupply"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},D(z))),Q>0&&x(w("allTimeHigh"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,i.formatCurrency)(`${Q}`,_,(0,l.getPricePrecision)(Q)))),K>0&&x(w("allTimeLow"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,i.formatCurrency)(`${K}`,_,(0,l.getPricePrecision)(K))))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-market-details.tsx"}],[6823,{"../../../components/component-library":6097,"../../../components/ui/menu":6542,"../../../contexts/i18n":6603,"../../../helpers/constants/design-system":6645,"../../../helpers/constants/routes":6650,"../../../selectors":7539,"prop-types":4777,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("react-router-dom"),i=e("react-redux"),l=e("../../../contexts/i18n"),c=e("../../../components/ui/menu"),u=e("../../../selectors"),d=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),f=e("../../../helpers/constants/design-system");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const g=({onRemove:e,onClickBlockExplorer:t,onViewTokenDetails:n,tokenSymbol:a,isNativeAsset:r,isEvm:p})=>{const g=(0,o.useContext)(l.I18nContext),[h,y]=(0,o.useState)(!1),v=(0,s.useHistory)(),b=(0,i.useSelector)(u.getBlockExplorerLinkText),k=(0,o.useRef)(!1),x=p&&!r;return o.default.createElement("div",{ref:k},o.default.createElement(m.ButtonIcon,{className:"asset-options__button","data-testid":"asset-options__button",onClick:()=>y(!0),ariaLabel:g("assetOptions"),iconName:m.IconName.MoreVertical,color:f.Color.textDefault,size:m.ButtonIconSize.Sm}),h?o.default.createElement(c.Menu,{anchorElement:k.current,onHide:()=>y(!1)},o.default.createElement(c.MenuItem,{iconName:m.IconName.Export,"data-testid":"asset-options__etherscan",onClick:"addBlockExplorer"===b.firstPart?()=>{v.push(`${d.NETWORKS_ROUTE}#blockExplorerUrl`)}:()=>{y(!1),t()}},g(b.firstPart,""===b.secondPart?null:[g("blockExplorerAssetAction")])),x&&o.default.createElement(c.MenuItem,{iconName:m.IconName.Trash,"data-testid":"asset-options__hide",onClick:()=>{y(!1),e()}},g("hideTokenSymbol",[a])),r||!n?null:o.default.createElement(c.MenuItem,{iconName:m.IconName.Info,"data-testid":"asset-options__token-details",onClick:()=>{y(!1),n()}},g("tokenDetails"))):null)};g.propTypes={isNativeAsset:r.default.bool,isEvm:r.default.bool,onClickBlockExplorer:r.default.func.isRequired,onRemove:e=>{if(!1===e.isNativeAsset&&"function"!=typeof e.onRemove)throw new Error("When isNativeAsset is true, onRemove is a required prop")},onViewTokenDetails:r.default.func,tokenSymbol:e=>{if(!1===e.isNativeAsset&&"string"!=typeof e.tokenSymbol)throw new Error("When isNativeAsset is true, tokenSymbol is a required prop")}};n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/asset-options.js"}],[6824,{"../../../../shared/constants/transaction":5451,"../../../../shared/lib/asset-utils":5460,"../../../../shared/lib/trace":5517,"../../../../shared/modules/conversion.utils":5529,"../../../../shared/modules/hexstring-utils":5535,"../../../components/app/assets/hooks/useMultichainAssets":5607,"../../../components/app/assets/token-cell":5633,"../../../components/app/assets/util/calculateTokenBalance":5637,"../../../components/app/transaction-list":6014,"../../../components/app/transaction-list/unified-transaction-list.component":6016,"../../../components/app/wallet-overview/coin-buttons":6023,"../../../components/component-library":6097,"../../../components/multichain":6330,"../../../ducks/metamask/metamask":6632,"../../../ducks/ramps":6634,"../../../helpers/constants/design-system":6645,"../../../helpers/constants/routes":6650,"../../../helpers/utils/portfolio":6693,"../../../hooks/useI18nContext":6777,"../../../hooks/useMultichainSelector":6787,"../../../hooks/useTokenBalances":6806,"../../../selectors":7539,"../../../selectors/assets":7531,"../../../selectors/multichain":7548,"../../../selectors/multichain-accounts/account-tree":7543,"../../settings/networks-tab/networks-form/use-safe-chains":7443,"../hooks/useCurrentPrice":6835,"./asset-market-details":6822,"./chart/asset-chart":6828,"./token-buttons":6833,"@metamask/assets-controllers":1157,"@metamask/bridge-controller":1229,"@metamask/keyring-api":1994,"@metamask/utils":2799,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/assets-controllers"),o=e("@metamask/bridge-controller"),r=e("@metamask/keyring-api"),s=e("@metamask/utils"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),l=e("react-redux"),c=e("react-router-dom"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/lib/asset-utils"),m=e("../../../../shared/lib/trace"),f=e("../../../../shared/modules/conversion.utils"),p=e("../../../../shared/modules/hexstring-utils"),g=W(e("../../../components/app/assets/hooks/useMultichainAssets")),h=W(e("../../../components/app/assets/token-cell")),y=e("../../../components/app/assets/util/calculateTokenBalance"),v=W(e("../../../components/app/transaction-list")),b=W(e("../../../components/app/transaction-list/unified-transaction-list.component")),k=W(e("../../../components/app/wallet-overview/coin-buttons")),x=e("../../../components/component-library"),T=e("../../../components/multichain"),C=e("../../../ducks/metamask/metamask"),E=e("../../../ducks/ramps"),w=e("../../../helpers/constants/design-system"),_=e("../../../helpers/constants/routes"),I=e("../../../helpers/utils/portfolio"),S=e("../../../hooks/useI18nContext"),M=e("../../../hooks/useMultichainSelector"),A=e("../../../hooks/useTokenBalances"),P=e("../../../selectors"),D=e("../../../selectors/assets"),O=e("../../../selectors/multichain"),B=e("../../../selectors/multichain-accounts/account-tree"),F=e("../../settings/networks-tab/networks-form/use-safe-chains"),N=e("../hooks/useCurrentPrice"),R=e("./asset-market-details"),j=W(e("./chart/asset-chart")),$=W(e("./token-buttons"));function W(e){return e&&e.__esModule?e:{default:e}}function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}function G(e,t){return i.default.createElement(x.Box,{display:w.Display.Flex,justifyContent:w.JustifyContent.spaceBetween},i.default.createElement(x.Text,{color:w.TextColor.textAlternative,variant:w.TextVariant.bodyMdMedium},e),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium},t))}n.default=({asset:e,optionsButton:t})=>{var n;const W=(0,S.useI18nContext)(),L=(0,c.useHistory)(),q=(0,l.useSelector)(C.getCurrentCurrency),H=(0,l.useSelector)(E.getIsNativeTokenBuyable),V=(0,d.isEvmChainId)(e.chainId),U=(0,l.useSelector)(D.getMultichainNativeAssetType),z=(0,l.useSelector)(P.getIsMultichainAccountsState2Enabled),Q=(0,l.useSelector)(D.getAssetsBySelectedAccountGroup),K=(0,s.isCaipChainId)(e.chainId)?e.chainId:(0,o.formatChainIdToCaip)(e.chainId),J=(0,l.useSelector)(e=>(0,B.getInternalAccountBySelectedAccountGroupAndCaip)(e,K));(0,i.useEffect)(()=>{(0,m.endTrace)({name:m.TraceName.AssetDetails})},[]);const{chainId:X,type:Z,symbol:Y,name:ee,image:te,decimals:ne}=e,ae=Z===u.AssetType.native,oe=(0,l.useSelector)(e=>(0,P.getIsSwapsChain)(e,X)),re=(0,l.useSelector)(e=>(0,P.getIsBridgeChain)(e,X)),se=J.methods.includes(r.EthMethod.SignTransaction)||J.methods.includes(r.EthMethod.SignUserOperation)||J.methods.includes(r.SolMethod.SignTransaction)||J.methods.includes(r.BtcMethod.SignPsbt),ie=(0,M.useMultichainSelector)(O.getMultichainIsTestnet),le=(0,M.useMultichainSelector)(O.getMultichainShouldShowFiat),ce=!ie,ue=(0,l.useSelector)(P.getShowFiatInTestnets),de=le&&(ce||ie&&ue),me=(0,l.useSelector)(P.getSelectedAccountNativeTokenCachedBalanceByChainId),{tokenBalances:fe}=(0,A.useTokenBalances)({chainIds:[X]}),pe=fe[J.address],ge=(0,g.default)().filter(e=>e.chainId===X&&e.address!==undefined).find(t=>{switch(Z){case u.AssetType.native:return t.isNative;case u.AssetType.token:return t.address===e.address;default:return!1}})??{address:"",chainId:"",symbol:"",title:"",image:"",tokenFiatAmount:0,string:"",decimals:0,aggregators:[],isNative:!1,balance:0,secondary:0},he=(0,l.useSelector)(P.getParticipateInMetaMetrics),ye=(0,l.useSelector)(P.getDataCollectionForMarketing),ve=(0,l.useSelector)(P.getMetaMetricsId);let be=(Z===u.AssetType.token?V?(0,p.toChecksumHexAddress)(e.address):e.address:V?(0,a.getNativeTokenAddress)(X):U)??"";const ke=Z===u.AssetType.token,xe=ke?V?(0,p.toChecksumHexAddress)(e.address):(0,s.parseCaipAssetType)(be).assetReference:"",{currentPrice:Te}=(0,N.useCurrentPrice)(e);let Ce,Ee,we;if(z){var _e,Ie;const t=null===(_e=Q[X])||void 0===_e?void 0:_e.find(e=>e.assetId.toLowerCase()===be.toLowerCase()||!be&&!V&&e.isNative);we=(null==t?void 0:t.assetId)||"",be=(null==t?void 0:t.assetId)||"",Ce=(null==t?void 0:t.balance)??"0",Ee=(null==t||null===(Ie=t.fiat)||void 0===Ie?void 0:Ie.balance)??0;const n=null==t?void 0:t.rawBalance;e.balance={value:(0,f.hexToDecimal)(n),display:Ce,fiat:String(Ee)}}else{var Se;const t=null==pe||null===(Se=pe[X])||void 0===Se?void 0:Se[be];Ce=(0,y.calculateTokenBalance)({isNative:ae,chainId:X,address:be,decimals:ne,nativeBalances:me,selectedAccountTokenBalancesAcrossChains:pe}),Ee=Te?Te*parseFloat(String(Ce)):0,e.balance={value:(0,f.hexToDecimal)(t),display:String(Ce),fiat:String(Ee)}}const Me=V,Ae=(0,i.useMemo)(()=>(0,I.getPortfolioUrl)("","asset_page",ve,he,ye,J.address,"spending-caps"),[J.address,ye,he,ve]),Pe=null===(n=(0,l.useSelector)(O.getMultichainNetworkConfigurationsByChainId)[X])||void 0===n?void 0:n.name,De=(0,O.getImageForChainId)(X),Oe=V||z?{address:V?be:we,chainId:X,symbol:Y,image:te,title:ee??Y,tokenFiatAmount:de?Ee:null,string:Ce?Ce.toString():"",decimals:e.decimals,aggregators:Z===u.AssetType.token&&e.aggregators?e.aggregators:[],isNative:Z===u.AssetType.native,balance:Ce,secondary:Ce?Number(Ce):0}:ge,{safeChains:Be}=(0,F.useSafeChains)(),Fe=(0,l.useSelector)(P.getIsMultichainAccountsState2Enabled);return i.default.createElement(x.Box,{marginLeft:"auto",marginRight:"auto",marginTop:4,className:"asset__content"},i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Row,justifyContent:w.JustifyContent.spaceBetween,paddingTop:1,paddingBottom:3,paddingLeft:2,paddingRight:4},i.default.createElement(x.Box,{display:w.Display.Flex},i.default.createElement(x.ButtonIcon,{color:w.IconColor.iconAlternative,marginRight:1,size:x.ButtonIconSize.Sm,ariaLabel:W("back"),iconName:x.IconName.ArrowLeft,onClick:()=>L.push(_.DEFAULT_ROUTE)})),t),i.default.createElement(x.Box,{paddingLeft:4},i.default.createElement(x.Text,{"data-testid":"asset-name",variant:w.TextVariant.bodyMdMedium,color:w.TextColor.textAlternative},ee&&Y&&ee!==Y?`${ee} (${Y})`:ee??Y)),i.default.createElement(j.default,{chainId:X,address:be,currentPrice:Te,currency:q,asset:Oe}),i.default.createElement(x.Box,{marginTop:4,paddingLeft:4,paddingRight:4},Z===u.AssetType.native?i.default.createElement(k.default,{account:J,trackingLocation:"asset-page",isBuyableChain:H,isSigningEnabled:se,isSwapsChain:oe,isBridgeChain:re,chainId:X}):i.default.createElement($.default,{token:e,account:J})),i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,paddingTop:3},i.default.createElement(x.Text,{variant:w.TextVariant.headingSm,paddingBottom:1,paddingTop:1,paddingLeft:4},W("yourBalance")),[u.AssetType.token,u.AssetType.native].includes(Z)&&i.default.createElement(h.default,{key:`${Y}-${be}`,token:Oe,disableHover:!0,safeChains:Be}),i.default.createElement(x.Box,{marginTop:2,marginBottom:2,borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i.default.createElement(x.Box,{marginTop:2,display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:4},[u.AssetType.token,u.AssetType.native].includes(Z)&&i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,paddingLeft:4,paddingRight:4},i.default.createElement(x.Text,{variant:w.TextVariant.headingSm,paddingBottom:2},W("tokenDetails")),i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:2},G(W("network"),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium,display:w.Display.Flex,alignItems:w.AlignItems.center,gap:2,"data-testid":"asset-network"},i.default.createElement(x.AvatarNetwork,{src:De,name:Pe,size:x.AvatarNetworkSize.Xs}),Pe)),ke&&i.default.createElement(x.Box,null,G(W("contractAddress"),i.default.createElement(T.AddressCopyButton,{address:xe,shorten:!0})),i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:2},e.decimals!==undefined&&G(W("tokenDecimal"),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium},e.decimals)),e.aggregators&&e.aggregators.length>0&&i.default.createElement(x.Box,null,i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium,color:w.TextColor.textAlternative},W("tokenList")),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium},e.aggregators.map(e=>e.replace(/^metamask$/iu,"MetaMask")).join(", "))))),Me&&G(W("spendingCaps"),i.default.createElement(x.ButtonLink,{className:"asset-page__spending-caps mm-text--body-md-medium",href:Ae,target:"_blank",rel:"noopener noreferrer"},W("editInPortfolio"))))),i.default.createElement(R.AssetMarketDetails,{asset:e,address:be}),i.default.createElement(x.Box,{borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i.default.createElement(x.Box,{marginBottom:4},i.default.createElement(x.Text,{paddingInline:4,variant:w.TextVariant.headingSm},W("yourActivity")),Fe?i.default.createElement(b.default,{tokenAddress:be,hideNetworkFilter:!0,tokenChainIdOverride:X}):i.default.createElement(v.default,{tokenAddress:be,hideNetworkFilter:!0,overrideFilterForCurrentChain:Z===u.AssetType.native})))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-page.tsx"}],[6825,{"../../../../components/component-library":6097,"../../../../helpers/constants/design-system":6645,"../../../../hooks/useI18nContext":6777,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetChartEmptyState=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../components/component-library"),r=e("../../../../helpers/constants/design-system"),s=e("../../../../hooks/useI18nContext");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.AssetChartEmptyState=()=>{const e=(0,s.useI18nContext)();return a.createElement(o.Box,{className:"asset-chart__empty-or-loading-state-container"},a.createElement(o.Box,{className:"asset-chart__empty-state-content"},a.createElement("img",{src:"./images/asset-chart-empty-state-illustration.png",className:"asset-chart__empty-state-illustration"}),a.createElement(o.Text,{textAlign:r.TextAlign.Center,variant:r.TextVariant.bodySmMedium,color:r.TextColor.textAlternative,fontWeight:r.FontWeight.Medium,paddingTop:4,paddingRight:2,paddingBottom:4,paddingLeft:2,width:r.BlockSize.Full},e("assetChartNoHistoricalPrices"))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-empty-state.tsx"}],[6826,{"../../../../components/component-library":6097,"../../../../components/component-library/skeleton":6143,"../../../../helpers/constants/design-system":6645,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetChartLoading=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../components/component-library/skeleton"),r=e("../../../../components/component-library"),s=e("../../../../helpers/constants/design-system");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.AssetChartLoading=()=>a.createElement(r.Box,{className:"asset-chart__empty-or-loading-state-container","data-testid":"asset-chart-loading"},a.createElement(o.Skeleton,{className:"asset-chart__skeleton",borderRadius:s.BorderRadius.LG}))}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-loading.tsx"}],[6827,{"../../../../components/app/assets/token-cell/cells":5628,"../../../../components/component-library":6097,"../../../../components/component-library/skeleton":6143,"../../../../helpers/constants/design-system":6645,"../../../../hooks/useFormatters":6773,"../../util":6838,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../helpers/constants/design-system"),r=e("../../../../components/component-library"),s=e("../../util"),i=e("../../../../hooks/useFormatters"),l=e("../../../../components/component-library/skeleton"),c=e("../../../../components/app/assets/token-cell/cells");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=()=>a.default.createElement(l.Skeleton,{width:"25%",marginBottom:1,borderRadius:o.BorderRadius.LG},a.default.createElement(r.Text,{variant:o.TextVariant.displayMd}," ")),m=()=>a.default.createElement(r.Text,{variant:o.TextVariant.displayMd,marginBottom:1}," "),f=()=>a.default.createElement(l.Skeleton,{width:"33%",borderRadius:o.BorderRadius.LG},a.default.createElement(r.Text,{variant:o.TextVariant.bodyMdMedium}," ")),p=()=>a.default.createElement(r.Text,{variant:o.TextVariant.bodyMdMedium}," "),g=(0,a.forwardRef)((e,t)=>{const[{price:n,date:l},u]=(0,a.useState)({price:e.price,date:e.date});(0,a.useImperativeHandle)(t,()=>({setPrice:u}));const{formatCurrencyTokenPrice:g}=(0,i.useFormatters)(),{loading:h,currency:y,comparePrice:v}=e,b=n!==undefined&&v!==undefined?n-v:undefined,k=h&&n===undefined,x=!h&&n===undefined,T=h&&n!==undefined,C=!h&&n!==undefined,E=h&&b===undefined,w=!h&&b===undefined,_=h&&b!==undefined&&v!==undefined,I=!h&&b!==undefined&&v!==undefined;return a.default.createElement(r.Box,{marginLeft:4,marginRight:4},k&&a.default.createElement(d,null),x&&a.default.createElement(m,null),(C||T)&&a.default.createElement(r.Text,{"data-testid":"asset-hovered-price",variant:o.TextVariant.displayMd,fontWeight:o.FontWeight.Medium,borderRadius:o.BorderRadius.LG,marginBottom:1,style:{opacity:T?s.loadingOpacity:1}},g(n,y)),E&&a.default.createElement(f,null),w&&a.default.createElement(p,null),(I||_)&&a.default.createElement(r.Box,{style:{opacity:h?s.loadingOpacity:1},display:o.Display.Flex,flexDirection:o.FlexDirection.Row},e.asset&&a.default.createElement(c.TokenCellPercentChange,{token:e.asset}),a.default.createElement(r.Text,{display:o.Display.InlineBlock,variant:o.TextVariant.bodyMdMedium,color:o.TextColor.textAlternative,marginLeft:2},(0,s.getShortDateFormatter)().format(l))))});n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-price.tsx"}],[6828,{"../../../../components/component-library":6097,"../../../../helpers/constants/design-system":6645,"../../../../hooks/useI18nContext":6777,"../../../../hooks/useTheme":6804,"../../hooks/useChartTimeRanges":6834,"../../hooks/useHistoricalPrices":6836,"../../util":6838,"./asset-chart-empty-state":6825,"./asset-chart-loading":6826,"./asset-chart-price":6827,"./chart-tooltip":6829,"./crosshair-plugin":6830,"@metamask/design-tokens":1663,"chart.js":3785,classnames:3793,lodash:4534,luxon:4545,react:4961,"react-chartjs-2":4851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("chart.js"),r=e("react-chartjs-2"),s=T(e("classnames")),i=e("@metamask/design-tokens"),l=e("lodash"),c=e("luxon"),u=e("../../../../hooks/useTheme"),d=e("../../../../helpers/constants/design-system"),m=e("../../../../components/component-library"),f=e("../../../../hooks/useI18nContext"),p=e("../../hooks/useHistoricalPrices"),g=e("../../util"),h=e("../../hooks/useChartTimeRanges"),y=T(e("./chart-tooltip")),v=e("./crosshair-plugin"),b=e("./asset-chart-empty-state"),k=e("./asset-chart-loading"),x=T(e("./asset-chart-price"));function T(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}o.Chart.register(o.LinearScale,o.PointElement,o.LineElement,o.Filler,o.Decimation,v.CrosshairPlugin);const E={normalized:!0,parsing:!1,aspectRatio:2.6,layout:{autoPadding:!1,padding:0},animation:{duration:0},fill:!0,backgroundColor:({chart:e})=>{const t=e.ctx.createLinearGradient(0,0,0,e.height);return t.addColorStop(0,`${e.options.borderColor}60`),t.addColorStop(1,`${e.options.borderColor}00`),t},elements:{line:{borderWidth:1.5},point:{pointStyle:!1}},plugins:{decimation:{algorithm:"lttb",samples:150,threshold:150,enabled:!0}}};n.default=({chainId:e,address:t,currentPrice:n,currency:o,asset:v})=>{var T;const C=(0,f.useI18nContext)(),w=(0,u.useTheme)(),_=(0,h.useChartTimeRanges)(t,o),[I,S]=(0,a.useState)(_[0]??"P1D"),{loading:M,data:{prices:A,metadata:{minPricePoint:P,maxPricePoint:D,xMin:O,xMax:B,yMin:F,yMax:N}}}=(0,p.useHistoricalPrices)({chainId:e,address:t,currency:o,timeRange:I}),R=M&&0===A.length,j=!M&&0===A.length,$=M&&A.length>0,W=!M&&A.length>0,L={...E,borderColor:"dark"===w?i.brandColor.blue400:i.brandColor.blue500,scales:{x:{min:O,max:B,display:!1,type:"linear"},y:{min:F,max:N,display:!1}}},G=(0,a.useRef)(),q=(0,a.useRef)();return(0,a.useEffect)(()=>{var e;null==q||null===(e=q.current)||void 0===e||e.setPrice({price:n,date:Date.now()})},[n]),a.default.createElement(m.Box,{borderRadius:d.BorderRadius.LG,display:d.Display.Flex,flexDirection:d.FlexDirection.Column},a.default.createElement(x.default,{ref:q,loading:M,currency:o,price:n,date:Date.now(),comparePrice:null==A||null===(T=A[0])||void 0===T?void 0:T.y,asset:v}),a.default.createElement(m.Box,{"data-testid":"asset-price-chart",marginTop:4,backgroundColor:M&&!A?d.BackgroundColor.backgroundSection:d.BackgroundColor.transparent,borderRadius:d.BorderRadius.LG,display:d.Display.Flex,flexDirection:d.FlexDirection.Column},R&&a.default.createElement(k.AssetChartLoading,null),j&&a.default.createElement(b.AssetChartEmptyState,null),(W||$)&&a.default.createElement(m.Box,{style:{opacity:$?g.loadingOpacity:1}},a.default.createElement(y.default,{point:D,xMin:O,xMax:B,currency:o}),a.default.createElement(m.Box,{style:{aspectRatio:`${L.aspectRatio}`},display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:n?d.JustifyContent.flexEnd:d.JustifyContent.flexStart},a.default.createElement(r.Line,{ref:G,data:{datasets:[{data:A}]},options:L,updateMode:"none",onMouseMove:e=>{var t;const n=null==G||null===(t=G.current)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.datasets)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.data;if(n){const t=e.target,o=n[Math.max(0,Math.min(n.length-1,Math.round(e.nativeEvent.offsetX/t.clientWidth*n.length)))];var a;if(o)null==q||null===(a=q.current)||void 0===a||a.setPrice({price:o.y,date:o.x})}},onMouseOut:()=>{var e;null==q||null===(e=q.current)||void 0===e||e.setPrice({price:n,date:Date.now()})}})),a.default.createElement(y.default,{point:P,xMin:O,xMax:B,currency:o})),a.default.createElement(m.Box,{style:A?undefined:{visibility:"hidden"},display:d.Display.Flex,justifyContent:d.JustifyContent.spaceBetween,marginTop:2,marginLeft:3,marginRight:3},_.map(e=>a.default.createElement(m.ButtonBase,{key:e,className:(0,s.default)("time-range-button",{"time-range-button__selected":e===I}),onClick:()=>S(e),variant:d.TextVariant.bodyXsMedium,size:m.ButtonBaseSize.Sm,paddingLeft:2,paddingRight:2,backgroundColor:d.BackgroundColor.transparent,color:d.TextColor.textAlternative},((e,t)=>{const{years:n,months:a,weeks:o,days:r,hours:s,minutes:i,seconds:u,milliseconds:d}=c.Duration.fromISO(t,{locale:"en"}).normalize().rescale().toObject();return n&&n>100?`${e("all")}`:(0,l.trim)(`${n?`${n}${e("durationSuffixYear")} `:""}${a?`${a}${e("durationSuffixMonth")} `:""}${o?`${o}${e("durationSuffixWeek")} `:""}${r?`${r}${e("durationSuffixDay")} `:""}${s?`${s}${e("durationSuffixHour")} `:""}${i?`${i}${e("durationSuffixMinute")} `:""}${u?`${u}${e("durationSuffixSecond")} `:""}${d?`${d}${e("durationSuffixMillisecond")}`:""}`)})(C,e))))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart.tsx"}],[6829,{"../../../../components/component-library":6097,"../../../../helpers/constants/design-system":6645,"../../../../hooks/useFormatters":6773,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../components/component-library"),s=e("../../../../hooks/useFormatters"),i=e("../../../../helpers/constants/design-system");n.default=({point:e,xMin:t,xMax:n,currency:a})=>{const{formatCurrencyTokenPrice:l}=(0,s.useFormatters)(),c=e&&t&&n?(e.x-t)/(n-t):0;return o.default.createElement(r.Box,{style:{...c<.5?{paddingRight:100-200*c+"%"}:{paddingLeft:100-2*(100-100*c)+"%"},direction:c<.5?r.TextDirection.LeftToRight:r.TextDirection.RightToLeft}},o.default.createElement(r.Text,{marginLeft:4,marginRight:4,marginBottom:1,marginTop:1,variant:i.TextVariant.bodyXsMedium,color:i.TextColor.textAlternative,textAlign:i.TextAlign.Center},(null==e?void 0:e.y)===undefined?" ":l(null==e?void 0:e.y,a)))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/chart-tooltip.tsx"}],[6830,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CrosshairPlugin=void 0;n.CrosshairPlugin={id:"crosshair",afterEvent(e,{event:t}){e.crosshairX="mouseout"===t.type?undefined:t.x??undefined,e.draw()},afterDraw(e){if(e.crosshairX!==undefined){const t=e.data.datasets[0].data,n=t[Math.max(0,Math.min(t.length-1,Math.round(e.crosshairX/e.width*t.length)))];if(n){const{x:t,y:a}=e.scales,o=t.getPixelForValue(n.x),r=a.getPixelForValue(n.y);e.ctx.lineWidth=1,e.ctx.strokeStyle="#BBC0C5",e.ctx.beginPath(),e.ctx.moveTo(o,0),e.ctx.lineTo(o,e.height),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(o,r,3,0,2*Math.PI),e.ctx.fillStyle=e.options.borderColor,e.ctx.fill()}}}}}}},{package:"$root$",file:"ui/pages/asset/components/chart/crosshair-plugin.ts"}],[6831,{"../../../../shared/constants/metametrics":5430,"../../../../shared/constants/transaction":5451,"../../../../shared/lib/asset-utils":5460,"../../../../shared/modules/selectors/networks":5547,"../../../contexts/metametrics":6608,"../../../helpers/utils/multichain/blockExplorer":6685,"../../../helpers/utils/util":6703,"../../../hooks/useIsOriginalNativeTokenSymbol":6778,"../../../hooks/useMultichainSelector":6787,"../../../selectors":7539,"../../../selectors/multichain":7548,"../../../selectors/multichain-accounts/account-tree":7543,"./asset-options":6823,"./asset-page":6824,"@metamask/bridge-controller":1229,"@metamask/etherscan-link":1903,"@metamask/utils":2799,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/etherscan-link"),s=e("@metamask/utils"),i=e("@metamask/bridge-controller"),l=e("../../../selectors"),c=e("../../../../shared/modules/selectors/networks"),u=e("../../../../shared/constants/transaction"),d=e("../../../hooks/useIsOriginalNativeTokenSymbol"),m=e("../../../../shared/constants/metametrics"),f=e("../../../helpers/utils/util"),p=e("../../../contexts/metametrics"),g=e("../../../helpers/utils/multichain/blockExplorer"),h=e("../../../hooks/useMultichainSelector"),y=e("../../../selectors/multichain"),v=e("../../../../shared/lib/asset-utils"),b=e("../../../selectors/multichain-accounts/account-tree"),k=T(e("./asset-options")),x=T(e("./asset-page"));function T(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{const{symbol:n}=e,T=(0,l.getNativeCurrencyForChain)(t),{type:C}=(0,o.useSelector)(c.getProviderConfig)??{},{address:E}=(0,o.useSelector)(l.getSelectedInternalAccount),w=(0,o.useSelector)(l.getRpcPrefsForCurrentProvider),_=(0,s.isCaipChainId)(t)?t:(0,i.formatChainIdToCaip)(t),I=(0,o.useSelector)(e=>(0,b.getInternalAccountBySelectedAccountGroupAndCaip)(e,_)),S=(0,h.useMultichainSelector)(y.getMultichainNetwork,I),M=(0,v.isEvmChainId)(t),A=(0,g.getMultichainAccountUrl)(I.address,S),P=M?(0,r.getAccountLink)(E,t,w):A,D=(0,a.useContext)(p.MetaMetricsContext),O=(0,d.useIsOriginalNativeTokenSymbol)(t,n,C);return a.default.createElement(x.default,{asset:{chainId:t,type:u.AssetType.native,symbol:n,image:T,decimals:e.decimals,isOriginalNativeSymbol:!0===O},optionsButton:a.default.createElement(k.default,{isNativeAsset:!0,isEvm:M,onClickBlockExplorer:()=>{D({event:"Clicked Block Explorer Link",category:m.MetaMetricsEventCategory.Navigation,properties:{link_type:"Account Tracker",action:"Asset Options",block_explorer_domain:(0,f.getURLHostName)(P)}}),global.platform.openTab({url:P})}})})}}}},{package:"$root$",file:"ui/pages/asset/components/native-asset.tsx"}],[6832,{"../../../../shared/constants/metametrics":5430,"../../../../shared/constants/transaction":5451,"../../../../shared/lib/asset-utils":5460,"../../../../shared/modules/selectors/networks":5547,"../../../../shared/modules/string-utils":5551,"../../../contexts/metametrics":6608,"../../../helpers/utils/multichain/blockExplorer":6685,"../../../helpers/utils/util":6703,"../../../hooks/useMultichainSelector":6787,"../../../hooks/useTokenFiatAmount":6810,"../../../hooks/useTokenTracker":6813,"../../../selectors":7539,"../../../selectors/multichain":7548,"../../../selectors/multichain-accounts/account-tree":7543,"../../../store/actions":7565,"./asset-options":6823,"./asset-page":6824,"@metamask/bridge-controller":1229,"@metamask/etherscan-link":1903,"@metamask/utils":2799,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/etherscan-link"),o=e("@metamask/utils"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),i=e("react-router-dom"),l=e("@metamask/bridge-controller"),c=e("../../../../shared/constants/metametrics"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/modules/selectors/networks"),m=e("../../../../shared/modules/string-utils"),f=e("../../../contexts/metametrics"),p=e("../../../helpers/utils/util"),g=e("../../../hooks/useTokenFiatAmount"),h=e("../../../hooks/useTokenTracker"),y=e("../../../selectors"),v=e("../../../store/actions"),b=e("../../../helpers/utils/multichain/blockExplorer"),k=e("../../../hooks/useMultichainSelector"),x=e("../../../selectors/multichain"),T=e("../../../selectors/multichain-accounts/account-tree"),C=e("../../../../shared/lib/asset-utils"),E=_(e("./asset-options")),w=_(e("./asset-page"));function _(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{var n,_,I;const{address:S,symbol:M,decimals:A,isERC721:P,image:D}=e,O=(0,s.useSelector)(y.getTokenList),B=(0,s.useSelector)(d.getNetworkConfigurationsByChainId),F=null===(n=B[t])||void 0===n?void 0:n.defaultBlockExplorerUrlIndex,N=F===undefined?null:null===(_=B[t])||void 0===_?void 0:_.blockExplorerUrls[F],R=(0,o.isCaipChainId)(t)?t:(0,l.formatChainIdToCaip)(t),j=(0,s.useSelector)(e=>(0,T.getInternalAccountBySelectedAccountGroupAndCaip)(e,R)),{address:$}=j,W=(0,s.useSelector)(y.selectERC20TokensByChain),L=(0,k.useMultichainSelector)(x.getMultichainNetwork,j),G=(0,C.isEvmChainId)(t),q=(0,i.useHistory)(),H=(0,s.useDispatch)(),V=(0,r.useContext)(f.MetaMetricsContext),U=Object.values(O).find(e=>(0,m.isEqualCaseInsensitive)(e.symbol,M)&&(0,m.isEqualCaseInsensitive)(e.address,S)),z=null==W||null===(I=W[t])||void 0===I||null===(I=I.data)||void 0===I?void 0:I[S.toLowerCase()],Q=(null==U?void 0:U.name)||(null==z?void 0:z.name)||M,K=(null==U?void 0:U.iconUrl)||(null==z?void 0:z.iconUrl)||D||"",J=null==U?void 0:U.aggregators,{tokensWithBalances:X}=(0,h.useTokenTracker)({tokens:[{address:S,symbol:M,decimals:A}],address:undefined}),Z=null==X?void 0:X[0],Y=(0,g.useTokenFiatAmount)(S,null==Z?void 0:Z.string,M,{},!1),ee=(0,a.getTokenTrackerLink)(e.address,t,"",$,{blockExplorerUrl:N??""}),te=G?ee:(0,b.getMultichainAccountUrl)((0,o.parseCaipAssetType)(S).assetReference,L);return r.default.createElement(w.default,{asset:{chainId:t,type:u.AssetType.token,address:S,symbol:M,name:Q,decimals:e.decimals,image:K,aggregators:J,balance:{value:null==Z?void 0:Z.balance,display:`${(0,p.roundToDecimalPlacesRemovingExtraZeroes)(null==Z?void 0:Z.string,5)}`,fiat:Y},isERC721:P},optionsButton:r.default.createElement(E.default,{isNativeAsset:!1,isEvm:G,onRemove:()=>H((0,v.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:e,history:q})),onClickBlockExplorer:()=>{V({event:"Clicked Block Explorer Link",category:c.MetaMetricsEventCategory.Navigation,properties:{link_type:"Token Tracker",action:"Token Options",block_explorer_domain:(0,p.getURLHostName)(ee)}}),global.platform.openTab({url:te})},tokenSymbol:e.symbol})})}}}},{package:"$root$",file:"ui/pages/asset/components/token-asset.tsx"}],[6833,{"../../../../shared/constants/metametrics":5430,"../../../../shared/constants/transaction":5451,"../../../../shared/lib/asset-utils":5460,"../../../../shared/modules/selectors/networks":5547,"../../../components/app/wallet-overview/hooks/useHandleSendNonEvm":6026,"../../../components/component-library":6097,"../../../components/ui/icon-button/icon-button":6515,"../../../contexts/i18n":6603,"../../../contexts/metametrics":6608,"../../../ducks/ramps":6634,"../../../ducks/send":6637,"../../../helpers/constants/design-system":6645,"../../../helpers/constants/error-keys":6646,"../../../hooks/bridge/useBridging":6713,"../../../hooks/ramps/useRamps/useRamps":6743,"../../../selectors":7539,"../../../store/actions":7565,"../../confirmations/hooks/useRedesignedSendFlow":7235,"../../confirmations/utils/send":7263,"@metamask/keyring-api":1994,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom"),s=e("@metamask/keyring-api"),i=e("../../../contexts/i18n"),l=e("../../../ducks/send"),c=_(e("../../../hooks/ramps/useRamps/useRamps")),u=e("../../../selectors"),d=_(e("../../../hooks/bridge/useBridging")),m=e("../../../helpers/constants/error-keys"),f=e("../../../store/actions"),p=e("../../../contexts/metametrics"),g=e("../../../../shared/constants/metametrics"),h=e("../../../../shared/constants/transaction"),y=e("../../../helpers/constants/design-system"),v=_(e("../../../components/ui/icon-button/icon-button")),b=e("../../../components/component-library"),k=e("../../../ducks/ramps"),x=e("../../../components/app/wallet-overview/hooks/useHandleSendNonEvm"),T=e("../../../../shared/modules/selectors/networks"),C=e("../../confirmations/utils/send"),E=e("../../../../shared/lib/asset-utils"),w=e("../../confirmations/hooks/useRedesignedSendFlow");function _(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}n.default=({token:e,account:t})=>{const n=(0,o.useDispatch)(),_=(0,a.useContext)(i.I18nContext),I=(0,a.useContext)(p.MetaMetricsContext),S=(0,r.useHistory)(),M=(0,o.useSelector)(u.getUseExternalServices),A=(0,E.isEvmChainId)(e.chainId),P=(0,o.useSelector)(u.getIsMultichainAccountsState2Enabled),{enabled:D}=(0,w.useRedesignedSendFlow)(),{chainId:O}=(0,o.useSelector)(u.getSelectedMultichainNetworkConfiguration),B=(0,o.useSelector)(T.getCurrentChainId),F=P?e.chainId:A?B:O,N=(0,o.useSelector)(u.getNetworkConfigurationIdByChainId),R=(0,o.useSelector)(k.getIsNativeTokenBuyable),{openBuyCryptoInPdapp:j}=(0,c.default)(),{openBridgeExperience:$}=(0,d.default)(),W=(0,x.useHandleSendNonEvm)(e.address);(0,a.useEffect)(()=>{e.isERC721&&n((0,f.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:e.address}))},[e.isERC721,e.address,n]);const L=(0,a.useCallback)(async()=>{if(B!==e.chainId&&O!==e.chainId&&!P)try{const t=N[e.chainId];await n((0,f.setActiveNetworkWithError)(t))}catch(t){throw console.error(`Failed to switch chains.\n        Target chainId: ${e.chainId}, Current chainId: ${B}.\n        ${t}`),t}},[P,B,O,N,e.chainId,n]),G=(0,a.useCallback)(()=>{j(),I({event:g.MetaMetricsEventName.NavBuyButtonClicked,category:g.MetaMetricsEventCategory.Navigation,properties:{location:"Token Overview",text:"Buy",chain_id:F,token_symbol:e.symbol}})},[F,e.symbol,I,j]),q=(0,a.useCallback)(async()=>{if(I({event:g.MetaMetricsEventName.SendStarted,category:g.MetaMetricsEventCategory.Navigation,properties:{token_symbol:e.symbol,location:g.MetaMetricsSwapsEventSource.TokenView,text:"Send",chain_id:e.chainId}},{excludeMetaMetricsId:!1}),(0,s.isEvmAccountType)(t.type)||D)try{await L(),await n((0,l.startNewDraftTransaction)({type:h.AssetType.token,details:e})),(0,C.navigateToSendRoute)(S,D,{address:e.address,chainId:e.chainId})}catch(e){if(!e.message.includes(m.INVALID_ASSET_TYPE))throw e}else await W()},[I,n,S,e,L,t,W,D]),H=(0,a.useCallback)(async()=>{await L(),$(g.MetaMetricsSwapsEventSource.TokenView,e)},[e,L,$]);return a.default.createElement(b.Box,{display:y.Display.Flex,gap:3,justifyContent:y.JustifyContent.spaceEvenly},a.default.createElement(v.default,{className:"token-overview__button",Icon:a.default.createElement(b.Icon,{name:b.IconName.Dollar,color:y.IconColor.iconAlternative,size:b.IconSize.Md}),label:_("buy"),"data-testid":"token-overview-buy",onClick:G,disabled:e.isERC721||!R}),a.default.createElement(v.default,{className:"token-overview__button",onClick:q,Icon:a.default.createElement(b.Icon,{name:b.IconName.Send,color:y.IconColor.iconAlternative,size:b.IconSize.Md}),label:_("send"),"data-testid":"eth-overview-send",disabled:e.isERC721}),a.default.createElement(v.default,{className:"token-overview__button",Icon:a.default.createElement(b.Icon,{name:b.IconName.SwapVertical,color:y.IconColor.iconAlternative,size:b.IconSize.Md}),onClick:H,"data-testid":"token-overview-swap",label:_("swap"),disabled:!M}))}}}},{package:"$root$",file:"ui/pages/asset/components/token-buttons.tsx"}],[6834,{"../../../selectors/assets":7531,"../../../selectors/multichain":7548,"@metamask/utils":2799,lodash:4534,luxon:4545,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useChartTimeRanges=void 0;var a=e("@metamask/utils"),o=e("lodash"),r=e("luxon"),s=e("react-redux"),i=e("../../../selectors/assets"),l=e("../../../selectors/multichain");n.useChartTimeRanges=(e,t)=>{var n;const c=["P1D","P1W","P1M","P3M","P1Y","P1000Y"],u=(0,s.useSelector)(l.getMultichainIsEvm),d=(0,s.useSelector)(i.getHistoricalPrices);if(u)return c;(0,a.assert)(e,"caipAssetType is required on non-EVM chains"),(0,a.assert)(t,"currency is required on non-EVM chains");const m=null===(n=d[e])||void 0===n||null===(n=n[t])||void 0===n?void 0:n.intervals;return m?(0,o.chain)(m).keys().map(e=>r.Duration.fromISO(e)).filter(e=>e.isValid).sortBy(e=>e.toMillis()).map(e=>e.toISO()).filter(e=>null!==e).uniq().value():c}}}},{package:"$root$",file:"ui/pages/asset/hooks/useChartTimeRanges.ts"}],[6835,{"../../../../shared/lib/asset-utils":5460,"../../../../shared/modules/hexstring-utils":5535,"../../../selectors":7539,"../../../selectors/assets":7531,"@metamask/bridge-controller":1229,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrentPrice=void 0;var a=e("@metamask/bridge-controller"),o=e("react-redux"),r=e("../../../../shared/modules/hexstring-utils"),s=e("../../../selectors"),i=e("../../../selectors/assets"),l=e("../../../../shared/lib/asset-utils");n.useCurrentPrice=e=>{var t;const n=(0,l.isEvmChainId)(e.chainId),c=(0,o.useSelector)(s.getMarketData),u=(0,o.useSelector)(s.getCurrencyRates),d=(0,o.useSelector)(i.getAssetsRates),{chainId:m,type:f}=e;if(n){var p,g,h,y;if(f===a.AssetType.native)return{currentPrice:null===(y=u[e.symbol])||void 0===y?void 0:y.conversionRate};const t=(0,r.toChecksumHexAddress)(e.address),n=null===(p=c[m])||void 0===p||null===(p=p[t])||void 0===p?void 0:p.price,o=null===(h=u[null===(g=c[m])||void 0===g||null===(g=g[t])||void 0===g?void 0:g.currency])||void 0===h?void 0:h.conversionRate;return{currentPrice:o!==undefined&&n!==undefined?o*n:undefined}}const v=f===a.AssetType.token?e.address:(0,a.getNativeAssetForChainId)(m).assetId,b=null==d||null===(t=d[v])||void 0===t?void 0:t.rate;return{currentPrice:b?parseFloat(b):undefined}}}}},{package:"$root$",file:"ui/pages/asset/hooks/useCurrentPrice.ts"}],[6836,{"../../../../shared/constants/time":5449,"../../../../shared/lib/asset-utils":5460,"../../../../shared/lib/fetch-with-cache":5498,"../../../../shared/lib/trace":5517,"../../../selectors":7539,"../../../selectors/assets":7531,"../../../selectors/multichain-accounts/account-tree":7543,"../../../store/actions":7565,"../util":6838,"@metamask/multichain-network-controller":2095,"@metamask/utils":2799,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHistoricalPrices=n.DEFAULT_USE_HISTORICAL_PRICES_METADATA=void 0;var a,o=e("react"),r=e("@metamask/multichain-network-controller"),s=e("@metamask/utils"),i=e("react-redux"),l=e("../../../../shared/constants/time"),c=(a=e("../../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},u=e("../../../selectors"),d=e("../../../selectors/assets"),m=e("../util"),f=e("../../../store/actions"),p=e("../../../../shared/lib/trace"),g=e("../../../../shared/lib/asset-utils"),h=e("../../../selectors/multichain-accounts/account-tree");const y=n.DEFAULT_USE_HISTORICAL_PRICES_METADATA={minPricePoint:{x:-Infinity,y:-Infinity},maxPricePoint:{x:Infinity,y:Infinity},xMin:Infinity,xMax:-Infinity,yMin:Infinity,yMax:-Infinity},v=e=>{const t=Math.min(...e.map(e=>e.x)),n=Math.max(...e.map(e=>e.x)),a=Math.min(...e.map(e=>e.y)),o=Math.max(...e.map(e=>e.y));return{minPricePoint:e.find(e=>e.y===a)??y.minPricePoint,maxPricePoint:e.find(e=>e.y===o)??y.maxPricePoint,xMin:t,xMax:n,yMin:a,yMax:o}};n.useHistoricalPrices=({chainId:e,address:t,currency:n,timeRange:a})=>{const b=(0,g.isEvmChainId)(e),k=(({chainId:e,address:t,currency:n,timeRange:a})=>{const r=(0,g.isEvmChainId)(e),s=(0,i.useSelector)(u.getShouldShowFiat),[d,f]=(0,o.useState)(!1),[h,b]=(0,o.useState)([]),[k,x]=(0,o.useState)(y);return(0,o.useEffect)(()=>{if(!r)return;if(!s||!(0,m.chainSupportsPricing)(e))return;const o=performance.now(),i=(0,p.trace)({name:p.TraceName.GetAssetHistoricalPrices,startTime:o});(0,p.trace)({name:p.TraceName.GetAssetHistoricalPrices,startTime:o,parentContext:i}),f(!0);const u=(0,m.fromIso8601DurationToPriceApiTimePeriod)(a);(0,c.default)({url:`https://price.api.cx.metamask.io/v1/chains/${e}/historical-prices/${t}?vsCurrency=${n}&timePeriod=${u}`,cacheOptions:{cacheRefreshTime:5*l.MINUTE},functionName:"GetAssetHistoricalPrices",fetchOptions:{headers:{"X-Client-Id":"extension"}}}).catch(()=>({})).then(e=>{var t;const n=(null==e||null===(t=e.prices)||void 0===t?void 0:t.map(e=>({x:null==e?void 0:e[0],y:null==e?void 0:e[1]})))??[];b(n)}).finally(()=>{(0,p.endTrace)({name:p.TraceName.GetAssetHistoricalPrices,timestamp:performance.timeOrigin+o}),f(!1)})},[r,e,t,n,a,s]),(0,o.useEffect)(()=>{if(!r)return;const e=v(h);x(e)},[r,h]),{loading:d,data:{prices:h,metadata:k}}})({chainId:e,address:t,currency:n,timeRange:a}),x=(({chainId:e,address:t,currency:n,timeRange:a})=>{const l=(0,g.isEvmChainId)(e),[c,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)([]),[b,k]=(0,o.useState)(y),x=(0,i.useSelector)(d.getHistoricalPrices),T=(0,i.useDispatch)(),C=(0,i.useSelector)(t=>(0,h.getInternalAccountBySelectedAccountGroupAndCaip)(t,(0,s.isCaipChainId)(e)?e:(0,r.toEvmCaipChainId)(e)));return(0,o.useEffect)(()=>{if(l)return()=>{};const n=async()=>{u(!0);try{await T((0,f.fetchHistoricalPricesForAsset)(t,C))}catch(n){console.error("Error fetching historical prices for %s on %s",t,e,n)}finally{u(!1)}};n();const a=setInterval(n,6e4);return()=>clearInterval(a)},[l,e,t,C,T]),(0,o.useEffect)(()=>{var e;if(l)return;const o=((null==x||null===(e=x[t])||void 0===e||null===(e=e[n])||void 0===e?void 0:e.intervals[a])??[]).map(([e,t])=>({x:e,y:Number(t)}));p(o)},[l,x,t,n,a]),(0,o.useEffect)(()=>{if(l)return;const e=v(m);k(e)},[l,m]),{loading:c,data:{prices:m,metadata:b}}})({chainId:e,address:t,currency:n,timeRange:a});return b?k:x}}}},{package:"$root$",file:"ui/pages/asset/hooks/useHistoricalPrices.ts"}],[6837,{"./asset":6821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./asset"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/asset/index.js"}],[6838,{"@metamask/assets-controllers":1157,"@metamask/utils":2799,luxon:4545},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.loadingOpacity=n.getShortDateFormatterV2=n.getShortDateFormatter=n.getPricePrecision=n.fromIso8601DurationToPriceApiTimePeriod=n.findAssetByAddress=n.chainSupportsPricing=void 0;var a=e("@metamask/assets-controllers"),o=e("@metamask/utils"),r=e("luxon");n.getShortDateFormatter=()=>Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"});n.getShortDateFormatterV2=()=>Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"});n.getPricePrecision=e=>{if(0===e)return 1;let t=2;for(let n=Math.abs(e);n<1;t++)n*=10;return t};n.chainSupportsPricing=e=>a.SUPPORTED_CHAIN_IDS.includes(e);n.loadingOpacity=.2;n.findAssetByAddress=(e,t,n)=>{if(!n)return console.error("Chain ID is required."),null;const a=e[n];return a?t?a.find(e=>e.address&&e.address.toLowerCase()===t.toLowerCase()):a.find(e=>!e.address):(console.warn(`No tokens found for chainId: ${n}`),null)};n.fromIso8601DurationToPriceApiTimePeriod=e=>{(0,o.assert)(r.Duration.fromISO(e,{locale:"en"}).isValid,`Invalid ISO 8601 duration: ${e}`);const t={P1D:"1D",P7D:"7D",P1W:"7D",P1M:"1M",P3M:"3M",P1Y:"1Y",P1000Y:"1000Y"}[e];if(!t)throw new Error(`No Price API timePeriod matching the ISO 8601 duration: ${e}`);return t}}}},{package:"$root$",file:"ui/pages/asset/util.ts"}],[6839,{"../../../components/component-library":6097,"../../../contexts/i18n":6603,"../../../helpers/constants/routes":6650,react:4961,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),r=e("../../../helpers/constants/routes"),s=e("../../../components/component-library"),i=e("../../../contexts/i18n");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,a.useContext)(i.I18nContext),t=(0,o.useHistory)();return a.default.createElement(s.Button,{onClick:()=>{t.push(`${r.CROSS_CHAIN_SWAP_ROUTE}${r.PREPARE_SWAP_ROUTE}`)}},e("cancel"))}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures-cancel-button.tsx"}],[6840,{"../../../../shared/constants/metametrics":5430,"../../../components/component-library":6097,"../../../components/ui/pulse-loader":6560,"../../../contexts/metametrics":6608,"../../../ducks/bridge/selectors":6622,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"../../../selectors/selectors":7555,"@metamask/bridge-controller":1229,"lodash/isEqual":4521,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t;const n=(0,p.useI18nContext)(),{activeQuote:g}=(0,o.useSelector)(f.getBridgeQuotes,o.shallowEqual),h=null==g||null===(e=g.sentAmount)||void 0===e?void 0:e.amount,y=(0,o.useSelector)(f.getFromToken,r.default),v=(0,o.useSelector)(f.getToToken,r.default),b=(0,o.useSelector)(f.getFromChain,r.default),k=(0,o.useSelector)(f.getToChain,r.default),x=(0,o.useSelector)(i.isHardwareWallet),T=(0,o.useSelector)(i.getHardwareWalletType),C=Boolean(null==g?void 0:g.approval),E=(0,a.useContext)(u.MetaMetricsContext);(0,a.useEffect)(()=>{var e,t;E({event:"Awaiting Signature(s) on a HW wallet",category:d.MetaMetricsEventCategory.Swaps,properties:{needs_two_confirmations:C,token_from:(null==y?void 0:y.symbol)??"",token_to:(null==v?void 0:v.symbol)??"",is_hardware_wallet:x,hardware_wallet_type:T??""},sensitiveProperties:{token_from_amount:(null==g||null===(e=g.quote)||void 0===e?void 0:e.srcTokenAmount)??"",token_to_amount:(null==g||null===(t=g.quote)||void 0===t?void 0:t.destTokenAmount)??""}})},[]);const w=b&&!(0,s.isCrossChain)(b.chainId,null==k?void 0:k.chainId);return a.default.createElement("div",{className:"awaiting-bridge-signatures"},a.default.createElement(m.Box,{paddingLeft:6,paddingRight:6,height:c.BlockSize.Full,justifyContent:c.JustifyContent.center,display:c.Display.Flex,flexDirection:c.FlexDirection.Column},a.default.createElement(m.Box,{marginTop:3,marginBottom:4},a.default.createElement(l.default,null)),!C&&a.default.createElement(m.Text,{color:c.TextColor.textDefault,variant:c.TextVariant.headingMd,as:"h3"},n("swapConfirmWithHwWallet")),C&&g&&a.default.createElement(a.default.Fragment,null,a.default.createElement(m.Text,{variant:c.TextVariant.bodyMdBold,marginTop:2},n("bridgeConfirmTwoTransactions")),a.default.createElement("ul",{className:"awaiting-bridge-signatures__steps"},a.default.createElement("li",null,a.default.createElement(m.AvatarBase,{size:m.AvatarBaseSize.Sm,backgroundColor:c.BackgroundColor.primaryMuted,color:c.TextColor.primaryDefault,marginRight:2},"1"),n(w?"unifiedSwapAllowSwappingOf":"bridgeAllowSwappingOf",[null===(t=g.sentAmount)||void 0===t?void 0:t.amount,null==y?void 0:y.symbol,null==b?void 0:b.name])),a.default.createElement("li",null,a.default.createElement(m.AvatarBase,{size:m.AvatarBaseSize.Sm,backgroundColor:c.BackgroundColor.primaryMuted,color:c.TextColor.primaryDefault,marginRight:2},"2"),n(w?"unifiedSwapFromTo":"bridgeFromTo",[h,null==y?void 0:y.symbol,w?null==v?void 0:v.symbol:null==k?void 0:k.name]))),a.default.createElement(m.Text,{variant:c.TextVariant.bodyXs},n("bridgeGasFeesSplit")))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=g(e("lodash/isEqual")),s=e("@metamask/bridge-controller"),i=e("../../../selectors/selectors"),l=g(e("../../../components/ui/pulse-loader")),c=e("../../../helpers/constants/design-system"),u=e("../../../contexts/metametrics"),d=e("../../../../shared/constants/metametrics"),m=e("../../../components/component-library"),f=e("../../../ducks/bridge/selectors"),p=e("../../../hooks/useI18nContext");function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures.tsx"}],[6841,{"../../../../shared/constants/transaction":5451,"../../../ducks/bridge-status/selectors":6619,"../../../hooks/useTokenFiatAmount":6810,"@metamask/transaction-controller":2754,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeTokenDisplayData=function(e){var t,n;const{primaryTransaction:l}=e,c=(0,a.useSelector)(e=>(0,i.selectBridgeHistoryItemForTxMetaId)(e,l.id)),u=(0,a.useSelector)(e=>(0,i.selectBridgeHistoryForApprovalTxId)(e,l.id)),d=c??u,m=(0,r.useTokenFiatAmount)((null==d?void 0:d.quote.srcAsset.address)??l.sourceTokenAddress,(null==d||null===(t=d.pricingData)||void 0===t?void 0:t.amountSent)??l.sourceTokenAmount,(null==d?void 0:d.quote.srcAsset.symbol)??l.sourceTokenSymbol,{},!0,l.chainId);return{category:l.type===o.TransactionType.bridge?s.TransactionGroupCategory.bridge:s.TransactionGroupCategory.swap,displayCurrencyAmount:m,sourceTokenSymbol:(null==d?void 0:d.quote.srcAsset.symbol)??l.sourceTokenSymbol,sourceTokenAmountSent:(null==d||null===(n=d.pricingData)||void 0===n?void 0:n.amountSent)??l.sourceTokenAmount,destinationTokenSymbol:(null==d?void 0:d.quote.destAsset.symbol)??l.destinationTokenSymbol}};var a=e("react-redux"),o=e("@metamask/transaction-controller"),r=e("../../../hooks/useTokenFiatAmount"),s=e("../../../../shared/constants/transaction"),i=e("../../../ducks/bridge-status/selectors")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useBridgeTokenDisplayData.ts"}],[6842,{"../../../ducks/bridge/selectors":6622,"../../../selectors/multichain-accounts/account-tree":7543,"@metamask/bridge-controller":1229,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDestinationAccount=void 0;var a=e("react-redux"),o=e("react"),r=e("@metamask/bridge-controller"),s=e("../../../ducks/bridge/selectors"),i=e("../../../selectors/multichain-accounts/account-tree");n.useDestinationAccount=()=>{const[e,t]=(0,o.useState)(null),[n,l]=(0,o.useState)(!1),c=(0,a.useSelector)(s.getToChain),u=(0,a.useSelector)(e=>null!=c&&c.chainId?(0,i.getInternalAccountBySelectedAccountGroupAndCaip)(e,(0,r.formatChainIdToCaip)(c.chainId)):null),d=(0,a.useSelector)(e=>(0,s.getAccountGroupNameByInternalAccount)(e,u));return(0,o.useEffect)(()=>{u?(t({...u,isExternal:!1,displayName:d??""}),l(!1)):(t(null),l(!0))},[u,d]),{selectedDestinationAccount:e,setSelectedDestinationAccount:t,isDestinationAccountPickerOpen:n,setIsDestinationAccountPickerOpen:l}}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useDestinationAccount.ts"}],[6843,{"../../../../app/scripts/lib/multichain/address":220,"../../../../shared/lib/multichain/accounts":5505,"../../../ducks/domains":6626,"../../../hooks/useI18nContext":6777,"../../../selectors/selectors":7555,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useExternalAccountResolution=void 0;var a=e("react"),o=e("react-redux"),r=e("../../../../app/scripts/lib/multichain/address"),s=e("../../../ducks/domains"),i=e("../../../../shared/lib/multichain/accounts"),l=e("../../../selectors/selectors"),c=e("../../../hooks/useI18nContext");n.useExternalAccountResolution=({searchQuery:e,isDestinationSolana:t})=>{var n;const u=(0,o.useDispatch)(),d=(0,c.useI18nContext)(),m=(0,o.useSelector)(s.getDomainResolutions),f=e.trim(),p=(0,a.useMemo)(()=>f&&(t?(0,i.isSolanaAddress)(f):(0,r.isEthAddress)(f))?f:null,[f,t]),g=!t&&f.endsWith(".eth")?f:null;(0,a.useEffect)(()=>{g&&(u((0,s.initializeDomainSlice)()),u((0,s.lookupDomainName)(g)))},[g]);const h=p??(null==m||null===(n=m[0])||void 0===n?void 0:n.resolvedAddress),y=(0,o.useSelector)(e=>(0,l.getInternalAccountByAddress)(e,h));return(0,a.useMemo)(()=>!h||y?null:{address:h,isExternal:!0,type:"any:account",displayName:g??d("externalAccount")},[g,h,y])}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useExternalAccountResolution.ts"}],[6844,{"../../../../shared/modules/selectors":5545,"../../../store/actions":7565,"../../../store/controller-actions/transaction-controller":7569,"../../confirmations/selectors/preferences":7249,"@metamask/bridge-controller":1229,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasIncluded7702=function({isSwap:e,selectedAccount:t,fromChain:n,isSendBundleSupportedForChain:u}){const[d,m]=(0,o.useState)(!1),f=(0,r.useSelector)(e=>(0,s.getIsSmartTransaction)(e,null==n?void 0:n.chainId)),p=(0,r.useSelector)(c.getUseSmartAccount);return(0,o.useEffect)(()=>{let o=!1;return(async()=>{if(!(u&&f||!p)&&e&&null!=t&&t.address&&null!=n&&n.chainId)if((0,a.isSolanaChainId)(n.chainId))m(!1);else try{const e=(0,a.formatChainIdToHex)(n.chainId),r=await(0,l.isAtomicBatchSupported)({address:t.address,chainIds:[e]});if(o)return;const s=null==r?void 0:r.find(e=>e.chainId.toLowerCase()===n.chainId.toLowerCase()),c=await(0,i.isRelaySupported)(e),u=Boolean((null==s?void 0:s.isSupported)&&c);o||m(u)}catch(e){o||(console.error("Error checking gasless 7702 support:",e),m(!1))}else o||m(!1)})(),()=>{o=!0}},[p,null==n?void 0:n.chainId,u,f,e,null==t?void 0:t.address]),d};var a=e("@metamask/bridge-controller"),o=e("react"),r=e("react-redux"),s=e("../../../../shared/modules/selectors"),i=e("../../../store/actions"),l=e("../../../store/controller-actions/transaction-controller"),c=e("../../confirmations/selectors/preferences")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useGasIncluded7702.ts"}],[6845,{"../../../store/actions":7565,"@metamask/bridge-controller":1229,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsSendBundleSupported=function(e){const[t,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=!1;return(async()=>{if(null!=e&&e.chainId)if((0,o.isSolanaChainId)(e.chainId))n(!1);else try{const a=await(0,r.isSendBundleSupported)((0,o.formatChainIdToHex)(e.chainId));t||n(a)}catch(e){t||(console.error("Error checking send bundle support:",e),n(!1))}else t||n(!1)})(),()=>{t=!0}},[null==e?void 0:e.chainId]),t};var a=e("react"),o=e("@metamask/bridge-controller"),r=e("../../../store/actions")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useIsSendBundleSupported.ts"}],[6846,{"../../../../shared/lib/sentry":5511,"../../../../shared/modules/selectors":5545,"../../../ducks/bridge-status/actions":6618,"../../../ducks/bridge/actions":6620,"../../../ducks/bridge/selectors":6622,"../../../helpers/constants/routes":6650,"../../../store/actions":7565,"@metamask/bridge-controller":1229,"@metamask/utils":2799,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useHistory)(),t=(0,a.useDispatch)(),n=(0,a.useSelector)(d.isHardwareWallet),r=(0,a.useSelector)(m.getIsStxEnabled),h=(0,a.useSelector)(m.getFromAccount);return{submitBridgeTransaction:async a=>{if(!h)throw new Error("Failed to submit bridge transaction: No selected account");n&&e.push(`${i.CROSS_CHAIN_SWAP_ROUTE}${i.AWAITING_SIGNATURES_ROUTE}`);try{if((0,s.isSolanaChainId)(a.quote.srcChainId))return await t((0,l.setDefaultHomeActiveTabName)("activity")),e.push({pathname:i.DEFAULT_ROUTE,state:{stayOnHomePage:!0}}),void await t((0,c.submitBridgeTx)(h.address,a,!1));await t(await(0,c.submitBridgeTx)(h.address,a,!(0,s.isSolanaChainId)(a.quote.srcChainId)&&r))}catch(a){return p("Bridge transaction failed",a),(0,f.captureException)(a),void(n&&g(a)?(t((0,u.setWasTxDeclined)(!0)),e.push(`${i.CROSS_CHAIN_SWAP_ROUTE}${i.PREPARE_SWAP_ROUTE}`)):(await t((0,l.setDefaultHomeActiveTabName)("activity")),e.push(i.DEFAULT_ROUTE)))}await t((0,l.setDefaultHomeActiveTabName)("activity")),e.push({pathname:i.DEFAULT_ROUTE,state:{stayOnHomePage:!0}})}}},n.isApprovalTxError=n.isAllowanceResetError=void 0;var a=e("react-redux"),o=e("react-router-dom"),r=e("@metamask/utils"),s=e("@metamask/bridge-controller"),i=e("../../../helpers/constants/routes"),l=e("../../../store/actions"),c=e("../../../ducks/bridge-status/actions"),u=e("../../../ducks/bridge/actions"),d=e("../../../../shared/modules/selectors"),m=e("../../../ducks/bridge/selectors"),f=e("../../../../shared/lib/sentry");const p=(0,r.createProjectLogger)("bridge");n.isAllowanceResetError=e=>(e.message??"").includes("Eth USDT allowance reset failed");n.isApprovalTxError=e=>(e.message??"").includes("Approve transaction failed");const g=e=>{var t;const n=(null===(t=e.message)||void 0===t?void 0:t.toLowerCase())??"";return n.includes("ledger")&&(n.includes("rejected")||n.includes("denied")||n.includes("error while signing"))||n.includes("trezor")&&(n.includes("cancelled")||n.includes("rejected"))||n.includes("lattice")&&n.includes("rejected")||n.includes("user rejected")||n.includes("user cancelled")}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useSubmitBridgeTransaction.ts"}],[6847,{"../../../shared/modules/selectors/networks":5547,"../../components/component-library":6097,"../../components/multichain/pages/page":6427,"../../contexts/i18n":6603,"../../ducks/bridge/actions":6620,"../../ducks/bridge/selectors":6622,"../../ducks/swaps/swaps":6641,"../../helpers/constants/design-system":6645,"../../helpers/constants/routes":6650,"../../hooks/bridge/useBridgeExchangeRates":6710,"../../hooks/bridge/useBridging":6713,"../../hooks/bridge/useQuoteFetchEvents":6716,"../../hooks/bridge/useTxAlerts":6720,"../../hooks/useGasFeeEstimates":6774,"../../store/actions":7565,"../swaps/hooks/useSwapsFeatureFlags":7498,"./awaiting-signatures/awaiting-signatures":6840,"./awaiting-signatures/awaiting-signatures-cancel-button":6839,"./prepare/bridge-transaction-settings-modal":6856,"./prepare/prepare-bridge-page":6861,"@metamask/bridge-controller":1229,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom"),s=e("@metamask/bridge-controller"),i=e("../../contexts/i18n"),l=e("../../ducks/swaps/swaps"),c=e("../../helpers/constants/routes"),u=e("../../store/actions"),d=e("../../components/component-library"),m=e("../../../shared/modules/selectors/networks"),f=I(e("../../hooks/bridge/useBridging")),p=e("../../components/multichain/pages/page"),g=e("../swaps/hooks/useSwapsFeatureFlags"),h=e("../../ducks/bridge/actions"),y=e("../../hooks/useGasFeeEstimates"),v=e("../../hooks/bridge/useBridgeExchangeRates"),b=e("../../hooks/bridge/useQuoteFetchEvents"),k=e("../../helpers/constants/design-system"),x=e("../../hooks/bridge/useTxAlerts"),T=e("../../ducks/bridge/selectors"),C=I(e("./prepare/prepare-bridge-page")),E=I(e("./awaiting-signatures/awaiting-signatures-cancel-button")),w=I(e("./awaiting-signatures/awaiting-signatures")),_=e("./prepare/bridge-transaction-settings-modal");function I(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,a.useContext)(i.I18nContext);(0,g.useSwapsFeatureFlags)(),(0,f.default)();const t=(0,r.useHistory)(),n=(0,o.useDispatch)(),I=(0,o.useSelector)(m.getSelectedNetworkClientId),S=async()=>{await n((0,h.resetBridgeState)())},{activeQuote:M}=(0,o.useSelector)(T.getBridgeQuotes),A=(0,o.useSelector)(T.getFromChain),P=(null==A?void 0:A.chainId)&&!(0,s.isSolanaChainId)(A.chainId);(0,a.useEffect)(()=>(n((0,h.trackUnifiedSwapBridgeEvent)(s.UnifiedSwapBridgeEventName.PageViewed,{})),M&&n((0,h.restoreQuoteRequestFromState)(M.quote)),window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S),S()}),[]),(0,y.useGasFeeEstimates)(I,P),(0,v.useBridgeExchangeRates)(),(0,b.useQuoteFetchEvents)(),(0,x.useTxAlerts)();const[D,O]=(0,a.useState)(!1);return a.default.createElement(p.Page,{className:"bridge__container"},a.default.createElement(p.Header,{textProps:{variant:k.TextVariant.headingSm},startAccessory:a.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowLeft,size:d.ButtonIconSize.Sm,ariaLabel:e("back"),onClick:async()=>{await S(),t.push({pathname:c.DEFAULT_ROUTE,state:{stayOnHomePage:!0}}),n((0,l.clearSwapsState)()),await n((0,u.resetBackgroundSwapsState)())}}),endAccessory:a.default.createElement(d.ButtonIcon,{iconName:d.IconName.Setting,size:d.ButtonIconSize.Sm,ariaLabel:e("settings"),onClick:()=>{O(!0)}})},e("swap")),a.default.createElement(p.Content,{padding:0},a.default.createElement(r.Switch,null,a.default.createElement(r.Route,{path:c.CROSS_CHAIN_SWAP_ROUTE+c.PREPARE_SWAP_ROUTE},a.default.createElement(_.BridgeTransactionSettingsModal,{isOpen:D,onClose:()=>{O(!1)}}),a.default.createElement(C.default,{onOpenSettings:()=>O(!0)})),a.default.createElement(r.Route,{path:c.CROSS_CHAIN_SWAP_ROUTE+c.AWAITING_SIGNATURES_ROUTE},a.default.createElement(p.Content,null,a.default.createElement(w.default,null)),a.default.createElement(p.Footer,null,a.default.createElement(E.default,null))))))}}}},{package:"$root$",file:"ui/pages/bridge/index.tsx"}],[6848,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}n.default=e=>o.default.createElement(r.Container,i({display:s.Display.Flex,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/column.tsx"}],[6849,{"./column":6848,"./row":6850,"./tooltip":6851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Column",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"Row",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"Tooltip",{enumerable:!0,get:function(){return r.default}});var a=s(e("./column")),o=s(e("./row")),r=s(e("./tooltip"));function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/layout/index.tsx"}],[6850,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}n.default=e=>o.default.createElement(r.Container,i({display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.spaceBetween,flexWrap:s.FlexWrap.NoWrap,alignItems:s.AlignItems.center},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/row.tsx"}],[6851,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,"./column":6848,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=(a=e("./column"))&&a.__esModule?a:{default:a};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(null,arguments)}const u=o.default.forwardRef(({children:e,title:t,triggerElement:n,disabled:a=!1,onClose:l,iconName:u,style:d,...m},f)=>{const[p,g]=(0,o.useState)(!1),[h,y]=(0,o.useState)(null),v=()=>g(!1);return o.default.createElement(r.Box,{ref:f},o.default.createElement(r.Box,{ref:e=>y(e),onMouseEnter:()=>g(!0),onMouseLeave:v,display:s.Display.Flex},n??(u&&o.default.createElement(r.Icon,{color:s.IconColor.iconAlternative,name:u,size:r.IconSize.Sm}))??o.default.createElement(r.Icon,{name:r.IconName.Info,color:s.IconColor.iconAlternative,size:r.IconSize.Sm})),!a&&o.default.createElement(r.Popover,c({position:r.PopoverPosition.Auto,referenceElement:h,isOpen:p,onClickOutside:v,style:{maxWidth:"264px",backgroundColor:"var(--color-text-default)",paddingInline:"12px",paddingTop:"12px",paddingBottom:"12px",transitionTimingFunction:"linear",display:"inherit",...d},preventOverflow:!0,flip:!0,hasArrow:!0,isPortal:!0},m),o.default.createElement(i.default,{gap:2},t&&o.default.createElement(r.PopoverHeader,{color:s.TextColor.infoInverse,textAlign:s.TextAlign.Center,justifyContent:l?s.JustifyContent.spaceBetween:s.JustifyContent.center,onClose:l,childrenWrapperProps:{style:{whiteSpace:"nowrap"}}},t),o.default.createElement(r.Text,{justifyContent:s.JustifyContent.center,color:s.TextColor.infoInverse,variant:s.TextVariant.bodySm},e))))});n.default=u}}},{package:"$root$",file:"ui/pages/bridge/layout/tooltip.tsx"}],[6852,{"../../../components/component-library":6097,"../../../ducks/bridge/selectors":6622,"../../../helpers/constants/design-system":6645,"../../../hooks/bridge/useIsTxSubmittable":6715,"../../../hooks/useI18nContext":6777,"../hooks/useSubmitBridgeTransaction":6846,"../layout":6849,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAButton=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),c=(a=e("../hooks/useSubmitBridgeTransaction"))&&a.__esModule?a:{default:a},u=e("../../../helpers/constants/design-system"),d=e("../../../hooks/bridge/useIsTxSubmittable"),m=e("../layout");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.BridgeCTAButton=({onFetchNewQuotes:e,needsDestinationAddress:t=!1})=>{const n=(0,l.useI18nContext)(),a=(0,r.useSelector)(i.getToToken),f=(0,r.useSelector)(i.getFromAmount),{isLoading:p,activeQuote:g}=(0,r.useSelector)(i.getBridgeQuotes),h=(0,r.useSelector)(e=>(0,i.getIsQuoteExpired)(e,Date.now())),{submitBridgeTransaction:y}=(0,c.default)(),[v,b]=(0,o.useState)(!1),{isNoQuotesAvailable:k,isInsufficientBalance:x,isInsufficientGasBalance:T,isInsufficientGasForQuote:C,isTxAlertPresent:E}=(0,r.useSelector)(i.getValidationErrors),w=(0,r.useSelector)(i.getWasTxDeclined),_=(0,d.useIsTxSubmittable)(),I=(0,o.useMemo)(()=>w?"youDeclinedTheTransaction":h&&!p?"bridgeQuoteExpired":!p||_||g?T||k?undefined:x||C?"alertReasonInsufficientBalance":f?t?"bridgeSelectDestinationAccount":_||E?"swap":"swapSelectToken":a?t?"bridgeEnterAmountAndSelectAccount":"bridgeEnterAmount":t?"bridgeSelectTokenAmountAndAccount":"bridgeSelectTokenAndAmount":undefined,[p,E,f,a,_,x,T,C,w,h,t,g,k]),S=(0,o.useMemo)(()=>w||h?"bridgeFetchNewQuotes":undefined,[w,h]);return g&&!S?o.default.createElement(s.Button,{width:u.BlockSize.Full,size:s.ButtonSize.Lg,variant:s.ButtonVariant.Primary,"data-testid":"bridge-cta-button",style:{boxShadow:"none"},onClick:async()=>{if(g&&_&&!v)try{b(!0),await y(g)}finally{b(!1)}},loading:v,disabled:!_||E||h||v||t},I?n(I):""):o.default.createElement(m.Row,{alignItems:u.AlignItems.center,justifyContent:u.JustifyContent.center,gap:1},o.default.createElement(s.Text,{variant:u.TextVariant.bodyMd,textAlign:u.TextAlign.Center,color:u.TextColor.textAlternative},I?n(I):""),S&&o.default.createElement(s.ButtonLink,{as:"a",variant:u.TextVariant.bodyMd,style:{whiteSpace:"nowrap"},onClick:e},n(S)))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-button.tsx"}],[6853,{"../../../components/component-library":6097,"../../../ducks/bridge/selectors":6622,"../../../ducks/bridge/utils":6623,"../../../helpers/constants/design-system":6645,"../../../helpers/utils/hardware":6678,"../../../hooks/useI18nContext":6777,"../../../selectors/selectors":7555,"../layout":6849,"@metamask/bridge-controller":1229,"bignumber.js":3648,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAInfoText=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("bignumber.js"),l=e("../../../components/component-library"),c=e("../../../ducks/bridge/selectors"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/design-system"),m=e("../layout"),f=e("../../../selectors/selectors"),p=e("../../../helpers/utils/hardware"),g=e("../../../ducks/bridge/utils");n.BridgeCTAInfoText=()=>{var e;const t=(0,u.useI18nContext)(),{activeQuote:n}=(0,r.useSelector)(c.getBridgeQuotes),a=(0,r.useSelector)(e=>(0,c.getIsQuoteExpired)(e,Date.now())),h=(0,r.useSelector)(f.getCurrentKeyring),y=(0,p.isHardwareKeyring)(null==h?void 0:h.type),v=new i.BigNumber((null==n?void 0:n.quote.feeData.metabridge.amount)??"0").gt(0),b=null==n?void 0:n.approval;if(!n)return null;if(!v&&!b)return null;if(a)return null;const k=null===(e=n.quote.feeData)||void 0===e||null===(e=e.metabridge)||void 0===e?void 0:e.quoteBpsFee,x=(0,g.bpsToPercentage)(k)??s.BRIDGE_MM_FEE_RATE;return v||b?o.default.createElement(m.Row,{gap:1,justifyContent:d.JustifyContent.center},o.default.createElement(l.Text,{variant:d.TextVariant.bodyXs,color:d.TextColor.textAlternative},[v?t("rateIncludesMMFee",[x]):null,b&&((0,s.isCrossChain)(n.quote.srcChainId,n.quote.destChainId)?t("willApproveAmountForBridging"):t("willApproveAmountForSwapping"))].filter(Boolean).join(" ")),b?o.default.createElement(m.Tooltip,{display:d.Display.InlineBlock,position:l.PopoverPosition.Top,offset:[-48,8],title:t("grantExactAccess")},t(y?"bridgeApprovalWarningForHardware":"bridgeApprovalWarning",[n.sentAmount.amount,n.quote.srcAsset.symbol])):null):null}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-info-text.tsx"}],[6854,{"../../../../shared/constants/multichain/networks":5432,"../../../../shared/constants/time":5449,"../../../../shared/lib/multichain/networks":5506,"../../../components/component-library":6097,"../../../components/multichain/asset-picker-amount/asset-picker":6261,"../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs":6255,"../../../ducks/bridge/selectors":6622,"../../../ducks/locale/locale":6631,"../../../ducks/metamask/metamask":6632,"../../../helpers/constants/design-system":6645,"../../../helpers/utils/util":6703,"../../../hooks/useCopyToClipboard":6764,"../../../hooks/useI18nContext":6777,"../../../selectors/multichain":7548,"../layout":6849,"../utils/quote":6875,"./components/bridge-asset-picker-button":6857,"@metamask/bridge-controller":1229,"@metamask/etherscan-link":1903,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeInputGroup=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/bridge-controller"),s=e("@metamask/etherscan-link"),i=e("../../../components/component-library"),l=e("../../../components/multichain/asset-picker-amount/asset-picker"),c=e("../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs"),u=e("../../../hooks/useI18nContext"),d=e("../../../ducks/metamask/metamask"),m=e("../utils/quote"),f=e("../layout"),p=e("../../../helpers/constants/design-system"),g=e("../../../ducks/bridge/selectors"),h=e("../../../helpers/utils/util"),y=e("../../../hooks/useCopyToClipboard"),v=e("../../../../shared/constants/time"),b=e("../../../ducks/locale/locale"),k=e("../../../../shared/constants/multichain/networks"),x=e("../../../../shared/lib/multichain/networks"),T=e("../../../selectors/multichain"),C=e("./components/bridge-asset-picker-button");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w.apply(null,arguments)}const _=e=>e.replace(/[^\d.]+/gu,"").split(".",2).join(".");n.BridgeInputGroup=({header:e,token:t,onAssetChange:n,onAmountChange:E,networkProps:I,isTokenListLoading:S,customTokenListGenerator:M,amountFieldProps:A,amountInFiat:P,onMaxButtonClick:D,isMultiselectEnabled:O,onBlockExplorerClick:B,buttonProps:F,containerProps:N={},isDestinationToken:R=!1})=>{var j;const $=(0,u.useI18nContext)(),{isLoading:W}=(0,o.useSelector)(g.getBridgeQuotes),{isInsufficientBalance:L,isEstimatedReturnLow:G}=(0,o.useSelector)(g.getValidationErrors),q=(0,o.useSelector)(d.getCurrentCurrency),H=(0,o.useSelector)(b.getIntlLocale),V=(0,o.useSelector)(T.getMultichainCurrentChainId),U=(null==I||null===(j=I.network)||void 0===j?void 0:j.chainId)??V,[,z]=(0,y.useCopyToClipboard)(v.MINUTE),Q=(0,a.useRef)(null),K=(0,o.useSelector)(g.getFromTokenBalance),J=(null==A?void 0:A.readOnly)||(null==A?void 0:A.disabled);(0,a.useEffect)(()=>{var e;!J&&Q.current&&(Q.current.value=(null==A||null===(e=A.value)||void 0===e?void 0:e.toString())??"",Q.current.focus())},[null==A?void 0:A.value,J,t]),(0,a.useEffect)(()=>()=>{Q.current=null},[]);return a.default.createElement(f.Column,w({gap:1},N),a.default.createElement(f.Row,{gap:4},a.default.createElement(i.TextField,w({inputProps:{disableStateStyles:!0,textAlign:p.TextAlign.Start,style:{fontWeight:400,fontSize:Math.max(14,9/Math.max(9,((null==A?void 0:A.value)??"").toString().length)*36),transition:"font-size 0.1s",padding:0}},style:{minWidth:96,maxWidth:190,opacity:J&&null!=A&&A.value?1:undefined},display:p.Display.Flex,inputRef:Q,type:i.TextFieldType.Text,className:"amount-input",placeholder:"0",onKeyPress:e=>{var t;e&&("."===e.key&&null!==(t=A.value)&&void 0!==t&&t.toString().includes(".")?e.preventDefault():/^[\d.]{1}$/u.test(e.key)||e.preventDefault())},onPaste:e=>{e.preventDefault();const t=_(e.clipboardData.getData("text"));null==E||E(t??"")},onChange:e=>{e.preventDefault(),e.stopPropagation();const t=_(e.target.value);null==E||E(t??"")}},A)),a.default.createElement(l.AssetPicker,{header:e,visibleTabs:[c.TabName.TOKENS],asset:t??undefined,onAssetChange:n,networkProps:I,customTokenListGenerator:M,isTokenListLoading:S,isMultiselectEnabled:O,isDestinationToken:R},(e,n)=>J&&!t?a.default.createElement(i.Button,{"data-testid":F.testId,onClick:e,size:i.ButtonSize.Lg,paddingLeft:6,paddingRight:6,fontWeight:p.FontWeight.Normal,style:{whiteSpace:"nowrap"}},$("swapSwapTo")):a.default.createElement(C.BridgeAssetPickerButton,{onClick:e,networkImageSrc:n,asset:t??undefined,networkProps:I,"data-testid":F.testId}))),a.default.createElement(f.Row,{justifyContent:p.JustifyContent.spaceBetween,style:{height:24}},a.default.createElement(i.Text,{variant:p.TextVariant.bodyMd,fontWeight:p.FontWeight.Normal,color:J&&G?p.TextColor.warningDefault:p.TextColor.textAlternative,textAlign:p.TextAlign.End,ellipsis:!0},J&&W&&"0"===A.value?$("bridgeCalculatingAmount"):undefined,P&&(0,m.formatCurrencyAmount)(P,q,2)),!J&&K&&t&&a.default.createElement(i.Text,{display:p.Display.Flex,gap:1,variant:p.TextVariant.bodyMd,color:L?p.TextColor.errorDefault:p.TextColor.textAlternative,style:{cursor:"default",textDecoration:"none"}},(0,m.formatTokenAmount)(H,K,t.symbol),D&&a.default.createElement(i.ButtonLink,{variant:p.TextVariant.bodyMd,onClick:()=>D(K)},$("max"))),J&&t&&U&&!(0,r.isNativeAddress)(t.address)&&a.default.createElement(i.Text,{display:p.Display.Flex,gap:1,variant:p.TextVariant.bodyMd,color:p.TextColor.textAlternative,onClick:()=>{(()=>{if(t&&U){const a=(0,r.formatChainIdToCaip)(U);let o="";if(a===k.MultichainNetworks.SOLANA){const e=k.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[a];e&&(o=(0,x.formatBlockExplorerAddressUrl)(e,t.address))}else{var e,n;const a=null==I||null===(e=I.network)||void 0===e||null===(e=e.blockExplorerUrls)||void 0===e?void 0:e[(null==I||null===(n=I.network)||void 0===n?void 0:n.defaultBlockExplorerUrlIndex)??0];a&&(o=(0,s.getAccountLink)(t.address,U,{blockExplorerUrl:a},undefined))}o&&(z(o),null==B||B(t))}})()},as:"a",style:{cursor:J?"pointer":"default",textDecoration:J?"underline":"none"}},(0,h.shortenString)(t.address,{truncatedCharLimit:11,truncatedStartChars:4,truncatedEndChars:4,skipCharacterInEnd:!1}))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-input-group.tsx"}],[6855,{"../../../components/component-library":6097,"../../../ducks/bridge/selectors":6622,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"../layout":6849,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeNoFeeMessage=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/design-system"),u=e("../layout");n.BridgeNoFeeMessage=()=>{var e,t;const n=(0,l.useI18nContext)(),{activeQuote:a}=(0,r.useSelector)(i.getBridgeQuotes),d=(0,r.useSelector)(e=>{var t;return(0,i.selectNoFeeAssets)(e,null==a||null===(t=a.quote)||void 0===t||null===(t=t.destChainId)||void 0===t?void 0:t.toString())});if(!a)return null;if(!d.includes((null===(e=a.quote.destAsset.address)||void 0===e?void 0:e.toLowerCase())??""))return null;const m=(null===(t=a.quote.destAsset)||void 0===t?void 0:t.symbol)||"token";return o.default.createElement(u.Row,{gap:1,justifyContent:c.JustifyContent.center},o.default.createElement(s.Text,{variant:c.TextVariant.bodyXs,color:c.TextColor.textAlternative},n("noMMFeeSwapping",[m])))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-no-fee-message.tsx"}],[6856,{"../../../components/component-library":6097,"../../../ducks/bridge/actions":6620,"../../../ducks/bridge/selectors":6622,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"../layout":6849,"@metamask/bridge-controller":1229,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeTransactionSettingsModal=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../hooks/useI18nContext"),l=e("../../../helpers/constants/design-system"),c=e("../../../ducks/bridge/selectors"),u=e("../../../ducks/bridge/actions"),d=e("../layout");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const f=[r.BRIDGE_DEFAULT_SLIPPAGE,2];n.BridgeTransactionSettingsModal=({onClose:e,isOpen:t})=>{const n=(0,i.useI18nContext)(),m=(0,o.useDispatch)(),p=(0,o.useSelector)(c.getIsSolanaSwap),g=(0,o.useSelector)(c.getSlippage),h=p,[y,v]=(0,a.useState)(undefined),[b,k]=(0,a.useState)(undefined),[x,T]=(0,a.useState)(!0),[C,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(h&&g===undefined?(E(!0),v(undefined),k(undefined)):(E(!1),g&&0!==g?f.includes(g)?(v(g),k(undefined)):(v(undefined),k(g.toString())):(v(r.BRIDGE_DEFAULT_SLIPPAGE),k(undefined))))},[g,h,t]);const w=(()=>{if(!b)return null;const e=Number(b.replace(",","."));return e<.5?{severity:l.SEVERITIES.WARNING,text:n("swapSlippageLowDescription",[e]),title:n("swapSlippageLowTitle")}:null})();return a.default.createElement(s.Modal,{isOpen:t,onClose:e,className:"bridge-settings-modal"},a.default.createElement(s.ModalOverlay,null),a.default.createElement(s.ModalContent,null,a.default.createElement(s.ModalHeader,{onClose:e},n("transactionSettings")),a.default.createElement(d.Column,{gap:3,padding:4},a.default.createElement(d.Row,{gap:1,justifyContent:l.JustifyContent.flexStart},a.default.createElement(s.Text,null,n("swapsMaxSlippage")),a.default.createElement(d.Tooltip,{position:s.PopoverPosition.Top,style:{zIndex:1051}},n("swapSlippageTooltip"))),a.default.createElement(d.Row,{gap:2,justifyContent:l.JustifyContent.flexStart},h&&a.default.createElement(s.Button,{size:s.ButtonSize.Sm,onClick:e=>{e.preventDefault(),e.stopPropagation(),v(undefined),k(undefined),E(!0)},variant:s.ButtonVariant.Secondary,borderColor:C?l.BorderColor.primaryDefault:l.BorderColor.borderDefault,borderWidth:C?2:1,backgroundColor:C?l.BackgroundColor.primaryMuted:l.BackgroundColor.backgroundDefault},a.default.createElement(s.Text,{color:C?l.TextColor.primaryDefault:l.TextColor.textDefault},n("swapSlippageAutoDescription"))),f.map(e=>{const t=!C&&y===e;return a.default.createElement(s.Button,{key:e,size:s.ButtonSize.Sm,onClick:t=>{t.preventDefault(),t.stopPropagation(),v(e),k(undefined),E(!1)},variant:s.ButtonVariant.Secondary,borderColor:t?l.BorderColor.primaryDefault:l.BorderColor.borderDefault,borderWidth:t?2:1,backgroundColor:t?l.BackgroundColor.primaryMuted:l.BackgroundColor.backgroundDefault},a.default.createElement(s.Text,{color:t?l.TextColor.primaryDefault:l.TextColor.textDefault},e,"%"))}),x&&a.default.createElement(s.Button,{size:s.ButtonSize.Sm,variant:s.ButtonVariant.Secondary,borderColor:b===undefined?l.BorderColor.borderDefault:l.BorderColor.primaryDefault,borderWidth:b===undefined?1:2,backgroundColor:b===undefined?l.BackgroundColor.backgroundDefault:l.BackgroundColor.primaryMuted,onClick:e=>{e.preventDefault(),e.stopPropagation(),T(!1),E(!1)}},a.default.createElement(s.Text,{color:b===undefined?l.TextColor.textDefault:l.TextColor.primaryDefault},b===undefined?n("customSlippage"):`${b}%`)),!x&&a.default.createElement(s.TextField,{borderColor:l.BorderColor.primaryDefault,borderWidth:2,borderRadius:l.BorderRadius.pill,type:s.TextFieldType.Text,value:b,onChange:e=>{const{value:t}=e.target;(""===t||/^\d*[.,]?\d*$/u.test(t))&&(v(undefined),k(t),E(!1))},autoFocus:!0,onBlur:()=>{T(!0)},onFocus:()=>{T(!1)},endAccessory:a.default.createElement(s.Text,{variant:l.TextVariant.bodyMd},"%")})),w&&a.default.createElement(s.Box,{marginTop:5},a.default.createElement(s.BannerAlert,{severity:w.severity,title:w.title,titleProps:{"data-testid":"swaps-banner-title"}},a.default.createElement(s.Text,null,w.text)))),a.default.createElement(s.ModalFooter,null,a.default.createElement(s.ButtonPrimary,{width:l.BlockSize.Full,size:s.ButtonPrimarySize.Md,variant:l.TextVariant.bodyMd,disabled:(C?undefined:y??(b?Number(b.replace(",",".")):undefined))===g,onClick:()=>{const t=C?undefined:y??Number(null==b?void 0:b.replace(",","."));t!==g&&(m((0,u.setSlippage)(t)),e())}},n("submit")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx"}],[6857,{"../../../../components/component-library":6097,"../../../../components/component-library/select-button/select-button.types":6134,"../../../../helpers/constants/design-system":6645,"../../../../helpers/utils/nfts":6688,"../../../../hooks/useI18nContext":6777,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeAssetPickerButton=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../components/component-library/select-button/select-button.types"),s=e("../../../../components/component-library"),i=e("../../../../helpers/constants/design-system"),l=e("../../../../hooks/useI18nContext"),c=e("../../../../helpers/utils/nfts");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(null,arguments)}n.BridgeAssetPickerButton=({asset:e,networkProps:t,networkImageSrc:n,...a})=>{var d;const m=(0,l.useI18nContext)();return o.default.createElement(s.SelectButton,u({borderRadius:i.BorderRadius.pill,backgroundColor:i.BackgroundColor.backgroundDefault,borderColor:i.BorderColor.borderMuted,style:{padding:8,paddingRight:11,paddingInline:e?undefined:24,minWidth:"fit-content"},gap:0,size:r.SelectButtonSize.Lg,alignItems:i.AlignItems.center,descriptionProps:{variant:i.TextVariant.bodyMd,overflowWrap:i.OverflowWrap.BreakWord,ellipsis:!1},caretIconProps:{name:s.IconName.Arrow2Down,style:{display:i.Display.None}},label:o.default.createElement(s.Text,{variant:i.TextVariant.bodyLgMedium,ellipsis:!0},(null==e?void 0:e.symbol)??m("bridgeTo")),startAccessory:e?o.default.createElement(s.BadgeWrapper,{marginRight:2,badge:e?o.default.createElement(s.AvatarNetwork,{name:(null==t||null===(d=t.network)||void 0===d?void 0:d.name)??"",src:n,size:s.AvatarNetworkSize.Xs}):undefined},e?o.default.createElement(s.AvatarToken,{src:(0,c.getNftImage)(e.image)||undefined,backgroundColor:i.BackgroundColor.backgroundHover,name:e.symbol}):undefined):undefined},a))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/bridge-asset-picker-button.tsx"}],[6858,{"../../../../../app/scripts/lib/multichain/address":220,"../../../../../shared/constants/network":5433,"../../../../components/app/preferred-avatar":5825,"../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":6020,"../../../../components/component-library":6097,"../../../../ducks/bridge/selectors":6622,"../../../../helpers/constants/common":6643,"../../../../helpers/constants/design-system":6645,"../../../../helpers/utils/util":6703,"../../../../hooks/useAccountTotalCrossChainFiatBalance":6755,"../../../../hooks/useGetFormattedTokensPerChain":6776,"../../../../hooks/useI18nContext":6777,"../../../../hooks/useMultichainBalances":6786,"../../../../selectors":7539,"../../layout":6849,"@metamask/bridge-controller":1229,"@metamask/design-system-react":1655,"@metamask/keyring-api":1994,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=C(e("react")),o=e("react-redux"),r=e("@metamask/bridge-controller"),s=e("@metamask/design-system-react"),i=e("@metamask/keyring-api"),l=e("../../../../helpers/utils/util"),c=e("../../../../components/component-library"),u=e("../../../../helpers/constants/design-system"),d=e("../../../../selectors"),m=e("../../../../../app/scripts/lib/multichain/address"),f=e("../../../../hooks/useGetFormattedTokensPerChain"),p=e("../../../../hooks/useAccountTotalCrossChainFiatBalance"),g=C(e("../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),h=e("../../../../helpers/constants/common"),y=e("../../../../components/app/preferred-avatar"),v=e("../../layout"),b=e("../../../../hooks/useI18nContext"),k=e("../../../../../shared/constants/network"),x=e("../../../../ducks/bridge/selectors"),T=e("../../../../hooks/useMultichainBalances");function C(e){return e&&e.__esModule?e:{default:e}}const E=({account:e,selected:t=!1,onClick:n,isExternal:C=!1})=>{const E=(0,o.useSelector)(d.getShouldHideZeroBalanceTokens),w=(0,o.useSelector)(d.getIsTokenNetworkFilterEqualCurrentNetwork),_=(0,o.useSelector)(d.getChainIdsToPoll),I=(0,i.isEvmAccountType)(e.type),S=(0,o.useSelector)(x.getToChain),{balanceByChainId:M}=(0,T.useMultichainBalances)(e.address),{formattedTokensWithBalancesPerChain:A}=(0,f.useGetFormattedTokensPerChain)(e,E,w,_),{totalFiatBalance:P}=(0,p.useAccountTotalCrossChainFiatBalance)(e,A);let D;if(I)D=P;else{var O;const e=(null==S?void 0:S.chainId)&&((0,r.isSolanaChainId)(null==S?void 0:S.chainId)?S.chainId:(0,r.formatChainIdToHex)(null==S?void 0:S.chainId));D=e?null===(O=M[e])||void 0===O?void 0:O.toString():"0"}const B=(0,b.useI18nContext)();return a.default.createElement(v.Row,{gap:4,padding:2,paddingInline:4,onClick:n,className:t?"multichain-account-list-item--selected":"multichain-account-list-item"},a.default.createElement(c.Box,{style:{borderRadius:12,borderColor:"#8b99ff",borderWidth:t?2:0,padding:t?1:3,height:38}},a.default.createElement(y.PreferredAvatar,{style:{minWidth:"max-content",borderRadius:8},address:e.address})),a.default.createElement(v.Column,{gap:1,"data-testid":t?"selected-to-account":undefined},a.default.createElement(v.Row,{gap:1,style:{maxWidth:"min-content"}},a.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium,ellipsis:!0},e.displayName),t&&a.default.createElement(s.Icon,{name:s.IconName.CheckBold,size:s.IconSize.Md,color:s.IconColor.PrimaryDefault})),a.default.createElement(c.Text,{variant:u.TextVariant.bodySm,color:u.TextColor.textAlternative,"data-testid":"account-list-address"},(0,l.shortenAddress)((0,m.normalizeSafeAddress)(e.address)))),C?a.default.createElement(c.Tag,{label:B("externalAccount"),labelProps:{variant:u.TextVariant.bodyXs},style:{whiteSpace:"nowrap"}}):a.default.createElement(v.Column,{alignItems:u.AlignItems.flexEnd,width:u.BlockSize.Max,gap:1},a.default.createElement(g.default,{ethNumberOfDecimals:3,value:D,type:h.PRIMARY,showFiat:!0,isAggregatedFiatOverviewBalance:!0,hideLabel:!0,"data-testid":"first-currency-display"}),a.default.createElement(c.AvatarNetwork,{src:k.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null!=S&&S.chainId&&!(0,r.isSolanaChainId)(null==S?void 0:S.chainId)?(0,r.formatChainIdToHex)(null==S?void 0:S.chainId):(null==S?void 0:S.chainId)??""],name:(null==S?void 0:S.name)??"",size:c.AvatarNetworkSize.Xs})))};n.default=a.default.memo(E)}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-list-item.tsx"}],[6859,{"../../../../../shared/lib/translate":5522,"../../../../components/component-library":6097,"../../../../ducks/bridge/selectors":6622,"../../../../helpers/constants/design-system":6645,"../../hooks/useExternalAccountResolution":6843,"./destination-account-list-item":6858,"@metamask/bridge-controller":1229,"@metamask/design-system-react":1655,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DestinationAccountPickerModal=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("@metamask/design-system-react"),l=e("../../../../components/component-library"),c=e("../../../../helpers/constants/design-system"),u=e("../../../../../shared/lib/translate"),d=e("../../../../ducks/bridge/selectors"),m=e("../../hooks/useExternalAccountResolution"),f=(a=e("./destination-account-list-item"))&&a.__esModule?a:{default:a};function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}n.DestinationAccountPickerModal=({onAccountSelect:e,selectedAccount:t,isOpen:n,onClose:a})=>{const[p,g]=(0,o.useState)(""),h=(0,r.useSelector)(d.getToAccounts),y=(0,r.useSelector)(d.getToChain),v=!(null==y||!y.chainId)&&(0,s.isSolanaChainId)(y.chainId),b=(0,m.useExternalAccountResolution)({searchQuery:p,isDestinationSolana:v}),k=(0,o.useMemo)(()=>h.filter(e=>{const t=e.displayName.toLowerCase().includes(p.trim().toLowerCase()),n=e.address.toLowerCase().includes(p.trim().toLowerCase());return t||n}),[h,p]),x=(0,r.useSelector)(d.getIsToOrFromSolana);return o.default.createElement(l.Modal,{isOpen:n||x&&!t,onClose:()=>{g(""),a()},"data-testid":"destination-account-picker-modal"},o.default.createElement(l.ModalOverlay,null),o.default.createElement(l.ModalContent,{paddingTop:4,paddingBottom:4,gap:3},o.default.createElement(l.ModalHeader,{onClose:a},(0,u.t)("recipient")),o.default.createElement(l.TextField,{autoFocus:!0,"data-testid":"destination-account-picker-modal-search-input",placeholder:(v?(0,u.t)("destinationAccountPickerSearchPlaceholderToSolana"):(0,u.t)("destinationAccountPickerSearchPlaceholderToMainnet"))??undefined,marginInline:4,value:p,onChange:e=>g(e.target.value),backgroundColor:c.BackgroundColor.backgroundSubsection,borderRadius:c.BorderRadius.XL,borderWidth:0,color:c.TextColor.textAlternative,inputProps:{disableStateStyles:!0},style:{minHeight:48,marginBottom:12,outline:"none"},startAccessory:o.default.createElement(i.Icon,{name:i.IconName.Search,size:i.IconSize.Md})}),o.default.createElement(l.ModalBody,{paddingRight:0,paddingLeft:0,"data-testid":"destination-account-picker-modal-body"},k.map(n=>o.default.createElement(f.default,{key:n.id+n.address+n.displayName,account:n,onClick:()=>{e(n)},selected:!!t&&n.address.toLowerCase()===t.address.toLowerCase(),isExternal:!1})),b&&o.default.createElement(f.default,{key:"external-account",account:b,onClick:()=>{e(b)},selected:!!t&&b.address.toLowerCase()===t.address.toLowerCase(),isExternal:!0}),0===k.length&&!b&&o.default.createElement(l.Text,{textAlign:c.TextAlign.Center},p?(0,u.t)("destinationAccountPickerNoMatching"):(0,u.t)("destinationAccountPickerNoEligible")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-picker-modal.tsx"}],[6860,{"./bridge-cta-button":6852,"./bridge-cta-info-text":6853,"./bridge-no-fee-message":6855,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PrepareBridgePageFooter=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("./bridge-cta-button"),s=e("./bridge-cta-info-text"),i=e("./bridge-no-fee-message");n.PrepareBridgePageFooter=e=>o.default.createElement("div",{style:{display:"contents"}},o.default.createElement(s.BridgeCTAInfoText,null),o.default.createElement(r.BridgeCTAButton,e),o.default.createElement(i.BridgeNoFeeMessage,null))}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page-footer.tsx"}],[6861,{"../../../../shared/constants/network":5433,"../../../../shared/constants/time":5449,"../../../../shared/lib/asset-utils":5460,"../../../../shared/lib/swaps-utils":5514,"../../../../shared/lib/trace":5517,"../../../../shared/types/security-alerts-api":5556,"../../../components/component-library":6097,"../../../components/multichain":6330,"../../../ducks/bridge/actions":6620,"../../../ducks/bridge/selectors":6622,"../../../ducks/bridge/utils":6623,"../../../ducks/locale/locale":6631,"../../../helpers/constants/design-system":6645,"../../../helpers/utils/hardware":6678,"../../../hooks/bridge/useBridgeQueryParams":6711,"../../../hooks/bridge/useIsTxSubmittable":6715,"../../../hooks/bridge/useSmartSlippage":6717,"../../../hooks/bridge/useTokenAlerts":6718,"../../../hooks/bridge/useTokensWithFiltering":6719,"../../../hooks/ramps/useRamps/useRamps":6743,"../../../hooks/useI18nContext":6777,"../../../hooks/useMultichainSelector":6787,"../../../selectors":7539,"../../../selectors/multichain":7548,"../../../store/actions":7565,"../../swaps/mascot-background-animation/mascot-background-animation":7504,"../hooks/useDestinationAccount":6842,"../hooks/useGasIncluded7702":6844,"../hooks/useIsSendBundleSupported":6845,"../layout":6849,"../quotes/multichain-bridge-quote-card":6863,"../utils/quote":6875,"./bridge-input-group":6854,"./components/destination-account-picker-modal":6859,"./prepare-bridge-page-footer":6860,"@metamask/bridge-controller":1229,"@metamask/utils":2799,classnames:3793,"ethereumjs-util":4019,lodash:4534,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEnableMissingNetwork=n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=V(e("classnames")),s=e("lodash"),i=e("ethereumjs-util"),l=e("@metamask/bridge-controller"),c=e("@metamask/utils"),u=e("../../../ducks/bridge/actions"),d=e("../../../ducks/bridge/selectors"),m=e("../../../components/component-library"),f=e("../../../helpers/constants/design-system"),p=e("../../../hooks/useI18nContext"),g=e("../../../hooks/bridge/useTokensWithFiltering"),h=e("../../../../shared/lib/swaps-utils"),y=e("../utils/quote"),v=e("../../../ducks/bridge/utils"),b=V(e("../../swaps/mascot-background-animation/mascot-background-animation")),k=e("../layout"),x=V(e("../../../hooks/ramps/useRamps/useRamps")),T=e("../../../selectors"),C=e("../../../helpers/utils/hardware"),E=e("../../../../shared/constants/time"),w=e("../../../ducks/locale/locale"),_=e("../../../hooks/useMultichainSelector"),I=e("../../../selectors/multichain"),S=e("../../../store/actions"),M=e("../quotes/multichain-bridge-quote-card"),A=e("../../../../shared/types/security-alerts-api"),P=e("../../../hooks/bridge/useTokenAlerts"),D=e("../hooks/useDestinationAccount"),O=e("../../../components/multichain"),B=e("../../../hooks/bridge/useIsTxSubmittable"),F=e("../../../../shared/lib/asset-utils"),N=e("../../../../shared/lib/trace"),R=e("../../../../shared/constants/network"),j=e("../../../hooks/bridge/useBridgeQueryParams"),$=e("../../../hooks/bridge/useSmartSlippage"),W=e("../hooks/useGasIncluded7702"),L=e("../hooks/useIsSendBundleSupported"),G=e("./bridge-input-group"),q=e("./prepare-bridge-page-footer"),H=e("./components/destination-account-picker-modal");function V(e){return e&&e.__esModule?e:{default:e}}function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(U=function(e){return e?n:t})(e)}const z=()=>{const e=(0,o.useSelector)(T.getEnabledNetworksByNamespace),t=(0,o.useDispatch)();return(0,a.useCallback)(n=>{const a=Object.keys(e??{}),o=(0,l.formatChainIdToCaip)(n),{namespace:r}=(0,c.parseCaipChainId)(o);if(r){if(R.FEATURED_NETWORK_CHAIN_IDS.includes(n)){a.includes(n)||t((0,S.setEnabledAllPopularNetworks)())}}},[t,e])};n.useEnableMissingNetwork=z;n.default=({onOpenSettings:e})=>{var t,n,c,S;const R=(0,o.useDispatch)(),V=z(),U=(0,p.useI18nContext)(),Q=(0,o.useSelector)(d.getFromChain),K=(0,o.useSelector)(d.getIsSwap),J=(0,L.useIsSendBundleSupported)(Q),X=(0,o.useSelector)(e=>(0,d.getIsGasIncluded)(e,J)),Z=(0,o.useSelector)(d.getFromToken),Y=(0,o.useSelector)(T.getTokenList),ee=(0,o.useSelector)(d.getToToken),te=(0,o.useSelector)(d.getFromChains),ne=(0,o.useSelector)(d.getToChains),ae=(0,o.useSelector)(d.getToChain),oe=(0,a.useMemo)(()=>(!Q||!(0,l.isSolanaChainId)(Q.chainId))&&0===Object.keys(Y).length,[Y,Q]),re=(0,o.useSelector)(d.getFromAmount),se=(0,o.useSelector)(d.getFromAmountInCurrency),ie=(0,o.useSelector)(d.getIsStxEnabled),le=(0,_.useMultichainSelector)(I.getMultichainProviderConfig),ce=(0,o.useSelector)(d.getSlippage),ue=(0,o.useSelector)(d.getQuoteRequest),{isLoading:de,activeQuote:me,quotesRefreshCount:fe}=(0,o.useSelector)(d.getBridgeQuotes),pe=(0,o.useSelector)(e=>(0,d.getIsQuoteExpired)(e,Date.now())),ge=(0,o.useSelector)(d.getWasTxDeclined),he=(0,y.isQuoteExpiredOrInvalid)({activeQuote:me,toToken:ee,toChain:ae,fromChain:Q,isQuoteExpired:pe,insufficientBal:ue.insufficientBal})?undefined:me,ye=(0,o.useSelector)(d.getFromAccount),ve=(0,W.useGasIncluded7702)({isSwap:K,isSendBundleSupportedForChain:J,selectedAccount:ye,fromChain:Q}),be=!Z||!(0,l.isNativeAddress)(Z.address)||(X||ve),ke=(0,o.useSelector)(T.getCurrentKeyring),xe=(0,C.isHardwareKeyring)(null==ke?void 0:ke.type),Te=(0,o.useSelector)(d.getHardwareWalletName),Ce=(0,B.useIsTxSubmittable)(),Ee=(0,o.useSelector)(w.getIntlLocale),we=(0,_.useMultichainSelector)(I.getMultichainNativeCurrency),{isEstimatedReturnLow:_e,isNoQuotesAvailable:Ie,isInsufficientGasForQuote:Se,isInsufficientBalance:Me}=(0,o.useSelector)(d.getValidationErrors),Ae=(0,o.useSelector)(d.getTxAlerts),{openBuyCryptoInPdapp:Pe}=(0,x.default)(),{tokenAlert:De}=(0,P.useTokenAlerts)(),{selectedDestinationAccount:Oe,setSelectedDestinationAccount:Be,isDestinationAccountPickerOpen:Fe,setIsDestinationAccountPickerOpen:Ne}=(0,D.useDestinationAccount)(),{filteredTokenListGenerator:Re,isLoading:je}=(0,g.useTokensWithFiltering)((null==ae?void 0:ae.chainId)??(null==Q?void 0:Q.chainId),ee,(null==Q?void 0:Q.chainId)===(null==ae?void 0:ae.chainId)&&Z&&Q?(()=>{let e="";if((0,l.isNativeAddress)(Z.address))e="";else if((0,l.isSolanaChainId)(Q.chainId))e=Z.address||"";else{var t;e=(null===(t=Z.address)||void 0===t?void 0:t.toLowerCase())||""}return{...Z,address:e,chainId:(0,l.formatChainIdToCaip)(Q.chainId)}})():null,null==Oe?void 0:Oe.address),[$e,We]=(0,a.useState)(!1),[Le,Ge]=(0,a.useState)(!0);(0,a.useEffect)(()=>Ge(!0),[fe]);const[qe,He]=(0,a.useState)(!0);(0,a.useEffect)(()=>He(!0),[De]);const[Ve,Ue]=(0,a.useState)(!0);(0,a.useEffect)(()=>Ue(!0),[null==ee?void 0:ee.address]);const[ze,Qe]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Qe(!0);const e=setTimeout(()=>{Qe(!1)},E.SECOND);return()=>{clearTimeout(e)}},[$e]);const Ke=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;(_e||Se||Le||De||Ae||xe)&&(null===(e=Ke.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"}))},[_e,Se,Le,De,Ae,xe]);const Je=(0,o.useSelector)(d.getIsToOrFromSolana),Xe=(0,a.useMemo)(()=>{var e;return null!=ye&&ye.address?{srcTokenAddress:null==Z?void 0:Z.address,destTokenAddress:null==ee?void 0:ee.address,srcTokenAmount:re&&null!=Z&&Z.decimals?(0,h.calcTokenValue)(["","."].includes(re)?"0":re,Z.decimals).toFixed().split(".")[0]:undefined,srcChainId:null==Q?void 0:Q.chainId,destChainId:null==ae?void 0:ae.chainId,insufficientBal:!(null==le||null===(e=le.rpcUrl)||void 0===e||!e.includes("localhost"))||undefined,slippage:ce,walletAddress:ye.address,destWalletAddress:null==Oe?void 0:Oe.address,gasIncluded:X||ve,gasIncluded7702:ve}:undefined},[null==Z?void 0:Z.address,null==Z?void 0:Z.decimals,null==ee?void 0:ee.address,re,null==Q?void 0:Q.chainId,null==ae?void 0:ae.chainId,ce,null==ye?void 0:ye.address,null==Oe?void 0:Oe.address,null==le?void 0:le.rpcUrl,X,ve]),Ze=(0,a.useCallback)((0,s.debounce)((...e)=>{R((0,u.updateQuoteRequestParams)(...e))},300),[R]);(0,a.useEffect)(()=>()=>{Ze.cancel()},[]),(0,a.useEffect)(()=>{if(R((0,u.setSelectedQuote)(null)),!Xe)return;const e={stx_enabled:ie,token_symbol_source:(null==Z?void 0:Z.symbol)??"",token_symbol_destination:(null==ee?void 0:ee.symbol)??"",security_warnings:[null==Ae?void 0:Ae.descriptionId,null==De?void 0:De.titleId].filter(Boolean)};Ze(Xe,e)},[Xe]),(0,$.useSmartSlippage)({fromChain:Q,toChain:ae,fromToken:Z,toToken:ee,isSwap:K}),(0,a.useEffect)(()=>{(0,N.endTrace)({name:N.TraceName.SwapViewLoaded,timestamp:Date.now()}),he||R((0,u.resetBridgeState)())},[]),(0,j.useBridgeQueryParams)();const Ye=(null==ee?void 0:ee.occurrences)??(null==ee||null===(t=ee.aggregators)||void 0===t?void 0:t.length),et=(null==ee?void 0:ee.address)&&!(0,l.isNativeAddress)(null==ee?void 0:ee.address),[tt,nt]=(0,a.useState)(!1),[at,ot]=(0,a.useState)(null),[rt,st]=(0,a.useState)(0);return a.default.createElement(a.default.Fragment,null,a.default.createElement(H.DestinationAccountPickerModal,{isOpen:Fe,onAccountSelect:e=>{Be(e),Ne(!1)},selectedAccount:Oe,onClose:()=>Ne(!1)}),a.default.createElement(k.Column,{className:"prepare-bridge-page",gap:4},a.default.createElement(G.BridgeInputGroup,{header:U("swapSelectToken"),token:Z,onAmountChange:e=>{R((0,u.setFromTokenInputValue)(e))},onAssetChange:e=>{const t={...e,address:e.address??(0,i.zeroAddress)()};R((0,u.setFromToken)(t)),R((0,u.setFromTokenInputValue)(null)),e.address===(null==ee?void 0:ee.address)&&R((0,u.setToToken)(null))},networkProps:{network:Q,networks:te,onNetworkChange:e=>{(0,v.isNetworkAdded)(e)&&V(e.chainId),R((0,u.setFromChain)({networkConfig:e,selectedAccount:ye}))},header:U("yourNetworks")},isMultiselectEnabled:!0,onMaxButtonClick:be?e=>{R((0,u.setFromTokenInputValue)(e))}:undefined,amountInFiat:se.valueInCurrency.gt(0)?se.valueInCurrency.toString():undefined,amountFieldProps:{testId:"from-amount",autoFocus:!0,value:re||undefined},containerProps:{paddingInline:4},isTokenListLoading:oe,buttonProps:{testId:"bridge-source-button"},onBlockExplorerClick:e=>{ot(e),nt(!0),st(e=>e+1)}}),a.default.createElement(k.Column,{height:f.BlockSize.Full,padding:4,gap:4,backgroundColor:f.BackgroundColor.backgroundDefault,style:{position:"relative"}},a.default.createElement(m.Box,{className:"prepare-bridge-page__switch-tokens",display:f.Display.Flex,backgroundColor:f.BackgroundColor.backgroundSection,style:{position:"absolute",top:"-20px",right:"calc(50% - 20px)",border:"2px solid var(--color-background-default)",borderRadius:"100%",opacity:1,width:40,height:40,justifyContent:f.JustifyContent.center}},a.default.createElement(m.ButtonIcon,{iconProps:{className:(0,r.default)({rotate:$e})},style:{alignSelf:"center",borderRadius:"100%",width:"100%",height:"100%"},"data-testid":"switch-tokens",ariaLabel:"switch-tokens",iconName:m.IconName.SwapVertical,color:f.IconColor.iconAlternative,disabled:ze||!(0,l.isValidQuoteRequest)(ue,!1)||ae&&!(0,v.isNetworkAdded)(ae),onClick:()=>{var e;R((0,u.setSelectedQuote)(null)),(null==ae?void 0:ae.chainId)&&Z&&ee&&R((0,u.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.InputSourceDestinationSwitched,{token_symbol_source:(null==ee?void 0:ee.symbol)??null,token_symbol_destination:(null==Z?void 0:Z.symbol)??null,token_address_source:(0,F.toAssetId)(ee.address??"",(0,l.formatChainIdToCaip)(ee.chainId??""))??(null===(e=(0,l.getNativeAssetForChainId)(ae.chainId))||void 0===e?void 0:e.assetId),token_address_destination:(0,F.toAssetId)(Z.address??"",(0,l.formatChainIdToCaip)(Z.chainId??""))??null,chain_id_source:(0,l.formatChainIdToCaip)(ae.chainId),chain_id_destination:null!=Q&&Q.chainId?(0,l.formatChainIdToCaip)(null==Q?void 0:Q.chainId):null,security_warnings:[]})),We(!$e),R(K?(0,u.setFromToken)(ee):(0,u.setFromChain)({networkConfig:ae,token:ee,selectedAccount:ye})),R((0,u.setToToken)(Z))}})),a.default.createElement(m.Box,{paddingInline:4,style:{borderTop:"1px solid var(--color-border-muted)",marginTop:"-16px"}}),a.default.createElement(G.BridgeInputGroup,{header:U("swapSelectToken"),token:ee,onAssetChange:e=>{const t={...e,address:e.address??(0,i.zeroAddress)()};R((0,u.setToToken)(t))},networkProps:{network:ae,networks:ne,onNetworkChange:e=>{(0,v.isNetworkAdded)(e)&&V(e.chainId),R((0,u.setToChainId)(e.chainId))},header:U("yourNetworks")},customTokenListGenerator:Re,amountInFiat:(null==he||null===(n=he.toTokenAmount)||void 0===n?void 0:n.valueInCurrency)||undefined,amountFieldProps:{testId:"to-amount",readOnly:!0,disabled:!0,value:null!=he&&null!==(c=he.toTokenAmount)&&void 0!==c&&c.amount?(0,y.formatTokenAmount)(Ee,he.toTokenAmount.amount):"0",autoFocus:!1,className:null!=he&&null!==(S=he.toTokenAmount)&&void 0!==S&&S.amount?"amount-input defined":"amount-input"},isTokenListLoading:je,buttonProps:{testId:"bridge-destination-button"},onBlockExplorerClick:e=>{ot(e),nt(!0),st(e=>e+1)},isDestinationToken:!0}),a.default.createElement(k.Column,{justifyContent:de&&!me?f.JustifyContent.center:f.JustifyContent.flexEnd,width:f.BlockSize.Full,height:f.BlockSize.Full,gap:3},!ge&&me&&a.default.createElement(M.MultichainBridgeQuoteCard,{onOpenRecipientModal:()=>Ne(!0),onOpenSlippageModal:e,selectedDestinationAccount:Oe}),Ie&&!pe&&a.default.createElement(m.BannerAlert,{severity:m.BannerAlertSeverity.Danger,description:U("noOptionsAvailableMessage"),textAlign:f.TextAlign.Left}),de&&!me?a.default.createElement(a.default.Fragment,null,a.default.createElement(m.Text,{textAlign:f.TextAlign.Center,color:f.TextColor.textAlternative},U("swapFetchingQuotes")),a.default.createElement(b.default,{height:"64",width:"64"})):a.default.createElement(q.PrepareBridgePageFooter,{onFetchNewQuotes:()=>{Xe&&Ze(Xe,{stx_enabled:ie,token_symbol_source:(null==Z?void 0:Z.symbol)??"",token_symbol_destination:(null==ee?void 0:ee.symbol)??"",security_warnings:[]})},needsDestinationAddress:Je&&!Oe})))),a.default.createElement(k.Column,{paddingInline:4,gap:4,backgroundColor:f.BackgroundColor.backgroundDefault},xe&&Ce&&Te&&he&&a.default.createElement(m.BannerAlert,{title:U("hardwareWalletSubmissionWarningTitle"),textAlign:f.TextAlign.Left},a.default.createElement("ul",{style:{listStyle:"disc"}},a.default.createElement("li",null,a.default.createElement(m.Text,{variant:f.TextVariant.bodyMd},U("hardwareWalletSubmissionWarningStep1",[Te]))),a.default.createElement("li",null,a.default.createElement(m.Text,{variant:f.TextVariant.bodyMd},U("hardwareWalletSubmissionWarningStep2",[Te]))))),Ae&&he&&a.default.createElement(m.BannerAlert,{severity:m.BannerAlertSeverity.Danger,title:U(Ae.titleId),description:`${Ae.description} ${U(Ae.descriptionId)}`,textAlign:f.TextAlign.Left}),Ve&&ee&&et&&Boolean(Ye)&&Number(Ye)<2&&a.default.createElement(m.BannerAlert,{severity:m.BannerAlertSeverity.Warning,title:U("bridgeTokenCannotVerifyTitle"),description:U("bridgeTokenCannotVerifyDescription"),textAlign:f.TextAlign.Left,onClose:()=>Ue(!1)}),De&&qe&&a.default.createElement(m.BannerAlert,{title:De.titleId?U(De.titleId):"",severity:De.type===A.TokenFeatureType.MALICIOUS?m.BannerAlertSeverity.Danger:m.BannerAlertSeverity.Warning,description:De.descriptionId?U(De.descriptionId):De.description,textAlign:f.TextAlign.Left,onClose:()=>He(!1)}),!de&&he&&!Me&&Se&&a.default.createElement(m.BannerAlert,{title:U("bridgeValidationInsufficientGasTitle",[we]),severity:m.BannerAlertSeverity.Danger,description:U(K?"swapValidationInsufficientGasMessage":"bridgeValidationInsufficientGasMessage",[we]),textAlign:f.TextAlign.Left,actionButtonLabel:U("buyMoreAsset",[we]),actionButtonOnClick:()=>Pe()}),_e&&Le&&he&&a.default.createElement(m.BannerAlert,{title:U("lowEstimatedReturnTooltipTitle"),severity:m.BannerAlertSeverity.Warning,description:U("lowEstimatedReturnTooltipMessage",[100*l.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE]),textAlign:f.TextAlign.Left,onClose:()=>Ge(!1)}),a.default.createElement("div",{ref:Ke})),tt&&at&&a.default.createElement("div",{style:{position:"absolute",bottom:50,left:"50%",transform:"translateX(-50%)",zIndex:1e3,width:"100%",display:"flex",justifyContent:"center"}},a.default.createElement(O.ToastContainer,null,a.default.createElement(O.Toast,{key:rt,text:U("bridgeBlockExplorerLinkCopied"),onClose:()=>nt(!1),autoHideTime:2500,startAdornment:a.default.createElement(m.AvatarFavicon,{name:at.symbol,size:m.AvatarFaviconSize.Sm,src:at.image})}))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page.tsx"}],[6862,{"../../../components/component-library":6097,"../../../ducks/bridge/actions":6620,"../../../ducks/bridge/selectors":6622,"../../../ducks/locale/locale":6631,"../../../ducks/metamask/metamask":6632,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"../../../hooks/useMultichainSelector":6787,"../../../selectors/multichain":7548,"../layout":6849,"../utils/quote":6875,"@metamask/bridge-controller":1229,"@metamask/snaps-sdk/jsx":2647,"bignumber.js":3648,lodash:4534,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeQuotesModal=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("@metamask/snaps-sdk/jsx"),s=e("react-redux"),i=e("lodash"),l=e("@metamask/bridge-controller"),c=e("bignumber.js"),u=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system"),m=e("../utils/quote"),f=e("../../../hooks/useI18nContext"),p=e("../../../ducks/bridge/actions"),g=e("../../../ducks/bridge/selectors"),h=e("../layout"),y=e("../../../ducks/metamask/metamask"),v=e("../../../ducks/locale/locale"),b=e("../../../selectors/multichain"),k=e("../../../hooks/useMultichainSelector");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(null,arguments)}n.BridgeQuotesModal=({onClose:e,...t})=>{const n=(0,f.useI18nContext)(),a=(0,s.useDispatch)(),T=(0,s.useSelector)(g.getFromToken),C=(0,s.useSelector)(g.getToToken),E=(0,s.useSelector)(g.getFromChain),{insufficientBal:w}=(0,s.useSelector)(g.getQuoteRequest),_=(0,s.useSelector)(g.getIsStxEnabled),{sortedQuotes:I,activeQuote:S,recommendedQuote:M}=(0,s.useSelector)(g.getBridgeQuotes),A=(0,s.useSelector)(g.getBridgeSortOrder),P=(0,s.useSelector)(y.getCurrentCurrency),D=(0,k.useMultichainSelector)(b.getMultichainNativeCurrency),O=(0,s.useSelector)(v.getIntlLocale);return o.default.createElement(u.Modal,x({className:"quotes-modal",onClose:e},t),o.default.createElement(u.ModalOverlay,null),o.default.createElement(u.ModalContent,{modalDialogProps:{padding:0}},o.default.createElement(u.ModalHeader,{onBack:e},o.default.createElement(u.Text,{variant:d.TextVariant.headingSm,textAlign:d.TextAlign.Center},n("swapSelectAQuote"))),o.default.createElement(h.Row,{paddingTop:3,paddingBottom:1,paddingInline:4},[[l.SortOrder.COST_ASC,n("bridgeNetCost"),r.IconName.Arrow2Up],[l.SortOrder.ETA_ASC,n("time"),r.IconName.Arrow2Down]].map(([e,t,n])=>o.default.createElement(u.ButtonLink,{key:t,onClick:()=>{var t,n,o;a((0,p.setSortOrder)(e)),E&&M&&a((0,p.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.AllQuotesSorted,{can_submit:!w,sort_order:A,price_impact:Number((null===(t=M.quote)||void 0===t||null===(t=t.priceData)||void 0===t?void 0:t.priceImpact)??"0"),gas_included:Boolean(null==M||null===(n=M.quote)||void 0===n?void 0:n.gasIncluded),gas_included_7702:Boolean(null==M||null===(o=M.quote)||void 0===o?void 0:o.gasIncluded7702),token_symbol_source:(null==T?void 0:T.symbol)??(0,l.getNativeAssetForChainId)(E.chainId).symbol,token_symbol_destination:(null==C?void 0:C.symbol)??null,stx_enabled:_,best_quote_provider:(0,l.formatProviderLabel)(M.quote)}))},startIconName:A===e&&A===l.SortOrder.ETA_ASC?n:undefined,startIconProps:{size:u.IconSize.Xs},endIconName:A===e&&A===l.SortOrder.COST_ASC?n:undefined,endIconProps:{size:u.IconSize.Xs},color:A===e?d.TextColor.primaryDefault:d.TextColor.textAlternative},o.default.createElement(u.Text,{variant:A===e?d.TextVariant.bodySmMedium:d.TextVariant.bodySm,color:A===e?d.TextColor.primaryDefault:d.TextColor.textAlternative},t)))),o.default.createElement(h.Column,{style:{overflow:"scroll"}},I.map((t,r)=>{const{totalNetworkFee:s,estimatedProcessingTimeInSeconds:f,toTokenAmount:g,cost:y,sentAmount:v,quote:{destAsset:b,bridges:k,requestId:x,gasIncluded:T,gasIncluded7702:C}}=t,E=C||T,_=x===(null==S?void 0:S.quote.requestId),I=x===(null==M?void 0:M.quote.requestId);return o.default.createElement(h.Row,{alignItems:d.AlignItems.flexStart,key:r,backgroundColor:_?d.BackgroundColor.primaryMuted:undefined,onClick:()=>{var n,o,r,s;a((0,p.setSelectedQuote)(t)),a((0,p.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.QuoteSelected,{can_submit:!w,is_best_quote:I,best_quote_provider:(0,l.formatProviderLabel)(null==t?void 0:t.quote),usd_quoted_gas:Number((null===(n=t.gasFee)||void 0===n||null===(n=n.effective)||void 0===n?void 0:n.usd)??0),quoted_time_minutes:t.estimatedProcessingTimeInSeconds/60,usd_quoted_return:Number(t.toTokenAmount.usd),provider:(0,l.formatProviderLabel)(t.quote),price_impact:Number((null===(o=t.quote)||void 0===o||null===(o=o.priceData)||void 0===o?void 0:o.priceImpact)??"0"),gas_included:Boolean(null===(r=t.quote)||void 0===r?void 0:r.gasIncluded),gas_included_7702:Boolean(null===(s=t.quote)||void 0===s?void 0:s.gasIncluded7702)})),e()},paddingInline:4,paddingTop:3,paddingBottom:3,style:{position:"relative"}},_&&o.default.createElement(h.Column,{style:{position:"absolute",left:4,top:4,height:"calc(100% - 8px)",width:4,borderRadius:8},backgroundColor:d.BackgroundColor.primaryDefault}),o.default.createElement(h.Column,null,o.default.createElement(u.Text,{variant:d.TextVariant.bodyMd},E?(0,m.formatCurrencyAmount)(new c.BigNumber(v.valueInCurrency??0).minus(g.valueInCurrency??0).toString(),P,2):(0,m.formatCurrencyAmount)(y.valueInCurrency,P,2)),[E&&null!=v&&v.valueInCurrency?n("quotedTotalCost",[(0,m.formatCurrencyAmount)(v.valueInCurrency,P,2)]):undefined,!E&&(null!=s&&s.valueInCurrency&&null!=v&&v.valueInCurrency?n("quotedTotalCost",[(0,m.formatCurrencyAmount)(new c.BigNumber(s.valueInCurrency).plus(v.valueInCurrency).toString(),P,2)]):n("quotedTotalCost",[(0,m.formatTokenAmount)(O,s.amount,D)])),n("quotedReceiveAmount",[(0,m.formatCurrencyAmount)(g.valueInCurrency,P,2)??(0,m.formatTokenAmount)(O,g.amount,b.symbol)])].filter(Boolean).map(e=>o.default.createElement(u.Text,{key:e,variant:d.TextVariant.bodyXsMedium,color:d.TextColor.textAlternative},e))),o.default.createElement(h.Column,{alignItems:d.AlignItems.flexEnd},o.default.createElement(u.Text,{variant:d.TextVariant.bodyMd},n("bridgeTimingMinutes",[(0,l.formatEtaInMinutes)(f)])),o.default.createElement(u.Text,{variant:d.TextVariant.bodyXsMedium,color:d.TextColor.textAlternative},(0,i.startCase)(k[0]))))}))))}}}},{package:"$root$",file:"ui/pages/bridge/quotes/bridge-quotes-modal.tsx"}],[6863,{"../../../components/component-library":6097,"../../../ducks/bridge/actions":6620,"../../../ducks/bridge/selectors":6622,"../../../ducks/bridge/utils":6623,"../../../ducks/locale/locale":6631,"../../../ducks/metamask/metamask":6632,"../../../helpers/constants/design-system":6645,"../../../hooks/bridge/useCountdownTimer":6714,"../../../hooks/useI18nContext":6777,"../layout":6849,"../utils/price-impact":6874,"../utils/quote":6875,"./bridge-quotes-modal":6862,"@metamask/bridge-controller":1229,"bignumber.js":3648,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBridgeQuoteCard=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("bignumber.js"),s=e("@metamask/bridge-controller"),i=e("../../../ducks/bridge/utils"),l=e("../../../components/component-library"),c=e("../../../ducks/bridge/selectors"),u=e("../../../hooks/useI18nContext"),d=e("../utils/quote"),m=e("../../../ducks/metamask/metamask"),f=e("../../../helpers/constants/design-system"),p=e("../layout"),g=e("../../../ducks/bridge/actions"),h=e("../../../ducks/locale/locale"),y=e("../../../hooks/bridge/useCountdownTimer"),v=e("../utils/price-impact"),b=e("./bridge-quotes-modal");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}n.MultichainBridgeQuoteCard=({onOpenSlippageModal:e,onOpenRecipientModal:t,selectedDestinationAccount:n})=>{var k,x,T,C,E,w;const _=(0,u.useI18nContext)(),{activeQuote:I,isQuoteGoingToRefresh:S}=(0,o.useSelector)(c.getBridgeQuotes),M=(0,o.useSelector)(m.getCurrentCurrency),{insufficientBal:A}=(0,o.useSelector)(c.getQuoteRequest),P=(0,o.useSelector)(c.getFromChain),D=(0,o.useSelector)(h.getIntlLocale),O=(0,o.useSelector)(c.getIsStxEnabled),B=(0,o.useSelector)(c.getFromToken),F=(0,o.useSelector)(c.getToToken),N=(0,o.useSelector)(c.getSlippage),R=(0,o.useSelector)(c.getIsSolanaSwap),j=(0,o.useDispatch)(),$=(0,o.useSelector)(c.getIsToOrFromSolana),[W,L]=(0,a.useState)(!1),G=(0,o.useSelector)(c.getPriceImpactThresholds),q=null==I||null===(k=I.quote)||void 0===k||null===(k=k.priceData)||void 0===k?void 0:k.priceImpact,H=(null==I||null===(x=I.quote)||void 0===x?void 0:x.gasIncluded)??!1,V=((null==I||null===(T=I.quote)||void 0===T?void 0:T.gasIncluded7702)??!1)||H,U=(0,a.useMemo)(()=>G&&q!==undefined&&null!==q,[G,q]),z=a.default.useMemo(()=>{if(!U)return!1;const e=V?null==G?void 0:G.gasless:null==G?void 0:G.normal;return null!==e&&e!==undefined&&Number(q)>=Number(e)},[V,q,U,G]),Q=(0,y.useCountdownTimer)();return I?a.default.createElement(a.default.Fragment,null,a.default.createElement(b.BridgeQuotesModal,{isOpen:W,onClose:()=>L(!1)}),a.default.createElement(p.Column,{gap:2},a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("multichainQuoteCardRateLabel")),S&&a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:(K=Q,K<=3?f.TextColor.errorDefault:K<=5?f.TextColor.warningDefault:f.TextColor.textAlternative)},`(0:${Q<10?"0":""}${Q})`),a.default.createElement(p.Tooltip,{title:_("multichainQuoteCardRateLabel"),position:l.PopoverPosition.TopStart,offset:[-16,16]},_("multichainQuoteCardRateExplanation",[new r.BigNumber(I.quote.feeData.metabridge.amount).gt(0)?(0,i.bpsToPercentage)(I.quote.feeData.metabridge.quoteBpsFee)??s.BRIDGE_MM_FEE_RATE:"0"]))),a.default.createElement(p.Row,{gap:1},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},`1 ${I.quote.srcAsset.symbol} = ${(0,d.formatTokenAmount)(D,I.swapRate)} ${I.quote.destAsset.symbol}`),a.default.createElement(l.ButtonIcon,{iconName:l.IconName.ArrowRight,size:l.ButtonIconSize.Sm,color:f.IconColor.iconAlternative,onClick:()=>{var e,t,n;(null==P?void 0:P.chainId)&&I&&j((0,g.trackUnifiedSwapBridgeEvent)(s.UnifiedSwapBridgeEventName.AllQuotesOpened,{can_submit:!A,stx_enabled:O,token_symbol_source:(null==B?void 0:B.symbol)??(0,s.getNativeAssetForChainId)(P.chainId).symbol,token_symbol_destination:(null==F?void 0:F.symbol)??null,price_impact:Number((null===(e=I.quote)||void 0===e||null===(e=e.priceData)||void 0===e?void 0:e.priceImpact)??"0"),gas_included:Boolean(null===(t=I.quote)||void 0===t?void 0:t.gasIncluded),gas_included_7702:Boolean(null===(n=I.quote)||void 0===n?void 0:n.gasIncluded7702)})),L(!0)},ariaLabel:_("moreQuotes")}))),a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("networkFee")),a.default.createElement(p.Tooltip,{title:_("networkFeeExplanationTitle"),position:l.PopoverPosition.TopStart,offset:[-16,16]},_("networkFeeExplanation"))),I.quote.gasIncluded&&a.default.createElement(p.Row,{gap:1,"data-testid":"network-fees-included"},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,style:{textDecoration:"line-through"}},null!==(C=I.includedTxFees)&&void 0!==C&&C.valueInCurrency?(0,d.formatCurrencyAmount)(I.includedTxFees.valueInCurrency,M,2):(0,d.formatCurrencyAmount)(null===(E=I.totalNetworkFee)||void 0===E?void 0:E.valueInCurrency,M,2)),a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("swapGasFeesIncluded"))),!I.quote.gasIncluded&&a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,"data-testid":"network-fees"},(0,d.formatCurrencyAmount)(null===(w=I.totalNetworkFee)||void 0===w?void 0:w.valueInCurrency,M,2))),a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("slippage")),a.default.createElement(p.Tooltip,{title:_("slippage"),position:l.PopoverPosition.TopStart,offset:[-16,16]},_("slippageExplanation"))),a.default.createElement(p.Row,{gap:1},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},N===undefined&&R?_("slippageAuto"):`${N}%`),a.default.createElement(l.ButtonIcon,{iconName:l.IconName.Edit,size:l.ButtonIconSize.Sm,color:f.IconColor.iconAlternative,onClick:e,ariaLabel:_("slippageEditAriaLabel"),"data-testid":"slippage-edit-button"}))),a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("minimumReceivedLabel")),a.default.createElement(p.Tooltip,{style:{width:350},title:_("minimumReceivedExplanationTitle"),position:l.PopoverPosition.TopStart,offset:[-48,16]},_("minimumReceivedExplanation"))),a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,"data-testid":"minimum-received"},(0,d.formatCurrencyAmount)(I.minToTokenAmount.valueInCurrency,M,2))),U&&z&&a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("bridgePriceImpact")),a.default.createElement(p.Tooltip,{title:_(z?"bridgePriceImpactWarningTitle":"bridgePriceImpactTooltipTitle"),position:l.PopoverPosition.TopStart,offset:[-16,16]},_("bridgePriceImpactNormalWarning"))),a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:z?f.TextColor.errorDefault:f.TextColor.textAlternative},(0,v.formatPriceImpact)(q))),$&&n&&a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},_("recipient")),a.default.createElement(p.Row,{gap:1},a.default.createElement(l.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},n.displayName),a.default.createElement(l.ButtonIcon,{iconName:l.IconName.Edit,size:l.ButtonIconSize.Sm,color:f.IconColor.iconAlternative,onClick:t,ariaLabel:_("recipientEditAriaLabel"),"data-testid":"recipient-edit-button"}))))):null;var K}}}},{package:"$root$",file:"ui/pages/bridge/quotes/multichain-bridge-quote-card.tsx"}],[6864,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"./segment":6870,"@metamask/bridge-controller":1229,"@metamask/transaction-controller":2754,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeTxHistoryItem:e,transactionGroup:t}){const n=(0,l.useI18nContext)(),{initialTransaction:o}=t,r=m(o),u=f({bridgeTxHistoryItem:e,srcTxStatus:r}),p=d(r);return a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,gap:2},a.default.createElement(s.Text,{color:i.TextColor.textAlternative},n("bridgeTransactionProgress",[p])),a.default.createElement(s.Box,{display:i.Display.Flex,gap:2,width:i.BlockSize.Full},a.default.createElement(c.default,{type:r}),a.default.createElement(c.default,{type:u})))};var a=u(e("react")),o=e("@metamask/transaction-controller"),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),c=u(e("./segment"));function u(e){return e&&e.__esModule?e:{default:e}}const d=e=>{if(e===r.StatusTypes.PENDING)return 1;if(e===r.StatusTypes.COMPLETE)return 2;throw new Error("No more possible states for srcTxStatus")},m=e=>e.status===o.TransactionStatus.confirmed?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING,f=({bridgeTxHistoryItem:e,srcTxStatus:t})=>{var n;return t!==r.StatusTypes.COMPLETE?null:null!=e&&null!==(n=e.status.destChain)&&void 0!==n&&n.txHash&&e.status.status===r.StatusTypes.COMPLETE?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-activity-item-tx-segments.tsx"}],[6865,{"../../../../shared/constants/common":5418,"../../../components/component-library":6097,"../../../components/multichain/menu-items/view-explorer-menu-item":6333,"../../../contexts/metametrics":6608,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"@metamask/bridge-controller":1229,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({srcChainId:e,destChainId:t,srcBlockExplorerUrl:n,destBlockExplorerUrl:o}){const r=(0,a.useContext)(l.MetaMetricsContext),d=(0,u.useI18nContext)(),p=d("bridgeExplorerLinkViewOn",[m(e,n)]),g=o?d("bridgeExplorerLinkViewOn",[m(t,o)]):undefined;return a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:4},n&&a.default.createElement(s.ButtonSecondary,{endIconName:s.IconName.Export,onClick:()=>{n&&(0,i.openBlockExplorer)(n,f,r)}},p),o&&a.default.createElement(s.ButtonSecondary,{endIconName:s.IconName.Export,onClick:()=>{o&&(0,i.openBlockExplorer)(o,f,r)}},g))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/bridge-controller"),r=e("../../../../shared/constants/common"),s=e("../../../components/component-library"),i=e("../../../components/multichain/menu-items/view-explorer-menu-item"),l=e("../../../contexts/metametrics"),c=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const m=(e,t)=>{const n=e&&!(0,o.isNonEvmChainId)(e)?(0,o.formatChainIdToHex)(e):undefined,a=n?r.CHAINID_DEFAULT_BLOCK_EXPLORER_HUMAN_READABLE_URL_MAP[n]:undefined;return a||(t?t.split("/")[2]:undefined)},f="Activity Tab"}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-explorer-links.tsx"}],[6866,{"../../../../shared/constants/bridge":5417,"../../../../shared/modules/Numeric":5524,"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,"../../../hooks/useI18nContext":6777,"@metamask/bridge-controller":1229,"@metamask/transaction-controller":2754,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({step:e,time:t,stepStatus:n}){const o=(0,c.useI18nContext)();return a.createElement(s.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:2,className:"bridge-transaction-details__step-grid--desc"},t&&a.createElement(s.Text,{color:l.TextColor.textDefault},t),a.createElement(s.Text,{color:n===r.StatusTypes.PENDING||n===r.StatusTypes.COMPLETE?l.TextColor.textDefault:l.TextColor.textAlternative,fontWeight:n===r.StatusTypes.PENDING?l.FontWeight.Medium:l.FontWeight.Normal},e.action===r.ActionTypes.BRIDGE&&m(o,n,e),e.action===r.ActionTypes.SWAP&&f(o,n,e)))},n.getStepStatus=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/transaction-controller"),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../../shared/modules/Numeric"),l=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),u=e("../../../../shared/constants/bridge");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const m=(e,t,n)=>{var a;const o=n.destChainId?new i.Numeric(n.destChainId,10).toPrefixedHexString():undefined,s=o?u.NETWORK_TO_SHORT_NETWORK_NAME_MAP[o]:"",l=null===(a=n.destAsset)||void 0===a?void 0:a.symbol;return l?t===r.StatusTypes.COMPLETE?e("bridgeStepActionBridgeComplete",[l,s]):e("bridgeStepActionBridgePending",[l,s]):null},f=(e,t,n)=>{var a,o;const s=null===(a=n.srcAsset)||void 0===a?void 0:a.symbol,i=null===(o=n.destAsset)||void 0===o?void 0:o.symbol;return s&&i?t===r.StatusTypes.COMPLETE?e("bridgeStepActionSwapComplete",[s,i]):e("bridgeStepActionSwapPending",[s,i]):null};n.getStepStatus=({bridgeHistoryItem:e,step:t,srcChainTxMeta:n})=>e?t.action===r.ActionTypes.SWAP?((e,t,n)=>{const a=t.srcChainId===t.destChainId,s=t.srcChainId===e.quote.srcChainId;if(a&&s)return(null==n?void 0:n.status)===o.TransactionStatus.confirmed?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING;return(null==n?void 0:n.status)===o.TransactionStatus.confirmed&&e.status?e.status.status:null})(e,t,n):t.action===r.ActionTypes.BRIDGE?(e=>e.status?e.status.status:null)(e):r.StatusTypes.UNKNOWN:r.StatusTypes.UNKNOWN}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-description.tsx"}],[6867,{"../../../components/component-library":6097,"../../../helpers/utils/util":6703,"./bridge-step-description":6866,"./step-progress-bar-item":6871,"@metamask/bridge-controller":1229,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeHistoryItem:e,srcChainTxMeta:t}){const n=(null==e?void 0:e.quote.steps)||[],c=n.map(n=>(0,i.getStepStatus)({bridgeHistoryItem:e,step:n,srcChainTxMeta:t}));return a.default.createElement(r.Box,{className:"bridge-transaction-details__step-grid"},n.map((r,u)=>{const m=u>0?c[u-1]:null,f=c[u],p=u<c.length-1?c[u+1]:null,g=f===o.StatusTypes.COMPLETE&&(p===o.StatusTypes.PENDING||p===o.StatusTypes.COMPLETE),h=m===o.StatusTypes.PENDING&&f===o.StatusTypes.PENDING?null:f,y=(0,s.formatDate)(d(u,u===n.length-1,(null==e?void 0:e.startTime)||(null==t?void 0:t.time),(null==e?void 0:e.estimatedProcessingTimeInSeconds)||0),"hh:mm a");return a.default.createElement(l.default,{key:`progress-${r.action}-${r.srcChainId}-${r.destChainId}`,stepStatus:h,isLastItem:u===n.length-1,isEdgeComplete:g},a.default.createElement(i.default,{step:r,stepStatus:h,time:y}))}))};var a=u(e("react")),o=e("@metamask/bridge-controller"),r=e("../../../components/component-library"),s=e("../../../helpers/utils/util"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("./bridge-step-description")),l=u(e("./step-progress-bar-item"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}const d=(e,t,n,a)=>0===e?n:t&&n&&a?n+1e3*a:undefined}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-list.tsx"}],[6868,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,classnames:3793,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=(a=e("classnames"))&&a.__esModule?a:{default:a},s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const c=o.forwardRef(({size:e=s.IconSize.Md,color:t,className:n="",style:a},l)=>o.createElement(s.Box,{className:(0,r.default)(n,"mm-icon",`mm-icon--size-${e}`),ref:l,as:"span",display:i.Display.InlineBlock,style:{height:"12px",width:"12px",border:`1px solid var(--color-${t})`,borderRadius:"50%",backgroundColor:`var(--color-${i.BackgroundColor.backgroundDefault})`,zIndex:1,...a}}));n.default=c}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/hollow-circle.tsx"}],[6869,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,"./hollow-circle":6868,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({iconSize:e,color:t}){return a.default.createElement(o.Box,{style:{position:"relative"}},a.default.createElement(o.Box,{className:"bridge-transaction-details__icon-loading",backgroundColor:r.BackgroundColor.primaryMuted,display:r.Display.Flex,justifyContent:r.JustifyContent.center,alignItems:r.AlignItems.center,borderRadius:r.BorderRadius.full,style:{width:"2rem",height:"2rem"}}),a.default.createElement(s.default,{size:e,color:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderWidth:"2px"}}))};var a=i(e("react")),o=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=i(e("./hollow-circle"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/pulsing-circle.tsx"}],[6870,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,"@metamask/bridge-controller":1229,classnames:3793,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({type:e}){return a.default.createElement(s.Box,{width:i.BlockSize.Full,backgroundColor:i.BackgroundColor.backgroundAlternative,borderRadius:i.BorderRadius.pill},a.default.createElement(s.Box,{width:i.BlockSize.Full,backgroundColor:i.BackgroundColor.primaryDefault,borderRadius:i.BorderRadius.pill,className:(0,o.default)({"bridge-transaction-details__segment":!0,"bridge-transaction-details__segment--pending":e===r.StatusTypes.PENDING,"bridge-transaction-details__segment--complete":e===r.StatusTypes.COMPLETE})}))};var a=l(e("react")),o=l(e("classnames")),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/segment.tsx"}],[6871,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,"./hollow-circle":6868,"./pulsing-circle":6869,"@metamask/bridge-controller":1229,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({stepStatus:e,isLastItem:t,isEdgeComplete:n,children:c}){return a.default.createElement(a.default.Fragment,null,(null===e||e===o.StatusTypes.UNKNOWN)&&a.default.createElement(i.default,{size:u,color:s.IconColor.iconMuted}),e===o.StatusTypes.PENDING&&a.default.createElement(l.default,{iconSize:u,color:s.IconColor.primaryDefault}),e===o.StatusTypes.COMPLETE&&a.default.createElement(r.Icon,{name:r.IconName.FullCircle,color:s.IconColor.primaryDefault,size:u}),c,!t&&a.default.createElement(d,{color:n?s.IconColor.primaryDefault:s.IconColor.iconMuted}),!t&&a.default.createElement("div",null))};var a=c(e("react")),o=e("@metamask/bridge-controller"),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=c(e("./hollow-circle")),l=c(e("./pulsing-circle"));function c(e){return e&&e.__esModule?e:{default:e}}const u=r.IconSize.Xs,d=({color:e})=>a.default.createElement("div",{style:{height:"60px",marginTop:"-1rem",marginBottom:"-1rem",width:"1px",backgroundColor:`var(--color-${e})`,zIndex:.1}})}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/step-progress-bar-item.tsx"}],[6872,{"../../../components/component-library":6097,"../../../helpers/constants/design-system":6645,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({title:e,value:t}){return o.default.createElement(r.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.spaceBetween,"data-testid":"transaction-detail-row",width:s.BlockSize.Full},o.default.createElement(r.Text,{minWidth:s.BlockSize.Max,paddingRight:1,variant:s.TextVariant.bodyMd},e),t)};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system")}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-detail-row.tsx"}],[6873,{"../../../../shared/constants/bridge":5417,"../../../../shared/constants/metametrics":5430,"../../../../shared/modules/Numeric":5524,"../../../../shared/modules/conversion.utils":5529,"../../../components/app/confirm/info/row":5663,"../../../components/app/transaction-activity-log":5993,"../../../components/app/transaction-breakdown/transaction-breakdown-utils":6003,"../../../components/component-library":6097,"../../../components/multichain/pages/page":6427,"../../../contexts/metametrics":6608,"../../../ducks/bridge-status/selectors":6619,"../../../ducks/locale/locale":6631,"../../../helpers/constants/common":6643,"../../../helpers/constants/design-system":6645,"../../../helpers/utils/util":6703,"../../../hooks/bridge/useBridgeChainInfo":6709,"../../../hooks/useI18nContext":6777,"../../../selectors":7539,"../../../selectors/multichain":7548,"../utils/quote":6875,"../utils/tx-details":6878,"./bridge-explorer-links":6865,"./bridge-step-list":6867,"./transaction-detail-row":6872,"@metamask/bridge-controller":1229,"@metamask/transaction-controller":2754,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom"),s=e("@metamask/transaction-controller"),i=e("@metamask/bridge-controller"),l=e("../../../components/component-library"),c=e("../../../components/multichain/pages/page"),u=e("../../../ducks/bridge-status/selectors"),d=D(e("../../../hooks/bridge/useBridgeChainInfo")),m=e("../../../components/app/transaction-breakdown/transaction-breakdown-utils"),f=e("../../../../shared/modules/conversion.utils"),p=e("../../../helpers/constants/common"),g=e("../../../helpers/constants/design-system"),h=e("../../../helpers/utils/util"),y=e("../../../components/app/confirm/info/row"),v=e("../../../hooks/useI18nContext"),b=e("../../../selectors"),k=e("../../../../shared/constants/metametrics"),x=e("../../../contexts/metametrics"),T=e("../../../ducks/locale/locale"),C=D(e("../../../components/app/transaction-activity-log")),E=e("../../../../shared/constants/bridge"),w=e("../../../../shared/modules/Numeric"),_=e("../../../selectors/multichain"),I=e("../utils/quote"),S=e("../utils/tx-details"),M=D(e("./transaction-detail-row")),A=D(e("./bridge-explorer-links")),P=D(e("./bridge-step-list"));function D(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}n.default=()=>{var e,t,n;const D=(0,v.useI18nContext)(),O=(0,o.useSelector)(T.getIntlLocale),B=(0,a.useContext)(x.MetaMetricsContext),F=(0,o.useSelector)(e=>e),N=(0,r.useHistory)(),R=(0,r.useLocation)(),{srcTxMetaId:j}=(0,r.useParams)(),$=(0,o.useSelector)(b.selectedAddressTxListSelectorAllChain),W=(null===(e=R.state)||void 0===e?void 0:e.transactionGroup)||null,L=(null===(t=R.state)||void 0===t?void 0:t.isEarliestNonce)||null,G=$.find(e=>e.id===j),q=(0,o.useSelector)(e=>(0,u.selectBridgeHistoryItemForTxMetaId)(e,j)),H=$.find(e=>e.id===(null==q?void 0:q.approvalTxId)),{srcNetwork:V,destNetwork:U}=(0,d.default)({bridgeHistoryItem:q,srcTxMeta:G}),z=null==G?void 0:G.hash,Q=(0,S.getBlockExplorerUrl)(V,z),K=null==q||null===(n=q.status.destChain)||void 0===n?void 0:n.txHash,J=(0,S.getBlockExplorerUrl)(U,K),X=q?null==q?void 0:q.status.status:i.StatusTypes.PENDING,Z=(null==G?void 0:G.type)===s.TransactionType.bridge?X:null==G?void 0:G.status,Y=V?(0,_.getImageForChainId)(V.isEvm?(0,i.formatChainIdToHex)(V.chainId):V.chainId):undefined,ee=U?(0,_.getImageForChainId)(U.isEvm?(0,i.formatChainIdToHex)(U.chainId):U.chainId):undefined,te=E.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==V?void 0:V.chainId],ne=E.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==U?void 0:U.chainId],ae=G?(0,m.getTransactionBreakdownData)({state:F,transaction:G,isTokenApprove:!1}):undefined,oe=(0,S.getBridgeAmountSentFormatted)({bridgeHistoryItem:q,txMeta:G}),re=(0,o.useSelector)(e=>(0,u.selectReceivedSwapsTokenAmountFromTxMeta)(e,null==q?void 0:q.txMetaId,G,H)),se=(null==G?void 0:G.type)===s.TransactionType.swap&&re||(0,S.getBridgeAmountReceivedFormatted)({locale:O,bridgeHistoryItem:q,txMeta:G}),ie=(null==G?void 0:G.type)===s.TransactionType.bridge&&(0,S.getIsDelayed)(X,q),le=(0,b.getNativeTokenInfo)(F,(null==G?void 0:G.chainId)??""),ce=a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center},V&&a.default.createElement(l.AvatarNetwork,{size:l.AvatarNetworkSize.Xs,src:Y,name:null==V?void 0:V.name}),te),ue=a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center},U&&a.default.createElement(l.AvatarNetwork,{size:l.AvatarNetworkSize.Xs,src:ee,name:null==U?void 0:U.name}),ne);return a.default.createElement("div",{className:"bridge__container"},a.default.createElement(c.Header,{className:"bridge__header",startAccessory:a.default.createElement(l.ButtonIcon,{iconName:l.IconName.ArrowLeft,size:l.ButtonIconSize.Sm,ariaLabel:D("back"),onClick:()=>N.goBack()})},D((null==G?void 0:G.type)===s.TransactionType.bridge?"bridgeDetailsTitle":"swapDetailsTitle")),a.default.createElement(c.Content,{className:"bridge-transaction-details__content"},a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:4},ie&&a.default.createElement(l.BannerAlert,{title:D("bridgeTxDetailsDelayedTitle"),severity:l.BannerAlertSeverity.Warning},a.default.createElement(l.Text,{display:g.Display.Flex,alignItems:g.AlignItems.center},D("bridgeTxDetailsDelayedDescription")," ",a.default.createElement(l.ButtonLink,{externalLink:!0,href:p.SUPPORT_REQUEST_LINK,onClick:()=>{B({category:k.MetaMetricsEventCategory.Home,event:k.MetaMetricsEventName.SupportLinkClicked,properties:{url:p.SUPPORT_REQUEST_LINK,location:"Bridge Tx Details"}},{contextPropsIntoEventProperties:[k.MetaMetricsContextProp.PageTitle]})}},D("bridgeTxDetailsDelayedDescriptionSupport")),".")),Z!==i.StatusTypes.COMPLETE&&(q||G)&&a.default.createElement(P.default,{bridgeHistoryItem:q,srcChainTxMeta:G}),a.default.createElement(A.default,{srcChainId:null==V?void 0:V.chainId,destChainId:null==U?void 0:U.chainId,srcBlockExplorerUrl:Q,destBlockExplorerUrl:J}),a.default.createElement(y.ConfirmInfoRowDivider,null),a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:2},a.default.createElement(M.default,{title:D("bridgeTxDetailsStatus"),value:a.default.createElement(l.Text,{textTransform:g.TextTransform.Capitalize,color:Z?S.STATUS_TO_COLOR_MAP[Z]:undefined},null==Z?void 0:Z.toLowerCase())}),(null==G?void 0:G.type)===s.TransactionType.bridge&&a.default.createElement(M.default,{title:D(Z===i.StatusTypes.COMPLETE?"bridgeTxDetailsBridged":"bridgeTxDetailsBridging"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},ce,a.default.createElement(l.Icon,{name:l.IconName.Arrow2Right,size:l.IconSize.Sm}),ue)}),(null==G?void 0:G.type)===s.TransactionType.swap&&a.default.createElement(M.default,{title:D((null==G?void 0:G.status)===s.TransactionStatus.confirmed?"bridgeTxDetailsSwapped":"bridgeTxDetailsSwapping"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},q&&a.default.createElement(l.AvatarToken,{size:l.AvatarTokenSize.Xs,src:(null==q?void 0:q.quote.srcAsset.iconUrl)??undefined,name:null==q?void 0:q.quote.srcAsset.symbol}),null==q?void 0:q.quote.srcAsset.symbol,a.default.createElement(l.Icon,{name:l.IconName.Arrow2Right,size:l.IconSize.Sm}),q&&a.default.createElement(l.AvatarToken,{size:l.AvatarTokenSize.Xs,src:(null==q?void 0:q.quote.destAsset.iconUrl)??undefined,name:null==q?void 0:q.quote.destAsset.symbol}),null==q?void 0:q.quote.destAsset.symbol)}),a.default.createElement(M.default,{title:D("bridgeTxDetailsTimestamp"),value:D("bridgeTxDetailsTimestampValue",[(0,h.formatDate)(null==G?void 0:G.time,"MMM d, yyyy"),(0,h.formatDate)(null==G?void 0:G.time,"hh:mm a")])})),a.default.createElement(y.ConfirmInfoRowDivider,null),a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:2},a.default.createElement(M.default,{title:D("bridgeTxDetailsYouSent"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},D("bridgeTxDetailsTokenAmountOnChain",[oe??"",(null==q?void 0:q.quote.srcAsset.symbol)??""]),ce)}),se&&(null==q?void 0:q.quote.destAsset.symbol)&&a.default.createElement(M.default,{title:D("bridgeTxDetailsYouReceived"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},D("bridgeTxDetailsTokenAmountOnChain",[se,null==q?void 0:q.quote.destAsset.symbol]),ue)}),a.default.createElement(M.default,{title:D("bridgeTxDetailsTotalGasFee"),value:a.default.createElement(a.default.Fragment,null,(null==ae?void 0:ae.hexGasTotal)&&(null==le?void 0:le.decimals)&&(null==le?void 0:le.symbol)&&(0,I.formatTokenAmount)(O,new w.Numeric(ae.hexGasTotal,16).toBase(10).shiftedBy(le.decimals??0).toString(),null==le?void 0:le.symbol))})),a.default.createElement(y.ConfirmInfoRowDivider,null),a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:2},a.default.createElement(M.default,{title:D("bridgeTxDetailsNonce"),value:null!=G&&G.txParams.nonce?(0,f.hexToDecimal)(null==G?void 0:G.txParams.nonce):undefined}),W&&void 0!==L&&a.default.createElement(C.default,{transactionGroup:W,className:"transaction-list-item-details__transaction-activity-log",isEarliestNonce:L})))))}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-details.tsx"}],[6874,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatPriceImpact=function(e){if(e===undefined||null===e)return"0%";const t=Number(e);if(isNaN(t)||!t)return"0%";const n=100*t;if(n>0&&n<.01)return"<0.01%";if(n<0&&n>-.01)return"<-0.01%";if(Math.abs(n)<1)return`${n.toFixed(2)}%`;if(Math.abs(n)<10)return`${n.toFixed(1)}%`;return`${Math.round(n)}%`}}}},{package:"$root$",file:"ui/pages/bridge/utils/price-impact.ts"}],[6875,{"../../../helpers/utils/confirm-tx.util":6672,"../../../hooks/useCurrencyDisplay":6765,"../../confirmations/components/simulation-details/formatAmount":7089,"@metamask/bridge-controller":1229,"bignumber.js":3648},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isQuoteExpiredOrInvalid=n.formatTokenAmount=n.formatProviderLabel=n.formatCurrencyAmount=void 0;var a=e("bignumber.js"),o=e("@metamask/bridge-controller"),r=e("../../../helpers/utils/confirm-tx.util"),s=e("../../../hooks/useCurrencyDisplay"),i=e("../../confirmations/components/simulation-details/formatAmount");n.formatTokenAmount=(e,t,n="")=>[(0,i.formatAmount)(e,new a.BigNumber(t)),n].join(" ").trim();n.formatCurrencyAmount=(e,t,n=s.DEFAULT_PRECISION)=>{if(!e)return undefined;const o=new a.BigNumber(e);if(0===n){if(o.lt(.01))return"<$0.01";if(o.lt(1))return(0,r.formatCurrency)(o.toString(),t,2)}return(0,r.formatCurrency)(o.toString(),t,n)};n.formatProviderLabel=e=>`${null==e?void 0:e.bridgeId}_${null==e?void 0:e.bridges[0]}`;n.isQuoteExpiredOrInvalid=({activeQuote:e,toToken:t,toChain:n,fromChain:a,isQuoteExpired:r,insufficientBal:s})=>{if(r&&(!s||a&&(0,o.isSolanaChainId)(a.chainId)))return!0;if(e&&t){var i,l,c;const a=(null===(i=e.quote)||void 0===i||null===(i=i.destAsset)||void 0===i||null===(i=i.address)||void 0===i?void 0:i.toLowerCase())||"",r=(null===(l=t.address)||void 0===l?void 0:l.toLowerCase())||"",s=null!==(c=e.quote)&&void 0!==c&&c.destChainId?(0,o.formatChainIdToCaip)(e.quote.destChainId):"",u=null!=n&&n.chainId?(0,o.formatChainIdToCaip)(n.chainId):"";return!((a===r||(0,o.isNativeAddress)(a)&&(0,o.isNativeAddress)(r))&&s===u)}return!1}}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[6876,{"./stablecoins":6877,"@metamask/bridge-controller":1229},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SlippageValue=void 0,n.calculateSlippage=function(e){const{fromChain:t,toChain:n,fromToken:o,toToken:s,isSwap:l}=e;if(null==t||!t.chainId||null==n||!n.chainId)return r.BridgeDefault;if(!l||t.chainId!==n.chainId)return r.BridgeDefault;if((0,a.isSolanaChainId)(t.chainId))return undefined;if(i(t.chainId,o,s))return r.EvmStablecoin;return r.EvmDefault},n.getSlippageReason=function(e){const{fromChain:t,toChain:n,fromToken:o,toToken:r,isSwap:s}=e;if(null==t||!t.chainId||null==n||!n.chainId)return"Incomplete chain setup - using bridge default";if(!s||t.chainId!==n.chainId)return"Cross-chain transaction";if((0,a.isSolanaChainId)(t.chainId))return"Solana swap (AUTO mode)";if(i(t.chainId,o,r))return"EVM stablecoin pair";return"EVM token swap"};var a=e("@metamask/bridge-controller"),o=e("./stablecoins");let r=n.SlippageValue=function(e){return e[e.EvmStablecoin=.5]="EvmStablecoin",e[e.EvmDefault=2]="EvmDefault",e[e.BridgeDefault=.5]="BridgeDefault",e}({});function s(e,t){if(!t)return!1;const n=o.STABLECOINS_BY_CHAIN_ID[e];return!!n&&n.has(t.toLowerCase())}function i(e,t,n){return!(!t||!n)&&(s(e,t.address)&&s(e,n.address))}}}},{package:"$root$",file:"ui/pages/bridge/utils/slippage-service.ts"}],[6877,{"../../../../shared/constants/network":5433},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.STABLECOINS_BY_CHAIN_ID=void 0;var a=e("../../../../shared/constants/network");n.STABLECOINS_BY_CHAIN_ID={[a.CHAIN_IDS.MAINNET]:new Set(["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7"]),[a.CHAIN_IDS.LINEA_MAINNET]:new Set(["0x176211869cA2b568f2A7D4EE941E073a821EE1ff","0xA219439258ca9da29E9Cc4cE5596924745e12B93"]),[a.CHAIN_IDS.POLYGON]:new Set(["0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359","0x2791bca1f2de4661ed88a30c99a7a9449aa84174","0xc2132d05d31c914a87c6611c10748aeb04b58e8f"]),[a.CHAIN_IDS.ARBITRUM]:new Set(["0xaf88d065e77c8cC2239327C5EDb3A432268e5831","0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8","0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9"]),[a.CHAIN_IDS.BASE]:new Set(["0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"]),[a.CHAIN_IDS.OPTIMISM]:new Set(["0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85","0x7F5c764cBc14f9669B88837ca1490cCa17c31607","0x94b008aA00579c1307B0EF2c499aD98a8ce58e58"]),[a.CHAIN_IDS.BSC]:new Set(["0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d","0x55d398326f99059ff775485246999027b3197955"]),[a.CHAIN_IDS.AVALANCHE]:new Set(["0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e","0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0xc7198437980c041c805a1edcba50c1ce5db95118"]),[a.CHAIN_IDS.ZKSYNC_ERA]:new Set(["0x1d17CBcF0D6D143135aE902365D2E5e2A16538D4","0x3355df6D4c9C3035724Fd0e3914dE96A5a83aaf4","0x493257fD37EDB34451f62EDf8D2a0C418852bA4C"]),[a.CHAIN_IDS.SEI]:new Set(["0x3894085Ef7Ff0f0aeDf52E2A2704928d1Ec074F1"])}}}},{package:"$root$",file:"ui/pages/bridge/utils/stablecoins.ts"}],[6878,{"../../../../shared/constants/time":5449,"../../../helpers/constants/design-system":6645,"../../confirmations/components/simulation-details/formatAmount":7089,"@metamask/bridge-controller":1229,"@metamask/transaction-controller":2754,"bignumber.js":3648},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsDelayed=n.getBridgeAmountSentFormatted=n.getBridgeAmountReceivedFormatted=n.getBlockExplorerUrl=n.STATUS_TO_COLOR_MAP=void 0;var a=e("@metamask/transaction-controller"),o=e("bignumber.js"),r=e("@metamask/bridge-controller"),s=e("../../../../shared/constants/time"),i=e("../../../helpers/constants/design-system"),l=e("../../confirmations/components/simulation-details/formatAmount");const c=(e,t)=>e&&t?`${e}/tx/${t}`:undefined;n.getBlockExplorerUrl=(e,t)=>{var n;if(!e||!t)return undefined;if(!e.isEvm)return c(e.blockExplorerUrl,t);const a=e.defaultBlockExplorerUrlIndex;if(a===undefined)return undefined;const o=null===(n=e.blockExplorerUrls[a])||void 0===n?void 0:n.replace(/\/$/u,"");return c(o,t)};n.getBridgeAmountSentFormatted=({bridgeHistoryItem:e,txMeta:t})=>{var n;if(!t)return undefined;const a=null==e||null===(n=e.pricingData)||void 0===n?void 0:n.amountSent,o=null==e?void 0:e.quote.srcAsset.decimals;return a&&o?a:undefined};n.getBridgeAmountReceivedFormatted=({locale:e,bridgeHistoryItem:t,txMeta:n})=>{var s,i,c;if(!n)return undefined;if(!(n.type===a.TransactionType.bridge&&t?t.status.status===r.StatusTypes.COMPLETE:n.status===a.TransactionStatus.confirmed))return undefined;const u=(null===(s=n.swapMetaData)||void 0===s?void 0:s.token_to_amount)??(null==t||null===(i=t.status.destChain)||void 0===i?void 0:i.amount)??(null==t?void 0:t.quote.destTokenAmount),d=(null===(c=n.swapMetaData)||void 0===c?void 0:c.token_to_decimals)??n.destinationTokenDecimals??(null==t?void 0:t.quote.destAsset.decimals);return u&&d?(0,l.formatAmount)(e,new o.BigNumber(u).dividedBy(10**d)):undefined};n.getIsDelayed=(e,t)=>{const n=10*s.MINUTE;return Boolean(e===r.StatusTypes.PENDING&&(null==t?void 0:t.startTime)&&Date.now()>t.startTime+n+1e3*t.estimatedProcessingTimeInSeconds)};n.STATUS_TO_COLOR_MAP={[r.StatusTypes.PENDING]:i.TextColor.warningDefault,[r.StatusTypes.COMPLETE]:i.TextColor.successDefault,[r.StatusTypes.FAILED]:i.TextColor.errorDefault,[r.StatusTypes.UNKNOWN]:i.TextColor.errorDefault,[a.TransactionStatus.unapproved]:i.TextColor.warningDefault,[a.TransactionStatus.confirmed]:i.TextColor.successDefault,[a.TransactionStatus.rejected]:i.TextColor.errorDefault,[a.TransactionStatus.cancelled]:i.TextColor.errorDefault,[a.TransactionStatus.failed]:i.TextColor.errorDefault,[a.TransactionStatus.submitted]:i.TextColor.warningDefault,[a.TransactionStatus.approved]:i.TextColor.warningDefault,[a.TransactionStatus.signed]:i.TextColor.warningDefault,[a.TransactionStatus.dropped]:i.TextColor.errorDefault}}}},{package:"$root$",file:"ui/pages/bridge/utils/tx-details.ts"}],[6879,{"../../../shared/constants/metametrics":5430,"../../../shared/constants/network":5433,"../../../shared/constants/transaction":5451,"../../../shared/modules/selectors/networks":5547,"../../../shared/modules/string-utils":5551,"../../components/app/assets/nfts/nft-default-image/nft-default-image":5611,"../../components/app/network-account-balance-header/network-account-balance-header":5801,"../../components/component-library":6097,"../../components/ui/page-container":6552,"../../components/ui/site-origin/site-origin":6570,"../../contexts/i18n":6603,"../../contexts/metametrics":6608,"../../ducks/history/history":6629,"../../helpers/constants/common":6643,"../../helpers/constants/design-system":6645,"../../helpers/utils/util":6703,"../../hooks/useCurrencyDisplay":6765,"../../hooks/useOriginMetadata":6795,"../../hooks/useUserPreferencedCurrency":6818,"../../selectors":7539,"../../store/actions":7565,"../confirmations/components/confirm/nav":7008,"../routes/utils":7408,"@metamask/etherscan-link":1903,"@metamask/rpc-errors":2384,classnames:3793,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom"),s=e("@metamask/rpc-errors"),i=e("@metamask/etherscan-link"),l=D(e("classnames")),c=e("../../components/ui/page-container"),u=e("../../contexts/i18n"),d=e("../../contexts/metametrics"),m=e("../../ducks/history/history"),f=e("../../store/actions"),p=e("../../../shared/constants/metametrics"),g=e("../../../shared/constants/transaction"),h=e("../../components/component-library"),y=e("../../../shared/modules/selectors/networks"),v=e("../../selectors"),b=D(e("../../components/app/assets/nfts/nft-default-image/nft-default-image")),k=e("../../helpers/utils/util"),x=e("../../helpers/constants/design-system"),T=D(e("../../components/app/network-account-balance-header/network-account-balance-header")),C=e("../../../shared/constants/network"),E=D(e("../../components/ui/site-origin/site-origin")),w=e("../../helpers/constants/common"),_=e("../../hooks/useUserPreferencedCurrency"),I=e("../../hooks/useCurrencyDisplay"),S=e("../../hooks/useOriginMetadata"),M=e("../../../shared/modules/string-utils"),A=e("../confirmations/components/confirm/nav"),P=e("../routes/utils");function D(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}n.default=()=>{var e,t;const n=(0,a.useContext)(u.I18nContext),D=(0,o.useDispatch)(),O=(0,r.useHistory)(),B=(0,r.useLocation)(),F=null==B||!B.pathname||!(0,P.hideAppHeader)({location:B}),N=(0,l.default)("confirm-add-suggested-nft page-container",{"confirm-add-suggested-nft--has-app-header-multichain":F}),R=(0,o.useSelector)(m.getMostRecentOverviewPage),j=(0,o.useSelector)(v.getSuggestedNfts).sort((e,t)=>e.requestData.asset.tokenId-t.requestData.asset.tokenId),$=(0,o.useSelector)(v.getRpcPrefsForCurrentProvider),W=(0,o.useSelector)(y.getCurrentChainId),L=(0,o.useSelector)(v.getIpfsGateway),G=(0,a.useContext)(d.MetaMetricsContext),q=(0,o.useSelector)(v.getNetworkIdentifier),{address:H}=(0,o.useSelector)(v.getSelectedInternalAccount),V=(0,o.useSelector)(v.getSelectedAccountCachedBalance),U=(0,o.useSelector)(e=>(0,v.getAddressBookEntryOrAccountName)(e,H)),[z,Q]=(0,a.useState)([]),K=C.NETWORK_TO_NAME_MAP[W]||q,{currency:J,numberOfDecimals:X}=(0,_.useUserPreferencedCurrency)(w.PRIMARY,{ethNumberOfDecimals:4}),[Z]=(0,I.useCurrencyDisplay)(V,{numberOfDecimals:X,currency:J}),Y=(0,S.useOriginMetadata)(null===(e=j[0])||void 0===e?void 0:e.origin)||{},ee=null===(t=j[0])||void 0===t?void 0:t.id,te=(0,a.useCallback)(async()=>{await Promise.all(j.map(async({requestData:{asset:e},id:t})=>{await D((0,f.resolvePendingApproval)(t,null)),G({event:p.MetaMetricsEventName.NftAdded,category:p.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e.address,token_symbol:e.symbol,token_id:e.tokenId,token_standard:e.standard,asset_type:g.AssetType.NFT,source:p.MetaMetricsTokenEventSource.Dapp}})})),O.push(R)},[D,O,G,R,j]),ne=(0,a.useCallback)(async()=>{await Promise.all(j.map(async({id:e})=>D((0,f.rejectPendingApproval)(e,(0,s.serializeError)(s.providerErrors.userRejectedRequest()))))),O.push(R)},[D,O,R,j]);let ae,oe;if((0,a.useEffect)(()=>{j.length||O.push(R)},[O,R,j]),j.length)try{const e=new URL(j[0].origin);ae=e.host,oe=e.href}catch{ae="dapp"}return(0,a.useEffect)(()=>{(async()=>{const e=await Promise.all(j.map(async e=>{const t=await(0,k.getAssetImageURL)(e.requestData.asset.image,L);return{...e,requestData:{...e.requestData,asset:{...e.requestData.asset,assetImageUrl:t}}}}));Q(e)})()},[j]),a.default.createElement(h.Box,{className:N,height:x.BlockSize.Full,width:x.BlockSize.Full,display:x.Display.Flex,flexDirection:x.FlexDirection.Column},a.default.createElement(A.Nav,{confirmationId:ee}),a.default.createElement(h.Box,{paddingBottom:2,className:"confirm-add-suggested-nft__header"},a.default.createElement(T.default,{accountName:U,accountBalance:Z,accountAddress:H,networkName:K,chainId:W}),a.default.createElement(h.Box,{paddingTop:4,paddingRight:4,paddingLeft:4,display:x.Display.Flex,justifyContent:x.JustifyContent.center},a.default.createElement(E.default,{chip:!0,siteOrigin:Y.origin,title:Y.origin,iconSrc:Y.iconUrl,iconName:Y.hostname})),a.default.createElement(h.Text,{variant:x.TextVariant.headingLg,textAlign:x.TextAlign.Center,margin:2},n("addSuggestedNFTs")),a.default.createElement(h.Text,{variant:x.TextVariant.bodyMd,textAlign:x.TextAlign.Center},n("wantsToAddThisAsset",["dapp"===ae?a.default.createElement(h.Text,{key:ae,variant:x.TextVariant.bodyMd,fontWeight:"bold"},ae):a.default.createElement(h.ButtonLink,{key:ae,size:h.BUTTON_SIZES.INHERIT,href:oe,target:"_blank"},ae)]))),a.default.createElement(h.Box,{className:"page-container__content confirm-add-suggested-nft__content"},a.default.createElement(h.Box,{className:"confirm-add-suggested-nft__card",padding:2,borderRadius:x.BorderRadius.MD},a.default.createElement(h.Box,{className:(0,l.default)({"confirm-add-suggested-nft__nft-list":j.length>1})},j.map(({id:e,requestData:{asset:{address:t,tokenId:n,symbol:o,name:r}}})=>{const l=z.find(e=>e.requestData.asset.tokenId===n&&(0,M.isEqualCaseInsensitive)(e.requestData.asset.address,t)),c=l?l.requestData.asset.assetImageUrl:"",u=(0,i.getTokenTrackerLink)(t,W,null,null,{blockExplorerUrl:(null==$?void 0:$.blockExplorerUrl)??null});return 1===j.length?a.default.createElement(h.Box,{className:"confirm-add-suggested-nft__nft-single",key:`confirm-add-suggested-nft__nft-single-${e}`,borderRadius:x.BorderRadius.MD,margin:0,padding:0},c?a.default.createElement("img",{className:"confirm-add-suggested-nft__nft-single-image",src:c,alt:r||n}):a.default.createElement(b.default,{className:"confirm-add-suggested-nft__nft-single-image-default",tokenId:n,name:r||o||(0,k.shortenAddress)(t)}),a.default.createElement(h.Box,{padding:1,display:x.Display.Flex,flexDirection:x.FlexDirection.Row,justifyContent:x.JustifyContent.spaceBetween,alignItems:x.AlignItems.Center},a.default.createElement(h.Box,{display:x.Display.Flex,flexDirection:x.FlexDirection.Column,justifyContent:x.JustifyContent.spaceEvenly,flexWrap:x.FlexWrap.NoWrap,width:x.BlockSize.Full,className:"confirm-add-suggested-nft__nft-single-sub-details"},$.blockExplorerUrl?a.default.createElement(h.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:u,title:t,target:"_blank",size:h.BUTTON_SIZES.INHERIT},r||o||(0,k.shortenAddress)(t)):a.default.createElement(h.Text,{variant:x.TextVariant.bodyMd,className:"confirm-add-suggested-nft__nft-name",title:t},r||o||(0,k.shortenAddress)(t)),a.default.createElement(h.Text,{variant:x.TextVariant.bodyMd,color:x.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n)))):a.default.createElement(h.Box,{display:x.Display.Flex,flexDirection:x.FlexDirection.Row,flexWrap:x.FlexWrap.NoWrap,alignItems:x.AlignItems.Center,justifyContent:x.JustifyContent.spaceBetween,marginBottom:4,className:"confirm-add-suggested-nft__nft-list-item",key:`${t}-${n}`},a.default.createElement(h.Box,{display:x.Display.Flex,flexDirection:x.FlexDirection.Row,flexWrap:x.FlexWrap.NoWrap,alignItems:x.AlignItems.Center,justifyContent:x.JustifyContent.spaceBetween},c?a.default.createElement("img",{className:"confirm-add-suggested-nft__nft-image",src:c,alt:r||n}):a.default.createElement(b.default,{className:"confirm-add-suggested-nft__nft-image-default"}),a.default.createElement(h.Box,{display:x.Display.Flex,flexDirection:x.FlexDirection.Column,justifyContent:x.JustifyContent.spaceEvenly,flexWrap:x.FlexWrap.NoWrap,width:x.BlockSize.Full,className:"confirm-add-suggested-nft__nft-sub-details"},$.blockExplorerUrl?a.default.createElement(h.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:u,title:t,target:"_blank",size:h.BUTTON_SIZES.INHERIT},r||o||(0,k.shortenAddress)(t)):a.default.createElement(h.Text,{variant:x.TextVariant.bodySm,className:"confirm-add-suggested-nft__nft-name",title:t},r||o||(0,k.shortenAddress)(t)),a.default.createElement(h.Text,{variant:x.TextVariant.bodySm,color:x.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n))),a.default.createElement(h.ButtonIcon,{className:"confirm-add-suggested-nft__nft-remove","data-testid":`confirm-add-suggested-nft__nft-remove-${e}`,iconName:h.IconName.Close,size:h.ButtonIconSize.Sm,color:x.IconColor.iconMuted,onClick:t=>{t.preventDefault(),t.stopPropagation(),D((0,f.rejectPendingApproval)(e,(0,s.serializeError)(s.providerErrors.userRejectedRequest())))}}))})))),a.default.createElement(c.PageContainerFooter,{cancelText:n("cancel"),submitText:1===j.length?n("addNft"):n("addNfts"),onCancel:ne,onSubmit:te}))}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/confirm-add-suggested-nft.js"}],[6880,{"./confirm-add-suggested-nft":6879},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-add-suggested-nft"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/index.js"}],[6881,{"../../../shared/constants/metametrics":5430,"../../../shared/constants/transaction":5451,"../../../shared/modules/string-utils":5551,"../../components/component-library":6097,"../../components/ui/identicon":6527,"../../components/ui/page-container":6552,"../../components/ui/token-balance":6587,"../../contexts/i18n":6603,"../../contexts/metametrics":6608,"../../ducks/history/history":6629,"../../ducks/metamask/metamask":6632,"../../helpers/constants/design-system":6645,"../../helpers/constants/zendesk-url":6657,"../../selectors":7539,"../../store/actions":7565,"../confirmations/components/confirm/nav":7008,"../routes/utils":7408,"@metamask/rpc-errors":2384,classnames:3793,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom"),s=w(e("classnames")),i=e("@metamask/rpc-errors"),l=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),u=w(e("../../components/ui/identicon")),d=w(e("../../components/ui/token-balance")),m=e("../../components/ui/page-container"),f=e("../../contexts/i18n"),p=e("../../contexts/metametrics"),g=e("../../ducks/history/history"),h=e("../../ducks/metamask/metamask"),y=w(e("../../helpers/constants/zendesk-url")),v=e("../../../shared/modules/string-utils"),b=e("../../store/actions"),k=e("../../../shared/constants/metametrics"),x=e("../../../shared/constants/transaction"),T=e("../../selectors"),C=e("../confirmations/components/confirm/nav"),E=e("../routes/utils");function w(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}n.default=()=>{var e;const t=(0,a.useContext)(f.I18nContext),n=(0,o.useDispatch)(),w=(0,r.useHistory)(),_=(0,r.useLocation)(),I=null==_||!_.pathname||!(0,E.hideAppHeader)({location:_}),S=(0,s.default)("confirm-add-suggested-token page-container",{"confirm-add-suggested-token--has-app-header-multichain":I}),M=(0,o.useSelector)(g.getMostRecentOverviewPage),A=(0,o.useSelector)(T.getSuggestedTokens),P=(0,o.useSelector)(h.getTokens),D=(0,a.useContext)(p.MetaMetricsContext),O=null===(e=A[0])||void 0===e?void 0:e.id,B=(0,a.useMemo)(()=>function(e,t){const n=e.find(({requestData:{asset:e}})=>{const n=t.find(({address:t})=>(0,v.isEqualCaseInsensitive)(t,null==e?void 0:e.address));return Boolean(n)});return Boolean(n)}(A,P)&&a.default.createElement(l.BannerAlert,{severity:c.Severity.Warning,marginTop:4},t("knownTokenWarning",[a.default.createElement(l.Button,{variant:l.ButtonVariant.Link,key:"confirm-add-suggested-token-duplicate-warning",className:"confirm-add-suggested-token__link",externalLink:!0,size:l.ButtonLinkSize.Inherit,href:y.default.TOKEN_SAFETY_PRACTICES},t("learnScamRisk"))])),[A,P,t]),F=(0,a.useMemo)(()=>function(e,t){const n=e.find(({requestData:{asset:e}})=>{const n=t.find(t=>(0,v.isEqualCaseInsensitive)(t.symbol,null==e?void 0:e.symbol)&&!(0,v.isEqualCaseInsensitive)(t.address,null==e?void 0:e.address));return Boolean(n)});return Boolean(n)}(A,P)&&a.default.createElement(l.BannerAlert,{marginTop:4,severity:c.Severity.Warning,description:t("reusedTokenNameWarning")}),[A,P,t]),N=(0,a.useCallback)(async()=>{await Promise.all(A.map(async({requestData:{asset:e},id:t})=>{await n((0,b.resolvePendingApproval)(t,null)),D({event:k.MetaMetricsEventName.TokenAdded,category:k.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_symbol:e.symbol,token_contract_address:e.address,token_decimal_precision:e.decimals,unlisted:e.unlisted,source:k.MetaMetricsTokenEventSource.Dapp,token_standard:x.TokenStandard.ERC20,asset_type:x.AssetType.token}})})),w.push(M)},[n,w,D,M,A]),R=(0,a.useCallback)(async()=>{await Promise.all(A.map(({id:e})=>n((0,b.rejectPendingApproval)(e,(0,i.serializeError)(i.providerErrors.userRejectedRequest()))))),w.push(M)},[n,w,M,A]);return(0,a.useEffect)(()=>{A.length||w.push(M)},[]),a.default.createElement("div",{className:S},a.default.createElement(C.Nav,{confirmationId:O}),a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},t("addSuggestedTokens")),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,textAlign:c.TextAlign.Center},t("likeToImportTokens")),B,F),a.default.createElement("div",{className:"page-container__content"},a.default.createElement("div",{className:"confirm-add-suggested-token__header"},a.default.createElement("div",{className:"confirm-add-suggested-token__token"},t("token")),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},t("balance"))),a.default.createElement("div",{className:"confirm-add-suggested-token__token-list"},A.map(({requestData:{asset:e}})=>{return a.default.createElement("div",{className:"confirm-add-suggested-token__token-list-item",key:e.address},a.default.createElement("div",{className:"confirm-add-suggested-token__token confirm-add-suggested-token__data"},a.default.createElement(u.default,{className:"confirm-add-suggested-token__token-icon",diameter:48,address:e.address,image:e.image}),a.default.createElement("div",{className:"confirm-add-suggested-token__name"},(t=e.name,n=e.symbol,t===undefined?n:`${t} (${n})`))),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},a.default.createElement(d.default,{token:e})));var t,n}))),a.default.createElement(m.PageContainerFooter,{cancelText:t("cancel"),submitText:t("addToken"),onCancel:R,onSubmit:N,disabled:0===A.length}))}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-token/confirm-add-suggested-token.js"}],[6882,{"./confirm-add-suggested-token":6881},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-add-suggested-token"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-token/index.js"}],[6883,{"../../../shared/constants/common":5418,"../../../shared/constants/copy":5419,"../../../shared/constants/metametrics":5430,"../../../shared/constants/time":5449,"../../../shared/modules/Numeric":5524,"../../components/app/account-list-item":5560,"../../components/component-library":6097,"../../components/ui/page-container":6552,"../../components/ui/tooltip":6589,"../../contexts/metametrics":6608,"../../ducks/confirm-transaction/confirm-transaction.duck":6625,"../../ducks/history/history":6629,"../../ducks/metamask/metamask":6632,"../../helpers/constants/design-system":6645,"../../hooks/useI18nContext":6777,"../../hooks/useScrollRequired":6799,"../../selectors":7539,"../../store/actions":7565,"../confirmations/components/confirm/nav":7008,classnames:3793,"copy-to-clipboard":3829,lodash:4534,loglevel:4542,"prop-types":4777,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=A(e("prop-types")),r=A(e("copy-to-clipboard")),s=A(e("classnames")),i=A(e("loglevel")),l=e("react-redux"),c=e("react-router-dom"),u=e("lodash"),d=A(e("../../components/app/account-list-item")),m=A(e("../../components/ui/tooltip")),f=e("../../components/ui/page-container"),p=e("../../ducks/history/history"),g=e("../../ducks/metamask/metamask"),h=e("../../../shared/constants/metametrics"),y=e("../../../shared/constants/time"),v=e("../../../shared/modules/Numeric"),b=e("../../../shared/constants/common"),k=e("../../components/component-library"),x=e("../../../shared/constants/copy"),T=e("../../hooks/useI18nContext"),C=e("../../hooks/useScrollRequired"),E=e("../../contexts/metametrics"),w=e("../../helpers/constants/design-system"),_=e("../../ducks/confirm-transaction/confirm-transaction.duck"),I=e("../../store/actions"),S=e("../../selectors"),M=e("../confirmations/components/confirm/nav");function A(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}const D=({approvalId:e})=>{const t=(0,T.useI18nContext)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(M.Nav,{confirmationId:e}),a.default.createElement("div",{className:"request-decrypt-message__header"},a.default.createElement("div",{className:"request-decrypt-message__header-background"}),a.default.createElement("div",{className:"request-decrypt-message__header__text"},t("decryptRequest")),a.default.createElement("div",{className:"request-decrypt-message__header__tip-container"},a.default.createElement("div",{className:"request-decrypt-message__header__tip"}))))},O=({fromAccount:e,nativeCurrency:t})=>{const n=(0,T.useI18nContext)(),o=new v.Numeric(e.balance,16,b.EtherDenomination.WEI).toDenomination(b.EtherDenomination.ETH).round(6).toBase(10).toString();return a.default.createElement("div",{className:"request-decrypt-message__account-info"},a.default.createElement("div",{className:"request-decrypt-message__account"},a.default.createElement("div",{className:"request-decrypt-message__account-text"},`${n("account")}:`),a.default.createElement("div",{className:"request-decrypt-message__account-item"},a.default.createElement(d.default,{account:e}))),a.default.createElement("div",{className:"request-decrypt-message__balance"},a.default.createElement("div",{className:"request-decrypt-message__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-decrypt-message__balance-value"},`${o} ${t}`)))};O.propTypes={fromAccount:o.default.shape({balance:o.default.string.isRequired}).isRequired,nativeCurrency:o.default.string.isRequired};const B=({name:e,notice:t,targetSubjectMetadata:n})=>a.default.createElement("div",{className:"request-decrypt-message__visual"},a.default.createElement("section",null,null!=n&&n.iconUrl?a.default.createElement("img",{className:"request-decrypt-message__visual-identicon",src:n.iconUrl,alt:""}):a.default.createElement("i",{className:"request-decrypt-message__visual-identicon--default"},e.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-decrypt-message__notice"},t)));B.propTypes={name:o.default.string.isRequired,notice:o.default.string.isRequired,targetSubjectMetadata:o.default.shape({iconUrl:o.default.string})};const F=({isScrollable:e,isScrolledToBottom:t,hasDecrypted:n,hasError:o,scrollToBottom:r})=>{const s=(0,T.useI18nContext)();return n&&!o&&e&&!t?a.default.createElement(k.ButtonIcon,{ariaLabel:s("scrollDown"),backgroundColor:w.BackgroundColor.primaryDefault,borderRadius:w.BorderRadius.full,className:"scroll-to-bottom__button",color:w.IconColor.primaryInverse,"data-testid":"scroll-to-bottom",display:w.Display.Flex,iconName:k.IconName.Arrow2Down,onClick:r,size:k.ButtonIconSize.Md}):null};F.propTypes={isScrollable:o.default.bool.isRequired,isScrolledToBottom:o.default.bool.isRequired,hasDecrypted:o.default.bool.isRequired,hasError:o.default.bool.isRequired,scrollToBottom:o.default.func.isRequired};const N=(0,a.forwardRef)(({isScrollable:e,isScrolledToBottom:t,onScroll:n,rawMessage:o,scrollToBottom:i,setRawMessage:c,messageData:u},d)=>{const f=(0,l.useDispatch)(),p=(0,a.useContext)(E.MetaMetricsContext),g=(0,T.useI18nContext)(),[v,b]=(0,a.useState)(!1),[C,_]=(0,a.useState)(!1),[S,M]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[D,O]=(0,a.useState)("");return a.default.createElement("div",{className:"request-decrypt-message__message-container"},a.default.createElement("div",{className:"request-decrypt-message__message"},a.default.createElement("div",{className:"request-decrypt-message__message-text",ref:d,onScroll:n},S||A?o:u.msgParams.data,A?D:""),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-cover",{"request-decrypt-message__message-lock--pressed":S||A})}),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-lock",{"request-decrypt-message__message-lock--pressed":S||A}),"data-testid":"message-lock",onClick:async e=>{e.stopPropagation(e);const t=u.msgParams;t.metamaskId=u.id;const n=await f((0,I.decryptMsgInline)(t));n.error?(P(!0),O(g("decryptInlineError",[n.error]))):(M(!0),c(n.rawSig))}},a.default.createElement("div",{className:"request-decrypt-message__message-lock__container"},a.default.createElement("i",{className:"fa fa-lock fa-lg request-decrypt-message__message-lock__container__icon"}),a.default.createElement("div",{className:"request-decrypt-message__message-lock__container__text"},g("decryptMetamask"))))),a.default.createElement(F,{isScrollable:e,hasError:A,hasDecrypted:S,isScrolledToBottom:t,scrollToBottom:i}),S?a.default.createElement("div",{className:(0,s.default)({"request-decrypt-message__message-copy":!0,"request-decrypt-message__message-copy--pressed":v}),onClick:()=>{(0,r.default)(o,x.COPY_OPTIONS),p({category:h.MetaMetricsEventCategory.Messages,event:"Copy",properties:{action:"Decrypt Message Copy",legacy_event:!0}}),_(!0),setTimeout(()=>_(!1),3*y.SECOND)},onMouseDown:()=>b(!0),onMouseUp:()=>b(!1),"data-testid":"message-copy"},a.default.createElement(m.default,{position:"bottom",title:g(C?"copiedExclamation":"copyToClipboard"),wrapperClassName:"request-decrypt-message__message-copy-tooltip",style:{display:"flex",alignItems:"center"}},a.default.createElement("div",{className:"request-decrypt-message__message-copy-text"},g("decryptCopy")),a.default.createElement(k.Icon,{name:C?k.IconName.CopySuccess:k.IconName.Copy,color:w.IconColor.primaryDefault}))):a.default.createElement("div",null))});N.displayName="MessageBody",N.propTypes={isScrollable:o.default.bool.isRequired,isScrolledToBottom:o.default.bool.isRequired,onScroll:o.default.func.isRequired,rawMessage:o.default.string.isRequired,scrollToBottom:o.default.func.isRequired,setRawMessage:o.default.func.isRequired,messageData:o.default.shape({msgParams:o.default.shape({data:o.default.string.isRequired,from:o.default.string.isRequired,origin:o.default.string.isRequired}).isRequired,id:o.default.string.isRequired}).isRequired};const R=({hasScrolledToBottom:e,isScrollable:t,mostRecentOverviewPage:n,messageData:o})=>{const r=(0,l.useDispatch)(),s=(0,c.useHistory)(),i=(0,T.useI18nContext)(),u=(0,a.useContext)(E.MetaMetricsContext);return a.default.createElement(f.PageContainerFooter,{cancelText:i("cancel"),submitText:i("decrypt"),disabled:t&&!e,onCancel:async e=>{e.stopPropagation(e),await r((0,I.cancelDecryptMsg)(o)),u({category:h.MetaMetricsEventCategory.Messages,event:"Cancel",properties:{action:"Decrypt Message Request",legacy_event:!0}}),r((0,_.clearConfirmTransaction)()),s.push(n)},onSubmit:async e=>{e.stopPropagation(e);const t=o.msgParams;t.metamaskId=o.id,await r((0,I.decryptMsg)(t)),u({category:h.MetaMetricsEventCategory.Messages,event:"Confirm",properties:{action:"Decrypt Message Request",legacy_event:!0}}),r((0,_.clearConfirmTransaction)()),s.push(n)}})};R.propTypes={hasScrolledToBottom:o.default.bool.isRequired,isScrollable:o.default.bool.isRequired,mostRecentOverviewPage:o.default.string.isRequired,messageData:o.default.shape({msgParams:o.default.shape({data:o.default.string.isRequired,from:o.default.string.isRequired,origin:o.default.string.isRequired}).isRequired,id:o.default.string.isRequired}).isRequired};n.default=()=>{const e=(0,T.useI18nContext)(),[t,n]=(0,a.useState)(""),o=(0,l.useSelector)(p.getMostRecentOverviewPage),r=(0,l.useSelector)(g.getNativeCurrency),{id:s}=(0,c.useParams)(),d=(0,l.useSelector)(S.unconfirmedTransactionsListSelector),m=(0,u.cloneDeep)(d.find(e=>e.id===s)),f=(0,l.useSelector)(e=>{var t;return(0,S.getTargetAccountWithSendEtherInfo)(e,null==m||null===(t=m.msgParams)||void 0===t?void 0:t.from)}),h=(0,l.useSelector)(e=>e.metamask.subjectMetadata||{}),{hasScrolledToBottom:y,isScrollable:v,isScrolledToBottom:b,onScroll:k,scrollToBottom:x,ref:E}=(0,C.useScrollRequired)([t],{offsetPxFromBottom:0});if(!m)return i.default.warn("ConfirmDecryptMessage Page: Missing messageData prop."),null;const w=h[m.msgParams.origin],_=(null==w?void 0:w.name)||m.msgParams.origin,I=e("decryptMessageNotice",[m.msgParams.origin]);return a.default.createElement("div",{className:"request-decrypt-message__container"},a.default.createElement(D,{approvalId:s}),a.default.createElement("div",{className:"request-decrypt-message__body"},a.default.createElement(O,{fromAccount:f,nativeCurrency:r}),a.default.createElement(B,{name:_,notice:I,targetSubjectMetadata:w}),a.default.createElement(N,{isScrollable:v,isScrolledToBottom:b,onScroll:k,rawMessage:t,ref:E,scrollToBottom:x,setRawMessage:n,messageData:m})),a.default.createElement(R,{hasScrolledToBottom:y,isScrollable:v,mostRecentOverviewPage:o,messageData:m}))}}}},{package:"$root$",file:"ui/pages/confirm-decrypt-message/confirm-decrypt-message.component.js"}],[6884,{"./confirm-decrypt-message.component":6883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-decrypt-message.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-decrypt-message/index.js"}],[6885,{"../../../shared/constants/common":5418,"../../../shared/constants/metametrics":5430,"../../../shared/modules/Numeric":5524,"../../components/app/account-list-item":5560,"../../components/app/preferred-avatar":5825,"../../components/ui/page-container":6552,"../../components/ui/site-origin":6569,"../confirmations/components/confirm/nav":7008,"@metamask/design-system-react":1655,loglevel:4542,"prop-types":4777,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=g(e("prop-types")),r=g(e("loglevel")),s=e("@metamask/design-system-react"),i=g(e("../../components/app/account-list-item")),l=e("../../components/app/preferred-avatar"),c=e("../../components/ui/page-container"),u=e("../../../shared/constants/metametrics"),d=g(e("../../components/ui/site-origin")),m=e("../../../shared/modules/Numeric"),f=e("../../../shared/constants/common"),p=e("../confirmations/components/confirm/nav");function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends a.Component{constructor(...e){super(...e),y(this,"renderHeader",()=>{var e;const t=null===(e=this.props.txData)||void 0===e?void 0:e.id;return a.default.createElement(a.default.Fragment,null,a.default.createElement(p.Nav,{confirmationId:t}),a.default.createElement("div",{className:"request-encryption-public-key__header"},a.default.createElement("div",{className:"request-encryption-public-key__header-background"}),a.default.createElement("div",{className:"request-encryption-public-key__header__text"},this.context.t("encryptionPublicKeyRequest")),a.default.createElement("div",{className:"request-encryption-public-key__header__tip-container"},a.default.createElement("div",{className:"request-encryption-public-key__header__tip"}))))}),y(this,"renderAccount",()=>{const{fromAccount:e}=this.props,{t:t}=this.context;return a.default.createElement("div",{className:"request-encryption-public-key__account"},a.default.createElement("div",{className:"request-encryption-public-key__account-text"},`${t("account")}:`),a.default.createElement("div",{className:"request-encryption-public-key__account-item"},a.default.createElement(i.default,{account:e})))}),y(this,"renderBalance",()=>{const{nativeCurrency:e,fromAccount:{balance:t}}=this.props,{t:n}=this.context,o=new m.Numeric(t,16,f.EtherDenomination.WEI).toDenomination(f.EtherDenomination.ETH).round(6).toBase(10).toString();return a.default.createElement("div",{className:"request-encryption-public-key__balance"},a.default.createElement("div",{className:"request-encryption-public-key__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-encryption-public-key__balance-value"},`${o} ${e}`))}),y(this,"renderRequestIcon",()=>{const{requesterAddress:e}=this.props;return a.default.createElement("div",{className:"request-encryption-public-key__request-icon"},a.default.createElement(l.PreferredAvatar,{size:s.AvatarAccountSize.Lg,address:e}))}),y(this,"renderAccountInfo",()=>a.default.createElement("div",{className:"request-encryption-public-key__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance())),y(this,"renderBody",()=>{const{subjectMetadata:e,txData:t}=this.props,{t:n}=this.context,o=e[t.origin],r=n("encryptionPublicKeyNotice",[a.default.createElement(d.default,{siteOrigin:t.origin,key:t.origin})]),s=(null==o?void 0:o.hostname)||t.origin;return a.default.createElement("div",{className:"request-encryption-public-key__body"},this.renderAccountInfo(),a.default.createElement("div",{className:"request-encryption-public-key__visual"},a.default.createElement("section",null,null!=o&&o.iconUrl?a.default.createElement("img",{className:"request-encryption-public-key__visual-identicon",src:o.iconUrl,alt:""}):a.default.createElement("i",{className:"request-encryption-public-key__visual-identicon--default"},s.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-encryption-public-key__notice"},r))))}),y(this,"renderFooter",()=>{const{cancelEncryptionPublicKey:e,clearConfirmTransaction:t,encryptionPublicKey:n,history:o,mostRecentOverviewPage:r,txData:s}=this.props,{t:i,trackEvent:l}=this.context;return a.default.createElement(c.PageContainerFooter,{cancelText:i("cancel"),submitText:i("provide"),onCancel:async n=>{await e(s,n),l({category:u.MetaMetricsEventCategory.Messages,event:"Cancel",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),o.push(r)},onSubmit:async e=>{await n(s,e),this.context.trackEvent({category:u.MetaMetricsEventCategory.Messages,event:"Confirm",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),o.push(r)}})}),y(this,"render",()=>this.props.txData?a.default.createElement("div",{className:"request-encryption-public-key__container"},this.renderHeader(),this.renderBody(),this.renderFooter()):(r.default.warn("ConfirmEncryptionPublicKey Page: Missing txData prop."),null))}}n.default=v,y(v,"contextTypes",{t:o.default.func.isRequired,trackEvent:o.default.func.isRequired}),y(v,"propTypes",{fromAccount:o.default.shape({address:o.default.string.isRequired,balance:o.default.string,name:o.default.string}).isRequired,clearConfirmTransaction:o.default.func.isRequired,cancelEncryptionPublicKey:o.default.func.isRequired,encryptionPublicKey:o.default.func.isRequired,history:o.default.object.isRequired,requesterAddress:o.default.string,txData:o.default.object,subjectMetadata:o.default.object,mostRecentOverviewPage:o.default.string.isRequired,nativeCurrency:o.default.string.isRequired})}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/confirm-encryption-public-key.component.js"}],[6886,{"../../ducks/confirm-transaction/confirm-transaction.duck":6625,"../../ducks/history/history":6629,"../../ducks/metamask/metamask":6632,"../../selectors":7539,"../../store/actions":7565,"./confirm-encryption-public-key.component":6885,"react-redux":4905,"react-router-dom":4929,redux:4980},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("react-redux"),r=e("redux"),s=e("react-router-dom"),i=e("../../store/actions"),l=e("../../selectors"),c=e("../../ducks/confirm-transaction/confirm-transaction.duck"),u=e("../../ducks/history/history"),d=e("../../ducks/metamask/metamask"),m=(a=e("./confirm-encryption-public-key.component"))&&a.__esModule?a:{default:a};n.default=(0,r.compose)(s.withRouter,(0,o.connect)(function(e,t){const{metamask:{subjectMetadata:n={}}}=e,a=(0,l.unconfirmedTransactionsListSelector)(e),{match:{params:{id:o}}}=t,r=a.find(e=>e.id===o);return{txData:r,subjectMetadata:n,fromAccount:(0,l.getTargetAccountWithSendEtherInfo)(e,null==r?void 0:r.msgParams),requester:null,requesterAddress:null,mostRecentOverviewPage:(0,u.getMostRecentOverviewPage)(e),nativeCurrency:(0,d.getNativeCurrency)(e)}},function(e){return{goHome:()=>e((0,i.goHome)()),clearConfirmTransaction:()=>e((0,c.clearConfirmTransaction)()),encryptionPublicKey:(t,n)=>{const a={data:t.msgParams,metamaskId:t.id};return n.stopPropagation(),e((0,i.encryptionPublicKeyMsg)(a))},cancelEncryptionPublicKey:(t,n)=>(n.stopPropagation(),e((0,i.cancelEncryptionPublicKeyMsg)(t)))}}))(m.default)}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/confirm-encryption-public-key.container.js"}],[6887,{"./confirm-encryption-public-key.container":6886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-encryption-public-key.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/index.js"}],[6888,{"../../../../../components/component-library":6097,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useFormatters":6773,"../../../hooks/useNftImageUrl":7233,"../../../types/send":7258,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Asset=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../components/component-library"),s=e("../../../../../helpers/constants/design-system"),i=e("../../../types/send"),l=e("../../../hooks/useNftImageUrl"),c=e("../../../../../hooks/useFormatters");const u=({asset:e,onClick:t,isSelected:n})=>{const a=e,{collection:c,name:u,tokenId:d,image:m,standard:f,balance:p}=a,g=(0,l.useNftImageUrl)(m);let h=null;return f===i.AssetStandard.ERC1155&&(h=u?`(${null==p?void 0:p.toString()}) ${u} - #${d}`:`(${null==p?void 0:p.toString()}) #${d}`),o.default.createElement(r.Box,{alignItems:s.AlignItems.center,backgroundColor:n?s.BackgroundColor.backgroundHover:s.BackgroundColor.transparent,className:"send-asset","data-testid":"nft-asset",display:s.Display.Flex,onClick:t,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4},o.default.createElement(r.Box,{marginRight:4,style:{minWidth:32}},o.default.createElement(r.BadgeWrapper,{badge:a.chainId?o.default.createElement(r.AvatarNetwork,{size:r.AvatarNetworkSize.Xs,name:a.networkName??"",src:a.networkImage}):null},m||null!=c&&c.imageUrl?o.default.createElement(r.Box,{as:"img",src:g||(null==c?void 0:c.imageUrl),alt:u,style:{width:32,height:32,borderRadius:8,objectFit:"cover"}}):null)),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,style:{flex:1,overflow:"hidden"}},o.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium,color:s.TextColor.textDefault,ellipsis:!0},null==c?void 0:c.name),o.default.createElement(r.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative,ellipsis:!0},f===i.AssetStandard.ERC721&&u,f===i.AssetStandard.ERC1155&&h)))},d=({asset:e,onClick:t,isSelected:n})=>{const a=e,{chainId:i,image:l,name:u,balance:d,symbol:m="",fiat:f}=a,{formatCurrencyWithMinThreshold:p,formatTokenQuantity:g}=(0,c.useFormatters)();return o.default.createElement(r.Box,{alignItems:s.AlignItems.center,backgroundColor:n?s.BackgroundColor.backgroundHover:s.BackgroundColor.transparent,className:"send-asset","data-testid":"token-asset",display:s.Display.Flex,onClick:t,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4},o.default.createElement(r.Box,{marginRight:4},o.default.createElement(r.BadgeWrapper,{badge:i?o.default.createElement(r.AvatarNetwork,{size:r.AvatarNetworkSize.Xs,name:a.networkName??"",src:a.networkImage}):null},o.default.createElement(r.AvatarToken,{size:r.AvatarTokenSize.Md,src:l,name:m,showHalo:!1}))),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,style:{flex:1,overflow:"hidden"}},o.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium,color:s.TextColor.textDefault},u),o.default.createElement(r.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative,ellipsis:!0},m)),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.flexEnd,marginLeft:2},o.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium},p((null==f?void 0:f.balance)??0,(null==f?void 0:f.currency)||"")),o.default.createElement(r.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative},g(Number(d??0),m))))};n.Asset=({asset:e,onClick:t,isSelected:n})=>i.NFT_STANDARDS.includes(e.standard)?o.default.createElement(u,{asset:e,onClick:t,isSelected:n}):o.default.createElement(d,{asset:e,onClick:t,isSelected:n})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/asset/asset.tsx"}],[6889,{"./asset":6888},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./asset");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/asset/index.ts"}],[6890,{"./recipient":6891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./recipient");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/recipient/index.ts"}],[6891,{"../../../../../components/app/preferred-avatar":5825,"../../../../../components/component-library":6097,"../../../../../helpers/constants/design-system":6645,"../../../../../helpers/utils/util":6703,"@metamask/design-system-react":1655,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Recipient=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("@metamask/design-system-react"),s=e("../../../../../components/app/preferred-avatar"),i=e("../../../../../components/component-library"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../helpers/utils/util");n.Recipient=({isAccount:e,isSelected:t,recipient:n,onClick:a})=>{const{address:u,seedIcon:d}=n,m=e?n.accountGroupName:n.contactName;return o.default.createElement(i.Box,{alignItems:l.AlignItems.center,backgroundColor:t?l.BackgroundColor.backgroundHover:l.BackgroundColor.transparent,className:"send-recipient",display:l.Display.Flex,flexDirection:l.FlexDirection.Row,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4,gap:4,onClick:()=>a(n)},o.default.createElement(s.PreferredAvatar,{address:d??u,size:r.AvatarAccountSize.Lg,"data-testid":"avatar"}),o.default.createElement(i.Box,null,o.default.createElement(i.Text,{variant:l.TextVariant.bodyMdMedium},m),o.default.createElement(i.Text,{variant:l.TextVariant.bodySmMedium,color:l.TextColor.textAlternative},(0,c.shortenAddress)(u))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/recipient/recipient.tsx"}],[6892,{"./send-hero":6893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./send-hero");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/send-hero/index.ts"}],[6893,{"../../../../../../shared/constants/network":5433,"../../../../../components/component-library":6097,"../../../../../helpers/constants/design-system":6645,"../../../hooks/useChainNetworkNameAndImage":7207,"../../../hooks/useNftImageUrl":7233,"../../../types/send":7258,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendHero=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../../shared/constants/network"),s=e("../../../../../components/component-library"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../types/send"),c=e("../../../hooks/useNftImageUrl"),u=e("../../../hooks/useChainNetworkNameAndImage");const d=({asset:e})=>{var t;const n=e,{collection:a,name:r,image:l}=n,u=(0,c.useNftImageUrl)(l);return o.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,marginTop:6,marginBottom:9},o.default.createElement(s.BadgeWrapper,{style:{alignSelf:"center"},badge:n.chainId?o.default.createElement(s.AvatarNetwork,{size:s.AvatarNetworkSize.Sm,name:n.networkName??"",src:n.networkImage,style:{width:20,height:20,borderWidth:2}}):null},l||null!=a&&a.imageUrl?o.default.createElement(s.Box,{as:"img",src:u||(null==a?void 0:a.imageUrl),alt:r,style:{width:48,height:48,borderRadius:12,objectFit:"cover"},onError:e=>{var t;const n=e.target;n.style.display="none",null===(t=n.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null),o.default.createElement(s.Text,{variant:i.TextVariant.headingSm,color:i.TextColor.textDefault,marginTop:4},e.name||(null===(t=e.collection)||void 0===t?void 0:t.name)))},m=({asset:e})=>{const t=(0,u.useChainNetworkNameAndImageMap)(),{chainId:n,image:a,symbol:l,isNative:c,networkImage:d,networkName:m}=e??{},f=c?r.CHAIN_ID_TOKEN_IMAGE_MAP[n]??r.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[n]:undefined,p=t.get(n);return o.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,marginTop:6,marginBottom:9},o.default.createElement(s.BadgeWrapper,{style:{alignSelf:"center"},badge:n?o.default.createElement(s.AvatarNetwork,{size:s.AvatarNetworkSize.Sm,name:m||(null==p?void 0:p.networkName)||"",src:d||(null==p?void 0:p.networkImage),style:{width:20,height:20,borderWidth:2}}):null},o.default.createElement(s.AvatarToken,{size:s.AvatarTokenSize.Xl,src:a||f,name:l,showHalo:!1})),o.default.createElement(s.Text,{variant:i.TextVariant.headingSm,color:i.TextColor.textDefault,marginTop:4},l))};n.SendHero=({asset:e})=>null!=e&&e.standard&&l.NFT_STANDARDS.includes(e.standard)?o.default.createElement(d,{asset:e}):o.default.createElement(m,{asset:e})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/send-hero/send-hero.tsx"}],[6894,{"../../../../components/ui/form-field":6512,"../../../../contexts/i18n":6603,"../../../../helpers/constants/gas":6647,"prop-types":4777,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=l(e("prop-types")),r=e("../../../../contexts/i18n"),s=l(e("../../../../components/ui/form-field")),i=e("../../../../helpers/constants/gas");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u({onManualChange:e,gasLimit:t,setGasLimit:n,gasPrice:o,setGasPrice:l,gasErrors:c,minimumGasLimit:u}){const d=(0,a.useContext)(r.I18nContext);return a.default.createElement("div",{className:"advanced-gas-controls"},a.default.createElement(s.default,{titleText:d("gasLimit"),error:null!=c&&c.gasLimit?(0,i.getGasFormErrorText)(c.gasLimit,d,{minimumGasLimit:u}):null,onChange:t=>{null==e||e(),n(t)},tooltipText:d("editGasLimitTooltip"),value:t,allowDecimals:!1,numeric:!0}),a.default.createElement(a.default.Fragment,null,a.default.createElement(s.default,{titleText:d("advancedGasPriceTitle"),titleUnit:"(GWEI)",onChange:t=>{null==e||e(),l(t)},tooltipText:d("editGasPriceTooltip"),value:o,numeric:!0,allowDecimals:!0,error:null!=c&&c.gasPrice?(0,i.getGasFormErrorText)(c.gasPrice,d):null})))}u.propTypes={onManualChange:o.default.func,gasLimit:o.default.number,setGasLimit:o.default.func,gasPrice:o.default.string,setGasPrice:o.default.func,minimumGasLimit:o.default.string,gasErrors:o.default.object}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-controls/advanced-gas-controls.component.js"}],[6895,{"../../../../../../shared/constants/gas":5423,"../../../../../../shared/modules/Numeric":5524,"../../../../../components/component-library":6097,"../../../../../contexts/gasFee":6602,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useI18nContext":6777,"../../../../../selectors":7539,"../../../../../store/actions":7565,"../../../hooks/useTransactionEventFragment":7240,"../context":6911,lodash:4534,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("lodash"),s=e("../../../hooks/useTransactionEventFragment"),i=e("../../../../../../shared/constants/gas"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../selectors"),u=e("../../../../../store/actions"),d=e("../../../../../contexts/gasFee"),m=e("../context"),f=e("../../../../../hooks/useI18nContext"),p=e("../../../../../components/component-library"),g=e("../../../../../../shared/modules/Numeric");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,f.useI18nContext)(),t=(0,o.useDispatch)(),{gasErrors:n,maxBaseFee:h,maxPriorityFeePerGas:y}=(0,m.useAdvancedGasFeePopoverContext)(),v=new g.Numeric(h,10).toString(),b=new g.Numeric(y,10).toString(),k=(0,o.useSelector)(c.getAdvancedGasFeeValues),{updateTransactionEventFragment:x}=(0,s.useTransactionEventFragment)(),{editGasMode:T,transaction:C}=(0,d.useGasFeeContext)(),{chainId:E}=C,w=(0,o.useSelector)(e=>(0,c.selectNetworkIdentifierByChainId)(e,E)),[_,I]=(0,a.useState)(Boolean(k)&&k.maxBaseFee===v&&k.priorityFee===b);(0,a.useEffect)(()=>{I(Boolean(k)&&k.maxBaseFee===v&&k.priorityFee===b)},[k,v,b]);return T===i.EditGasModes.swaps?null:a.default.createElement(p.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Row,marginTop:4,marginLeft:2,marginRight:2,paddingTop:4,paddingBottom:4,className:"advanced-gas-fee-defaults"},a.default.createElement(p.Checkbox,{isChecked:_,onChange:()=>{_?(t((0,u.setAdvancedGasFee)({chainId:E,gasFeePreferences:undefined})),I(!1),x({properties:{advanced_gas_defaults_updated_maxbasefee:null,advanced_gas_defaults_updated_priorityfee:null}})):(t((0,u.setAdvancedGasFee)({chainId:E,gasFeePreferences:{maxBaseFee:v,priorityFee:b}})),x({properties:{advanced_gas_defaults_updated_maxbasefee:v,advanced_gas_defaults_updated_priorityfee:b}}))},isDisabled:n.maxFeePerGas||n.maxPriorityFeePerGas,label:e("advancedGasFeeDefaultOptIn",[(0,r.capitalize)(w)])}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-defaults/advanced-gas-fee-defaults.js"}],[6896,{"./advanced-gas-fee-defaults":6895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-defaults"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-defaults/index.js"}],[6897,{"../../../../../../shared/modules/conversion.utils":5529,"../../../../../components/component-library":6097,"../../../../../components/ui/form-field":6512,"../../../../../contexts/gasFee":6602,"../../../../../helpers/constants/design-system":6645,"../../../../../helpers/utils/util":6703,"../../../../../hooks/useI18nContext":6777,"../../../constants":7142,"../../../send-legacy/send.constants":7253,"../context":6911,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../../contexts/gasFee"),s=e("../../../../../helpers/utils/util"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../hooks/useI18nContext"),c=e("../../../send-legacy/send.constants"),u=(a=e("../../../../../components/ui/form-field"))&&a.__esModule?a:{default:a},d=e("../context"),m=e("../../../../../components/component-library"),f=e("../../../constants"),p=e("../../../../../../shared/modules/conversion.utils");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,l.useI18nContext)(),{setGasLimit:t,setErrorValue:n}=(0,d.useAdvancedGasFeePopoverContext)(),{gasLimit:a,minimumGasLimitDec:g,transaction:{chainId:h,originalGasEstimate:y}}=(0,r.useGasFeeContext)(),v=y!==undefined&&(0,p.hexToDecimal)(y),[b,k]=(0,o.useState)(v?Math.max(c.MAX_GAS_LIMIT_DEC,v):c.MAX_GAS_LIMIT_DEC),[x,T]=(0,o.useState)(!1),[C,E]=(0,o.useState)(a),[w,_]=(0,o.useState)(),I=e=>{E(e||0)};return(0,o.useEffect)(()=>{if(t(C),f.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(h))return;const e=((e,t,n)=>(0,s.bnLessThan)(e,t)||(0,s.bnGreaterThan)(e,n)?"editGasLimitOutOfBoundsV2":null)(C,g,b);_(e),T(!0===x?x:null!==e),n("gasLimit","editGasLimitOutOfBoundsV2"===e)},[h,C,g,t,n,b,x,e]),(0,o.useEffect)(()=>{v&&k(Math.max(c.MAX_GAS_LIMIT_DEC,v))},[g,v,k]),x?o.default.createElement(u.default,{dataTestId:"gas-limit-input",error:w?e(w,[g-1,b]):"",onChange:I,titleText:e("gasLimitV2"),value:C,allowDecimals:!1,numeric:!0}):o.default.createElement(m.Text,{tag:i.TextVariant.bodyMd,variant:i.TextVariant.bodySm,as:"h6",className:"advanced-gas-fee-gas-limit",marginTop:4,marginLeft:2,marginRight:2},o.default.createElement("strong",null,e("gasLimitV2")),o.default.createElement("span",null,C),o.default.createElement(m.Button,{"data-testid":"advanced-gas-fee-edit",className:"advanced-gas-fee-gas-limit__edit-link",onClick:()=>T(!0),variant:m.ButtonVariant.Link,size:m.ButtonSize.Inherit},e("edit")))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-gas-limit/advanced-gas-fee-gas-limit.js"}],[6898,{"./advanced-gas-fee-gas-limit":6897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-gas-limit"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-gas-limit/index.js"}],[6899,{"../../../../../components/ui/box":6478,"../../../../../components/ui/loading-heartbeat":6533,"../../../../../contexts/i18n":6603,"../../../../../helpers/utils/gas":6677,"../../../../../helpers/utils/util":6703,classnames:3793,"prop-types":4777,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=d(e("prop-types")),r=d(e("classnames")),s=e("../../../../../helpers/utils/util"),i=e("../../../../../helpers/utils/gas"),l=e("../../../../../contexts/i18n"),c=d(e("../../../../../components/ui/box")),u=d(e("../../../../../components/ui/loading-heartbeat"));function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const f=({latest:e,historical:t,trend:n})=>{const o=(0,a.useContext)(l.I18nContext),d=function(e,t){switch(e){case"up":return{className:"fa-arrow-up advanced-gas-fee-input-subtext__up",color:"var(--color-success-default)",title:t("upArrow")};case"down":return{className:"fa-arrow-down advanced-gas-fee-input-subtext__down",color:"var(--color-error-default)",title:t("downArrow")};case"level":return{className:"fa-arrow-right advanced-gas-fee-input-subtext__level",color:"var(--color-icon-alternative)",title:t("levelArrow")};default:return null}}(n,o);return a.default.createElement(c.default,{display:"flex",alignItems:"center",gap:4,className:"advanced-gas-fee-input-subtext"},(0,s.isNullish)(e)?null:a.default.createElement(c.default,{display:"flex",alignItems:"center","data-testid":"latest"},a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__label"},o("currentTitle")),a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},a.default.createElement(u.default,null),(0,i.formatGasFeeOrFeeRange)(e)),null===d?null:a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__icon"},a.default.createElement("i",{className:(0,r.default)("fa",d.className),style:{color:d.color},title:d.title,"data-testid":"fee-arrow"}))),(0,s.isNullish)(t)?null:a.default.createElement(c.default,null,a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__label","data-testid":"historical"},o("twelveHrTitle")),a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},a.default.createElement(u.default,null),(0,i.formatGasFeeOrFeeRange)(t))))};f.propTypes={latest:o.default.oneOfType([o.default.string,o.default.arrayOf(o.default.string)]),historical:o.default.oneOfType([o.default.string,o.default.arrayOf(o.default.string)]),trend:o.default.oneOf(["up","down","level"])};n.default=f}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-input-subtext/advanced-gas-fee-input-subtext.js"}],[6900,{"./advanced-gas-fee-input-subtext":6899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-input-subtext"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-input-subtext/index.js"}],[6901,{"../../../../../components/ui/box":6478,"./base-fee-input":6903,"./priority-fee-input":6905,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(e("react")),o=i(e("../../../../../components/ui/box")),r=i(e("./base-fee-input")),s=i(e("./priority-fee-input"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=()=>a.default.createElement(o.default,{className:"advanced-gas-fee-inputs"},a.default.createElement(r.default,null),a.default.createElement(s.default,null))}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/advanced-gas-fee-inputs.js"}],[6902,{"../../../../../../../shared/constants/gas":5423,"../../../../../../../shared/modules/Numeric":5524,"../../../../../../../shared/modules/conversion.utils":5529,"../../../../../../components/ui/box":6478,"../../../../../../components/ui/form-field":6512,"../../../../../../contexts/gasFee":6602,"../../../../../../helpers/constants/common":6643,"../../../../../../hooks/useCurrencyDisplay":6765,"../../../../../../hooks/useI18nContext":6777,"../../../../../../hooks/useUserPreferencedCurrency":6818,"../../../../../../selectors":7539,"../../../../constants":7142,"../../../../send-legacy/send.constants":7253,"../../advanced-gas-fee-input-subtext":6900,"../../context":6911,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../../send-legacy/send.constants"),s=e("../../../../../../../shared/constants/gas"),i=e("../../../../../../helpers/constants/common"),l=e("../../../../../../selectors"),c=e("../../../../../../contexts/gasFee"),u=e("../../../../../../hooks/useI18nContext"),d=e("../../../../../../hooks/useUserPreferencedCurrency"),m=e("../../../../../../hooks/useCurrencyDisplay"),f=k(e("../../../../../../components/ui/box")),p=k(e("../../../../../../components/ui/form-field")),g=e("../../context"),h=k(e("../../advanced-gas-fee-input-subtext")),y=e("../../../../../../../shared/modules/conversion.utils"),v=e("../../../../../../../shared/modules/Numeric"),b=e("../../../../constants");function k(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,u.useI18nContext)(),{gasFeeEstimates:t,estimateUsed:n,maxFeePerGas:k,editGasMode:x,transaction:{chainId:T}}=(0,c.useGasFeeContext)(),C=new v.Numeric(k,10).toString(),{gasLimit:E,maxPriorityFeePerGas:w,setErrorValue:_,setMaxFeePerGas:I,setMaxBaseFee:S}=(0,g.useAdvancedGasFeePopoverContext)(),{estimatedBaseFee:M,historicalBaseFeeRange:A,baseFeeTrend:P}=t??{},[D,O]=(0,a.useState)(),{currency:B,numberOfDecimals:F}=(0,d.useUserPreferencedCurrency)(i.PRIMARY),N=(0,o.useSelector)(l.getAdvancedGasFeeValues),R=n!==s.PriorityLevels.custom&&null!=N&&N.maxBaseFee&&x!==s.EditGasModes.swaps?N.maxBaseFee:C,[j,$]=(0,a.useState)(R>0?R:undefined);(0,a.useEffect)(()=>{j===undefined&&R>0&&$(R)},[j,R,$]);const[W]=(0,m.useCurrencyDisplay)((0,y.decGWEIToHexWEI)(j*E),{currency:B,numberOfDecimals:F}),L=(0,a.useCallback)(e=>{$(e)},[$]);return(0,a.useEffect)(()=>{I(j);const e=((e,t,n,a)=>{const o=new v.Numeric(e,10);return new v.Numeric(n,10).greaterThan(o)?"editGasMaxBaseFeeGWEIImbalance":null!=t&&t.low&&o.lessThan(t.low.suggestedMaxFeePerGas,10)&&b.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(a)?"editGasMaxBaseFeeLow":null!=t&&t.high&&o.greaterThan(t.high.suggestedMaxFeePerGas*r.HIGH_FEE_WARNING_MULTIPLIER,10)?"editGasMaxBaseFeeHigh":null})(j,t,w,T);O(e),_("maxFeePerGas","editGasMaxBaseFeeGWEIImbalance"===e),S(j)},[j,T,t,w,O,_,I,S]),a.default.createElement(f.default,{className:"base-fee-input",marginLeft:2,marginRight:2},a.default.createElement(p.default,{dataTestId:"base-fee-input",error:D?e(D):"",onChange:L,titleText:e("maxBaseFee"),titleUnit:`(${e("gwei")})`,tooltipText:e("advancedBaseGasFeeToolTip"),value:j,detailText:`≈ ${W}`,allowDecimals:!0,numeric:!0}),a.default.createElement(h.default,{latest:M,historical:A,trend:P}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/base-fee-input/base-fee-input.js"}],[6903,{"./base-fee-input":6902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./base-fee-input"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/base-fee-input/index.js"}],[6904,{"./advanced-gas-fee-inputs":6901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-inputs"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/index.js"}],[6905,{"./priority-fee-input":6906},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./priority-fee-input"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/priority-fee-input/index.js"}],[6906,{"../../../../../../../shared/constants/gas":5423,"../../../../../../../shared/modules/Numeric":5524,"../../../../../../../shared/modules/conversion.utils":5529,"../../../../../../components/ui/box":6478,"../../../../../../components/ui/form-field":6512,"../../../../../../contexts/gasFee":6602,"../../../../../../helpers/constants/common":6643,"../../../../../../hooks/useCurrencyDisplay":6765,"../../../../../../hooks/useI18nContext":6777,"../../../../../../hooks/useUserPreferencedCurrency":6818,"../../../../../../selectors":7539,"../../../../constants":7142,"../../../../send-legacy/send.constants":7253,"../../advanced-gas-fee-input-subtext":6900,"../../context":6911,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../../send-legacy/send.constants"),s=e("../../../../../../../shared/constants/gas"),i=e("../../../../../../helpers/constants/common"),l=e("../../../../../../selectors"),c=e("../../../../../../hooks/useCurrencyDisplay"),u=e("../../../../../../contexts/gasFee"),d=e("../../../../../../hooks/useI18nContext"),m=e("../../../../../../hooks/useUserPreferencedCurrency"),f=k(e("../../../../../../components/ui/form-field")),p=k(e("../../../../../../components/ui/box")),g=e("../../context"),h=k(e("../../advanced-gas-fee-input-subtext")),y=e("../../../../../../../shared/modules/conversion.utils"),v=e("../../../../../../../shared/modules/Numeric"),b=e("../../../../constants");function k(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,d.useI18nContext)(),t=(0,o.useSelector)(l.getAdvancedGasFeeValues),{gasLimit:n,setErrorValue:k,setMaxPriorityFeePerGas:x}=(0,g.useAdvancedGasFeePopoverContext)(),{editGasMode:T,estimateUsed:C,gasFeeEstimates:E,maxPriorityFeePerGas:w,transaction:{chainId:_}}=(0,u.useGasFeeContext)(),I=new v.Numeric(w,10).toString(),{latestPriorityFeeRange:S,historicalPriorityFeeRange:M,priorityFeeTrend:A}=E??{},[P,D]=(0,a.useState)(),O=C!==s.PriorityLevels.custom&&null!=t&&t.priorityFee&&T!==s.EditGasModes.swaps?t.priorityFee:I,[B,F]=(0,a.useState)(O>0?O:undefined);(0,a.useEffect)(()=>{B===undefined&&O>0&&F(O)},[B,O,F]);const{currency:N,numberOfDecimals:R}=(0,m.useUserPreferencedCurrency)(i.PRIMARY),[j]=(0,c.useCurrencyDisplay)((0,y.decGWEIToHexWEI)(B*n),{currency:N,numberOfDecimals:R});return(0,a.useEffect)(()=>{x(B);const e=((e,t,n)=>{const a=new v.Numeric(e,10);return a.lessThan(0,10)?"editGasMaxPriorityFeeBelowMinimumV2":null!=t&&t.low&&a.lessThan(t.low.suggestedMaxPriorityFeePerGas,10)&&b.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(n)?"editGasMaxPriorityFeeLowV2":null!=t&&t.high&&a.greaterThan(t.high.suggestedMaxPriorityFeePerGas*r.HIGH_FEE_WARNING_MULTIPLIER,10)?"editGasMaxPriorityFeeHighV2":null})(B,E,_);k("maxPriorityFeePerGas","editGasMaxPriorityFeeBelowMinimumV2"===e),D(e)},[_,E,B,k,x,D]),a.default.createElement(p.default,{marginTop:4,marginLeft:2,marginRight:2,className:"priority-fee-input"},a.default.createElement(f.default,{dataTestId:"priority-fee-input",error:P?e(P):"",onChange:e=>{F(e)},titleText:e("priorityFeeProperCase"),titleUnit:`(${e("gwei")})`,tooltipText:e("advancedPriorityFeeToolTip"),value:B,detailText:`≈ ${j}`,allowDecimals:!0,numeric:!0}),a.default.createElement(h.default,{latest:S,historical:M,trend:A}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/priority-fee-input/priority-fee-input.js"}],[6907,{"../../../../components/ui/box":6478,"../../../../components/ui/popover":6558,"../../../../contexts/transaction-modal":6612,"../../../../hooks/useI18nContext":6777,"./advanced-gas-fee-defaults":6896,"./advanced-gas-fee-gas-limit":6898,"./advanced-gas-fee-inputs":6904,"./advanced-gas-fee-save":6909,"./context":6911,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=f(e("react")),o=e("../../../../hooks/useI18nContext"),r=e("../../../../contexts/transaction-modal"),s=f(e("../../../../components/ui/box")),i=f(e("../../../../components/ui/popover")),l=e("./context"),c=f(e("./advanced-gas-fee-inputs")),u=f(e("./advanced-gas-fee-gas-limit")),d=f(e("./advanced-gas-fee-save")),m=f(e("./advanced-gas-fee-defaults"));function f(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const e=(0,o.useI18nContext)(),{closeAllModals:t,currentModal:n}=(0,r.useTransactionModalContext)();return"advancedGasFee"!==n?null:a.default.createElement(l.AdvancedGasFeePopoverContextProvider,null,a.default.createElement(i.default,{className:"advanced-gas-fee-popover",title:e("advancedGasFeeModalTitle"),onClose:t,footer:a.default.createElement(d.default,null)},a.default.createElement(s.default,{margin:4},a.default.createElement(c.default,null),a.default.createElement(m.default,null),a.default.createElement(u.default,null))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-popover.js"}],[6908,{"../../../../../../shared/constants/gas":5423,"../../../../../../shared/modules/conversion.utils":5529,"../../../../../components/component-library":6097,"../../../../../contexts/gasFee":6602,"../../../../../contexts/transaction-modal":6612,"../../../../../hooks/useI18nContext":6777,"../../../hooks/useTransactionEventFragment":7240,"../context":6911,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../../shared/constants/gas"),s=e("../../../../../../shared/modules/conversion.utils"),i=e("../../../../../contexts/transaction-modal"),l=e("../../../../../contexts/gasFee"),c=e("../../../hooks/useTransactionEventFragment"),u=e("../../../../../hooks/useI18nContext"),d=e("../../../../../components/component-library"),m=e("../context");n.default=()=>{const{closeModal:e}=(0,i.useTransactionModalContext)(),{updateTransactionEventFragment:t}=(0,c.useTransactionEventFragment)(),{updateTransaction:n}=(0,l.useGasFeeContext)(),a=(0,u.useI18nContext)(),{gasLimit:f,hasErrors:p,maxFeePerGas:g,maxPriorityFeePerGas:h}=(0,m.useAdvancedGasFeePopoverContext)();return o.default.createElement(d.Button,{variant:d.ButtonVariant.Primary,disabled:p,onClick:()=>{n({estimateUsed:r.PriorityLevels.custom,maxFeePerGas:(0,s.decGWEIToHexWEI)(g),maxPriorityFeePerGas:(0,s.decGWEIToHexWEI)(h),gasLimit:f}),t({properties:{gas_edit_type:"advanced"}}),e(["advancedGasFee","editGasFee"])},block:!0},a("save"))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-save/advanced-gas-fee-save.js"}],[6909,{"./advanced-gas-fee-save":6908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-save"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-save/index.js"}],[6910,{"prop-types":4777,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AdvancedGasFeePopoverContextProvider=n.AdvancedGasFeePopoverContext=void 0,n.useAdvancedGasFeePopoverContext=function(){return(0,o.useContext)(i)};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(a,r,i):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=(a=e("prop-types"))&&a.__esModule?a:{default:a};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const i=n.AdvancedGasFeePopoverContext=(0,o.createContext)({}),l=({children:e})=>{const[t,n]=(0,o.useState)(),[a,r]=(0,o.useState)(),[s,l]=(0,o.useState)(),[c,u]=(0,o.useState)({maxFeePerGas:!1,maxPriorityFeePerGas:!1,gasLimit:!1}),d=(0,o.useCallback)((e,t)=>{c[e]!==t&&u({...c,[e]:t})},[c,u]),[m,f]=(0,o.useState)();return o.default.createElement(i.Provider,{value:{gasLimit:t,hasErrors:c.maxFeePerGas||c.maxPriorityFeePerGas||c.gasLimit,gasErrors:c,maxFeePerGas:a,maxPriorityFeePerGas:s,setErrorValue:d,maxBaseFee:m,setGasLimit:n,setMaxPriorityFeePerGas:l,setMaxFeePerGas:r,setMaxBaseFee:f}},e)};n.AdvancedGasFeePopoverContextProvider=l,l.propTypes={children:r.default.node.isRequired}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/context/advancedGasFeePopover.js"}],[6911,{"./advancedGasFeePopover":6910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./advancedGasFeePopover");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/context/index.js"}],[6912,{"./advanced-gas-fee-popover":6907},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-popover"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/index.js"}],[6913,{"../../../../../../shared/constants/security-provider":5441,"../../../../../components/component-library":6097,"../../../../../components/ui/icon/preloader":6523,"../../../hooks/useCurrentSignatureSecurityAlertResponse":7217,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=l(e("react")),o=l(e("../../../../../components/ui/icon/preloader")),r=e("../../../../../../shared/constants/security-provider"),s=e("../../../../../components/component-library"),i=l(e("../../../hooks/useCurrentSignatureSecurityAlertResponse"));function l(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const e=(0,i.default)();return(null==e?void 0:e.result_type)!==r.BlockaidResultType.Loading?null:a.default.createElement(s.Box,{marginInline:"auto",marginTop:4},a.default.createElement(o.default,{size:18}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/blockaid-loading-indicator/blockaid-loading-indicator.tsx"}],[6914,{"./blockaid-loading-indicator":6913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BlockaidLoadingIndicator",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./blockaid-loading-indicator"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/blockaid-loading-indicator/index.ts"}],[6915,{"../../../../../components/app/alert-system/contexts/alertActionHandler":5567,"../../../../../components/app/alert-system/contexts/alertMetricsContext":5568,"../../../hooks/setConfirmationAlerts":7199,"../../../hooks/useConfirmationAlertActions":7210,"../../../hooks/useConfirmationAlertMetrics":7211,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=c(e("react")),o=e("../../../../../components/app/alert-system/contexts/alertActionHandler"),r=c(e("../../../hooks/useConfirmationAlertActions")),s=c(e("../../../hooks/setConfirmationAlerts")),i=e("../../../../../components/app/alert-system/contexts/alertMetricsContext"),l=e("../../../hooks/useConfirmationAlertMetrics");function c(e){return e&&e.__esModule?e:{default:e}}n.default=({children:e})=>{const{trackAlertActionClicked:t,trackAlertRender:n,trackInlineAlertClicked:c}=(0,l.useConfirmationAlertMetrics)(),u=(0,r.default)();return(0,s.default)(),a.default.createElement(i.AlertMetricsProvider,{metrics:{trackAlertActionClicked:t,trackAlertRender:n,trackInlineAlertClicked:c}},a.default.createElement(o.AlertActionHandlerProvider,{onProcessAction:u},e))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/confirm-alerts/confirm-alerts.tsx"}],[6916,{"./confirm-alerts":6915},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ConfirmAlerts",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-alerts"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/confirm-alerts/index.tsx"}],[6917,{"../../../../../../shared/constants/metametrics":5430,"../../../../../../shared/lib/confirmation.utils":5463,"../../../../../components/app/alert-system/confirm-alert-modal":5566,"../../../../../components/component-library":6097,"../../../../../components/multichain/pages/page":6427,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useAlerts":6758,"../../../../../hooks/useI18nContext":6777,"../../../../../selectors":7539,"../../../../../store/actions":7565,"../../../context/confirm":7144,"../../../hooks/gas/useIsGaslessLoading":7174,"../../../hooks/transactions/useTransactionConfirm":7202,"../../../hooks/useConfirmActions":7208,"../../../hooks/useOriginThrottling":7234,"../../../utils":7261,"../utils":7034,"./origin-throttle-modal":6919,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../../../../shared/constants/metametrics"),s=e("../../../../../../shared/lib/confirmation.utils"),i=e("../../../../../components/app/alert-system/confirm-alert-modal"),l=e("../../../../../components/component-library"),c=e("../../../../../components/multichain/pages/page"),u=e("../../../../../helpers/constants/design-system"),d=C(e("../../../../../hooks/useAlerts")),m=e("../../../../../hooks/useI18nContext"),f=e("../../../../../selectors"),p=e("../../../../../store/actions"),g=e("../../../context/confirm"),h=e("../../../hooks/gas/useIsGaslessLoading"),y=e("../../../hooks/transactions/useTransactionConfirm"),v=e("../../../hooks/useConfirmActions"),b=e("../../../hooks/useOriginThrottling"),k=e("../../../utils"),x=e("../utils"),T=C(e("./origin-throttle-modal"));function C(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function w(e,t,n){return!!t||!e&&n}const _=({alertOwnerId:e="",disabled:t,onSubmit:n,onCancel:o})=>{const r=(0,m.useI18nContext)(),[s,c]=(0,a.useState)(!1),{alerts:f,hasDangerAlerts:p,hasUnconfirmedDangerAlerts:g,hasUnconfirmedFieldDangerAlerts:h,unconfirmedFieldDangerAlerts:y}=(0,d.default)(e),v=f.some(e=>e.severity===u.Severity.Danger&&e.isBlocking),b=(0,a.useCallback)(()=>{c(!1)},[]),k=(0,a.useCallback)(()=>{c(!0)},[]);return a.default.createElement(a.default.Fragment,null,s&&a.default.createElement(i.ConfirmAlertModal,{ownerId:e,onClose:b,onCancel:o,onSubmit:n}),p?a.default.createElement(l.Button,{block:!0,danger:!0,"data-testid":"confirm-footer-button",disabled:w(g,v,t),onClick:k,size:l.ButtonSize.Lg,startIconName:h?l.IconName.SecuritySearch:l.IconName.Danger},function(e,t){return 1===e.length?t("reviewAlert"):e.length>1?t("reviewAlerts"):t("confirm")}(y,r)):a.default.createElement(l.Button,{block:!0,"data-testid":"confirm-footer-button",disabled:t,onClick:n,size:l.ButtonSize.Lg},r("confirm")))};n.default=()=>{const e=(0,o.useDispatch)(),t=(0,m.useI18nContext)(),{onTransactionConfirm:n}=(0,y.useTransactionConfirm)(),{currentConfirmation:i,isScrollToBottomCompleted:d}=(0,g.useConfirmContext)(),{isGaslessLoading:C}=(0,h.useIsGaslessLoading)(),{from:E}=(0,x.getConfirmationSender)(i),{shouldThrottleOrigin:w}=(0,b.useOriginThrottling)(),[I,S]=(0,a.useState)(!1),{onCancel:M,resetTransactionState:A}=(0,v.useConfirmActions)(),P=(0,o.useSelector)(e=>{if(E){return!!1&&(0,f.doesAddressRequireLedgerHidConnection)(e,E)}return!1}),D=(0,k.isSignatureTransactionType)(i),O=!d&&!D||P||C,B=(0,a.useCallback)(()=>{if(!i)return;(0,s.isCorrectDeveloperTransactionType)(null==i?void 0:i.type)?n():e((0,p.resolvePendingApproval)(i.id,undefined)),A()},[i,e,n,A]),F=(0,a.useCallback)(()=>{w?S(!0):M({location:r.MetaMetricsEventLocation.Confirmation})},[M,w]);return a.default.createElement(c.Footer,{className:"confirm-footer_page-footer",flexDirection:u.FlexDirection.Column},a.default.createElement(T.default,{isOpen:I,onConfirmationCancel:M}),a.default.createElement(l.Box,{display:u.Display.Flex,flexDirection:u.FlexDirection.Row,gap:4},a.default.createElement(l.Button,{block:!0,"data-testid":"confirm-footer-cancel-button",onClick:F,size:l.ButtonSize.Lg,variant:l.ButtonVariant.Secondary},t("cancel")),a.default.createElement(_,{alertOwnerId:null==i?void 0:i.id,onSubmit:()=>B(),disabled:O,onCancel:M})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/footer.tsx"}],[6918,{"./footer":6917},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Footer",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./footer"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/index.tsx"}],[6919,{"../../../../../../shared/constants/metametrics":5430,"../../../../../components/component-library":6097,"../../../../../components/ui/origin-pill/origin-pill":6551,"../../../../../contexts/i18n":6603,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useModalProps":6781,"../../../hooks/useOriginThrottling":7234,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({isOpen:e,onConfirmationCancel:t}){const{hideModal:n}=(0,r.useModalProps)(),[a,i]=(0,o.useState)(!1);return o.default.createElement(s.Modal,{isOpen:e,onClose:()=>{n()},isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!1},o.default.createElement(s.ModalOverlay,{"data-testid":"modal-overlay"}),a?o.default.createElement(p,{onConfirmationCancel:t}):o.default.createElement(f,{onConfirmationCancel:t,setIsTemporaryBlock:i}))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../../hooks/useModalProps"),s=e("../../../../../components/component-library"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../contexts/i18n"),c=e("../../../hooks/useOriginThrottling"),u=(a=e("../../../../../components/ui/origin-pill/origin-pill"))&&a.__esModule?a:{default:a},d=e("../../../../../../shared/constants/metametrics");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const f=({onConfirmationCancel:e,setIsTemporaryBlock:t})=>{const n=(0,o.useContext)(l.I18nContext),{origin:a,resetOrigin:r}=(0,c.useOriginThrottling)();return o.default.createElement(s.ModalContent,{size:s.ModalContentSize.Md},o.default.createElement(s.Box,{justifyContent:i.JustifyContent.center,display:i.Display.Flex,marginBottom:4},o.default.createElement(s.Icon,{name:s.IconName.Warning,size:s.IconSize.Xl,color:i.IconColor.warningDefault})),o.default.createElement(s.ModalHeader,{endAccessory:o.default.createElement(o.default.Fragment,null)},n("spamModalTitle")),o.default.createElement(u.default,{style:{marginTop:0,marginBottom:20},origin:a,dataTestId:"origin-pill"}),o.default.createElement(s.ModalBody,null,o.default.createElement(s.Text,{textAlign:i.TextAlign.Center,as:"p","data-testid":"confirmation-text"},n("spamModalDescription"))),o.default.createElement(s.ModalFooter,{paddingTop:4,onSubmit:()=>{e({location:d.MetaMetricsEventLocation.OriginThrottleModal}),r()},onCancel:()=>{t(!0)},containerProps:{alignItems:i.AlignItems.stretch,flexDirection:i.FlexDirection.Column},submitButtonProps:{children:n("cancel"),size:s.ButtonSize.Lg},cancelButtonProps:{children:n("spamModalTemporaryBlockButton"),size:s.ButtonSize.Lg}}))},p=({onConfirmationCancel:e})=>{const t=(0,o.useContext)(l.I18nContext);return o.default.createElement(s.ModalContent,{size:s.ModalContentSize.Md},o.default.createElement(s.Box,{justifyContent:i.JustifyContent.center,display:i.Display.Flex,marginBottom:4},o.default.createElement(s.Icon,{name:s.IconName.Confirmation,size:s.IconSize.Xl,color:i.IconColor.successDefault})),o.default.createElement(s.ModalHeader,{endAccessory:o.default.createElement(o.default.Fragment,null)},t("spamModalBlockedTitle")),o.default.createElement(s.ModalBody,null,o.default.createElement(s.Text,{textAlign:i.TextAlign.Center,as:"p","data-testid":"confirmation-text"},t("spamModalBlockedDescription"))),o.default.createElement(s.ModalFooter,{paddingTop:4,onSubmit:()=>e({location:d.MetaMetricsEventLocation.OriginThrottleModal}),submitButtonProps:{children:t("gotIt"),size:s.ButtonSize.Lg}}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.tsx"}],[6920,{"../../../../../components/component-library":6097,"../../../../../components/ui/tooltip":6589,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useI18nContext":6777,"../../../../../store/actions":7565,"../../../selectors/preferences":7249,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AdvancedDetailsButton=void 0;var a=d(e("react")),o=e("react-redux"),r=e("../../../../../components/component-library"),s=d(e("../../../../../components/ui/tooltip")),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../hooks/useI18nContext"),c=e("../../../../../store/actions"),u=e("../../../selectors/preferences");function d(e){return e&&e.__esModule?e:{default:e}}n.AdvancedDetailsButton=()=>{const e=(0,l.useI18nContext)(),t=(0,o.useDispatch)(),n=(0,o.useSelector)(u.selectConfirmationAdvancedDetailsOpen);return a.default.createElement(r.Box,{backgroundColor:n?i.BackgroundColor.infoMuted:i.BackgroundColor.transparent,borderRadius:i.BorderRadius.MD,marginRight:1},a.default.createElement(s.default,{title:e(n?"hideAdvancedDetails":"showAdvancedDetails")},a.default.createElement(r.ButtonIcon,{ariaLabel:"Advanced tx details",color:i.IconColor.iconDefault,iconName:r.IconName.Customize,"data-testid":"header-advanced-details-button",size:r.ButtonIconSize.Md,onClick:()=>{var e;e=!n,t((0,c.setConfirmationAdvancedDetailsOpen)(e))}})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/advanced-details-button.tsx"}],[6921,{"../../../../../components/component-library":6097,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useI18nContext":6777,"./advanced-details-button":6920,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DAppInitiatedHeader=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../components/component-library"),s=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext"),l=e("./advanced-details-button");n.DAppInitiatedHeader=()=>{const e=(0,i.useI18nContext)();return o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,backgroundColor:s.BackgroundColor.backgroundDefault,paddingInline:3,paddingTop:4,paddingBottom:4,style:{zIndex:2,position:"relative"}},o.default.createElement(r.Text,{variant:s.TextVariant.headingSm,color:s.TextColor.inherit},e("transferRequest")),o.default.createElement(r.Box,{paddingRight:3,style:{marginLeft:"auto",position:"absolute",right:0}},o.default.createElement(l.AdvancedDetailsButton,null)))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/dapp-initiated-header.tsx"}],[6922,{"../../../../../../shared/constants/metametrics":5430,"../../../../../../shared/lib/confirmation.utils":5463,"../../../../../components/app/confirm/info/row":5663,"../../../../../components/app/confirm/info/row/currency":5658,"../../../../../components/app/preferred-avatar":5825,"../../../../../components/component-library":6097,"../../../../../components/multichain":6330,"../../../../../components/ui/tooltip/tooltip":6590,"../../../../../contexts/metametrics":6608,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useI18nContext":6777,"../../../../../selectors/selectors":7555,"../../../context/confirm":7144,"../../../hooks/useBalance":7205,"../../../hooks/useConfirmationRecipientInfo":7215,"../../../utils/confirm":7260,"./advanced-details-button":6920,"@metamask/design-system-react":1655,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/design-system-react"),s=e("../../../../../../shared/constants/metametrics"),i=e("../../../../../components/app/confirm/info/row"),l=e("../../../../../components/app/confirm/info/row/currency"),c=e("../../../../../components/component-library"),u=e("../../../../../components/multichain"),d=C(e("../../../../../components/ui/tooltip/tooltip")),m=e("../../../../../contexts/metametrics"),f=e("../../../../../helpers/constants/design-system"),p=e("../../../../../hooks/useI18nContext"),g=e("../../../context/confirm"),h=e("../../../hooks/useBalance"),y=C(e("../../../hooks/useConfirmationRecipientInfo")),v=e("../../../utils/confirm"),b=e("../../../../../../shared/lib/confirmation.utils"),k=e("../../../../../components/app/preferred-avatar"),x=e("../../../../../selectors/selectors"),T=e("./advanced-details-button");function C(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}n.default=()=>{var e;const t=(0,a.useContext)(m.MetaMetricsContext),n=(0,o.useSelector)(x.getHDEntropyIndex),[C,E]=a.default.useState(!1),{currentConfirmation:w}=(0,g.useConfirmContext)(),{senderAddress:_,senderName:I,walletName:S,isBIP44:M,hasMoreThanOneWallet:A}=(0,y.default)(),P=(0,p.useI18nContext)(),{balance:D}=(0,h.useBalance)(_),O=(0,v.isSignatureTransactionType)(w)?{location:s.MetaMetricsEventLocation.SignatureConfirmation,signature_type:null==w||null===(e=w.msgParams)||void 0===e?void 0:e.signatureMethod,hd_entropy_index:n}:{location:s.MetaMetricsEventLocation.Transaction,transaction_type:null==w?void 0:w.type,hd_entropy_index:n};const B=(0,b.isCorrectDeveloperTransactionType)(null==w?void 0:w.type);return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Box,{display:f.Display.Flex,justifyContent:f.JustifyContent.flexEnd,style:{alignSelf:"flex-end"}},a.default.createElement(d.default,{position:"bottom",title:P("accountDetails"),interactive:!0},a.default.createElement(c.ButtonIcon,{ariaLabel:P("accountDetails"),color:f.IconColor.iconDefault,iconName:c.IconName.Info,size:c.ButtonIconSize.Md,onClick:()=>{!function(){const e={category:s.MetaMetricsEventCategory.Confirmations,event:s.MetaMetricsEventName.AccountDetailsOpened,properties:{action:"Confirm Screen",...O}};t(e)}(),E(!0)},"data-testid":"header-info__account-details-button"})),B&&a.default.createElement(T.AdvancedDetailsButton,null)),a.default.createElement(c.Modal,{isOpen:C,onClose:()=>E(!1),"data-testid":"account-details-modal",isClosedOnEscapeKey:!1,isClosedOnOutsideClick:!1},a.default.createElement(c.ModalOverlay,null),a.default.createElement(c.ModalContent,null,a.default.createElement(c.ModalHeader,null,a.default.createElement(c.Box,{display:f.Display.Flex,justifyContent:f.JustifyContent.center,style:{position:"relative"}},a.default.createElement(c.Box,{style:{margin:"0 auto"},display:f.Display.Flex,justifyContent:f.JustifyContent.center,flexDirection:f.FlexDirection.Column,alignItems:f.AlignItems.center},a.default.createElement(k.PreferredAvatar,{address:_,size:r.AvatarAccountSize.Lg}),a.default.createElement(c.Text,{fontWeight:f.FontWeight.Bold,variant:f.TextVariant.bodyMd,color:f.TextColor.textDefault,marginTop:2,"data-testid":"confirmation-account-details-modal__account-name"},I),M&&A&&a.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,marginTop:1},S)),a.default.createElement(c.Box,{style:{position:"absolute",right:0}},a.default.createElement(c.ButtonIcon,{ariaLabel:P("close"),iconName:c.IconName.Close,size:c.ButtonIconSize.Sm,className:"confirm_header__close-button",onClick:()=>E(!1),"data-testid":"confirmation-account-details-modal__close-button"})))),a.default.createElement(c.ModalBody,null,a.default.createElement(i.ConfirmInfoRow,{label:"Account address"},a.default.createElement(u.AddressCopyButton,{address:_,shorten:!0})),a.default.createElement(i.ConfirmInfoRow,{label:"Balance"},a.default.createElement(l.ConfirmInfoRowCurrency,{value:D??0,"data-testid":"confirmation-account-details-modal__account-balance"}))))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/header-info.tsx"}],[6923,{"../../../../../../shared/constants/app":5415,"../../../../../components/app/preferred-avatar":5825,"../../../../../components/component-library":6097,"../../../../../helpers/constants/design-system":6645,"../../../../../helpers/utils/accounts":6669,"../../../context/confirm":7144,"../../../hooks/useConfirmationNetworkInfo":7214,"../../../hooks/useConfirmationRecipientInfo":7215,"./dapp-initiated-header":6921,"./header-info":6922,"./wallet-initiated-header":6925,"@metamask/transaction-controller":2754,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/transaction-controller"),o=h(e("react")),r=e("../../../../../../shared/constants/app"),s=e("../../../../../components/component-library"),i=e("../../../../../components/app/preferred-avatar"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../helpers/utils/accounts"),u=e("../../../context/confirm"),d=h(e("../../../hooks/useConfirmationNetworkInfo")),m=h(e("../../../hooks/useConfirmationRecipientInfo")),f=e("./dapp-initiated-header"),p=h(e("./header-info")),g=e("./wallet-initiated-header");function h(e){return e&&e.__esModule?e:{default:e}}const y=[a.TransactionType.tokenMethodTransfer,a.TransactionType.tokenMethodTransferFrom,a.TransactionType.tokenMethodSafeTransferFrom,a.TransactionType.simpleSend];n.default=()=>{const{networkImageUrl:e,networkDisplayName:t}=(0,d.default)(),{senderAddress:n,senderName:a,walletName:h,isBIP44:v,hasMoreThanOneWallet:b}=(0,m.default)(),{currentConfirmation:k}=(0,u.useConfirmContext)();let x;v?b&&(x=h):x=t;const T=o.default.createElement(s.Box,{display:l.Display.Flex,className:"confirm_header__wrapper",alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.spaceBetween,"data-testid":"confirm-header"},o.default.createElement(s.Box,{alignItems:l.AlignItems.flexStart,display:l.Display.Flex,padding:4},o.default.createElement(s.Box,{display:l.Display.Flex,marginTop:2},o.default.createElement(i.PreferredAvatar,{address:n}),!v&&o.default.createElement(s.AvatarNetwork,{src:e,name:t,size:s.AvatarNetworkSize.Xs,backgroundColor:(0,c.getAvatarNetworkColor)(t),className:"confirm_header__avatar-network"})),o.default.createElement(s.Box,{marginInlineStart:4,marginTop:x?0:3},o.default.createElement(s.Text,{color:l.TextColor.textDefault,variant:l.TextVariant.bodyMdMedium,"data-testid":"header-account-name"},a),x&&o.default.createElement(s.Text,{color:l.TextColor.textAlternative,"data-testid":"header-network-display-name"},x))),o.default.createElement(s.Box,{alignItems:l.AlignItems.flexEnd,display:l.Display.Flex,padding:4},o.default.createElement(p.default,null))),C=(null==k?void 0:k.type)&&y.includes(k.type),E=(null==k?void 0:k.origin)===r.ORIGIN_METAMASK;return C&&E?o.default.createElement(g.WalletInitiatedHeader,null):C&&!E?o.default.createElement(f.DAppInitiatedHeader,null):T}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/header.tsx"}],[6924,{"./header":6923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Header",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./header"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/index.tsx"}],[6925,{"../../../../../../shared/constants/metametrics":5430,"../../../../../../shared/constants/transaction":5451,"../../../../../components/component-library":6097,"../../../../../ducks/confirm-transaction/confirm-transaction.duck":6625,"../../../../../ducks/send":6637,"../../../../../helpers/constants/design-system":6645,"../../../../../hooks/useI18nContext":6777,"../../../../../store/actions":7565,"../../../context/confirm":7144,"../../../hooks/useConfirmActions":7208,"../../../hooks/useRedesignedSendFlow":7235,"../../../utils/send":7263,"./advanced-details-button":6920,"@metamask/transaction-controller":2754,react:4961,"react-redux":4905,"react-router-dom":4929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WalletInitiatedHeader=void 0;var a=e("@metamask/transaction-controller"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("react-router-dom"),i=e("../../../../../../shared/constants/transaction"),l=e("../../../../../../shared/constants/metametrics"),c=e("../../../../../components/component-library"),u=e("../../../../../ducks/confirm-transaction/confirm-transaction.duck"),d=e("../../../../../ducks/send"),m=e("../../../../../helpers/constants/design-system"),f=e("../../../../../hooks/useI18nContext"),p=e("../../../../../store/actions"),g=e("../../../hooks/useConfirmActions"),h=e("../../../context/confirm"),y=e("../../../utils/send"),v=e("../../../hooks/useRedesignedSendFlow"),b=e("./advanced-details-button");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}n.WalletInitiatedHeader=()=>{const e=(0,f.useI18nContext)(),t=(0,r.useDispatch)(),n=(0,s.useHistory)(),{enabled:k}=(0,v.useRedesignedSendFlow)(),{onCancel:x}=(0,g.useConfirmActions)(),{currentConfirmation:T}=(0,h.useConfirmContext)(),C=(0,o.useCallback)(async()=>{const{id:e}=T,o=T.type===a.TransactionType.simpleSend,r=T.type===a.TransactionType.tokenMethodTransfer,s=T.type===a.TransactionType.tokenMethodTransferFrom||T.type===a.TransactionType.tokenMethodSafeTransferFrom;if(k&&(o||r||s))return void x({location:l.MetaMetricsEventLocation.Confirmation,navigateBackForSend:!0});let c;c=o?i.AssetType.native:r?i.AssetType.token:s?i.AssetType.NFT:i.AssetType.unknown,await t((0,d.editExistingTransaction)(c,e.toString())),t((0,u.clearConfirmTransaction)()),t((0,p.showSendTokenPage)()),(0,y.navigateToSendRoute)(n,k)},[T,t,n,k,x]);return o.default.createElement(c.Box,{alignItems:m.AlignItems.center,backgroundColor:m.BackgroundColor.backgroundDefault,display:m.Display.Flex,flexDirection:m.FlexDirection.Row,justifyContent:m.JustifyContent.spaceBetween,paddingInline:3,paddingTop:4,paddingBottom:4,style:{zIndex:2}},o.default.createElement(c.ButtonIcon,{iconName:c.IconName.ArrowLeft,ariaLabel:e("back"),size:c.ButtonIconSize.Md,onClick:C,"data-testid":"wallet-initiated-header-back-button",color:m.IconColor.iconDefault}),o.default.createElement(c.Text,{variant:m.TextVariant.headingSm,color:m.TextColor.inherit},e("review")),o.default.createElement(b.AdvancedDetailsButton,null))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/wallet-initiated-header.tsx"}],[6926,{"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/app/confirm/info/row/section":5665,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"../../../../../selectors/preferences":7249,"../../hooks/useTokenTransactionData":6952,"../../shared/network-row/network-row":6982,"../../shared/sign-in-with-row/sign-in-with-row":6987,"../../shared/transaction-details/transaction-details":6990,"../../utils":7005,"../hooks/use-is-nft":6931,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ApproveDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("../../../../../../../components/app/confirm/info/row"),i=e("../../../../../../../components/app/confirm/info/row/section"),l=e("../../../../../../../hooks/useI18nContext"),c=e("../../../../../context/confirm"),u=e("../../../../../selectors/preferences"),d=e("../../shared/sign-in-with-row/sign-in-with-row"),m=e("../../shared/transaction-details/transaction-details"),f=e("../../utils"),p=e("../hooks/use-is-nft"),g=e("../../hooks/useTokenTransactionData"),h=e("../../shared/network-row/network-row");const y=({isSetApprovalForAll:e=!1})=>{var t,n,a;const r=(0,l.useI18nContext)(),{currentConfirmation:i}=(0,c.useConfirmContext)(),{isNFT:u}=(0,p.useIsNFT)(i),d=(0,g.useTokenTransactionData)();if(!d)return null;const m=(null===(t=d.args)||void 0===t?void 0:t._spender)??(null===(n=d.args)||void 0===n?void 0:n._operator)??(null===(a=d.args)||void 0===a?void 0:a.spender),{chainId:h}=i;return(0,f.getIsRevokeSetApprovalForAll)(d)?null:o.default.createElement(o.default.Fragment,null,o.default.createElement(s.ConfirmInfoRow,{label:r(e?"permissionFor":"spender"),tooltip:r(u?"spenderTooltipDesc":"spenderTooltipERC20ApproveDesc"),"data-testid":"confirmation__approve-spender"},o.default.createElement(s.ConfirmInfoRowAddress,{address:m,chainId:h})),o.default.createElement(s.ConfirmInfoRowDivider,null))};n.ApproveDetails=({isSetApprovalForAll:e=!1})=>{const t=(0,r.useSelector)(u.selectConfirmationAdvancedDetailsOpen);return o.default.createElement(i.ConfirmInfoSection,{"data-testid":"confirmation__approve-details"},o.default.createElement(y,{isSetApprovalForAll:e}),o.default.createElement(h.NetworkRow,{isShownWithAlertsOnly:!0}),o.default.createElement(m.OriginRow,null),o.default.createElement(d.SigningInWithRow,null),t&&o.default.createElement(o.default.Fragment,null,o.default.createElement(m.RecipientRow,null),o.default.createElement(m.MethodDataRow,null)))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/approve-details/approve-details.tsx"}],[6927,{"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/app/name":5794,"../../../../../../../components/component-library":6097,"../../../../../../../components/ui/tooltip":6589,"../../../../../../../helpers/constants/design-system":6645,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"../../../../../hooks/useAssetDetails":7203,"../../shared/static-simulation/static-simulation":6988,"../../shared/transaction-data/transaction-data":6989,"../hooks/use-approve-token-simulation":6930,"../hooks/use-is-nft":6931,"@metamask/name-controller":2156,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ApproveStaticSimulation=void 0;var a=e("@metamask/name-controller"),o=y(e("react")),r=e("../../../../../../../components/app/confirm/info/row"),s=y(e("../../../../../../../components/app/name")),i=e("../../../../../../../components/component-library"),l=y(e("../../../../../../../components/ui/tooltip")),c=e("../../../../../../../helpers/constants/design-system"),u=e("../../../../../../../hooks/useI18nContext"),d=e("../../../../../context/confirm"),m=e("../../../../../hooks/useAssetDetails"),f=y(e("../../shared/static-simulation/static-simulation")),p=e("../../shared/transaction-data/transaction-data"),g=e("../hooks/use-approve-token-simulation"),h=e("../hooks/use-is-nft");function y(e){return e&&e.__esModule?e:{default:e}}n.ApproveStaticSimulation=({setIsOpenEditSpendingCapModal:e})=>{var t,n,y;const v=(0,u.useI18nContext)(),{currentConfirmation:b}=(0,d.useConfirmContext)(),{decimals:k}=(0,m.useAssetDetails)(null==b||null===(t=b.txParams)||void 0===t?void 0:t.to,null==b||null===(n=b.txParams)||void 0===n?void 0:n.from,null==b||null===(y=b.txParams)||void 0===y?void 0:y.data,null==b?void 0:b.chainId),{spendingCap:x,isUnlimitedSpendingCap:T,formattedSpendingCap:C,value:E,pending:w}=(0,g.useApproveTokenSimulation)(b,k),{isNFT:_}=(0,h.useIsNFT)(b);if(w)return o.default.createElement(p.Container,{isLoading:!0});if(!E)return null;const{chainId:I}=b,S=o.default.createElement(i.Text,{"data-testid":"simulation-token-value",backgroundColor:c.BackgroundColor.backgroundAlternative,borderRadius:c.BorderRadius.XL,paddingInline:2,textAlign:c.TextAlign.Center,alignItems:c.AlignItems.center},T?v("unlimited"):C),M=o.default.createElement(r.ConfirmInfoRow,{label:v(_?"simulationApproveHeading":"spendingCap")},o.default.createElement(i.Box,{style:{marginLeft:"auto",maxWidth:"100%"}},o.default.createElement(i.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center},!_&&o.default.createElement(i.ButtonIcon,{color:c.IconColor.primaryDefault,ariaLabel:v("edit"),iconName:i.IconName.Edit,onClick:()=>e(!0),size:i.ButtonIconSize.Sm,"data-testid":"edit-spending-cap-icon"}),o.default.createElement(i.Box,{display:c.Display.Inline,marginInlineEnd:1,minWidth:c.BlockSize.Zero},Boolean(T)||x!==C?o.default.createElement(l.default,{title:x},S):S),o.default.createElement(s.default,{value:b.txParams.to,type:a.NameType.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:I}))));return o.default.createElement(f.default,{title:v("simulationDetailsTitle"),titleTooltip:v("simulationDetailsTitleTooltip"),description:v(_?"simulationDetailsApproveDesc":"simulationDetailsERC20ApproveDesc"),simulationElements:M})}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/approve-static-simulation/approve-static-simulation.tsx"}],[6928,{"../../../../context/confirm":7144,"../../../../hooks/useAssetDetails":7203,"../shared/advanced-details/advanced-details":6965,"../shared/confirm-loader/confirm-loader":6967,"../shared/gas-fees-section/gas-fees-section":6980,"./approve-details/approve-details":6926,"./approve-static-simulation/approve-static-simulation":6927,"./edit-spending-cap-modal/edit-spending-cap-modal":6929,"./hooks/use-approve-token-simulation":6930,"./hooks/use-is-nft":6931,"./revoke-details/revoke-details":6932,"./revoke-static-simulation/revoke-static-simulation":6933,"@metamask/transaction-controller":2754,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/transaction-controller"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../context/confirm"),s=e("../../../../hooks/useAssetDetails"),i=e("../shared/advanced-details/advanced-details"),l=e("../shared/confirm-loader/confirm-loader"),c=e("../shared/gas-fees-section/gas-fees-section"),u=e("./approve-details/approve-details"),d=e("./approve-static-simulation/approve-static-simulation"),m=e("./edit-spending-cap-modal/edit-spending-cap-modal"),f=e("./hooks/use-approve-token-simulation"),p=e("./hooks/use-is-nft"),g=e("./revoke-details/revoke-details"),h=e("./revoke-static-simulation/revoke-static-simulation");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}n.default=()=>{const{currentConfirmation:e}=(0,r.useConfirmContext)(),{isNFT:t}=(0,p.useIsNFT)(e),[n,y]=(0,o.useState)(!1),{decimals:v}=(0,s.useAssetDetails)(e.txParams.to,e.txParams.from,e.txParams.data,e.chainId),{spendingCap:b,pending:k}=(0,f.useApproveTokenSimulation)(e,v),x="0"===b&&e.type===a.TransactionType.tokenMethodApprove;return null!=e&&e.txParams?k||!t&&!v?o.default.createElement(l.ConfirmLoader,null):o.default.createElement(o.default.Fragment,null,x?o.default.createElement(h.RevokeStaticSimulation,null):o.default.createElement(d.ApproveStaticSimulation,{setIsOpenEditSpendingCapModal:y}),x?o.default.createElement(g.RevokeDetails,null):o.default.createElement(u.ApproveDetails,null),o.default.createElement(c.GasFeesSection,null),o.default.createElement(i.AdvancedDetails,null),o.default.createElement(m.EditSpendingCapModal,{isOpenEditSpendingCapModal:n,setIsOpenEditSpendingCapModal:y})):null}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/approve.tsx"}],[6929,{"../../../../../../../../shared/lib/transactions-controller-utils":5519,"../../../../../../../../shared/lib/transactions/approvals":5521,"../../../../../../../../shared/modules/conversion.utils":5529,"../../../../../../../../shared/modules/transaction.utils":5553,"../../../../../../../components/component-library":6097,"../../../../../../../helpers/constants/design-system":6645,"../../../../../../../hooks/useI18nContext":6777,"../../../../../../../store/actions":7565,"../../../../../context/confirm":7144,"../../../../../hooks/useAssetDetails":7203,"../../shared/confirm-loader/confirm-loader":6967,"../hooks/use-approve-token-simulation":6930,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.EditSpendingCapModal=void 0,n.countDecimalDigits=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../../../../../../shared/lib/transactions-controller-utils"),s=e("../../../../../../../../shared/modules/conversion.utils"),i=e("../../../../../../../components/component-library"),l=e("../../../../../../../helpers/constants/design-system"),c=e("../../../../../../../hooks/useI18nContext"),u=e("../../../../../../../store/actions"),d=e("../../../../../context/confirm"),m=e("../../../../../hooks/useAssetDetails"),f=e("../hooks/use-approve-token-simulation"),p=e("../../shared/confirm-loader/confirm-loader"),g=e("../../../../../../../../shared/modules/transaction.utils"),h=e("../../../../../../../../shared/lib/transactions/approvals");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e){var t;return(null===(t=e.split(".")[1])||void 0===t?void 0:t.length)||0}n.EditSpendingCapModal=({data:e,isOpenEditSpendingCapModal:t,onSubmit:n,setIsOpenEditSpendingCapModal:y,to:b})=>{const k=(0,c.useI18nContext)(),x=(0,o.useDispatch)(),{currentConfirmation:T}=(0,d.useConfirmContext)(),C=T.txParams.to,E=T.txParams.from,w=T.txParams.data,_=b??C,I=e??w,{tokenAddress:S}=(0,g.parseApprovalTransactionData)(I??"0x")??{},{userBalance:M,tokenSymbol:A,decimals:P}=(0,m.useAssetDetails)(S??_,E,I,T.chainId),D=(0,r.calcTokenAmount)(M??"0",Number(P??"0")).toFixed(),O=(0,a.useMemo)(()=>({...T,txParams:{...T.txParams,to:_,from:E,data:I}}),[E,I,T,_]),{formattedSpendingCap:B,pending:F,spendingCap:N}=(0,f.useApproveTokenSimulation)(O,P),[R,j]=(0,a.useState)(N);(0,a.useEffect)(()=>{N&&j(N)},[N]);const $=(0,a.useCallback)(()=>{y(!1),j(N)},[y,j,N]),[W,L]=(0,a.useState)(!1),G=(0,a.useCallback)(async()=>{L(!0);const e=(0,h.updateApprovalAmount)(I,(R||"0").replace("#",""),Number(P||0));if(n)n(e);else{const t=await(0,u.estimateGas)({from:O.txParams.from,to:O.txParams.to,value:O.txParams.value,data:e});x((0,u.updateEditableParams)(T.id,{data:e,gas:(0,s.hexToDecimal)(t)}))}L(!1),y(!1),j(N)},[R,P,x,O,n,y,N,I,T.id]),q=P&&parseInt(P,10)<v(R),H=/[-+e]/u.test(R);return a.default.createElement(i.Modal,{isOpen:t,onClose:$,isClosedOnEscapeKey:!0,isClosedOnOutsideClick:!0,className:"edit-spending-cap-modal"},a.default.createElement(i.ModalOverlay,null),a.default.createElement(i.ModalContent,null,a.default.createElement(i.ModalHeader,{justifyContent:l.JustifyContent.center,childrenWrapperProps:{alignItems:l.AlignItems.center,display:l.Display.Flex,flexDirection:l.FlexDirection.Column}},a.default.createElement(i.Text,{variant:l.TextVariant.headingMd},k("editSpendingCap"))),a.default.createElement(i.ModalBody,null,a.default.createElement(i.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textAlternative,paddingBottom:4},k("editSpendingCapDesc")),F?a.default.createElement(p.ConfirmLoader,null):a.default.createElement(a.default.Fragment,null,a.default.createElement(i.TextField,{type:i.TextFieldType.Number,value:R,onChange:e=>j(e.target.value),placeholder:`${B} ${A}`,style:{width:"100%"},inputProps:{"data-testid":"custom-spending-cap-input"}}),q&&a.default.createElement(i.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.errorDefault,paddingTop:1},k("editSpendingCapError",[P])),H&&a.default.createElement(i.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.errorDefault,paddingTop:1},k("editSpendingCapSpecialCharError")),a.default.createElement(i.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textAlternative,paddingTop:1},k("editSpendingCapAccountBalance",[D,A||""])))),a.default.createElement(i.ModalFooter,{onSubmit:G,onCancel:$,submitButtonProps:{children:k("save"),loading:F||W,disabled:q||H||""===R}})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/edit-spending-cap-modal/edit-spending-cap-modal.tsx"}],[6930,{"../../../../../../../../shared/lib/transactions-controller-utils":5519,"../../../../../../../../shared/modules/transaction.utils":5553,"../../../../../../../ducks/locale/locale":6631,"../../../../simulation-details/formatAmount":7089,"../../shared/constants":6968,"./use-is-nft":6931,"bignumber.js":3648,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSpendingCapUnlimited=m,n.useApproveTokenSimulation=void 0;var a=e("bignumber.js"),o=e("react"),r=e("react-redux"),s=e("../../../../../../../../shared/lib/transactions-controller-utils"),i=e("../../../../../../../ducks/locale/locale"),l=e("../../../../simulation-details/formatAmount"),c=e("../../shared/constants"),u=e("../../../../../../../../shared/modules/transaction.utils"),d=e("./use-is-nft");function m(e,t=0){return(0,s.calcTokenAmount)(e,t).gte(c.TOKEN_VALUE_UNLIMITED_THRESHOLD)}n.useApproveTokenSimulation=(e,t)=>{var n;const c=(0,r.useSelector)(i.getIntlLocale),{isNFT:f,pending:p}=(0,d.useIsNFT)(e),g=null==e||null===(n=e.txParams)||void 0===n?void 0:n.data,{amountOrTokenId:h,tokenAddress:y}=(0,u.parseApprovalTransactionData)(g??"0x")??{},v=f&&!y,b=h??new a.BigNumber(0),k=(0,s.calcTokenAmount)(b,Number(t??"0")).toFixed(),x=v?"#":"",T=(0,o.useMemo)(()=>v?`${x}${k}`:(0,l.formatAmount)(c,new a.BigNumber(k)),[k,v,c,x]),{spendingCap:C,isUnlimitedSpendingCap:E}=(0,o.useMemo)(()=>!v&&m(parseInt(k,10))?{spendingCap:k,isUnlimitedSpendingCap:!0}:{spendingCap:`${x}${k}`,isUnlimitedSpendingCap:!1},[k,v,x]);return{isUnlimitedSpendingCap:E,spendingCap:C,formattedSpendingCap:T,value:b,pending:p}}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/hooks/use-approve-token-simulation.ts"}],[6931,{"../../../../../../../../shared/constants/transaction":5451,"../../../../../../../hooks/useAsync":6760,"../../../../../../../store/actions":7565},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsNFT=void 0;var a=e("../../../../../../../../shared/constants/transaction"),o=e("../../../../../../../hooks/useAsync"),r=e("../../../../../../../store/actions");n.useIsNFT=e=>{var t;const{value:n,pending:s}=(0,o.useAsyncResult)(async()=>{var t,n;return await(0,r.getTokenStandardAndDetailsByChain)(null==e||null===(t=e.txParams)||void 0===t?void 0:t.to,null==e||null===(n=e.txParams)||void 0===n?void 0:n.from,undefined,null==e?void 0:e.chainId)},[null==e||null===(t=e.txParams)||void 0===t?void 0:t.to]);return{pending:s,isNFT:(null==n?void 0:n.standard)!==a.TokenStandard.ERC20}}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/hooks/use-is-nft.ts"}],[6932,{"../../../../../../../components/app/confirm/info/row/section":5665,"../../shared/network-row/network-row":6982,"../../shared/sign-in-with-row/sign-in-with-row":6987,"../../shared/transaction-details/transaction-details":6990,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RevokeDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../../../components/app/confirm/info/row/section"),s=e("../../shared/network-row/network-row"),i=e("../../shared/transaction-details/transaction-details"),l=e("../../shared/sign-in-with-row/sign-in-with-row");n.RevokeDetails=()=>o.default.createElement(r.ConfirmInfoSection,null,o.default.createElement(s.NetworkRow,{isShownWithAlertsOnly:!0}),o.default.createElement(i.OriginRow,null),o.default.createElement(l.SigningInWithRow,null))}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/revoke-details/revoke-details.tsx"}],[6933,{"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/app/name":5794,"../../../../../../../components/component-library":6097,"../../../../../../../helpers/constants/design-system":6645,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"../../shared/static-simulation/static-simulation":6988,"@metamask/name-controller":2156,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RevokeStaticSimulation=void 0;var a=e("@metamask/name-controller"),o=m(e("react")),r=e("../../../../../../../components/app/confirm/info/row"),s=m(e("../../../../../../../components/app/name")),i=e("../../../../../../../components/component-library"),l=e("../../../../../../../helpers/constants/design-system"),c=e("../../../../../../../hooks/useI18nContext"),u=e("../../../../../context/confirm"),d=m(e("../../shared/static-simulation/static-simulation"));function m(e){return e&&e.__esModule?e:{default:e}}n.RevokeStaticSimulation=()=>{const e=(0,c.useI18nContext)(),{currentConfirmation:t}=(0,u.useConfirmContext)(),{chainId:n}=t,m=o.default.createElement(r.ConfirmInfoRow,{label:e("spendingCap")},o.default.createElement(i.Box,{style:{marginLeft:"auto",maxWidth:"100%"}},o.default.createElement(i.Box,{display:l.Display.Flex},o.default.createElement(s.default,{value:t.txParams.to,type:a.NameType.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:n})))),f=o.default.createElement(r.ConfirmInfoRow,{label:e("spender")},o.default.createElement(i.Box,{style:{marginLeft:"auto",maxWidth:"100%"}},o.default.createElement(i.Box,{display:l.Display.Flex},o.default.createElement(s.default,{value:t.txParams.from,type:a.NameType.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:n})))),p=o.default.createElement(o.default.Fragment,null,m,f);return o.default.createElement(d.default,{title:e("simulationDetailsTitle"),titleTooltip:e("simulationDetailsTitleTooltip"),description:e("revokeSimulationDetailsDesc"),simulationElements:p})}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/approve/revoke-static-simulation/revoke-static-simulation.tsx"}],[6934,{"../../../../context/confirm":7144,"../batch/batch-simulation-details/batch-simulation-details":6935,"../batch/transaction-account-details":6937,"../shared/advanced-details/advanced-details":6965,"../shared/gas-fees-section/gas-fees-section":6980,"../shared/transaction-details/transaction-details":6990,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../context/confirm"),s=e("../shared/advanced-details/advanced-details"),i=e("../shared/gas-fees-section/gas-fees-section"),l=e("../shared/transaction-details/transaction-details"),c=e("../batch/transaction-account-details"),u=e("../batch/batch-simulation-details/batch-simulation-details");n.default=()=>{const{currentConfirmation:e}=(0,r.useConfirmContext)();return null!=e&&e.txParams?o.default.createElement(o.default.Fragment,null,o.default.createElement(c.TransactionAccountDetails,null),o.default.createElement(u.BatchSimulationDetails,null),o.default.createElement(l.TransactionDetails,null),o.default.createElement(i.GasFeesSection,null),o.default.createElement(s.AdvancedDetails,null)):null}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/base-transaction-info/base-transaction-info.tsx"}],[6935,{"../../../../../../../../shared/constants/transaction":5451,"../../../../../../../hooks/useI18nContext":6777,"../../../../../../../store/controller-actions/transaction-controller":7569,"../../../../../context/confirm":7144,"../../../../simulation-details/simulation-details":7091,"../../approve/edit-spending-cap-modal/edit-spending-cap-modal":6929,"../../hooks/useBatchApproveBalanceChanges":6940,"../../hooks/useIsUpgradeTransaction":6946,"@metamask/transaction-controller":2754,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BatchSimulationDetails=function(){const e=(0,u.useI18nContext)(),{isUpgradeOnly:t}=(0,m.useIsUpgradeTransaction)(),{currentConfirmation:n}=(0,i.useConfirmContext)(),{id:f,nestedTransactions:p}=n,{value:g}=(0,s.useBatchApproveBalanceChanges)()??{},[h,y]=(0,a.useState)(!1),[v,b]=(0,a.useState)(),k=(0,a.useCallback)(e=>{b(e.nestedTransactionIndex),y(!0)},[]),x=(0,a.useCallback)(async e=>{v!==undefined&&await(0,d.updateAtomicBatchData)({transactionId:f,transactionData:e,transactionIndex:v})},[f,v]);if((null==n?void 0:n.type)===o.TransactionType.revokeDelegation||t)return null;const T=(0,a.useMemo)(()=>{const t=null==g?void 0:g.map(e=>({...e,onEdit:e.asset.standard===c.TokenStandard.ERC20?()=>k(e):undefined}));return[{label:e("confirmSimulationApprove"),balanceChanges:t??[]}]},[g,k]),C=v===undefined?undefined:null==p?void 0:p[v];return a.default.createElement(a.default.Fragment,null,h&&a.default.createElement(l.EditSpendingCapModal,{data:null==C?void 0:C.data,isOpenEditSpendingCapModal:!0,onSubmit:x,setIsOpenEditSpendingCapModal:y,to:null==C?void 0:C.to}),a.default.createElement(r.SimulationDetails,{transaction:n,staticRows:T,isTransactionsRedesign:!0,enableMetrics:!0}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/transaction-controller"),r=e("../../../../simulation-details/simulation-details"),s=e("../../hooks/useBatchApproveBalanceChanges"),i=e("../../../../../context/confirm"),l=e("../../approve/edit-spending-cap-modal/edit-spending-cap-modal"),c=e("../../../../../../../../shared/constants/transaction"),u=e("../../../../../../../hooks/useI18nContext"),d=e("../../../../../../../store/controller-actions/transaction-controller"),m=e("../../hooks/useIsUpgradeTransaction");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/batch/batch-simulation-details/batch-simulation-details.tsx"}],[6936,{"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/app/confirm/info/row/currency":5658,"../../../../../../../components/app/confirm/info/row/expandable-row":5661,"../../../../../../../components/app/confirm/info/row/section":5665,"../../../../../../../components/component-library":6097,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"../../hooks/useNestedTransactionLabels":6948,"../../shared/transaction-data/transaction-data":6989,"../../shared/transaction-details/transaction-details":6990,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NestedTransactionData=function(){const{currentConfirmation:e}=(0,r.useConfirmContext)(),{nestedTransactions:t}=e??{};if(null==t||!t.length)return null;return o.default.createElement(s.Box,{"data-testid":"batch-txs"},t.map((e,t)=>o.default.createElement(g,{key:t,index:t,nestedTransaction:e})))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../context/confirm"),s=e("../../../../../../../components/component-library"),i=e("../../../../../../../components/app/confirm/info/row/section"),l=e("../../../../../../../components/app/confirm/info/row/expandable-row"),c=e("../../shared/transaction-details/transaction-details"),u=e("../../shared/transaction-data/transaction-data"),d=e("../../../../../../../components/app/confirm/info/row"),m=e("../../../../../../../components/app/confirm/info/row/currency"),f=e("../../../../../../../hooks/useI18nContext"),p=e("../../hooks/useNestedTransactionLabels");function g({index:e,nestedTransaction:t}){const n=(0,f.useI18nContext)(),{data:a,to:r,value:s}=t,g=(0,p.useNestedTransactionLabels)({nestedTransactions:[t],useIndex:e})[0];return o.default.createElement(i.ConfirmInfoSection,null,o.default.createElement(l.ConfirmInfoExpandableRow,{label:g,content:o.default.createElement(o.default.Fragment,null,r&&o.default.createElement(c.RecipientRow,{recipient:r}),s&&o.default.createElement(d.ConfirmInfoRow,{label:n("amount")},o.default.createElement(m.ConfirmInfoRowCurrency,{value:s})),a&&r&&o.default.createElement(u.TransactionData,{data:a,to:r,noPadding:!0,nestedTransactionIndex:e}))},o.default.createElement(d.ConfirmInfoRowText,{text:""})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/batch/nested-transaction-data/nested-transaction-data.tsx"}],[6937,{"./transaction-account-details":6938},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"TransactionAccountDetails",{enumerable:!0,get:function(){return a.TransactionAccountDetails}});var a=e("./transaction-account-details")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/batch/transaction-account-details/index.ts"}],[6938,{"../../../../../../../../shared/lib/transactions.utils":5520,"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/app/confirm/info/row/alert-row/alert-row":5655,"../../../../../../../components/app/confirm/info/row/constants":5656,"../../../../../../../components/app/confirm/info/row/section":5665,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"../../hooks/useIsUpgradeTransaction":6946,"../../shared/transaction-details/transaction-details":6990,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionAccountDetails=function(){const e=(0,l.useI18nContext)(),{currentConfirmation:t}=(0,c.useConfirmContext)(),{isUpgrade:n,isUpgradeOnly:a}=(0,m.useIsUpgradeTransaction)(),p=(0,m.useIsDowngradeTransaction)(),{chainId:g,nestedTransactions:h,txParams:y,id:v}=t,{from:b}=y,k=(0,r.isBatchTransaction)(h);if(!n&&!p)return null;return o.default.createElement(i.ConfirmInfoSection,null,(a||p)&&o.default.createElement(s.ConfirmInfoRow,{label:e("account")},o.default.createElement(s.ConfirmInfoRowAddress,{chainId:g,address:b})),a&&o.default.createElement(u.ConfirmInfoAlertRow,{alertKey:d.RowAlertKey.AccountTypeUpgrade,label:e("confirmInfoAccountNow"),ownerId:v},o.default.createElement(s.ConfirmInfoRowText,{text:e("confirmAccountTypeStandard"),"data-testid":"tx-type"})),n&&o.default.createElement(u.ConfirmInfoAlertRow,{alertKey:a?"":d.RowAlertKey.AccountTypeUpgrade,label:e("confirmInfoSwitchingTo"),ownerId:a?"":v},o.default.createElement(s.ConfirmInfoRowText,{text:e("confirmAccountTypeSmartContract")})),p&&o.default.createElement(o.default.Fragment,null,o.default.createElement(s.ConfirmInfoRow,{label:e("confirmInfoAccountNow")},o.default.createElement(s.ConfirmInfoRowText,{text:e("confirmAccountTypeSmartContract")})),o.default.createElement(s.ConfirmInfoRow,{label:e("confirmInfoSwitchingTo")},o.default.createElement(s.ConfirmInfoRowText,{text:e("confirmAccountTypeStandard")}))),(k||n)&&o.default.createElement(f.RecipientRow,null))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../../../../shared/lib/transactions.utils"),s=e("../../../../../../../components/app/confirm/info/row"),i=e("../../../../../../../components/app/confirm/info/row/section"),l=e("../../../../../../../hooks/useI18nContext"),c=e("../../../../../context/confirm"),u=e("../../../../../../../components/app/confirm/info/row/alert-row/alert-row"),d=e("../../../../../../../components/app/confirm/info/row/constants"),m=e("../../hooks/useIsUpgradeTransaction"),f=e("../../shared/transaction-details/transaction-details")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/batch/transaction-account-details/transaction-account-details.tsx"}],[6939,{"../../../../../../../shared/lib/transactions-controller-utils":5519,"../../../../../../components/app/currency-input/hooks/useTokenExchangeRate":5696,"../../../../../../ducks/locale/locale":6631,"../../../../../../hooks/useFiatFormatter":6772,"../../../../hooks/useAssetDetails":7203,"../../../simulation-details/formatAmount":7089,"./useTokenTransactionData":6952,"bignumber.js":3648,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenValues=void 0;var a,o=e("bignumber.js"),r=e("react-redux"),s=e("../../../../../../../shared/lib/transactions-controller-utils"),i=(a=e("../../../../../../components/app/currency-input/hooks/useTokenExchangeRate"))&&a.__esModule?a:{default:a},l=e("../../../../../../ducks/locale/locale"),c=e("../../../../../../hooks/useFiatFormatter"),u=e("../../../../hooks/useAssetDetails"),d=e("../../../simulation-details/formatAmount"),m=e("./useTokenTransactionData");n.useTokenValues=e=>{var t,n;const a=(0,r.useSelector)(l.getIntlLocale),f=(0,m.useTokenTransactionData)(),p=(0,i.default)(null==e||null===(t=e.txParams)||void 0===t?void 0:t.to),g=(0,c.useFiatFormatter)(),{decimals:h}=(0,u.useAssetDetails)(e.txParams.to,e.txParams.from,e.txParams.data,e.chainId),y=null==f||null===(n=f.args)||void 0===n?void 0:n._value,v=h!==undefined&&y?(0,s.calcTokenAmount)(y,Number(h)).toFixed():"0",b=p&&v&&p.times(v,10).toNumber(),k=b&&new o.BigNumber(String(b)).greaterThan(new o.BigNumber(0))&&new o.BigNumber(String(b)).lt(new o.BigNumber(.01))?`< ${g(.01,{shorten:!0})}`:b&&g(b,{shorten:!0});return{decodedTransferValue:v,displayTransferValue:(0,d.formatAmount)(a,new o.BigNumber(v)),fiatDisplayValue:k,fiatValue:b}}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/use-token-values.ts"}],[6940,{"../../../../../../../shared/modules/transaction.utils":5553,"../../../../../../hooks/useAsync":6760,"../../../../../../store/actions":7565,"../../../../context/confirm":7144,"../../../simulation-details/useBalanceChanges":7094,"../approve/hooks/use-approve-token-simulation":6930,"@metamask/transaction-controller":2754,"@metamask/utils":2799,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBatchApproveBalanceChanges=function(){const{currentConfirmation:e}=(0,s.useConfirmContext)(),{chainId:t,nestedTransactions:n}=e??{},{value:m,pending:f}=function({nestedTransactions:e}){return(0,i.useAsyncResult)(async()=>async function({nestedTransactions:e}){const t=[];if(!e)return t;for(let r=0;r<e.length;r++){var n;const s=e[r],{data:i,to:u}=s;if(!i||!u)continue;const m=(0,c.parseApprovalTransactionData)(i);if(!m)continue;const{amountOrTokenId:f,isApproveAll:p,tokenAddress:g}=m,h=g??u,y=await(0,l.getTokenStandardAndDetails)(h);if(null==y||!y.standard)continue;const v=null==y||null===(n=y.standard)||void 0===n?void 0:n.toLowerCase(),b=v!==a.SimulationTokenStandard.erc20,k=(0,o.add0x)((null==f?void 0:f.toString(16))??"0x0"),x={address:h,difference:b||f===undefined?"0x1":k,id:b&&f?k:undefined,isAll:p??!1,isDecrease:!0,isUnlimited:!b&&(0,d.isSpendingCapUnlimited)((null==f?void 0:f.toNumber())??0,Number((null==y?void 0:y.decimals)??0)),newBalance:"0x0",nestedTransactionIndex:r,previousBalance:"0x0",standard:v};t.push(x)}return t}({nestedTransactions:e}),[JSON.stringify(e)])}({nestedTransactions:n}),{value:p,pending:g}=(0,u.useBalanceChanges)({chainId:t,simulationData:{tokenBalanceChanges:m??[]}}),h=(0,r.useMemo)(()=>(p??[]).map((e,t)=>{const n=null==m?void 0:m[t];return{...e,isApproval:!0,isAllApproval:(null==n?void 0:n.isAll)??!1,isUnlimitedApproval:(null==n?void 0:n.isUnlimited)??!1,nestedTransactionIndex:(null==n?void 0:n.nestedTransactionIndex)??-1}}),[p,m]);return{pending:f||g,value:h}};var a=e("@metamask/transaction-controller"),o=e("@metamask/utils"),r=e("react"),s=e("../../../../context/confirm"),i=e("../../../../../../hooks/useAsync"),l=e("../../../../../../store/actions"),c=e("../../../../../../../shared/modules/transaction.utils"),u=e("../../../simulation-details/useBalanceChanges"),d=e("../approve/hooks/use-approve-token-simulation")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useBatchApproveBalanceChanges.ts"}],[6941,{"../../../../../../../shared/modules/transaction.utils":5553,"../../../../../../hooks/useAsync":6760,"../../../../../../selectors":7539,"../../../../../../store/actions":7565,"../../../../context/confirm":7144,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDecodedTransactionData=function({data:e,to:t,transactionTypeFilter:n}={}){var c,u;const{currentConfirmation:d}=(0,s.useConfirmContext)(),m=(0,a.useSelector)(l.use4ByteResolutionSelector),f=null==d?void 0:d.type,p=null==d?void 0:d.chainId,g=null==d||null===(c=d.txParams)||void 0===c?void 0:c.data,h=null==d||null===(u=d.txParams)||void 0===u?void 0:u.to,y=e??g,v=t??h;return(0,o.useAsyncResult)(async()=>!m||!(0,i.hasTransactionData)(y)||!v||n&&f!==n?undefined:await(0,r.decodeTransactionData)({transactionData:y,chainId:p,contractAddress:v}),[m,y,v,p])};var a=e("react-redux"),o=e("../../../../../../hooks/useAsync"),r=e("../../../../../../store/actions"),s=e("../../../../context/confirm"),i=e("../../../../../../../shared/modules/transaction.utils"),l=e("../../../../../../selectors")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useDecodedTransactionData.ts"}],[6942,{"../../../../../../../shared/modules/conversion.utils":5529,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEIP1559TxFees=void 0;var a=e("react"),o=e("../../../../../../../shared/modules/conversion.utils");n.useEIP1559TxFees=e=>{var t,n;const r=null==e||null===(t=e.txParams)||void 0===t?void 0:t.maxFeePerGas,s=null==e||null===(n=e.txParams)||void 0===n?void 0:n.maxPriorityFeePerGas;return(0,a.useMemo)(()=>({maxFeePerGas:r?(0,o.hexToDecimal)(r):"0",maxPriorityFeePerGas:s?(0,o.hexToDecimal)(s):"0"}),[r,s])}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useEIP1559TxFees.ts"}],[6943,{"../../../../../../../shared/constants/common":5418,"../../../../../../../shared/modules/Numeric":5524,"../../../../../../../shared/modules/conversion.utils":5529,"../../../../../../ducks/metamask/metamask":6632,"../../../../../../hooks/useFiatFormatter":6772,"../../../../../../hooks/useGasFeeEstimates":6774,"../../../../../../selectors":7539,"../shared/constants":6968,"./useEIP1559TxFees":6942,"./useSupportsEIP1559":6950,"./useTransactionGasFeeEstimate":6953,"@metamask/utils":2799,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFeeCalculations=function(e){var t,n;const v=(0,r.useSelector)(c.getCurrentCurrency),{chainId:b}=e,k=(0,u.useFiatFormatter)(),x=(0,r.useSelector)(e=>(0,m.selectConversionRateByChainId)(e,b)),T=(null==e?void 0:e.gasUsed)||(null==e?void 0:e.gasLimitNoBuffer)||(null==e||null===(t=e.txParams)||void 0===t?void 0:t.gas)||f.HEX_ZERO,C=(0,o.useCallback)(e=>{const t=`${(0,i.getValueFromWeiHex)({value:e,fromCurrency:s.EtherDenomination.GWEI,numberOfDecimals:4})||0}`,n=Number((0,i.getValueFromWeiHex)({value:e,conversionRate:x,fromCurrency:s.EtherDenomination.GWEI,toCurrency:v,numberOfDecimals:2}));let a,o;return 0===n?(a=`< ${k(.01)}`,o=(0,i.getValueFromWeiHex)({value:e,conversionRate:x,fromCurrency:s.EtherDenomination.GWEI,toCurrency:v,numberOfDecimals:18})):(a=k(n),o=null),{currentCurrencyFee:a,currentCurrencyFeeWith18SignificantDigits:o,hexFee:e,nativeCurrencyFee:t}},[x,v,k]),{maxFeePerGas:E,maxPriorityFeePerGas:w}=(0,p.useEIP1559TxFees)(e),{supportsEIP1559:_}=(0,g.useSupportsEIP1559)(e),I=(0,h.useTransactionGasFeeEstimate)(e,_),{gasFeeEstimates:S}=(0,d.useGasFeeEstimates)(e.networkClientId),M=null==S?void 0:S.estimatedBaseFee,A=null==e?void 0:e.layer1GasFee,P=Boolean(A),D=(0,o.useMemo)(()=>P?C(A):y,[C,A,P]),O=(0,o.useMemo)(()=>P?C(I):y,[I,C,P]),B=(null==e||null===(n=e.txParams)||void 0===n?void 0:n.gasPrice)??f.HEX_ZERO,F=(0,o.useMemo)(()=>(0,i.addHexes)(A??f.HEX_ZERO,(0,i.multiplyHexes)(_?(0,i.decimalToHex)(E):B,T)),[B,A,E,T,_]),{currentCurrencyFee:N,currentCurrencyFeeWith18SignificantDigits:R,nativeCurrencyFee:j}=C(F),$=(0,o.useMemo)(()=>{if(P){const e=(0,i.addHexes)(I,A);return C(e)}let e=(0,i.addHexes)((0,i.decGWEIToHexWEI)(M)||f.HEX_ZERO,(0,i.decimalToHex)(w));new l.Numeric(e,16).greaterThan((0,i.decimalToHex)(E),16)&&(e=(0,i.decimalToHex)(E));const t=(0,i.multiplyHexes)(_?e:B,T);return C(t)},[M,I,B,C,P,A,E,w,_,e]);return{estimatedFeeFiat:$.currentCurrencyFee,estimatedFeeFiatWith18SignificantDigits:$.currentCurrencyFeeWith18SignificantDigits,estimatedFeeNative:$.nativeCurrencyFee,estimatedFeeNativeHex:(0,a.add0x)($.hexFee),l1FeeFiat:D.currentCurrencyFee,l1FeeFiatWith18SignificantDigits:D.currentCurrencyFeeWith18SignificantDigits,l1FeeNative:D.nativeCurrencyFee,l2FeeFiat:O.currentCurrencyFee,l2FeeFiatWith18SignificantDigits:O.currentCurrencyFeeWith18SignificantDigits,l2FeeNative:O.nativeCurrencyFee,maxFeeFiat:N,maxFeeFiatWith18SignificantDigits:R,maxFeeNative:j}};var a=e("@metamask/utils"),o=e("react"),r=e("react-redux"),s=e("../../../../../../../shared/constants/common"),i=e("../../../../../../../shared/modules/conversion.utils"),l=e("../../../../../../../shared/modules/Numeric"),c=e("../../../../../../ducks/metamask/metamask"),u=e("../../../../../../hooks/useFiatFormatter"),d=e("../../../../../../hooks/useGasFeeEstimates"),m=e("../../../../../../selectors"),f=e("../shared/constants"),p=e("./useEIP1559TxFees"),g=e("./useSupportsEIP1559"),h=e("./useTransactionGasFeeEstimate");const y={currentCurrencyFee:"",currentCurrencyFeeWith18SignificantDigits:"",nativeCurrencyFee:""}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useFeeCalculations.ts"}],[6944,{"../../../../../../../shared/modules/transaction.utils":5553,"../../../../../../selectors":7539,"../../../../../../store/actions":7565,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFourByte=void 0;var a=e("react-redux"),o=e("react"),r=e("../../../../../../selectors"),s=e("../../../../../../store/actions"),i=e("../../../../../../../shared/modules/transaction.utils");n.useFourByte=({to:e,data:t})=>{const n=(0,a.useDispatch)(),l=(0,a.useSelector)(r.use4ByteResolutionSelector),c=e,u=t;(0,o.useEffect)(()=>{l&&(0,i.hasTransactionData)(u)&&c&&n((0,s.getContractMethodData)(u))},[l,u,c,n]);const d=(0,a.useSelector)(e=>(0,r.getKnownMethodData)(e,u));return c?d:null}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useFourByte.ts"}],[6945,{"../../../../../../../shared/constants/transaction":5451,"../../../../../../ducks/locale/locale":6631,"../../../../../../hooks/useEthFiatAmount":6770,"../../../../../../selectors":7539,"../../../../context/confirm":7144,"../../../simulation-details/formatAmount":7089,"./useFeeCalculations":6943,"@ethersproject/abi":631,"@metamask/metamask-eth-abis":2064,"@metamask/utils":2799,"bignumber.js":3648,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RATE_WEI_NATIVE=n.METAMASK_FEE_PERCENTAGE=void 0,n.useGasFeeToken=y,n.useSelectedGasFeeToken=function(){const{currentConfirmation:e}=(0,c.useConfirmContext)(),{selectedGasFeeToken:t}=e??{},n=y({tokenAddress:t});return t?n:undefined};var a=e("@metamask/utils"),o=e("bignumber.js"),r=e("react-redux"),s=e("@ethersproject/abi"),i=e("@metamask/metamask-eth-abis"),l=e("../../../../../../../shared/constants/transaction"),c=e("../../../../context/confirm"),u=e("../../../../../../hooks/useEthFiatAmount"),d=e("../../../simulation-details/formatAmount"),m=e("../../../../../../ducks/locale/locale"),f=e("../../../../../../selectors"),p=e("./useFeeCalculations");const g=n.RATE_WEI_NATIVE="0xDE0B6B3A7640000",h=n.METAMASK_FEE_PERCENTAGE=.35;function y({tokenAddress:e}){var t,n;const{currentConfirmation:u}=(0,c.useConfirmContext)(),y=(0,r.useSelector)(m.getIntlLocale),b=function(){const{currentConfirmation:e}=(0,c.useConfirmContext)(),{id:t,txParams:n}=e??{},{estimatedFeeNativeHex:a}=(0,p.useFeeCalculations)(null!=e&&e.txParams?e:{txParams:{}}),o=(0,r.useSelector)(t=>(0,f.selectNetworkConfigurationByChainId)(t,null==e?void 0:e.chainId)),s=(0,r.useSelector)(e=>(0,f.selectTransactionAvailableBalance)(e,t)),{nativeCurrency:i}=o??{},{gas:u,maxFeePerGas:d,maxPriorityFeePerGas:m}=n??{};return{amount:a,balance:s,decimals:18,gas:u,gasTransfer:"0x0",maxFeePerGas:d,maxPriorityFeePerGas:m,rateWei:g,recipient:l.NATIVE_TOKEN_ADDRESS,symbol:i,tokenAddress:l.NATIVE_TOKEN_ADDRESS}}(),{gasFeeTokens:k}=u??{};let x=null==k?void 0:k.find(t=>t.tokenAddress.toLowerCase()===(null==e?void 0:e.toLowerCase()));x||(x=b);const{amount:T,decimals:C}=x??{amount:"0x0",decimals:0},E=(0,a.add0x)(new o.BigNumber(T).times(h).toString(16)),w=(0,d.formatAmount)(y,new o.BigNumber(T).shift(-C)),_=v(x,null===(t=x)||void 0===t?void 0:t.amount),I=v(x,null===(n=x)||void 0===n?void 0:n.balance),S=v(x,E),M=e===l.NATIVE_TOKEN_ADDRESS?function(e){return{gas:e.gasTransfer,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,to:e.recipient,value:e.amount}}(x):function(e){const t=new s.Interface(i.abiERC20).encodeFunctionData("transfer",[e.recipient,e.amount]);return{data:t,gas:e.gasTransfer,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,to:e.tokenAddress}}(x);return{...x,amountFormatted:w,amountFiat:_,balanceFiat:I,metaMaskFee:E,metamaskFeeFiat:S,transferTransaction:M}}function v(e,t){const{decimals:n,rateWei:a}=e??{decimals:0,rateWei:"0x0"},r=new o.BigNumber(t??"0x0").shift(-n).mul(new o.BigNumber(a)).shift(-18),s=(0,u.useEthFiatAmount)(r,{},!0);return e?s:""}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useGasFeeToken.ts"}],[6946,{"../../../../context/confirm":7144,"../../../../hooks/useEIP7702Account":7220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsDowngradeTransaction=function(){const e=r();return Boolean(e)&&e===o.EIP_7702_REVOKE_ADDRESS},n.useIsUpgradeTransaction=function(){const e=r(),{currentConfirmation:t}=(0,a.useConfirmContext)(),{txParams:n}=t??{txParams:{}},{data:s}=n??{},i=Boolean(e)&&e!==o.EIP_7702_REVOKE_ADDRESS;return{isUpgrade:i,isUpgradeOnly:i&&(!s||"0x"===s)}};var a=e("../../../../context/confirm"),o=e("../../../../hooks/useEIP7702Account");function r(){const{currentConfirmation:e}=(0,a.useConfirmContext)(),{txParams:t}=e??{},{authorizationList:n}=t??{},o=null==n?void 0:n[0];return null==o?void 0:o.address}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useIsUpgradeTransaction.ts"}],[6947,{"../../../../../../../shared/modules/Numeric":5524,"../../../../../../../shared/modules/conversion.utils":5529,"../../../../../../selectors":7539,"../../../../../../store/actions":7565,"../../../../context/confirm":7144,"../../../../hooks/useTransactionEventFragment":7240,"../shared/constants":6968,"./useSupportsEIP1559":6950,"@metamask/transaction-controller":2754,react:4961,"react-redux":4905,"react-router-dom-v5-compat":4924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMaxValueRefresher=void 0;var a=e("react"),o=e("react-redux"),r=e("@metamask/transaction-controller"),s=e("react-router-dom-v5-compat"),i=e("../../../../../../selectors"),l=e("../../../../../../../shared/modules/conversion.utils"),c=e("../../../../../../../shared/modules/Numeric"),u=e("../../../../../../store/actions"),d=e("../../../../context/confirm"),m=e("../shared/constants"),f=e("../../../../hooks/useTransactionEventFragment"),p=e("./useSupportsEIP1559");n.useMaxValueRefresher=()=>{var e;const{currentConfirmation:t}=(0,d.useConfirmContext)(),n=(0,o.useDispatch)(),{chainId:g,id:h,txParams:{from:y}}=t,v=(0,o.useSelector)(e=>(0,i.selectMaxValueModeForTransaction)(e,null==t?void 0:t.id)),{updateTransactionEventFragment:b}=(0,f.useTransactionEventFragment)(),[k]=(0,s.useSearchParams)(),x="true"===k.get("maxValueMode"),T=v||x,C=(0,o.useSelector)(i.getCrossChainMetaMaskCachedBalances),E=(null==C||null===(e=C[g])||void 0===e?void 0:e[y])??m.HEX_ZERO,{supportsEIP1559:w}=(0,p.useSupportsEIP1559)(t),_=t.txParams.gas||m.HEX_ZERO,I=t.txParams.gasPrice||m.HEX_ZERO,S=t.txParams.maxFeePerGas||m.HEX_ZERO,M=t.layer1GasFee;(0,a.useEffect)(()=>{b({properties:{is_send_max:T}},h)},[T,h]),(0,a.useEffect)(()=>{if(!T||t.type!==r.TransactionType.simpleSend)return;let e=(0,l.multiplyHexes)(_,w?S:I);M&&(e=(0,l.addHexes)(e,M));const a=new c.Numeric(E||m.HEX_ZERO,16).minus(new c.Numeric(e,16));a.isNegative()||a.isZero()||n((0,u.updateEditableParams)(t.id,{value:a.toPrefixedHexString()}))},[T,E,_,I,S,w,M,n,t])}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useMaxValueRefresher.ts"}],[6948,{"../../../../../../hooks/useI18nContext":6777,"./useFourByte":6944},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNestedTransactionLabels=function({nestedTransactions:e=[],useIndex:t}){const n=(0,a.useI18nContext)();return null==e?void 0:e.map((e,a)=>{const{data:r,to:s}=e,i=(0,o.useFourByte)({data:r,to:s});return(null==i?void 0:i.name)??n("confirmNestedTransactionTitle",[String((t??a)+1)])})};var a=e("../../../../../../hooks/useI18nContext"),o=e("./useFourByte")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useNestedTransactionLabels.ts"}],[6949,{"../../../../hooks/useTransactionEventFragment":7240,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendingValueMetric=void 0;var a=e("react"),o=e("../../../../hooks/useTransactionEventFragment");n.useSendingValueMetric=({transactionMeta:e,fiatValue:t})=>{const{updateTransactionEventFragment:n}=(0,o.useTransactionEventFragment)(),r=e.id,s={properties:{sending_value:t},sensitiveProperties:{}};(0,a.useEffect)(()=>{t!==undefined&&""!==t&&n(s,r)},[n,r,JSON.stringify(s)])}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useSendingValueMetric.ts"}],[6950,{"../../../../../../helpers/utils/transactions.util":6700,"../../../../../../selectors":7539,"@metamask/transaction-controller":2754,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSupportsEIP1559=function(e){const{networkClientId:t,txParams:n}=e??{},i=(null==n?void 0:n.type)===a.TransactionEnvelopeType.legacy||(0,r.isLegacyTransaction)(e),l=(0,o.useSelector)(e=>(0,s.checkNetworkAndAccountSupports1559)(e,t));return{supportsEIP1559:l&&!i}};var a=e("@metamask/transaction-controller"),o=e("react-redux"),r=e("../../../../../../helpers/utils/transactions.util"),s=e("../../../../../../selectors")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useSupportsEIP1559.ts"}],[6951,{"../../../../../../hooks/useI18nContext":6777,"../../../../../../selectors":7539,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenDetails=void 0;var a=e("react-redux"),o=e("../../../../../../hooks/useI18nContext"),r=e("../../../../../../selectors");n.useTokenDetails=e=>{var t,n,s,i;const l=(0,o.useI18nContext)(),c=(0,a.useSelector)(t=>(0,r.getWatchedToken)(e)(t)),u=(0,a.useSelector)(r.getTokenList);return{tokenImage:(null==c?void 0:c.iconUrl)||(null==c?void 0:c.image)||(null===(t=u[null==e||null===(n=e.txParams)||void 0===n?void 0:n.to])||void 0===t?void 0:t.iconUrl),tokenSymbol:(null==c?void 0:c.symbol)||(null===(s=u[null==e||null===(i=e.txParams)||void 0===i?void 0:i.to])||void 0===s?void 0:s.symbol)||l("unknown")}}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useTokenDetails.ts"}],[6952,{"../../../../../../../shared/modules/transaction.utils":5553,"../../../../context/confirm":7144},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTransactionData=function(){var e;const{currentConfirmation:t}=(0,a.useConfirmContext)(),n=null==t||null===(e=t.txParams)||void 0===e?void 0:e.data;if(!n)return undefined;return(0,o.parseStandardTokenTransactionData)(n)};var a=e("../../../../context/confirm"),o=e("../../../../../../../shared/modules/transaction.utils")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useTokenTransactionData.ts"}],[6953,{"../../../../../../../shared/modules/Numeric":5524,"../../../../../../../shared/modules/conversion.utils":5529,"../../../../../../hooks/useGasFeeEstimates":6774,"../shared/constants":6968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionGasFeeEstimate=function(e,t){var n,i;let{gas:l,gasPrice:c}=e.txParams;const{gasFeeEstimates:u}=(0,r.useGasFeeEstimates)(e.networkClientId),d=null==u?void 0:u.estimatedBaseFee;l=l||s.HEX_ZERO,c=c||s.HEX_ZERO;const m=(null===(n=e.txParams)||void 0===n?void 0:n.maxPriorityFeePerGas)||s.HEX_ZERO,f=(null===(i=e.txParams)||void 0===i?void 0:i.maxFeePerGas)||s.HEX_ZERO;let p;if(t){const e=(0,a.decGWEIToHexWEI)(d);let t=(0,a.addHexes)(e||s.HEX_ZERO,m);new o.Numeric(t,16).greaterThan(f,16)&&(t=f),p=(0,a.multiplyHexes)(t,l)}else p=(0,a.multiplyHexes)(c,l);return p};var a=e("../../../../../../../shared/modules/conversion.utils"),o=e("../../../../../../../shared/modules/Numeric"),r=e("../../../../../../hooks/useGasFeeEstimates"),s=e("../shared/constants")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useTransactionGasFeeEstimate.ts"}],[6954,{"../../../../context/confirm":7144,"./useTokenTransactionData":6952,"@metamask/transaction-controller":2754},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransferRecipient=function(){var e,t,n;const{currentConfirmation:s}=(0,o.useConfirmContext)(),i=(0,r.useTokenTransactionData)(),l=null==s?void 0:s.type,c=null==s||null===(e=s.txParams)||void 0===e?void 0:e.to,u=(null==i||null===(t=i.args)||void 0===t?void 0:t._to)||(null==i||null===(n=i.args)||void 0===n?void 0:n.to);return l===a.TransactionType.simpleSend?c:u};var a=e("@metamask/transaction-controller"),o=e("../../../../context/confirm"),r=e("./useTokenTransactionData")}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/hooks/useTransferRecipient.ts"}],[6955,{"./info":6956},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Info",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./info"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/index.ts"}],[6956,{"../../../../../../shared/modules/environment":5530,"../../../../trust-signals/hooks/useTrustSignalMetrics":7520,"../../../context/confirm":7144,"../../../hooks/useSmartTransactionFeatureFlags":7238,"../../../hooks/useTransactionFocusEffect":7241,"./approve/approve":6928,"./base-transaction-info/base-transaction-info":6934,"./native-transfer/native-transfer":6957,"./nft-token-transfer/nft-token-transfer":6958,"./personal-sign/personal-sign":6959,"./set-approval-for-all-info/set-approval-for-all-info":6963,"./token-transfer/token-transfer":6992,"./typed-sign-v1/typed-sign-v1":6994,"./typed-sign/typed-sign":7004,"./typed-sign/typed-sign-permission":6995,"@metamask/transaction-controller":2754,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/transaction-controller"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../context/confirm"),s=e("../../../hooks/useSmartTransactionFeatureFlags"),i=e("../../../hooks/useTransactionFocusEffect"),l=e("../../../../trust-signals/hooks/useTrustSignalMetrics"),c=e("../../../../../../shared/modules/environment"),u=k(e("./approve/approve")),d=k(e("./base-transaction-info/base-transaction-info")),m=k(e("./native-transfer/native-transfer")),f=k(e("./nft-token-transfer/nft-token-transfer")),p=k(e("./personal-sign/personal-sign")),g=k(e("./set-approval-for-all-info/set-approval-for-all-info")),h=k(e("./token-transfer/token-transfer")),y=k(e("./typed-sign-v1/typed-sign-v1")),v=k(e("./typed-sign/typed-sign")),b=k(e("./typed-sign/typed-sign-permission"));function k(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}n.default=()=>{const{currentConfirmation:e}=(0,r.useConfirmContext)();(0,s.useSmartTransactionFeatureFlags)(),(0,i.useTransactionFocusEffect)(),(0,l.useTrustSignalMetrics)();const t=(0,o.useMemo)(()=>({[a.TransactionType.batch]:()=>d.default,[a.TransactionType.contractInteraction]:()=>d.default,[a.TransactionType.deployContract]:()=>d.default,[a.TransactionType.personalSign]:()=>p.default,[a.TransactionType.revokeDelegation]:()=>d.default,[a.TransactionType.simpleSend]:()=>m.default,[a.TransactionType.signTypedData]:()=>{const t=e,{version:n}=(null==t?void 0:t.msgParams)??{};if("V1"===n)return y.default;if(null!=t&&t.decodedPermission){if(!(0,c.isGatorPermissionsFeatureEnabled)())throw new Error("Gator permissions feature is not enabled");return b.default}return v.default},[a.TransactionType.tokenMethodApprove]:()=>u.default,[a.TransactionType.tokenMethodIncreaseAllowance]:()=>u.default,[a.TransactionType.tokenMethodSafeTransferFrom]:()=>f.default,[a.TransactionType.tokenMethodSetApprovalForAll]:()=>g.default,[a.TransactionType.tokenMethodTransfer]:()=>h.default,[a.TransactionType.tokenMethodTransferFrom]:()=>f.default}),[e]);if(null==e||!e.type)return null;const n=t[null==e?void 0:e.type]();return o.default.createElement(n,null)}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/info.tsx"}],[6957,{"../../../../context/confirm":7144,"../../../simulation-details":7090,"../hooks/useMaxValueRefresher":6947,"../shared/advanced-details/advanced-details":6965,"../shared/gas-fees-section/gas-fees-section":6980,"../shared/native-send-heading/native-send-heading":6981,"../token-transfer/token-details-section":6991,"../token-transfer/transaction-flow-section":6993,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=m(e("react")),o=e("../../../../context/confirm"),r=e("../../../simulation-details"),s=e("../shared/advanced-details/advanced-details"),i=e("../shared/gas-fees-section/gas-fees-section"),l=m(e("../shared/native-send-heading/native-send-heading")),c=e("../token-transfer/token-details-section"),u=e("../token-transfer/transaction-flow-section"),d=e("../hooks/useMaxValueRefresher");function m(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const{currentConfirmation:e}=(0,o.useConfirmContext)();(0,d.useMaxValueRefresher)();const t="metamask"===e.origin;return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,null),a.default.createElement(u.TransactionFlowSection,null),a.default.createElement(r.SimulationDetails,{transaction:e,isTransactionsRedesign:!0,enableMetrics:!0,metricsOnly:t}),a.default.createElement(c.TokenDetailsSection,null),a.default.createElement(i.GasFeesSection,null),a.default.createElement(s.AdvancedDetails,null))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/native-transfer/native-transfer.tsx"}],[6958,{"../../../../context/confirm":7144,"../../../simulation-details":7090,"../shared/advanced-details/advanced-details":6965,"../shared/gas-fees-section/gas-fees-section":6980,"../shared/nft-send-heading/nft-send-heading":6983,"../token-transfer/token-details-section":6991,"../token-transfer/transaction-flow-section":6993,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=d(e("react")),o=e("../../../../context/confirm"),r=e("../../../simulation-details"),s=e("../shared/advanced-details/advanced-details"),i=e("../shared/gas-fees-section/gas-fees-section"),l=d(e("../shared/nft-send-heading/nft-send-heading")),c=e("../token-transfer/token-details-section"),u=e("../token-transfer/transaction-flow-section");function d(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const{currentConfirmation:e}=(0,o.useConfirmContext)(),t="metamask"===e.origin;return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,null),a.default.createElement(u.TransactionFlowSection,null),a.default.createElement(r.SimulationDetails,{transaction:e,isTransactionsRedesign:!0,enableMetrics:!0,metricsOnly:t}),a.default.createElement(c.TokenDetailsSection,null),a.default.createElement(i.GasFeesSection,null),a.default.createElement(s.AdvancedDetails,null))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/nft-token-transfer/nft-token-transfer.tsx"}],[6959,{"../../../../../../components/app/confirm/info/row":5663,"../../../../../../components/app/confirm/info/row/alert-row/alert-row":5655,"../../../../../../components/app/confirm/info/row/constants":5656,"../../../../../../components/app/confirm/info/row/section":5665,"../../../../../../components/component-library":6097,"../../../../../../components/ui/tooltip":6589,"../../../../../../helpers/constants/design-system":6645,"../../../../../../helpers/utils/util":6703,"../../../../../../hooks/useI18nContext":6777,"../../../../context/confirm":7144,"../../../../hooks/useIsBIP44":7228,"../../../../selectors/preferences":7249,"../../../../utils":7261,"../shared/network-row/network-row":6982,"../shared/sign-in-with-row/sign-in-with-row":6987,"../utils":7005,"./siwe-sign":6960,"@metamask/snaps-utils":2677,react:4961,"react-redux":4905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=C(e("react")),o=e("react-redux"),r=e("@metamask/snaps-utils"),s=e("../../../../../../components/app/confirm/info/row"),i=e("../../../../../../components/app/confirm/info/row/alert-row/alert-row"),l=e("../../../../../../components/app/confirm/info/row/constants"),c=e("../../../../../../components/app/confirm/info/row/section"),u=e("../../../../../../components/component-library"),d=C(e("../../../../../../components/ui/tooltip")),m=e("../../../../../../helpers/constants/design-system"),f=e("../../../../../../helpers/utils/util"),p=e("../../../../../../hooks/useI18nContext"),g=e("../../../../context/confirm"),h=e("../../../../selectors/preferences"),y=e("../../../../utils"),v=e("../../../../hooks/useIsBIP44"),b=e("../shared/network-row/network-row"),k=e("../shared/sign-in-with-row/sign-in-with-row"),x=e("../utils"),T=e("./siwe-sign");function C(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{var e;const t=(0,p.useI18nContext)(),{currentConfirmation:n}=(0,g.useConfirmContext)(),C=(0,o.useSelector)(h.selectUseTransactionSimulations),E=(0,v.useIsBIP44)();if(null==n||!n.msgParams)return null;const w=(0,y.isSIWESignatureRequest)(n),_=(e=>{if(!e)return e;const t=(0,f.sanitizeString)((0,f.hexToText)(e));return(0,x.isValidUTF8)(t)?t:e})(null===(e=n.msgParams)||void 0===e?void 0:e.data);let I;w||(I=(0,r.isSnapId)(n.msgParams.origin)?t("requestFromInfoSnap"):t("requestFromInfo"));const S=a.default.createElement(u.Box,{display:m.Display.Flex,flexDirection:m.FlexDirection.Row,alignItems:m.AlignItems.center,gap:1},a.default.createElement(u.Text,{variant:m.TextVariant.bodyMdMedium},t("simulationDetailsTitle")),a.default.createElement(d.default,{interactive:!0,position:"top",containerClassName:"info-tooltip__tooltip-container",tooltipInnerClassName:"info-tooltip__tooltip-content",tooltipArrowClassName:"info-tooltip__top-tooltip-arrow",html:t("simulationDetailsTitleTooltip"),theme:"tippy-tooltip-info",style:{display:m.Display.Flex}},a.default.createElement(u.Icon,{name:u.IconName.Question,marginLeft:1,color:m.IconColor.iconMuted,size:u.IconSize.Sm}))),M=a.default.createElement(u.Text,{color:m.TextColor.textAlternative,variant:m.TextVariant.bodyMd},t("simulationDetailsNoChanges"));return a.default.createElement(a.default.Fragment,null,w&&C&&a.default.createElement(c.ConfirmInfoSection,null,a.default.createElement(u.Box,{"data-testid":"simulation-details-layout",className:"simulation-details-layout",display:m.Display.Flex,flexDirection:m.FlexDirection.Column,borderRadius:m.BorderRadius.LG,borderColor:m.BorderColor.transparent,padding:2,gap:3},a.default.createElement(u.Box,{display:m.Display.Flex,flexDirection:m.FlexDirection.Row,alignItems:m.AlignItems.center,justifyContent:m.JustifyContent.spaceBetween},S,M))),a.default.createElement(c.ConfirmInfoSection,null,a.default.createElement(b.NetworkRow,{isShownWithAlertsOnly:!E}),a.default.createElement(i.ConfirmInfoAlertRow,{alertKey:l.RowAlertKey.RequestFrom,ownerId:n.id,label:t("requestFrom"),tooltip:I},a.default.createElement(s.ConfirmInfoRowUrl,{url:n.msgParams.origin})),a.default.createElement(k.SigningInWithRow,null)),a.default.createElement(c.ConfirmInfoSection,null,w?a.default.createElement(T.SIWESignInfo,null):a.default.createElement(i.ConfirmInfoAlertRow,{alertKey:"message",ownerId:n.id,label:t("message"),collapsed:!1,copyEnabled:!0,copyText:_},a.default.createElement(s.ConfirmInfoRowText,{text:_}))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/personal-sign/personal-sign.tsx"}],[6960,{"./siwe-sign":6961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SIWESignInfo",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./siwe-sign"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/personal-sign/siwe-sign/index.ts"}],[6961,{"../../../../../../../../shared/constants/network":5433,"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/component-library":6097,"../../../../../../../helpers/constants/design-system":6645,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"@metamask/controller-utils":1301,luxon:4545,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("luxon"),s=e("@metamask/controller-utils"),i=e("../../../../../../../../shared/constants/network"),l=e("../../../../../../../hooks/useI18nContext"),c=e("../../../../../../../components/app/confirm/info/row"),u=e("../../../../../../../components/component-library"),d=e("../../../../../../../helpers/constants/design-system"),m=e("../../../../../context/confirm");n.default=()=>{var e;const t=(0,l.useI18nContext)(),{currentConfirmation:n}=(0,m.useConfirmContext)(),a=null==n||null===(e=n.msgParams)||void 0===e||null===(e=e.siwe)||void 0===e?void 0:e.parsedMessage;if(!a)return null;const{address:f,chainId:p,issuedAt:g,nonce:h,requestId:y,statement:v,resources:b,uri:k,version:x}=a,T=(0,s.toHex)(p),C=i.NETWORK_TO_NAME_MAP[T]??T;return o.default.createElement(c.ConfirmInfoRow,{label:t("message"),collapsed:!1,copyEnabled:!0,copyText:JSON.stringify(a)},o.default.createElement(u.Box,{width:d.BlockSize.Full,className:"siwe-sign__message-rows"},o.default.createElement(u.Text,{color:d.TextColor.inherit,style:{whiteSpace:"pre-wrap"}},v??""),o.default.createElement(c.ConfirmInfoRow,{label:t("siweURI")},o.default.createElement(c.ConfirmInfoRowText,{text:k})),o.default.createElement(c.ConfirmInfoRow,{label:t("siweNetwork")},o.default.createElement(c.ConfirmInfoRowText,{text:C})),o.default.createElement(c.ConfirmInfoRow,{label:t("account")},o.default.createElement(c.ConfirmInfoRowAddress,{address:f,chainId:T})),o.default.createElement(c.ConfirmInfoRow,{label:t("version")},o.default.createElement(c.ConfirmInfoRowText,{text:x})),o.default.createElement(c.ConfirmInfoRow,{label:t("chainId")},o.default.createElement(c.ConfirmInfoRowText,{text:`${p}`})),o.default.createElement(c.ConfirmInfoRow,{label:t("nonce")},o.default.createElement(c.ConfirmInfoRowText,{text:h})),o.default.createElement(c.ConfirmInfoRow,{label:t("siweIssued")},o.default.createElement(c.ConfirmInfoRowDate,{unixTimestamp:r.DateTime.fromISO(g,{zone:"utc"}).toUnixInteger()})),y&&o.default.createElement(c.ConfirmInfoRow,{label:t("siweRequestId")},o.default.createElement(c.ConfirmInfoRowText,{text:y})),b&&o.default.createElement(c.ConfirmInfoRow,{label:t("siweResources")},b.map((e,t)=>o.default.createElement(c.ConfirmInfoRowText,{key:`resource-${t}`,text:e})))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/personal-sign/siwe-sign/siwe-sign.tsx"}],[6962,{"../../../../../../../components/app/confirm/info/row":5663,"../../../../../../../components/app/name":5794,"../../../../../../../components/component-library":6097,"../../../../../../../helpers/constants/design-system":6645,"../../../../../../../hooks/useI18nContext":6777,"../../../../../context/confirm":7144,"../../shared/static-simulation/static-simulation":6988,"@metamask/name-controller":2156,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RevokeSetApprovalForAllStaticSimulation=void 0;var a=e("@metamask/name-controller"),o=m(e("react")),r=e("../../../../../../../components/app/confirm/info/row"),s=m(e("../../../../../../../components/app/name")),i=e("../../../../../../../components/component-library"),l=e("../../../../../../../helpers/constants/design-system"),c=e("../../../../../../../hooks/useI18nContext"),u=e("../../../../../context/confirm"),d=m(e("../../shared/static-simulation/static-simulation"));function m(e){return e&&e.__esModule?e:{default:e}}n.RevokeSetApprovalForAllStaticSimulation=({spender:e})=>{const t=(0,c.useI18nContext)(),{currentConfirmation:n}=(0,u.useConfirmContext)(),{chainId:m}=n,f=o.default.createElement(r.ConfirmInfoRow,{label:t("nfts")},o.default.createElement(i.Box,{style:{marginLeft:"auto",maxWidth:"100%"}},o.default.createElement(i.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center},o.default.createElement(s.default,{value:n.txParams.to,type:a.NameType.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:m})))),p=o.default.createElement(r.ConfirmInfoRow,{label:t("permissionFrom")},o.default.createElement(i.Box,{style:{marginLeft:"auto",maxWidth:"100%"}},o.default.createElement(i.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center},o.default.createElement(s.default,{value:e,type:a.NameType.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:m})))),g=o.default.createElement(o.default.Fragment,null,f,p);return o.default.createElement(d.default,{title:t("simulationDetailsTitle"),titleTooltip:t("simulationDetailsTitleTooltip"),description:t("simulationDetailsRevokeSetApprovalForAllDesc"),simulationElements:g})}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/set-approval-for-all-info/revoke-set-approval-for-all-static-simulation/revoke-set-approval-for-all-static-simulation.tsx"}],[6963,{"../../../../context/confirm":7144,"../approve/approve-details/approve-details":6926,"../hooks/useTokenTransactionData":6952,"../shared/advanced-details/advanced-details":6965,"../shared/gas-fees-section/gas-fees-section":6980,"../utils":7005,"./revoke-set-approval-for-all-static-simulation/revoke-set-approval-for-all-static-simulation":6962,"./set-approval-for-all-static-simulation/set-approval-for-all-static-simulation":6964,react:4961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../context/confirm"),s=e("../approve/approve-details/approve-details"),i=e("../shared/advanced-details/advanced-details"),l=e("../shared/gas-fees-section/gas-fees-section"),c=e("../utils"),u=e("../hooks/useTokenTransactionData"),d=e("./revoke-set-approval-for-all-static-simulation/revoke-set-approval-for-all-static-simulation"),m=e("./set-approval-for-all-static-simulation/set-approval-for-all-static-simulation");n.default=()=>{var e;const{currentConfirmation:t}=(0,r.useConfirmContext)(),n=(0,u.useTokenTransactionData)(),a=null==n||null===(e=n.args)||void 0===e?void 0:e._operator,f=(0,c.getIsRevokeSetApprovalForAll)(n);return null!=t&&t.txParams?o.default.createElement(o.default.Fragment,null,f?o.default.createElement(d.RevokeSetApprovalForAllStaticSimulation,{spender:a}):o.default.createElement(m.SetApprovalForAllStaticSimulation,null),o.default.createElement(s.ApproveDetails,{isSetApprovalForAll:!0}),o.default.createElement(l.GasFeesSection,null),o.default.createElement(i.AdvancedDetails,null)):null}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/info/set-approval-for-all-info/set-approval-for-all-info.tsx"}]],[],{});