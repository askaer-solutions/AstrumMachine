LavaPack.loadBundle([[308,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizePatches=function(e){return e.filter(e=>{if(o.includes(e.path[0]))return!1;for(const t of a)if(s(e,t))return!1;return!0})},r.sanitizeUIState=function(e){const t={...e};for(const e of o)delete t[e];return function(e){const t=e.snaps;if(!t)return;e.snaps=Object.values(t).reduce((e,t)=>(e[t.id]=function(e){const t={...e};return delete t.sourceCode,delete t.auxiliaryFiles,t}(t),e),{})}(t),function(e){const t=e.srpSessionData;if(!t)return;e.srpSessionData=Object.entries(t).reduce((e,[t,r])=>{const n={...r.token};return delete n.accessToken,e[t]={...r,token:n},e},{})}(t),function(e){const t=e.nodeAuthTokens;t&&(e.nodeAuthTokens=t.map(e=>{const t={...e};return delete t.authToken,t}));const r=e.socialBackupsMetadata;r&&(e.socialBackupsMetadata=r.map(e=>{const t={...e};return delete t.hash,t}))}(t),t};var n=e("lodash");const o=["encryptionKey","encryptionSalt","vault","c2DomainBlocklistLastFetched","hotlistLastFetched","phishingLists","stalelistLastFetched","whitelist","whitelistPaths","accessToken","encryptedKeyringEncryptionKey","encryptedSeedlessEncryptionKey","metadataAccessToken","refreshToken","revokeToken","vaultEncryptionKey","vaultEncryptionSalt","snapStates","unencryptedSnapStates"],a=[["nodeAuthTokens",!0,"authToken"],["snaps",!0,"auxiliaryFiles"],["snaps",!0,"sourceCode"],["socialBackupsMetadata",!0,"hash"],["srpSessionData",!0,"token","accessToken"]];function s(e,t){for(let r=0;r<t.length;r++){const o=t[r],a=r===t.length-1,s=r===e.path.length-1;if(!(e.path[r]===o||!0===o&&e.path[r]!==undefined))return!1;if(a)return!0;if(s&&!l(e.value))return!1;if(s){const o=t.slice(r+1);return e.value=(0,n.cloneDeep)(e.value),i(e.value,o),!1}}return!1}function i(e,t,r=0){const n=t[r],o=r===t.length-1;if(o&&!0!==n&&n in e&&!Array.isArray(e))return void delete e[n];if(o)return;let a=[];!0===n?a=Object.values(e):Array.isArray(e)||(a=[e[n]]);const s=a.filter(l);for(const e of s)i(e,t,r+1)}function l(e){return"object"==typeof e&&null!==e&&e!==undefined}}}},{package:"$root$",file:"app/scripts/lib/state-utils.ts"}],[31,{"@metamask/message-manager":2123},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManagerInit=void 0;var n=e("@metamask/message-manager");r.DecryptMessageManagerInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new n.DecryptMessageManager({additionalFinishStatuses:["decrypted"],messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/decrypt-message-manager-init.ts"}],[314,{"../../../../../shared/lib/delegation":5864,"../../../../../shared/lib/delegation/delegation":5861,"@metamask/transaction-controller":2862,"@metamask/utils":2908,"bignumber.js":3949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.enforceSimulations=async function({messenger:e,transactionMeta:t,useRealSignature:r=!1}){l("Enforcing simulations",{transactionMeta:t,useRealSignature:r});const{chainId:a,simulationData:u={tokenBalanceChanges:[]},txParams:h}=t,p=h.from,m=(0,o.hexToNumber)(a),f=(0,s.getDeleGatorEnvironment)(m),g=f.DelegationManager,v=function(e,t){const r=e.call("AppStateController:getState"),n=r.enforcedSimulationsSlippage;return r.enforcedSimulationsSlippageForTransactions[t]??n}(e,t.id),y=function({accountAddress:e,environment:t,simulationData:r,slippage:o}){const a=function(e,t,r,o){const a=(0,s.createCaveatBuilder)(t),{nativeBalanceChange:i,tokenBalanceChanges:c=[]}=r;if(i){const{difference:t,isDecrease:r}=i,n=d(t,o,r);l("Caveat - Native Balance Change",{enforceDecrease:r,recipient:e,delta:BigInt(t),slippage:o,deltaWithSlippage:n}),a.addCaveat("nativeBalanceChange",r,e,n)}for(const t of c){const{difference:r,isDecrease:s,address:i,standard:c,id:u}=t,h=BigInt(r),p=d(r,o,s),m=u?BigInt(u):0n;switch(l("Caveat - Token Balance Change",{enforceDecrease:s,token:i,recipient:e,delta:h,slippage:o,deltaWithSlippage:p}),c){case n.SimulationTokenStandard.erc20:a.addCaveat("erc20BalanceChange",s,i,e,p);break;case n.SimulationTokenStandard.erc721:a.addCaveat("erc721BalanceChange",s,i,e,h);break;case n.SimulationTokenStandard.erc1155:a.addCaveat("erc1155BalanceChange",s,i,e,m,h);break;default:l("Unsupported token standard",c)}}return a.build()}(e,t,r,o);l("Caveats",a);const i=(0,s.createDelegation)({from:e,to:e,caveats:a});return i}({accountAddress:p,environment:f,simulationData:u,slippage:v});l("Delegation",y);let C=c;r&&(l("Signing delegation"),C=await e.call("DelegationController:signDelegation",{chainId:a,delegation:y}));l("Delegation signature",C);const b=function({transaction:e,delegation:t}){const r=[[t]],n=[s.SINGLE_DEFAULT_MODE],o=[[{target:e.to,callData:e.data??"0x",value:e.value?BigInt(e.value):0n}]];return(0,i.encodeRedeemDelegations)({delegations:r,modes:n,executions:o})}({transaction:h,delegation:{...y,signature:C}});return l("Data",b),{updateTransaction:e=>{e.txParams.data=b,e.txParams.to=g,e.txParams.value="0x0"}}};var n=e("@metamask/transaction-controller"),o=e("@metamask/utils"),a=e("bignumber.js"),s=e("../../../../../shared/lib/delegation"),i=e("../../../../../shared/lib/delegation/delegation");const l=(0,o.createProjectLogger)("enforced-simulations"),c="0x2261a7810ed3e9cde160895909e138e2f68adb2da86fcf98ea0840701df107721fb369ab9b52550ea98832c09f8185284aca4c94bd345e867a4f4461868dd7751b";function d(e,t,r){const n=new a.BigNumber(e),o=(100+(r?t:-t))/100;return BigInt(n.mul(o).toFixed(0))}}}},{package:"$root$",file:"app/scripts/lib/transaction/containers/enforced-simulations.ts"}],[315,{"./enforced-simulations":314,"@metamask/transaction-controller":2862,"@metamask/utils":2908,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.applyTransactionContainers=l,r.applyTransactionContainersExisting=async function({containerTypes:e,transactionId:t,messenger:r,updateEditableParams:n}){const a=(await r.call("TransactionController:getState")).transactions.find(e=>e.id===t);if(!a)throw new Error(`Transaction with ID ${t} not found.`);const{updateTransaction:s}=await l({isApproved:!1,messenger:r,transactionMeta:a,types:e}),i=(0,o.cloneDeep)(a);s(i),n(t,{containerTypes:e,data:i.txParams.data,gas:i.txParams.gas,to:i.txParams.to,value:i.txParams.value})};var n=e("@metamask/transaction-controller"),o=e("lodash"),a=e("@metamask/utils"),s=e("./enforced-simulations");const i=(0,a.createProjectLogger)("transaction-containers");async function l({isApproved:e,messenger:t,transactionMeta:r,types:a}){const{txParamsOriginal:l}=r,c=(0,o.cloneDeep)(r);if(l&&(c.txParams=(0,o.cloneDeep)(l)),a.includes(n.TransactionContainerType.EnforcedSimulations)){const{updateTransaction:r}=await(0,s.enforceSimulations)({messenger:t,transactionMeta:c,useRealSignature:e});r(c)}let d;if(!e){const{gas:e}=await t.call("TransactionController:estimateGas",c.txParams,c.networkClientId,{ignoreDelegationSignatures:!0});i("Estimated gas",e),d=e}return{updateTransaction:e=>{e.containerTypes=a,e.txParams=(0,o.cloneDeep)(c.txParams),d&&(e.txParams.gas=d)}}}}}},{package:"$root$",file:"app/scripts/lib/transaction/containers/util.ts"}],[316,{"../../../../../shared/lib/four-byte":5868,"@ethersproject/abi":674,"@metamask/utils":2908,"ethereumjs-util":4319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeTransactionDataWithFourByte=async function(e){const t=e.slice(0,10),r=await(0,s.getMethodFrom4Byte)(t);if(!r)return undefined;const a=r.split("(")[0],u=function(e){let t=e.slice(e.indexOf("(")+1,-1);const r=[];for(;t.includes("(");){const e=d(t);if(!e)break;r.push(e.value),t=`${t.slice(0,e.start)}${r.length-1}#${t.slice(e.end+1)}`}return c(t,r)}(r);i("Generated inputs",u);const h=(0,n.addHexPrefix)(e.slice(10)),p=o.Interface.getAbiCoder().decode(u,h),m=u.map((e,t)=>l(e,t,p));return{name:a,params:m}};var n=e("ethereumjs-util"),o=e("@ethersproject/abi"),a=e("@metamask/utils"),s=e("../../../../../shared/lib/four-byte");const i=(0,a.createProjectLogger)("four-byte");function l(e,t,r){var n;const o=r[t],{type:a,name:s}=e;let i=null===(n=e.components)||void 0===n?void 0:n.map((e,t)=>l(e,t,o));if(a.endsWith("[]")){const t=a.slice(0,-2);i=o.map((r,n)=>{const a=`Item ${n+1}`;return l({...e,name:a,type:t},n,o)})}return{name:s,type:a,value:o,children:i}}function c(e,t){return e.split(",").map(e=>{const r=e.split("#"),n=r.length>1?parseInt(r[0],10):undefined;return{type:n===undefined?e:`tuple${r[1]??""}`,components:n===undefined?undefined:c(t[n],t)}})}function d(e){let t=-1;for(let r=0;r<e.length;r++)if("("===e[r])t=r;else if(")"===e[r]&&-1!==t)return{start:t,end:r,value:e.slice(t+1,r)};return undefined}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/four-byte.ts"}],[317,{"ethereumjs-util":4319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getContractProxyAddress=async function(e,t){const r=(await Promise.all(o.map(r=>t.request({method:"eth_getStorageAt",params:[e,r,"latest"]})))).find(e=>(0,n.stripHexPrefix)(e)!==a);return r&&(0,n.addHexPrefix)(r.slice(26))};var n=e("ethereumjs-util");const o=["0x7050c9e0f4ca769c69bd3a8ef740bc37934f8e2c036e5a723fd8ee048ed3f8c3","0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc"],a="0".padEnd(64,"0")}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/proxy.ts"}],[318,{"@ethersproject/abi":674,"@metamask/utils":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeTransactionDataWithSourcify=async function(e,t,r){var i,l;const c=await async function(e,t){var r;const n=await async function(e,t){const r=parseInt(t,16),n=await fetch(`https://sourcify.dev/server/files/any/${r}/${e}`);if(!n.ok)throw new Error("Failed to fetch Sourcify files");return n.json()}(e,t),o=null===(r=n.files)||void 0===r?void 0:r.find(e=>e.name.includes("metadata.json"));if(!o)throw new Error("Metadata not found");return JSON.parse(o.content)}(t,r);o("Retrieved Sourcify metadata",{contractAddress:t,chainId:r,metadata:c});const{abi:d}=c.output,u=new n.Interface(d),h=e.slice(0,10);let p;try{p=u.getFunction(h)}catch(e){}if(!p)return o("Failed to find function in ABI",h,d),undefined;const{name:m,inputs:f}=p,g=s(m,f),v=null===(i=c.output.userdoc)||void 0===i?void 0:i.methods[g],y=null===(l=c.output.devdoc)||void 0===l?void 0:l.methods[g],C=(null==v?void 0:v.notice)??(null==y?void 0:y.details);o("Extracted NatSpec",{signature:g,userDoc:v,devDoc:y});const b=u.decodeFunctionData(h,e),w=f.map((e,t)=>a(e,t,b,v,y));return{name:m,description:C,params:w}};var n=e("@ethersproject/abi");const o=(0,e("@metamask/utils").createProjectLogger)("sourcify");function a(e,t,r,n,o){var s,i;const{name:l,type:c,components:d}=e,u=(null==n||null===(s=n.params)||void 0===s?void 0:s[l])??(null==o||null===(i=o.params)||void 0===i?void 0:i[l]),h=r[t];let p=null==d?void 0:d.map((e,t)=>a(e,t,h,{},{}));if(c.endsWith("[]")){const t=c.slice(0,-2);p=h.map((r,n)=>{const o=`Item ${n+1}`;return a({...e,name:o,type:t},n,h,{},{})})}return{name:l,description:u,type:c,value:h,children:p}}function s(e,t){return`${e??""}(${t.map(e=>{var t;return null!==(t=e.components)&&void 0!==t&&t.length?`${s(undefined,e.components)}${e.type.endsWith("[]")?"[]":""}`:e.type}).join(",")})`}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/sourcify.ts"}],[319,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UNISWAP_ROUTER_COMMANDS=void 0;r.UNISWAP_ROUTER_COMMANDS={0:{name:"V3_SWAP_EXACT_IN",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of input tokens for the trade",name:"amountIn"},{type:"uint256",description:"The minimum amount of output tokens the user wants",name:"amountOutMin"},{type:"bytes",description:"The UniswapV3 encoded path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},1:{name:"V3_SWAP_EXACT_OUT",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of output tokens to receive",name:"amountOut"},{type:"uint256",description:"The maximum number of input tokens that should be spent",name:"amountInMax"},{type:"bytes",description:"The UniswapV3 encoded path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},2:{name:"PERMIT2_TRANSFER_FROM",params:[{type:"address",description:"The token to fetch from Permit2",name:"token"},{type:"address",description:"The recipient of the tokens fetched",name:"recipient"},{type:"uint256",description:"The amount of token to fetch",name:"amount"}]},3:{name:"PERMIT2_PERMIT_BATCH",params:[{type:"bytes",description:"A PermitBatch struct outlining all of the Permit2 permits to execute.",name:"batch"},{type:"bytes",description:"The signature to provide to Permit2",name:"data"}]},4:{name:"SWEEP",params:[{type:"address",description:"The ERC20 token to sweep (or Constants.ETH for ETH)",name:"token"},{type:"address",description:"The recipient of the sweep",name:"recipient"},{type:"uint256",description:"The minimum required tokens to receive from the sweep",name:"amountMin"}]},5:{name:"TRANSFER",params:[{type:"address",description:"The ERC20 token to transfer (or Constants.ETH for ETH)",name:"token"},{type:"address",description:"The recipient of the transfer",name:"recipient"},{type:"uint256",description:"The amount to transfer",name:"value"}]},6:{name:"PAY_PORTION",params:[{type:"address",description:"The ERC20 token to transfer (or Constants.ETH for ETH)",name:"token"},{type:"address",description:"The recipient of the transfer",name:"recipient"},{type:"uint256",description:"In basis points, the percentage of the contractâ€™s balance to transfer",name:"bips"}]},8:{name:"V2_SWAP_EXACT_IN",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of input tokens for the trade",name:"amountIn"},{type:"uint256",description:"The minimum amount of output tokens the user wants",name:"amountOutMin"},{type:"address[]",description:"The UniswapV2 token path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},9:{name:"V2_SWAP_EXACT_OUT",params:[{type:"address",description:"The recipient of the output of the trade",name:"recipient"},{type:"uint256",description:"The amount of output tokens to receive",name:"amountOut"},{type:"uint256",description:"The maximum number of input tokens that should be spent",name:"amountInMax"},{type:"address[]",description:"The UniswapV2 token path to trade along",name:"path"},{type:"bool",description:"A flag for whether the input tokens should come from the msg.sender (through Permit2) or whether the funds are already in the UniversalRouter",name:"payerIsUser"}]},10:{name:"PERMIT2_PERMIT",params:[{type:"bytes",description:"A PermitSingle struct outlining the Permit2 permit to execute",name:"permitSingle"},{type:"bytes",description:"The signature to provide to Permit2",name:"signature"}]},11:{name:"WRAP_ETH",params:[{type:"address",description:"The recipient of the WETH",name:"recipient"},{type:"uint256",description:"The amount of ETH to wrap",name:"amountMin"}]},12:{name:"UNWRAP_WETH",params:[{type:"address",description:"The recipient of the ETH",name:"recipient"},{type:"uint256",description:"The minimum required ETH to receive from the unwrapping",name:"amountMin"}]},13:{name:"PERMIT2_TRANSFER_FROM_BATCH",params:[{type:"bytes",description:"An array of AllowanceTransferDetails structs that each describe a Permit2 transfer to perform",name:"batchDetails"}]},16:{name:"SEAPORT",params:[{type:"uint256",description:"The ETH value to forward to the Seaport contract",name:"value"},{type:"bytes",description:"The calldata to use to call the Seaport contract",name:"data"}]},17:{name:"LOOKS_RARE_721",params:[{type:"uint256",description:"The ETH value to forward to the LooksRare contract",name:"value"},{type:"bytes",description:"The calldata to use to call the LooksRare contract",name:"data"},{type:"address",description:"The recipient of the ERC721",name:"recipient"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},18:{name:"NFTX",params:[{type:"uint256",description:"The ETH value to forward to the NFTX contract",name:"value"},{type:"bytes",description:"The calldata to use to call the NFTX contract",name:"data"}]},19:{name:"CRYPTOPUNKS",params:[{type:"uint256",description:"The PunkID to purchase",name:"punkId"},{type:"address",description:"The recipient for the cryptopunk",name:"recipient"},{type:"uint256",description:"The ETH value to forward to the Cryptopunks contract",name:"value"}]},20:{name:"LOOKS_RARE_1155",params:[{type:"uint256",description:"The ETH value to forward to the LooksRare contract",name:"value"},{type:"bytes",description:"The calldata to use to call the LooksRare contract",name:"data"},{type:"address",description:"The recipient of the ERC1155",name:"recipient"},{type:"address",description:"The ERC1155 token address",name:"token"},{type:"uint256",description:"The ID of the ERC1155",name:"id"},{type:"uint256",description:"The amount of the ERC1155 to transfer",name:"amount"}]},21:{name:"OWNER_CHECK_721",params:[{type:"address",description:"The required owner of the ERC721",name:"owner"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},22:{name:"OWNER_CHECK_1155",params:[{type:"address",description:"The required owner of the ERC1155",name:"owner"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC1155",name:"id"},{type:"uint256",description:"The minimum required amount of the ERC1155",name:"minBalance"}]},23:{name:"SWEEP_ERC721",params:[{type:"address",description:"The ERC721 token address to transfer",name:"token"},{type:"address",description:"The recipient of the transfer",name:"recipient"},{type:"uint256",description:"The token ID to transfer",name:"id"}]},24:{name:"X2Y2_721",params:[{type:"uint256",description:"The ETH value to forward to the X2Y2 contract",name:"value"},{type:"bytes",description:"The calldata to use to call the X2Y2 contract",name:"data"},{type:"address",description:"The recipient of the ERC721",name:"recipient"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},25:{name:"SUDOSWAP",params:[{type:"uint256",description:"The ETH value to forward to the Sudoswap contract",name:"value"},{type:"bytes",description:"The calldata to use to call the Sudoswap contract",name:"data"}]},26:{name:"NFT20",params:[{type:"uint256",description:"The ETH value to forward to the NFT20 contract",name:"value"},{type:"bytes",description:"The calldata to use to call the NFT20 contract",name:"data"}]},27:{name:"X2Y2_1155",params:[{type:"uint256",description:"The ETH value to forward to the X2Y2 contract",name:"value"},{type:"bytes",description:"The calldata to use to call the X2Y2 contract",name:"data"},{type:"address",description:"The recipient of the ERC1155",name:"recipient"},{type:"address",description:"The ERC1155 token address",name:"token"},{type:"uint256",description:"The ID of the ERC1155",name:"id"},{type:"uint256",description:"The amount of the ERC1155 to transfer",name:"amount"}]},28:{name:"FOUNDATION",params:[{type:"uint256",description:"The ETH value to forward to the Foundation contract",name:"value"},{type:"bytes",description:"The calldata to use to call the Foundation contract",name:"data"},{type:"address",description:"The recipient of the ERC721",name:"recipient"},{type:"address",description:"The ERC721 token address",name:"token"},{type:"uint256",description:"The ID of the ERC721",name:"id"}]},29:{name:"SWEEP_ERC1155",params:[{type:"address",description:"The ERC1155 token address to sweep",name:"token"},{type:"address",description:"The recipient of the sweep",name:"recipient"},{type:"uint256",description:"The token ID to sweep",name:"id"},{type:"uint256",description:"The minimum required tokens to receive from the sweep",name:"amount"}]}}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/uniswap-commands.ts"}],[32,{"../../controllers/encryption-public-key":203},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyControllerInit=void 0;var n,o=(n=e("../../controllers/encryption-public-key"))&&n.__esModule?n:{default:n};r.EncryptionPublicKeyControllerInit=({controllerMessenger:e,initMessenger:t,getController:r,getUIState:n})=>{const a=r("EncryptionPublicKeyManager"),s=r("KeyringController");return{persistedStateKey:null,memStateKey:null,controller:new o.default({messenger:e,manager:a,getState:n,getAccountKeyringType:e=>s.getAccountKeyringType(e),getEncryptionPublicKey:e=>t.call("KeyringController:getEncryptionPublicKey",e),metricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/encryption-public-key-controller-init.ts"}],[320,{"../../../../../shared/constants/network":5800,"./uniswap-commands":319,"@ethersproject/abi":674,"ethereumjs-util":4319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UNISWAP_UNIVERSAL_ROUTER_ADDRESSES=void 0,r.decodeUniswapRouterTransactionData=function({transactionData:e,contractAddress:t,chainId:r}){const a=c[r];if(null==a||!a.map(e=>e.toLowerCase()).includes(t.toLowerCase()))return undefined;const u=new n.Interface(d);let h;try{h=u.parseTransaction({data:e})}catch(e){return undefined}const p=h.args.commands,m=h.args.inputs;return p.slice(2).match(/.{1,2}/gu).map((e,t)=>function(e,t){const r=parseInt(e,16),a=31&r,c=s.UNISWAP_ROUTER_COMMANDS[String(a)];if(!c)return undefined;const d=c.params.map(e=>e.type),u=n.Interface.getAbiCoder().decode(d,t),{name:h}=c,p=c.params.map((e,t)=>{const{name:r,type:n,description:a}=e,s=u[t];return{name:r,type:n,value:"path"===r?function(e){const t=[];let r=(0,o.stripHexPrefix)(e),n={},a=!0;for(;r.length;){if(a){const e=(0,o.addHexPrefix)(r.slice(0,i));n.firstAddress?(n.secondAddress=e,t.push(n),n={firstAddress:e}):n.firstAddress=e,r=r.slice(i)}else n.tickSpacing=parseInt(r.slice(0,l),16),r=r.slice(l);a=!a}return t}(s):s,description:a}});return{name:h,params:p}}(e,m[t])).filter(e=>e!==undefined)};var n=e("@ethersproject/abi"),o=e("ethereumjs-util"),a=e("../../../../../shared/constants/network"),s=e("./uniswap-commands");const i=40,l=6,c=r.UNISWAP_UNIVERSAL_ROUTER_ADDRESSES={[a.CHAIN_IDS.ARBITRUM]:["0x4C60051384bd2d3C01bfc845Cf5F4b44bcbE9de5","0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0x5E325eDA8064b456f4781070C0738d849c824258"],[a.CHAIN_IDS.AVALANCHE]:["0x82635AF6146972cD6601161c4472ffe97237D292","0x4Dae2f939ACf50408e13d58534Ff8c2776d45265"],[a.CHAIN_IDS.BASE]:["0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD"],[a.CHAIN_IDS.BSC]:["0x5Dc88340E1c5c6366864Ee415d6034cadd1A9897","0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0x4Dae2f939ACf50408e13d58534Ff8c2776d45265"],[a.CHAIN_IDS.MAINNET]:["0xEf1c6E67703c7BD7107eed8303Fbe6EC2554BF6B","0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD"],[a.CHAIN_IDS.OPTIMISM]:["0xb555edF5dcF85f42cEeF1f3630a52A108E55A654","0xeC8B0F7Ffe3ae75d7FfAb09429e3675bb63503e4","0xCb1355ff08Ab38bBCE60111F1bb2B784bE25D7e8"],[a.CHAIN_IDS.POLYGON]:["0x4C60051384bd2d3C01bfc845Cf5F4b44bcbE9de5","0x643770E279d5D0733F21d6DC03A8efbABf3255B4","0xec7BE89e9d109e7e3Fec59c222CF297125FEFda2"],[a.CHAIN_IDS.SEPOLIA]:["0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD"]},d=[{constant:!0,inputs:[{name:"commands",type:"bytes"},{name:"inputs",type:"bytes[]"},{name:"deadline",type:"uint256"}],name:"execute",type:"function"},{constant:!0,inputs:[{name:"commands",type:"bytes"},{name:"inputs",type:"bytes[]"}],name:"execute",type:"function"}]}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/uniswap.ts"}],[321,{"../../../../../shared/types/transaction-decode":5928,"./four-byte":316,"./proxy":317,"./sourcify":318,"./uniswap":320,"@metamask/utils":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeTransactionData=async function({transactionData:e,contractAddress:t,chainId:r,provider:n}){c("Decoding transaction data",{transactionData:e,contractAddress:t,chainId:r});const u=(0,a.decodeUniswapRouterTransactionData)({transactionData:e,contractAddress:t,chainId:r});if(u)return c("Decoded with Uniswap commands",u),{data:d(u),source:o.DecodedTransactionDataSource.Uniswap};const h=await(0,i.getContractProxyAddress)(t,n);h&&c("Retrieved proxy implementation address",h);const p=h??t,m=(0,s.decodeTransactionDataWithSourcify)(e,p,r),f=(0,l.decodeTransactionDataWithFourByte)(e),[g,v]=await Promise.allSettled([m,f]);if("fulfilled"===g.status&&g.value)return c("Decoded data with Sourcify",g.value),{data:d([g.value]),source:o.DecodedTransactionDataSource.Sourcify};if(c("Failed to decode data with Sourcify",g),"fulfilled"===v.status&&v.value)return c("Decoded data with 4Byte",v.value),{data:d([v.value]),source:o.DecodedTransactionDataSource.FourByte};return c("Failed to decode data with 4Byte",v),undefined};var n=e("@metamask/utils"),o=e("../../../../../shared/types/transaction-decode"),a=e("./uniswap"),s=e("./sourcify"),i=e("./proxy"),l=e("./four-byte");const c=(0,n.createProjectLogger)("transaction-decode");function d(e){return e.map(e=>function(e){return{...e,params:e.params.map(e=>u(e))}}(e))}function u(e){var t;return{...e,value:h(e.value),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>u(e))}}function h(e){const t=e._hex;return t?BigInt(t).toString():e}}}},{package:"$root$",file:"app/scripts/lib/transaction/decode/util.ts"}],[3210,{"@metamask/eth-sig-util":1884,tslib:5687},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.transformTypedData=void 0;const n=e("tslib").__importStar(e("@metamask/eth-sig-util"));function o(e){switch(Object.prototype.toString.call(e)){case"[object Object]":{const t=Object.keys(e).map(t=>[t,o(e[t])]);return Object.fromEntries(t)}case"[object Array]":return e.map(e=>o(e));case"[object BigInt]":return e.toString();default:return e}}r.transformTypedData=(e,t)=>{if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");const r=n.SignTypedDataVersion.V4,{types:a,primaryType:s,domain:i,message:l}=n.TypedDataUtils.sanitizeData(e),c=n.TypedDataUtils.hashStruct("EIP712Domain",o(i),a,r).toString("hex");let d=null;return"EIP712Domain"!==s&&(d=n.TypedDataUtils.hashStruct(s,o(l),a,r).toString("hex")),Object.assign({domain_separator_hash:c,message_hash:d},e)},r.default=r.transformTypedData}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-plugin-ethereum",file:"node_modules/@trezor/connect-plugin-ethereum/lib/index.js"}],[322,{"../../../../../shared/lib/delegation":5864,"../../../../../shared/lib/delegation/caveatBuilder/exactExecutionBuilder":5855,"../../../../../shared/lib/delegation/caveatBuilder/limitedCallsBuilder":5857,"../../../../../shared/lib/delegation/caveatBuilder/specificActionERC20TransferBatchBuilder":5860,"../../../../../shared/lib/delegation/delegation":5861,"../transaction-relay":326,"@ethersproject/abi":674,"@metamask/metamask-eth-abis":2130,"@metamask/utils":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Delegation7702PublishHook=void 0;var n=e("@ethersproject/abi"),o=e("@metamask/metamask-eth-abis"),a=e("@metamask/utils"),s=e("../../../../../shared/lib/delegation"),i=e("../../../../../shared/lib/delegation/caveatBuilder/exactExecutionBuilder"),l=e("../../../../../shared/lib/delegation/caveatBuilder/limitedCallsBuilder"),c=e("../../../../../shared/lib/delegation/caveatBuilder/specificActionERC20TransferBatchBuilder"),d=e("../../../../../shared/lib/delegation/delegation"),u=e("../transaction-relay");function h(e,t,r){p(e,t),t.set(e,r)}function p(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(e,t){return e.get(g(e,t))}function f(e,t,r){return e.set(g(e,t),r),r}function g(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const v={transactionHash:undefined},y=(0,a.createProjectLogger)("delegation-7702-publish-hook");var C=new WeakMap,b=new WeakMap,w=new WeakSet;async function S(e,t){try{return await g(w,this,k).call(this,e,t)}catch(e){throw y("Error",e),e}}async function k(e,t){const{chainId:r,gasFeeTokens:n,selectedGasFeeToken:o,txParams:a}=e,{from:i}=a,l=(await m(C,this).call(this,{address:i,chainIds:[r]})).find(e=>e.chainId.toLowerCase()===r.toLowerCase());if(!(l&&(!l.delegationAddress||l.isSupported)))return y("Skipping as EIP-7702 is not supported",{from:i,chainId:r}),v;const{delegationAddress:c,upgradeContractAddress:h}=l,p=e.isGasFeeIncluded,f=Boolean(e.isGasFeeSponsored);if(!(o&&null!=n&&n.length||p||f))return y("Skipping as no selected gas fee token"),v;const b=p||f?undefined:null==n?void 0:n.find(e=>e.tokenAddress.toLowerCase()===(null==o?void 0:o.toLowerCase()));if(!b&&!p&&!f)throw new Error("Selected gas fee token not found");const S=(0,s.getDeleGatorEnvironment)(parseInt(e.chainId,16)),k=S.DelegationManager,E=!p&&!e.isGasFeeSponsored;if(E&&(!b||b===undefined))throw new Error("Gas fee token not found");const M=await g(w,this,T).call(this,S,e,b,E),I=[E?s.BATCH_DEFAULT_MODE:s.SINGLE_DEFAULT_MODE],_=g(w,this,P).call(this,e,b,E),N=(0,d.encodeRedeemDelegations)({delegations:M,modes:I,executions:_}),R={chainId:r,data:N,to:k};c||(R.authorizationList=await g(w,this,A).call(this,e,h)),y("Relay request",R);const{uuid:O}=await(0,u.submitRelayTransaction)(R),{transactionHash:D,status:j}=await(0,u.waitForRelayResult)({chainId:r,uuid:O,interval:1e3});if(j!==u.RelayStatus.Success)throw new Error(`Transaction relay error - ${j}`);return{transactionHash:D}}async function T(e,t,r,n){const o=g(w,this,E).call(this,e,t,r,n);y("Signing delegation");const a=await m(b,this).call("DelegationController:signDelegation",{chainId:t.chainId,delegation:o});y("Delegation signature",a);return[[{...o,signature:a}]]}function P(e,t,r){const{txParams:n}=e,{data:o,to:a,value:s}=n,i=g(w,this,N).call(this,o),l={target:a,value:BigInt(s??"0x0"),callData:i};if(!r)return[[l]];if(!t)throw new Error("Selected gas fee token not found");return[[l,{target:t.tokenAddress,value:BigInt("0x0"),callData:g(w,this,I).call(this,t.recipient,t.amount)}]]}function E(e,t,r,n){const o=g(w,this,M).call(this,e,t,r,n);y("Caveats",o);const a=(0,s.createDelegation)({from:t.txParams.from,to:d.ANY_BENEFICIARY,caveats:o});return y("Delegation",a),a}function M(e,t,r,n){const o=(0,s.createCaveatBuilder)(e),{txParams:a}=t,{to:d,value:u,data:h}=a,p=g(w,this,N).call(this,h);if(n&&r!==undefined){const{tokenAddress:e,recipient:t,amount:n}=r;d!==undefined&&o.addCaveat(c.specificActionERC20TransferBatch,e,t,n,d,u??"0x0",p)}else d!==undefined&&o.addCaveat(i.exactExecution,d,u??"0x0",p);return o.addCaveat(l.limitedCalls,1),o.build()}async function A(e,t){const{chainId:r,txParams:n}=e,{from:o,nonce:a}=n;if(y("Including authorization as not upgraded"),!t)throw new Error("Upgrade contract address not found");const s=await m(b,this).call("KeyringController:signEip7702Authorization",{chainId:parseInt(r,16),contractAddress:t,from:o,nonce:parseInt(a,16)}),{r:i,s:l,yParity:c}=g(w,this,_).call(this,s);return y("Authorization signature",{authorizationSignature:s,r:i,s:l,yParity:c}),[{address:t,chainId:r,nonce:a,r:i,s:l,yParity:c}]}function I(e,t){return new n.Interface(o.abiERC20).encodeFunctionData("transfer",[e,t])}function _(e){return{r:e.slice(0,66),s:`0x${e.slice(66,130)}`,yParity:parseInt(e.slice(130,132),16)-27==0?"0x":"0x1"}}function N(e){if("string"!=typeof e||0===e.length)return"0x";const t="0x"===e.slice(0,2).toLowerCase(),r=e.toLowerCase(),n=t?`0x${r.slice(2)}`:`0x${r}`,o=n.slice(2);return 0===o.length?"0x":o.length%2!=0?g(w,this,N).call(this,`0x0${o}`):n}r.Delegation7702PublishHook=class{constructor({isAtomicBatchSupported:e,messenger:t}){var r,n;p(r=this,n=w),n.add(r),h(this,C,void 0),h(this,b,void 0),f(C,this,e),f(b,this,t)}getHook(){return g(w,this,S).bind(this)}}}}},{package:"$root$",file:"app/scripts/lib/transaction/hooks/delegation-7702-publish.ts"}],[323,{"../containers/util":315,"@metamask/controller-utils":1349,"@metamask/transaction-controller":2862,"@metamask/utils":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EnforceSimulationHook=void 0;e("@metamask/transaction-controller");var n=e("@metamask/utils");e("@metamask/controller-utils"),e("../containers/util");function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){return e.get(s(e,t))}function s(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const i=(0,n.createProjectLogger)("enforce-simulation-hook");var l=new WeakMap,c=new WeakSet;async function d(e,t){const{transactionMeta:r}=t,{isFinal:n}=e,{containerTypes:o,delegationAddress:s,id:c,origin:d,simulationData:u,txParamsOriginal:h}=r,p=a(l,this).call("AppStateController:getState");(null==p?void 0:p.enableEnforcedSimulationsForTransactions[c])??(null==p||p.enableEnforcedSimulations);return i("Skipping as enforced simulations are disabled"),{skipSimulation:!1}}r.EnforceSimulationHook=class{constructor({messenger:e}){var t,r;o(t=this,r=c),r.add(t),function(e,t,r){o(e,t),t.set(e,r)}(this,l,void 0),function(e,t,r){e.set(s(e,t),r)}(l,this,e)}getAfterSimulateHook(){return s(c,this,d).bind(this,{})}getBeforeSignHook(){return s(c,this,d).bind(this,{isFinal:!0})}}}}},{package:"$root$",file:"app/scripts/lib/transaction/hooks/enforce-simulation-hook.ts"}],[324,{"../../../../shared/constants/app":5781,"../../../../shared/constants/gas":5789,"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/transaction":5819,"../../../../shared/lib/confirmation.utils":5831,"../../../../shared/lib/transactions-controller-utils":5890,"../../../../shared/modules/Numeric":5895,"../../../../shared/modules/conversion.utils":5900,"../../../../shared/modules/gas.utils":5905,"../../../../shared/modules/metametrics":5908,"../../../../shared/modules/transaction.utils":5924,"../../../../ui/helpers/utils/metrics":7062,"../snap-keyring/metrics":301,"../util":332,"@metamask/transaction-controller":2862,"@metamask/utils":2908,"bignumber.js":3949,"ethereumjs-util":4319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleTransactionSubmitted=r.handleTransactionRejected=r.handleTransactionFailed=r.handleTransactionDropped=r.handleTransactionConfirmed=r.handleTransactionApproved=r.handleTransactionAdded=r.handlePostTransactionBalanceUpdate=r.createTransactionEventFragmentWithTxId=r.METRICS_STATUS_FAILED=void 0;var n=e("bignumber.js"),o=e("ethereumjs-util"),a=e("@metamask/transaction-controller"),s=e("@metamask/utils"),i=e("../../../../shared/constants/app"),l=e("../../../../shared/constants/gas"),c=e("../../../../shared/constants/metametrics"),d=e("../../../../shared/constants/transaction"),u=e("../../../../shared/lib/transactions-controller-utils"),h=e("../../../../shared/modules/conversion.utils"),p=e("../../../../shared/modules/metametrics"),m=e("../../../../shared/modules/transaction.utils"),f=e("../../../../ui/helpers/utils/metrics"),g=e("../snap-keyring/metrics"),v=e("../../../../shared/lib/confirmation.utils"),y=e("../../../../shared/modules/gas.utils"),C=e("../../../../shared/modules/Numeric"),b=e("../util");const w=(0,s.createProjectLogger)("transaction-metrics"),S=r.METRICS_STATUS_FAILED="failed on-chain",k=[a.TransactionType.bridge,a.TransactionType.bridgeApproval,a.TransactionType.contractInteraction,a.TransactionType.tokenMethodApprove,a.TransactionType.tokenMethodIncreaseAllowance,a.TransactionType.tokenMethodSafeTransferFrom,a.TransactionType.tokenMethodSetApprovalForAll,a.TransactionType.tokenMethodTransfer,a.TransactionType.tokenMethodTransferFrom,a.TransactionType.swap,a.TransactionType.swapAndSend,a.TransactionType.swapApproval];var T=function(e){return e.swap="mm_swap",e.bridge="mm_bridge",e}(T||{});r.handleTransactionAdded=async(e,t)=>{if(!t.transactionMeta)return;const{properties:r,sensitiveProperties:n}=await A({transactionEventPayload:t,transactionMetricsRequest:e});P({eventName:d.TransactionMetaMetricsEvent.added,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:r,sensitiveProperties:n}})};r.handleTransactionApproved=async(e,t)=>{t.transactionMeta&&await E({eventName:d.TransactionMetaMetricsEvent.approved,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionFailed=async(e,t)=>{if(!t.transactionMeta)return;const r={};t.error&&(r.error=t.error),await E({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:r,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionConfirmed=async(e,t)=>{if(0===Object.keys(t).length)return;const r={},n={...t},{txReceipt:o}=n;r.gas_used=null==o?void 0:o.gasUsed,r.block_number=(null==o?void 0:o.blockNumber)&&(0,h.hexToDecimal)(o.blockNumber);const{submittedTime:a,blockTimestamp:s}=n;a&&(r.completion_time=function(e){return Math.round((Date.now()-e)/1e3).toString()}(a)),a&&s&&(r.completion_time_onchain=function(e,t){const r=2,n=Number((0,h.hexToDecimal)(t))-e/1e3;return(Math.round(n*10**r)/10**r).toString()}(a,s)),"0x0"===(null==o?void 0:o.status)&&(r.status=S),await E({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:r,transactionEventPayload:{actionId:n.actionId,transactionMeta:n},transactionMetricsRequest:e})};r.handleTransactionDropped=async(e,t)=>{if(!t.transactionMeta)return;await E({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:{dropped:!0},transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionRejected=async(e,t)=>{t.transactionMeta&&await E({eventName:d.TransactionMetaMetricsEvent.rejected,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionSubmitted=async(e,t)=>{if(!t.transactionMeta)return;const{properties:r,sensitiveProperties:n}=await A({transactionEventPayload:t,transactionMetricsRequest:e});P({eventName:d.TransactionMetaMetricsEvent.submitted,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:r,sensitiveProperties:n}})};r.createTransactionEventFragmentWithTxId=async(e,{transactionId:t,actionId:r})=>{const n={...e.getTransaction(t),actionId:r},{properties:o,sensitiveProperties:a}=await A({transactionEventPayload:{transactionMeta:n},transactionMetricsRequest:e});P({eventName:d.TransactionMetaMetricsEvent.approved,transactionEventPayload:{actionId:n.actionId,transactionMeta:n},transactionMetricsRequest:e,payload:{properties:o,sensitiveProperties:a}})};function P({eventName:e,transactionEventPayload:{transactionMeta:t,actionId:r},transactionMetricsRequest:n,payload:o}){if(function(e,t,r){const n=M(t,r.id);return void 0!==e(n)}(n.getEventFragmentById,e,t)&&e!==d.TransactionMetaMetricsEvent.submitted)return;const a=M(e,t.id);switch(e){case d.TransactionMetaMetricsEvent.added:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,initialEvent:d.TransactionMetaMetricsEvent.added,successEvent:d.TransactionMetaMetricsEvent.approved,failureEvent:d.TransactionMetaMetricsEvent.rejected,properties:o.properties,sensitiveProperties:o.sensitiveProperties,actionId:r,uniqueIdentifier:a,persist:!0});break;case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.rejected:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,successEvent:d.TransactionMetaMetricsEvent.approved,failureEvent:d.TransactionMetaMetricsEvent.rejected,properties:o.properties,sensitiveProperties:o.sensitiveProperties,actionId:r,uniqueIdentifier:a,persist:!0});break;case d.TransactionMetaMetricsEvent.submitted:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,initialEvent:d.TransactionMetaMetricsEvent.submitted,successEvent:d.TransactionMetaMetricsEvent.finalized,properties:o.properties,sensitiveProperties:o.sensitiveProperties,actionId:r,uniqueIdentifier:a,persist:!0});break;case d.TransactionMetaMetricsEvent.finalized:n.createEventFragment({category:c.MetaMetricsEventCategory.Transactions,successEvent:d.TransactionMetaMetricsEvent.finalized,properties:o.properties,sensitiveProperties:o.sensitiveProperties,actionId:r,uniqueIdentifier:a,persist:!0})}}async function E({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,extraParams:n={}}){const{properties:o,sensitiveProperties:a}=await A({transactionEventPayload:t,transactionMetricsRequest:r,extraParams:n});P({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,payload:{properties:o,sensitiveProperties:a}}),function({eventName:e,transactionEventPayload:{transactionMeta:t},transactionMetricsRequest:r,payload:n}){const o=M(e,t.id);switch(e){case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.rejected:case d.TransactionMetaMetricsEvent.finalized:r.updateEventFragment(o,{properties:n.properties,sensitiveProperties:n.sensitiveProperties})}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,payload:{properties:o,sensitiveProperties:a}}),function({eventName:e,transactionMetricsRequest:t,transactionEventPayload:{transactionMeta:r}}){const n=M(e,r.id);switch(e){case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.finalized:t.finalizeEventFragment(n);break;case d.TransactionMetaMetricsEvent.rejected:t.finalizeEventFragment(n,{abandoned:!0})}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r})}function M(e,t){return`transaction-${e===d.TransactionMetaMetricsEvent.finalized||e===d.TransactionMetaMetricsEvent.submitted?"submitted":"added"}-${t}`}async function A({transactionEventPayload:{transactionMeta:e},transactionMetricsRequest:t,extraParams:r={}}){var S;const{type:T,time:P,status:E,chainId:M,origin:A,txParams:{gasPrice:_,gas:N,maxFeePerGas:R,maxPriorityFeePerGas:O,estimateSuggested:D,estimateUsed:j},defaultGasEstimates:F,originalType:x,replacedById:B,customTokenAmount:L,dappProposedTokenAmount:$,currentTokenBalance:U,originalApprovalAmount:K,finalApprovalAmount:H,securityProviderResponse:q,simulationFails:V,id:G,userFeeLevel:W}=e,z=A===i.ORIGIN_METAMASK?"user":"dapp",Q="dappSuggested"===W?"dapp_proposed":W,{assetType:Y,tokenStandard:J}=await(0,m.determineTransactionAssetType)(e,t.provider,t.getTokenStandardAndDetails);let X;if(e.txParams.data){const r=await t.getMethodData(e.txParams.data);X=null==r?void 0:r.name}const Z={};if((0,m.isEIP1559Transaction)(e)?(Z.max_fee_per_gas=R,Z.max_priority_fee_per_gas=O):(Z.gas_price=_,Z.default_estimate=c.MetaMetricsEventTransactionEstimateType.DefaultEstimate),F){var ee,te;const{estimateType:r}=F;if(r){var re,ne;Z.default_estimate=r===l.PriorityLevels.dAppSuggested?c.MetaMetricsEventTransactionEstimateType.DappProposed:r;let n=null===(re=e.defaultGasEstimates)||void 0===re?void 0:re.maxFeePerGas,o=null===(ne=e.defaultGasEstimates)||void 0===ne?void 0:ne.maxPriorityFeePerGas;if([l.GasRecommendations.low,l.GasRecommendations.medium,l.GasRecommendations.high].includes(r)){var oe,ae;const{gasFeeEstimates:e}=await t.getEIP1559GasFeeEstimates();var se,ie;if(null!=e&&null!==(oe=e[r])&&void 0!==oe&&oe.suggestedMaxFeePerGas)n=null===(se=e[r])||void 0===se?void 0:se.suggestedMaxFeePerGas,Z.default_max_fee_per_gas=n;if(null!=e&&null!==(ae=e[r])&&void 0!==ae&&ae.suggestedMaxPriorityFeePerGas)o=null===(ie=e[r])||void 0===ie?void 0:ie.suggestedMaxPriorityFeePerGas,Z.default_max_priority_fee_per_gas=o}}null!==(ee=e.defaultGasEstimates)&&void 0!==ee&&ee.gas&&(Z.default_gas=e.defaultGasEstimates.gas),null!==(te=e.defaultGasEstimates)&&void 0!==te&&te.gasPrice&&(Z.default_gas_price=e.defaultGasEstimates.gasPrice)}D&&(Z.estimate_suggested=D),j&&(Z.estimate_used=j),null!=r&&r.gas_used&&(Z.gas_used=r.gas_used);const le=function(e){const t={};for(const r in e)(0,o.isHexString)(e[r])?t[r]=(0,h.hexWEIToDecGWEI)(e[r]):t[r]=e[r];return t}(Z);let ce="0";e.txParams.maxFeePerGas&&(ce="2");const de="Approve";let ue,he,pe,me,fe,ge;const{transactionType:ve,isContractInteraction:ye}=function(e,t){const r=e&&k.includes(e);if([a.TransactionType.swapAndSend,a.TransactionType.cancel,a.TransactionType.deployContract,a.TransactionType.gasPayment,a.TransactionType.batch].includes(e))return{transactionType:e,isContractInteraction:r};if(e===a.TransactionType.retry&&t)return{transactionType:t,isContractInteraction:r};if(r){const t=I(e);return t?{transactionType:t,isContractInteraction:!0}:{transactionType:a.TransactionType.contractInteraction,isContractInteraction:!0}}return{transactionType:a.TransactionType.simpleSend,isContractInteraction:!1}}(T,x);var Ce,be;ye&&(he=X,fe=null===(Ce=e.txParams)||void 0===Ce?void 0:Ce.to,ge=null===(be=e.txParams)||void 0===be||null===(be=be.data)||void 0===be?void 0:be.slice(0,10),he===de&&J===d.TokenStandard.ERC20&&("0"===$||"0"===L?ue=d.TransactionApprovalAmountType.revoke:L&&L!==$?ue=d.TransactionApprovalAmountType.custom:$&&(ue=d.TransactionApprovalAmountType.dappProposed),pe=function(e,t,r){if(e===d.TransactionApprovalAmountType.custom&&t&&r)return`${new n.BigNumber(t,10).div(r,10).times(100).round(2)}`;return null}(ue,K,H),me=function(e,t,r){if((e===d.TransactionApprovalAmountType.custom||e===d.TransactionApprovalAmountType.dappProposed)&&t&&r)return`${new n.BigNumber(t,16).div(r,10).times(100).round(2)}`;return null}(ue,$,U)));const we=t.getTransaction(B),Se={RETRY:a.TransactionType.retry,CANCEL:a.TransactionType.cancel,SAME_NONCE:"other"};let ke;null!=r&&r.dropped&&(ke=Se.SAME_NONCE,(null==we?void 0:we.type)===a.TransactionType.cancel?ke=Se.CANCEL:(null==we?void 0:we.type)===a.TransactionType.retry&&(ke=Se.RETRY));const Te=[];let Pe=null;1===(null==q?void 0:q.flagAsDangerous)?Te.push(c.MetaMetricsEventUiCustomization.FlaggedAsMalicious):2===(null==q?void 0:q.flagAsDangerous)&&Te.push(c.MetaMetricsEventUiCustomization.FlaggedAsSafetyUnknown);const Ee=(0,f.getBlockaidMetricsProps)(e);(null==Ee||null===(S=Ee.ui_customizations)||void 0===S?void 0:S.length)>0&&Te.push(...Ee.ui_customizations),V&&Te.push(c.MetaMetricsEventUiCustomization.GasEstimationFailed);(0,v.shouldUseRedesignForTransactions)({transactionMetadataType:e.type})&&(Te.push(c.MetaMetricsEventUiCustomization.RedesignedConfirmation),Pe=t.getIsConfirmationAdvancedDetailsOpen());const Me=(0,p.getSmartTransactionMetricsProperties)(t,e),Ae=(0,f.getSwapAndSendMetricsProps)(e),Ie={hd_entropy_index:t.getHDEntropyIndex()};let _e;try{_e=await t.getAccountType(t.getSelectedAddress())}catch(e){_e="error",w("Error getting account type for transaction metrics:",e)}let Ne={chain_id:M,referrer:A,source:z,status:E,network:`${parseInt(M,16)}`,eip_1559_version:ce,gas_edit_type:"none",gas_edit_attempted:"none",gas_estimation_failed:Boolean(V),account_type:_e,device_model:await t.getDeviceModel(t.getSelectedAddress()),asset_type:Y,token_standard:J,transaction_type:ve,transaction_speed_up:T===a.TransactionType.retry,transaction_internal_id:G,gas_fee_selected:Q,...Ee,ui_customizations:Te.length>0?Te:null,transaction_advanced_view:Pe,transaction_contract_method:he?[he]:[],...Me,...Ae,...Ie};const Re=await(0,g.getSnapAndHardwareInfoForMetrics)(t.getAccountType,t.getDeviceModel,t.getHardwareTypeForMetric,t.snapAndHardwareMessenger);var Oe,De;(Object.assign(Ne,Re),he===de||I(T))&&(Ne={...Ne,simulation_receiving_assets_total_value:Ne.simulation_receiving_assets_total_value??(null==e||null===(Oe=e.assetsFiatValues)||void 0===Oe?void 0:Oe.receiving),simulation_sending_assets_total_value:Ne.simulation_sending_assets_total_value??(null==e||null===(De=e.assetsFiatValues)||void 0===De?void 0:De.sending),transaction_approval_amount_type:ue});let je={transaction_envelope_type:(0,m.isEIP1559Transaction)(e)?u.TRANSACTION_ENVELOPE_TYPE_NAMES.FEE_MARKET:u.TRANSACTION_ENVELOPE_TYPE_NAMES.LEGACY,first_seen:P,gas_limit:N,transaction_replaced:ke,transaction_contract_address:fe?[fe]:[],transaction_contract_method_4byte:ge,...r,...le};if(he===de&&(je={...je,transaction_approval_amount_vs_balance_ratio:me,transaction_approval_amount_vs_proposed_ratio:pe}),await async function(e,t,r,n){const o=origin&&origin!==i.ORIGIN_METAMASK,{delegationAddress:s,nestedTransactions:l,txParams:c}=e,{authorizationList:u}=c,h=Boolean(null==l?void 0:l.length),p=Boolean(null==u?void 0:u.length);o&&(r.api_method=h?i.MESSAGE_TYPE.WALLET_SEND_CALLS:i.MESSAGE_TYPE.ETH_SEND_TRANSACTION);h&&(r.batch_transaction_count=null==l?void 0:l.length,r.batch_transaction_method="eip7702",r.transaction_contract_method=await async function(e,t){const r=e.filter(e=>k.includes(e.type)&&e.data).map(e=>e.data),n=await Promise.all(r.map(e=>t(e)));return n.map(e=>null==e?void 0:e.name).filter(e=>null==e?void 0:e.length)}(l??[],t),n.transaction_contract_address=null==l?void 0:l.filter(e=>{var t;return k.includes(e.type)&&(null===(t=e.to)||void 0===t?void 0:t.length)}).map(e=>e.to));if(e.status===a.TransactionStatus.rejected){const{error:t}=e;r.eip7702_upgrade_rejection=p&&t.code===d.EIP5792ErrorCode.RejectedUpgrade}r.eip7702_upgrade_transaction=p,n.account_eip7702_upgraded=s}(e,t.getMethodData,Ne,je),function(e,t,r,n){var o;const{gasFeeTokens:a,selectedGasFeeToken:i}=e;t.gas_payment_tokens_available=null==a?void 0:a.map(e=>e.symbol),t.gas_paid_with=null==a||null===(o=a.find(e=>e.tokenAddress.toLowerCase()===(null==i?void 0:i.toLowerCase())))||void 0===o?void 0:o.symbol,(null==i?void 0:i.toLowerCase())===d.NATIVE_TOKEN_ADDRESS&&(t.gas_paid_with="pre-funded_ETH");t.gas_insufficient_native_asset=function(e,t){const{chainId:r,txParams:n}=e,{from:o,gas:a,gasPrice:i,maxFeePerGas:l,value:c}=n,d=t(o,r),u=(0,y.getMaximumGasTotalInHexWei)({gasLimit:a,gasPrice:i,maxFeePerGas:l}),p=(0,s.add0x)((0,h.addHexes)(u,c??"0x0"));return new C.Numeric(p,16).greaterThan(new C.Numeric(d,16))}(e,n)}(e,Ne,0,t.getAccountBalance),E===a.TransactionStatus.submitted||E===a.TransactionStatus.confirmed){const r=t.getNetworkRpcUrl(e.chainId),n=(0,b.extractRpcDomain)(r);Ne.rpc_domain=n}return{properties:Ne,sensitiveProperties:je}}function I(e){return e===a.TransactionType.swap?T.swap:e===a.TransactionType.bridge?T.bridge:null}r.handlePostTransactionBalanceUpdate=async({getParticipateInMetrics:e,trackEvent:t,getHDEntropyIndex:r},{transactionMeta:o,approvalTransactionMeta:a})=>{var s;if(e()&&o.swapMetaData)if("0x0"===(null===(s=o.txReceipt)||void 0===s?void 0:s.status))t({event:c.MetaMetricsEventName.SwapFailed,category:c.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...o.swapMetaData},properties:{hd_entropy_index:r()}});else{var i;const e=(0,u.getSwapsTokensReceivedFromTxMeta)(o.destinationTokenSymbol,o,o.destinationTokenAddress,o.txParams.from,o.destinationTokenDecimals,a,o.chainId),s=e?`${new n.BigNumber(e,10).div(o.swapMetaData.token_to_amount,10).times(100).round(2)}%`:null,l=null!==(i=o.txReceipt)&&void 0!==i&&i.gasUsed&&o.swapMetaData.estimated_gas?`${new n.BigNumber(o.txReceipt.gasUsed,16).div(o.swapMetaData.estimated_gas,10).times(100).round(2)}%`:null,d=function(e,t){var r,o;let a="0x0";null!=t&&t.txReceipt&&(a=(0,u.calcGasTotal)(t.txReceipt.gasUsed,t.txReceipt.effectiveGasPrice));const s=(0,u.calcGasTotal)(null===(r=e.txReceipt)||void 0===r?void 0:r.gasUsed,null===(o=e.txReceipt)||void 0===o?void 0:o.effectiveGasPrice),i=new n.BigNumber(s,16).plus(a,16).toString(16);return{approvalGasCostInEth:Number((0,h.hexWEIToDecETH)(a)),tradeGasCostInEth:Number((0,h.hexWEIToDecETH)(s)),tradeAndApprovalGasCostInEth:Number((0,h.hexWEIToDecETH)(i))}}(o,a);t({event:c.MetaMetricsEventName.SwapCompleted,category:c.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...o.swapMetaData,token_to_amount_received:e,quote_vs_executionRatio:s,estimated_vs_used_gasRatio:l,approval_gas_cost_in_eth:d.approvalGasCostInEth,trade_gas_cost_in_eth:d.tradeGasCostInEth,trade_and_approval_gas_cost_in_eth:d.tradeAndApprovalGasCostInEth,token_to_amount:o.swapMetaData.token_to_amount.toString(10)},properties:{hd_entropy_index:r()}})}}}}},{package:"$root$",file:"app/scripts/lib/transaction/metrics.ts"}],[325,{"../../../../shared/modules/conversion.utils":5900,"../../../../shared/modules/fetch-with-timeout":5904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.buildUrl=d,r.getSendBundleSupportedChains=async function(e){const t=await l();return e.reduce((e,r)=>{const n=(0,o.hexToDecimal)(r),a=t[n];return e[r]=(null==a?void 0:a.sendBundle)??!1,e},{})},r.getSentinelNetworkFlags=c,r.isSendBundleSupported=async function(e){const t=await c(e);if(null==t||!t.sendBundle)return!1;return!0};var n,o=e("../../../../shared/modules/conversion.utils"),a=(n=e("../../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n};const s="https://tx-sentinel-{0}.api.cx.metamask.io/",i="networks";async function l(){const e=`${d("ethereum-mainnet")}${i}`;return(await(0,a.default)()(e)).json()}async function c(e){const t=(0,o.hexToDecimal)(e);return(await l())[t]}function d(e){return s.replace("{0}",e)}}}},{package:"$root$",file:"app/scripts/lib/transaction/sentinel-api.ts"}],[326,{"../../../../shared/modules/fetch-with-timeout":5904,"../../../../shared/modules/rpc.utils":5913,"./sentinel-api":325,"@metamask/utils":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RelayStatus=r.RELAY_RPC_METHOD=void 0,r.isRelaySupported=async function(e){return Boolean(await u(e))},r.submitRelayTransaction=async function(e){const{chainId:t}=e,r=await u(t);if(!r)throw new Error(`Chain not supported by transaction relay - ${t}`);l("Request",r,e);const n=await(0,a.jsonRpcRequest)(r,d,[e]);return l("Response",n),n},r.waitForRelayResult=async function(e){const{chainId:t,interval:r,uuid:n}=e,o=await u(t);if(!o)throw new Error(`Chain not supported by transaction relay - ${t}`);const a=`${o}smart-transactions/${n}`;return new Promise((e,t)=>{const n=setInterval(async()=>{try{const t=await async function(e){l("Polling request",e);const t=await(0,s.default)()(e);if(l("Polling response",t),!t.ok){const e=await t.text();throw new Error(`Failed to fetch relay transaction status: ${t.status} - ${e}`)}const r=await t.json(),n=null==r?void 0:r.transactions[0],{hash:o,status:a}=n||{};return{status:a,transactionHash:o}}(a);t.status!==c.Pending&&(clearInterval(n),e(t))}catch(e){clearInterval(n),t(e)}},r)})};var n,o=e("@metamask/utils"),a=e("../../../../shared/modules/rpc.utils"),s=(n=e("../../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},i=e("./sentinel-api");const l=(0,o.createProjectLogger)("transaction-relay");let c=r.RelayStatus=function(e){return e.Pending="PENDING",e.Success="VALIDATED",e}({});const d=r.RELAY_RPC_METHOD="eth_sendRelayTransaction";async function u(e){const t=await(0,i.getSentinelNetworkFlags)(e);return null!=t&&t.relayTransactions?(0,i.buildUrl)(t.network):(l("Chain is not supported",e),undefined)}}}},{package:"$root$",file:"app/scripts/lib/transaction/transaction-relay.ts"}],[327,{"../../../../shared/constants/app":5781,"../../../../shared/constants/security-provider":5808,"../../../../shared/lib/trace":5888,"../ppom/ppom-util":273,"../trust-signals/security-alerts-api":328,"../trust-signals/trust-signals-util":330,"@metamask/keyring-api":2060,"ethereumjs-util":4319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.addDappTransaction=async function(e){const{dappRequest:t}=e,{id:r,method:n,origin:o}=t,{securityAlertResponse:a,traceContext:s}=t,l={actionId:r,method:n,origin:o,requireApproval:!0,securityAlertResponse:a};(0,i.endTrace)({name:i.TraceName.Middleware,id:r});const{waitForHash:c}=await u({...e,transactionOptions:{...l,traceContext:s}}),d=await c();return(0,i.endTrace)({name:i.TraceName.Transaction,id:r}),d},r.addTransaction=async function(e){await async function(e){const{chainId:t,ppomController:r,securityAlertsEnabled:n,transactionOptions:o,transactionParams:i,updateSecurityAlertResponse:u,internalAccounts:h,getSecurityAlertsConfig:p}=e;!function(e){const{getSecurityAlertResponse:t,addSecurityAlertResponse:r,securityAlertsEnabled:n,transactionOptions:o,transactionParams:a,chainId:s}=e,{origin:i}=o;if(i!==l.ORIGIN_METAMASK||!n)return;const{to:u}=a;if("string"!=typeof u)return;const h=(0,d.mapChainIdToSupportedEVMChain)(s);if(!h)return;(0,c.scanAddressAndAddToCache)(u,t,r,h).catch(e=>{console.error("[scanAddressForTrustSignals] error scanning address for trust signals:",e)})}(e);const{type:m}=o,f=s.SECURITY_PROVIDER_EXCLUDED_TRANSACTION_TYPES.includes(m);if(!n||f)return;if(h.some(({address:e})=>{var t;return e.toLowerCase()===(null===(t=i.to)||void 0===t?void 0:t.toLowerCase())}))return;try{const{from:n,to:l,value:c,data:d}=i,{actionId:h,origin:m}=o,f={method:"eth_sendTransaction",id:h??"",origin:m??"",params:[{from:n,to:l??"",value:c??"",data:d??""}],jsonrpc:"2.0"},g=(0,a.generateSecurityAlertId)();(0,a.validateRequestWithPPOM)({ppomController:r,request:f,securityAlertId:g,chainId:t,updateSecurityAlertResponse:u,getSecurityAlertsConfig:p});const v={...s.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:g};e.transactionOptions.securityAlertResponse=v}catch(e){(0,a.handlePPOMError)(e,"Error validating JSON RPC using PPOM: ")}}(e);const{transactionMeta:t,waitForHash:r}=await u(e);if(!e.waitForSubmit)return r().catch(()=>{}),t;const n=await r();return function(e,t){return t.state.transactions.find(t=>t.hash===e)}(n,e.transactionController)},r.getTransactionById=h;var n=e("@metamask/keyring-api"),o=e("ethereumjs-util"),a=e("../ppom/ppom-util"),s=e("../../../../shared/constants/security-provider"),i=e("../../../../shared/lib/trace"),l=e("../../../../shared/constants/app"),c=e("../trust-signals/security-alerts-api"),d=e("../trust-signals/trust-signals-util");async function u(e){const{selectedAccount:t}=e;return t.type===n.EthAccountType.Erc4337?async function(e){var t;const{networkClientId:r,transactionController:n,transactionOptions:a,transactionParams:s,userOperationController:i}=e,{maxFeePerGas:l,maxPriorityFeePerGas:c}=s,{origin:d,requireApproval:u,type:p}=a,m={...s,maxFeePerGas:(0,o.addHexPrefix)(l),maxPriorityFeePerGas:(0,o.addHexPrefix)(c)},f=null==a||null===(t=a.swaps)||void 0===t?void 0:t.meta;null!=f&&f.type&&delete f.type;const g={networkClientId:r,origin:d,requireApproval:u,swaps:f,type:p},v=await i.addUserOperationFromTransaction(m,g);i.startPollingByNetworkClientId(r);return{transactionMeta:h(v.id,n),waitForHash:v.transactionHash}}(e):async function(e){const{transactionController:t,transactionOptions:r,transactionParams:n,networkClientId:o}=e,{result:a,transactionMeta:s}=await t.addTransaction(n,{...r,networkClientId:o});return{transactionMeta:s,waitForHash:()=>a}}(e)}function h(e,t){return t.state.transactions.find(t=>t.id===e)}}}},{package:"$root$",file:"app/scripts/lib/transaction/util.ts"}],[328,{"../../../../shared/constants/time":5817,"../../../../shared/modules/fetch-with-timeout":5904,"./types":331},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.scanAddress=c,r.scanAddressAndAddToCache=async function(e,t,r,n){const o=t(e);if(o)return o;const a={result_type:s.ResultType.Loading,label:""};r(e,a);try{const t=await c(n,e);return r(e,t),t}catch(t){throw r(e,{result_type:s.ResultType.ErrorResult,label:""}),t}};var n,o=e("../../../../shared/constants/time"),a=(n=e("../../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},s=e("./types");const i=5*o.SECOND,l="address/evm/scan";async function c(e,t){const r="https://security-alerts.api.cx.metamask.io";const n=`${r}/${l}`,o={chain:e,address:t},s=await(0,a.default)(i)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await s.json()}}}},{package:"$root$",file:"app/scripts/lib/trust-signals/security-alerts-api.ts"}],[329,{"../../../../shared/modules/transaction.utils":5924,"../ppom/security-alerts-api":275,"./security-alerts-api":328,"./trust-signals-util":330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTrustSignalsMiddleware=function(e,t,r,l,c){return async(d,u,h)=>{try{if(!(0,s.isSecurityAlertsEnabledByUser)(l)||!(0,o.isSecurityAlertsAPIEnabled)())return;(0,s.isEthSendTransaction)(d)?(!function(e,t,r){if(!(0,s.hasValidTransactionParams)(e))return;const{to:n}=e.params[0];let o;try{o=(0,s.getChainId)(r)}catch(e){return void console.error("[createTrustSignalsMiddleware] error getting chainId:",e)}if(!o)return;(0,a.scanAddressAndAddToCache)(n,t.getAddressSecurityAlertResponse,t.addAddressSecurityAlertResponse,o).catch(e=>{console.error("[createTrustSignalsMiddleware] error scanning address for transaction:",e)})}(d,t,e),i(d,r)):(0,s.isEthSignTypedData)(d)?(!function(e,t,r){var o;if(!(0,s.hasValidTypedDataParams)(e))return;const i=(0,n.parseTypedDataMessage)("string"==typeof e.params[1]?e.params[1]:JSON.stringify(e.params[1])),l=null===(o=i.domain)||void 0===o?void 0:o.verifyingContract;if(!l)return;let c;try{c=(0,s.getChainId)(r)}catch(e){return void console.error("[createTrustSignalsMiddleware] error getting chainId:",e)}if(!c)return;(0,a.scanAddressAndAddToCache)(l,t.getAddressSecurityAlertResponse,t.addAddressSecurityAlertResponse,c).catch(e=>{console.error("[createTrustSignalsMiddleware] error scanning address for signature:",e)})}(d,t,e),i(d,r)):((0,s.isConnected)(d,c)||(0,s.connectScreenHasBeenPrompted)(d))&&i(d,r)}catch(e){console.error("[createTrustSignalsMiddleware] error: ",e)}finally{h()}}};var n=e("../../../../shared/modules/transaction.utils"),o=e("../ppom/security-alerts-api"),a=e("./security-alerts-api"),s=e("./trust-signals-util");function i(e,t){e.origin&&t.scanUrl(e.origin).catch(e=>{console.error("[createTrustSignalsMiddleware] error:",e)})}}}},{package:"$root$",file:"app/scripts/lib/trust-signals/trust-signals-middleware.ts"}],[33,{"@metamask/message-manager":2123},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManagerInit=void 0;var n=e("@metamask/message-manager");r.EncryptionPublicKeyManagerInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new n.EncryptionPublicKeyManager({additionalFinishStatuses:["received"],messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/encryption-public-key-message-manager-init.ts"}],[330,{"../../../../shared/constants/app":5781,"../../../../shared/constants/network":5800,"../../../../shared/modules/selectors/networks":5918,"./types":331},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.connectScreenHasBeenPrompted=function(e){return e.method===a.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS||e.method===a.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS},r.getChainId=function(e){var t;const r=null===(t=(0,o.getProviderConfig)({metamask:e.state}))||void 0===t?void 0:t.chainId;if(!r)throw new Error("Chain ID not found");return l(r)},r.hasValidTransactionParams=function(e){if(!("params"in e)||!e.params)return!1;if(!Array.isArray(e.params)||0===e.params.length)return!1;const t=e.params[0];return"object"==typeof t&&null!==t&&"to"in t},r.hasValidTypedDataParams=function(e){if(!("params"in e)||!e.params)return!1;if(!Array.isArray(e.params)||e.params.length<2)return!1;return e.params[1]!==undefined&&null!==e.params[1]},r.isConnected=function(e,t){if(!e.origin||e.method!==a.MESSAGE_TYPE.ETH_ACCOUNTS)return!1;const r=t(e.origin);return Array.isArray(r)&&r.length>0},r.isEthSendTransaction=function(e){return e.method===a.MESSAGE_TYPE.ETH_SEND_TRANSACTION},r.isEthSignTypedData=function(e){return e.method===a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA||e.method===a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1||e.method===a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3||e.method===a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4},r.isSecurityAlertsEnabledByUser=function(e){const{securityAlertsEnabled:t}=e.state;return t},r.mapChainIdToSupportedEVMChain=l;var n=e("../../../../shared/constants/network"),o=e("../../../../shared/modules/selectors/networks"),a=e("../../../../shared/constants/app"),s=e("./types");const i={[n.CHAIN_IDS.ARBITRUM.toLowerCase()]:s.SupportedEVMChain.Arbitrum,[n.CHAIN_IDS.AVALANCHE.toLowerCase()]:s.SupportedEVMChain.Avalanche,[n.CHAIN_IDS.BASE.toLowerCase()]:s.SupportedEVMChain.Base,[n.CHAIN_IDS.BASE_SEPOLIA.toLowerCase()]:s.SupportedEVMChain.BaseSepolia,[n.CHAIN_IDS.BSC.toLowerCase()]:s.SupportedEVMChain.Bsc,[n.CHAIN_IDS.MAINNET.toLowerCase()]:s.SupportedEVMChain.Ethereum,[n.CHAIN_IDS.OPTIMISM.toLowerCase()]:s.SupportedEVMChain.Optimism,[n.CHAIN_IDS.POLYGON.toLowerCase()]:s.SupportedEVMChain.Polygon,[n.CHAIN_IDS.ZKSYNC_ERA.toLowerCase()]:s.SupportedEVMChain.Zksync,[n.CHAIN_IDS.ZK_SYNC_ERA_TESTNET.toLowerCase()]:s.SupportedEVMChain.ZksyncSepolia,"0x76adf1":s.SupportedEVMChain.Zora,[n.CHAIN_IDS.LINEA_MAINNET.toLowerCase()]:s.SupportedEVMChain.Linea,[n.CHAIN_IDS.BLAST.toLowerCase()]:s.SupportedEVMChain.Blast,[n.CHAIN_IDS.SCROLL.toLowerCase()]:s.SupportedEVMChain.Scroll,[n.CHAIN_IDS.SEPOLIA.toLowerCase()]:s.SupportedEVMChain.EthereumSepolia,"0x27bc86aa":s.SupportedEVMChain.Degen,[n.CHAIN_IDS.AVALANCHE_TESTNET.toLowerCase()]:s.SupportedEVMChain.AvalancheFuji,"0x343b":s.SupportedEVMChain.ImmutableZkevm,"0x34a1":s.SupportedEVMChain.ImmutableZkevmTestnet,[n.CHAIN_IDS.GNOSIS.toLowerCase()]:s.SupportedEVMChain.Gnosis,"0x1e0":s.SupportedEVMChain.Worldchain,"0x79a":s.SupportedEVMChain.SoneiumMinato,"0x7e4":s.SupportedEVMChain.Ronin,[n.CHAIN_IDS.APECHAIN_MAINNET.toLowerCase()]:s.SupportedEVMChain.ApeChain,"0x849ea":s.SupportedEVMChain.ZeroNetwork,[n.CHAIN_IDS.BERACHAIN.toLowerCase()]:s.SupportedEVMChain.Berachain,"0x138c5":s.SupportedEVMChain.BerachainBartio,[n.CHAIN_IDS.INK.toLowerCase()]:s.SupportedEVMChain.Ink,[n.CHAIN_IDS.INK_SEPOLIA.toLowerCase()]:s.SupportedEVMChain.InkSepolia,"0xab5":s.SupportedEVMChain.Abstract,"0x2b74":s.SupportedEVMChain.AbstractTestnet,"0x74c":s.SupportedEVMChain.Soneium,[n.CHAIN_IDS.UNICHAIN.toLowerCase()]:s.SupportedEVMChain.Unichain,[n.CHAIN_IDS.SEI.toLowerCase()]:s.SupportedEVMChain.Sei,[n.CHAIN_IDS.FLOW.toLowerCase()]:s.SupportedEVMChain.FlowEvm};function l(e){return"string"==typeof e&&e?i[e.toLowerCase()]:undefined}}}},{package:"$root$",file:"app/scripts/lib/trust-signals/trust-signals-util.ts"}],[333,{"../../shared/constants/app":5781,"../../shared/constants/bridge":5783,"../../shared/constants/hardware-wallets":5790,"../../shared/constants/keyring":5792,"../../shared/constants/metametrics":5796,"../../shared/constants/multichain/networks":5799,"../../shared/constants/network":5800,"../../shared/constants/onboarding":5803,"../../shared/constants/permissions":5804,"../../shared/constants/referrals":5807,"../../shared/constants/time":5817,"../../shared/constants/tokens":5818,"../../shared/constants/transaction":5819,"../../shared/lib/accounts":5824,"../../shared/lib/accounts/bitcoin-wallet-snap":5823,"../../shared/lib/accounts/solana-wallet-snap":5827,"../../shared/lib/fetch-with-cache":5867,"../../shared/lib/metamask-controller-utils":5872,"../../shared/lib/multichain-accounts/remote-feature-flag":5873,"../../shared/lib/sentry":5881,"../../shared/lib/shield":5882,"../../shared/lib/snaps/snaps":5883,"../../shared/lib/storage-helpers":5884,"../../shared/lib/token-util":5887,"../../shared/lib/trace":5888,"../../shared/lib/transactions-controller-utils":5890,"../../shared/lib/translate":5893,"../../shared/modules/environment":5901,"../../shared/modules/mv3.utils":5909,"../../shared/modules/network.utils":5910,"../../shared/modules/selectors":5916,"../../shared/modules/selectors/multichain":5917,"../../shared/modules/selectors/networks":5918,"../../shared/modules/shield":5921,"../../shared/modules/string-utils":5922,"../../shared/modules/transaction.utils":5924,"./constants/stream":9,"./controller-init/account-order-controller-init":10,"./controller-init/account-tracker-controller-init":11,"./controller-init/accounts-controller-init":12,"./controller-init/accounts/account-tree-controller-init":13,"./controller-init/accounts/snap-keyring-builder-init":14,"./controller-init/alert-controller-init":15,"./controller-init/announcement-controller-init":16,"./controller-init/app-metadata-controller-init":17,"./controller-init/app-state-controller-init":18,"./controller-init/assets":20,"./controller-init/assets/network-enablement-controller-init":21,"./controller-init/bridge-controller-init":26,"./controller-init/bridge-status-controller-init":27,"./controller-init/confirmations/address-book-controller-init":28,"./controller-init/confirmations/approval-controller-init":29,"./controller-init/confirmations/decrypt-message-controller-init":30,"./controller-init/confirmations/decrypt-message-manager-init":31,"./controller-init/confirmations/encryption-public-key-controller-init":32,"./controller-init/confirmations/encryption-public-key-message-manager-init":33,"./controller-init/confirmations/ens-controller-init":34,"./controller-init/confirmations/gas-fee-controller-init":35,"./controller-init/confirmations/name-controller-init":36,"./controller-init/confirmations/ppom-controller-init":37,"./controller-init/confirmations/signature-controller-init":38,"./controller-init/confirmations/transaction-controller-init":39,"./controller-init/confirmations/user-operation-controller-init":40,"./controller-init/core-backend":43,"./controller-init/currency-rate-controller-init":44,"./controller-init/defi-positions/defi-positions-controller-init":45,"./controller-init/delegation/delegation-controller-init":46,"./controller-init/error-reporting-service-init":47,"./controller-init/gator-permissions/gator-permissions-controller-init":48,"./controller-init/identity/authentication-controller-init":49,"./controller-init/identity/user-storage-controller-init":50,"./controller-init/institutional-snap/institutional-snap-controller-init":52,"./controller-init/keyring-controller-init":53,"./controller-init/logging-controller-init":54,"./controller-init/metametrics-controller-init":149,"./controller-init/metametrics-data-deletion-controller-init":150,"./controller-init/multichain":151,"./controller-init/multichain/multichain-account-service-init":152,"./controller-init/network-controller-init":159,"./controller-init/notifications/notification-services-controller-init":160,"./controller-init/notifications/notification-services-push-controller-init":161,"./controller-init/onboarding-controller-init":162,"./controller-init/permission-controller-init":163,"./controller-init/permission-log-controller-init":164,"./controller-init/phishing-controller-init":165,"./controller-init/preferences-controller-init":166,"./controller-init/rates-controller-init":167,"./controller-init/remote-feature-flag-controller-init":168,"./controller-init/seedless-onboarding":169,"./controller-init/selected-network-controller-init":172,"./controller-init/shield/shield-controller-init":173,"./controller-init/smart-transactions/smart-transactions-controller-init":174,"./controller-init/snaps":177,"./controller-init/subject-metadata-controller-init":186,"./controller-init/subscription":187,"./controller-init/swaps-controller-init":190,"./controller-init/token-balances-controller-init":191,"./controller-init/token-detection-controller-init":192,"./controller-init/token-list-controller-init":193,"./controller-init/tokens-controller-init":194,"./controller-init/utils":196,"./controllers/permissions":212,"./controllers/preferences-controller":216,"./detect-multiple-instances":223,"./lib/AccountIdentitiesPetnamesBridge":226,"./lib/AddressBookPetnamesBridge":227,"./lib/ComposableObservableStore":228,"./lib/PatchStore":230,"./lib/approval/utils":233,"./lib/backup":234,"./lib/createDupeReqFilterStream":236,"./lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware":237,"./lib/createHyperliquidReferralMiddleware":238,"./lib/createLoggerMiddleware":239,"./lib/createMainFrameOriginMiddleware":240,"./lib/createMetaRPCHandler":241,"./lib/createMetamaskMiddleware":242,"./lib/createOnboardingMiddleware":243,"./lib/createOriginMiddleware":244,"./lib/createOriginThrottlingMiddleware":245,"./lib/createRPCMethodTrackingMiddleware":246,"./lib/createTabIdMiddleware":247,"./lib/createTracingMiddleware":248,"./lib/forwardRequestToSnap":256,"./lib/multichain/address":262,"./lib/open-update-tab-and-reload":269,"./lib/ppom/ppom-middleware":272,"./lib/ppom/ppom-util":273,"./lib/rpc-method-middleware":292,"./lib/signature/util":297,"./lib/snap-keyring":299,"./lib/snap-keyring/keyring-snaps-permissions":300,"./lib/state-utils":308,"./lib/stream-utils":313,"./lib/transaction/containers/util":315,"./lib/transaction/decode/util":321,"./lib/transaction/metrics":324,"./lib/transaction/sentinel-api":325,"./lib/transaction/transaction-relay":326,"./lib/transaction/util":327,"./lib/trust-signals/trust-signals-middleware":329,"./lib/util":332,"@ethersproject/abi":674,"@metamask/approval-controller":1168,"@metamask/base-controller":1268,"@metamask/bridge-controller":1275,"@metamask/bridge-status-controller":1295,"@metamask/chain-agnostic-permission":1329,"@metamask/controller-utils":1349,"@metamask/eip-5792-middleware":1741,"@metamask/eth-json-rpc-filters":1761,"@metamask/eth-json-rpc-filters/subscriptionManager":1763,"@metamask/eth-json-rpc-middleware":1775,"@metamask/eth-ledger-bridge-keyring":1793,"@metamask/eth-qr-keyring":1802,"@metamask/eth-sig-util":1884,"@metamask/eth-trezor-keyring":1947,"@metamask/json-rpc-engine":1994,"@metamask/json-rpc-middleware-stream":1998,"@metamask/keyring-api":2060,"@metamask/keyring-controller":2070,"@metamask/metamask-eth-abis":2130,"@metamask/multichain-api-middleware":2150,"@metamask/notification-services-controller/notification-services":2255,"@metamask/obs-store":2312,"@metamask/obs-store/dist/asStream":2311,"@metamask/permission-controller":2334,"@metamask/rpc-errors":2485,"@metamask/scure-bip39/dist/wordlists/english":2489,"@metamask/seedless-onboarding-controller":2505,"@metamask/selected-network-controller":2510,"@metamask/snaps-rpc-methods":2615,"@metamask/subscription-controller":2810,"@metamask/transaction-controller":2862,"@metamask/utils":2908,"await-semaphore":3887,buffer:4061,"eth-chainlist":4261,"eth-lattice-keyring":4266,events:4361,lodash:4816,loglevel:4824,nanoid:5015,"readable-stream":5278,"webextension-polyfill":5764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.METAMASK_CONTROLLER_EVENTS=void 0;var n=Pr(e("events")),o=e("readable-stream"),a=Pr(e("webextension-polyfill")),s=e("@metamask/json-rpc-engine"),i=e("@metamask/json-rpc-middleware-stream"),l=e("@metamask/obs-store"),c=e("@metamask/obs-store/dist/asStream"),d=e("@metamask/eth-json-rpc-middleware"),u=e("lodash"),h=e("@metamask/keyring-controller"),p=Pr(e("@metamask/eth-json-rpc-filters")),m=Pr(e("@metamask/eth-json-rpc-filters/subscriptionManager")),f=e("@metamask/rpc-errors"),g=e("await-semaphore"),v=Pr(e("loglevel")),y=e("@metamask/eth-trezor-keyring"),C=e("@metamask/eth-ledger-bridge-keyring"),b=Pr(e("eth-lattice-keyring")),w=e("eth-chainlist"),S=e("@metamask/eth-qr-keyring"),k=e("nanoid"),T=e("@metamask/approval-controller"),P=e("@metamask/base-controller"),E=e("@metamask/permission-controller"),M=e("@metamask/selected-network-controller"),A=e("@metamask/snaps-rpc-methods"),I=e("@metamask/controller-utils"),_=e("@metamask/scure-bip39/dist/wordlists/english"),N=e("@metamask/bridge-controller"),R=e("@metamask/transaction-controller"),O=e("@ethersproject/abi"),D=e("@metamask/metamask-eth-abis"),j=e("@metamask/keyring-api"),F=e("@metamask/utils"),x=e("@metamask/eth-sig-util"),B=e("@metamask/notification-services-controller/notification-services"),L=e("@metamask/multichain-api-middleware"),$=e("@metamask/eip-5792-middleware"),U=e("@metamask/chain-agnostic-permission"),K=e("@metamask/bridge-status-controller"),H=e("@metamask/seedless-onboarding-controller"),q=e("@metamask/subscription-controller"),V=e("../../shared/lib/multichain-accounts/remote-feature-flag"),G=e("../../shared/lib/sentry"),W=e("../../shared/constants/transaction"),z=e("../../shared/constants/network"),Q=e("../../shared/constants/hardware-wallets"),Y=e("../../shared/constants/keyring"),J=e("../../shared/constants/permissions"),X=e("../../shared/constants/time"),Z=e("../../shared/constants/app"),ee=e("../../shared/constants/metametrics"),te=e("../../shared/lib/storage-helpers"),re=e("../../shared/lib/token-util"),ne=e("../../shared/modules/string-utils"),oe=e("../../shared/modules/transaction.utils"),ae=e("../../shared/constants/tokens"),se=e("../../shared/lib/metamask-controller-utils"),ie=e("../../shared/modules/mv3.utils"),le=e("../../shared/modules/network.utils"),ce=e("../../shared/modules/selectors"),de=e("../../shared/lib/transactions-controller-utils"),ue=e("../../shared/modules/selectors/networks"),he=e("../../shared/modules/selectors/multichain"),pe=e("../../shared/lib/trace"),me=Pr(e("../../shared/lib/fetch-with-cache")),fe=e("../../shared/constants/multichain/networks"),ge=e("../../shared/constants/bridge"),ve=e("../../shared/lib/accounts"),ye=e("../../shared/lib/accounts/bitcoin-wallet-snap"),Ce=e("../../shared/lib/accounts/solana-wallet-snap"),be=e("../../shared/constants/onboarding"),we=e("../../shared/lib/translate"),Se=e("../../shared/modules/environment"),ke=e("../../shared/lib/snaps/snaps"),Te=e("../../shared/modules/shield"),Pe=e("../../shared/constants/referrals"),Ee=e("../../shared/lib/shield"),Me=e("./lib/transaction/metrics"),Ae=e("./lib/snap-keyring/keyring-snaps-permissions"),Ie=e("./lib/AddressBookPetnamesBridge"),_e=e("./lib/AccountIdentitiesPetnamesBridge"),Ne=e("./lib/ppom/ppom-middleware"),Re=e("./lib/trust-signals/trust-signals-middleware"),Oe=e("./detect-multiple-instances"),De=Pr(e("./lib/ComposableObservableStore")),je=Pr(e("./lib/createDupeReqFilterStream")),Fe=Pr(e("./lib/createLoggerMiddleware")),xe=e("./lib/rpc-method-middleware"),Be=Pr(e("./lib/createOriginMiddleware")),Le=Pr(e("./lib/createMainFrameOriginMiddleware")),$e=Pr(e("./lib/createTabIdMiddleware")),Ue=Pr(e("./lib/createOnboardingMiddleware")),Ke=e("./lib/stream-utils"),He=e("./controllers/preferences-controller"),qe=Pr(e("./lib/backup")),Ve=Pr(e("./lib/createMetaRPCHandler")),Ge=e("./lib/util"),We=Pr(e("./lib/createMetamaskMiddleware")),ze=e("./lib/createHyperliquidReferralMiddleware"),Qe=e("./controllers/permissions"),Ye=Pr(e("./lib/createRPCMethodTrackingMiddleware")),Je=e("./lib/snap-keyring"),Xe=e("./lib/transaction/util"),Ze=e("./lib/signature/util"),et=e("./constants/stream"),tt=e("./lib/ppom/ppom-util"),rt=Pr(e("./lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware")),nt=e("./lib/multichain/address"),ot=e("./lib/transaction/decode/util"),at=Pr(e("./lib/createTracingMiddleware")),st=Pr(e("./lib/createOriginThrottlingMiddleware")),it=e("./lib/PatchStore"),lt=e("./lib/state-utils"),ct=e("./lib/approval/utils"),dt=e("./controller-init/institutional-snap/institutional-snap-controller-init"),ut=e("./controller-init/multichain"),ht=e("./controller-init/assets"),pt=e("./controller-init/confirmations/transaction-controller-init"),mt=e("./controller-init/confirmations/ppom-controller-init"),ft=e("./controller-init/smart-transactions/smart-transactions-controller-init"),gt=e("./controller-init/utils"),vt=e("./controller-init/snaps"),yt=e("./controller-init/core-backend"),Ct=e("./controller-init/identity/authentication-controller-init"),bt=e("./controller-init/identity/user-storage-controller-init"),wt=e("./controller-init/defi-positions/defi-positions-controller-init"),St=e("./controller-init/notifications/notification-services-controller-init"),kt=e("./controller-init/notifications/notification-services-push-controller-init"),Tt=e("./controller-init/delegation/delegation-controller-init"),Pt=e("./lib/transaction/transaction-relay"),Et=e("./lib/open-update-tab-and-reload"),Mt=e("./controller-init/accounts/account-tree-controller-init"),At=e("./controller-init/multichain/multichain-account-service-init"),It=e("./controller-init/seedless-onboarding"),_t=e("./lib/transaction/containers/util"),Nt=e("./lib/transaction/sentinel-api"),Rt=e("./controller-init/shield/shield-controller-init"),Ot=e("./controller-init/gator-permissions/gator-permissions-controller-init"),Dt=e("./lib/forwardRequestToSnap"),jt=e("./controller-init/metametrics-controller-init"),Ft=e("./controller-init/token-list-controller-init"),xt=e("./controller-init/token-detection-controller-init"),Bt=e("./controller-init/tokens-controller-init"),Lt=e("./controller-init/token-balances-controller-init"),$t=e("./controller-init/rates-controller-init"),Ut=e("./controller-init/currency-rate-controller-init"),Kt=e("./controller-init/confirmations/ens-controller-init"),Ht=e("./controller-init/confirmations/name-controller-init"),qt=e("./controller-init/confirmations/gas-fee-controller-init"),Vt=e("./controller-init/selected-network-controller-init"),Gt=e("./controller-init/subscription"),Wt=e("./controller-init/account-tracker-controller-init"),zt=e("./controller-init/onboarding-controller-init"),Qt=e("./controller-init/remote-feature-flag-controller-init"),Yt=e("./controller-init/swaps-controller-init"),Jt=e("./controller-init/bridge-controller-init"),Xt=e("./controller-init/bridge-status-controller-init"),Zt=e("./controller-init/preferences-controller-init"),er=e("./controller-init/app-state-controller-init"),tr=e("./controller-init/permission-controller-init"),rr=e("./controller-init/subject-metadata-controller-init"),nr=e("./controller-init/assets/network-enablement-controller-init"),or=e("./controller-init/keyring-controller-init"),ar=e("./controller-init/accounts/snap-keyring-builder-init"),sr=e("./controller-init/permission-log-controller-init"),ir=e("./controller-init/network-controller-init"),lr=e("./controller-init/announcement-controller-init"),cr=e("./controller-init/account-order-controller-init"),dr=e("./controller-init/accounts-controller-init"),ur=e("./controller-init/phishing-controller-init"),hr=e("./controller-init/alert-controller-init"),pr=e("./controller-init/metametrics-data-deletion-controller-init"),mr=e("./controller-init/logging-controller-init"),fr=e("./controller-init/app-metadata-controller-init"),gr=e("./controller-init/error-reporting-service-init"),vr=e("./controller-init/confirmations/approval-controller-init"),yr=e("./controller-init/confirmations/address-book-controller-init"),Cr=e("./controller-init/confirmations/decrypt-message-manager-init"),br=e("./controller-init/confirmations/decrypt-message-controller-init"),wr=e("./controller-init/confirmations/encryption-public-key-controller-init"),Sr=e("./controller-init/confirmations/encryption-public-key-message-manager-init"),kr=e("./controller-init/confirmations/signature-controller-init"),Tr=e("./controller-init/confirmations/user-operation-controller-init");function Pr(e){return e&&e.__esModule?e:{default:e}}function Er(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function Mr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ar(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}r.METAMASK_CONTROLLER_EVENTS={UPDATE_BADGE:"updateBadge",DECRYPT_MESSAGE_MANAGER_UPDATE_BADGE:"DecryptMessageManager:updateBadge",ENCRYPTION_PUBLIC_KEY_MANAGER_UPDATE_BADGE:"EncryptionPublicKeyManager:updateBadge",APPROVAL_STATE_CHANGE:"ApprovalController:stateChange",APP_STATE_UNLOCK_CHANGE:"AppStateController:unlockChange",METAMASK_NOTIFICATIONS_LIST_UPDATED:"NotificationServicesController:notificationsListUpdated",METAMASK_NOTIFICATIONS_MARK_AS_READ:"NotificationServicesController:markNotificationsAsRead"};const Ir="eip-1193",_r="caip-multichain";var Nr=new WeakSet;class Rr extends n.default{constructor(e){super(),Er(this,Nr),Mr(this,"handleWatchAssetRequest",({asset:e,type:t,origin:r,networkClientId:n})=>{switch(t){case I.ERC20:return this.tokensController.watchAsset({asset:e,type:t,networkClientId:n});case I.ERC721:case I.ERC1155:return this.nftController.watchNft(e,t,r,n);default:throw new Error(`Asset type ${t} not supported`)}}),Mr(this,"removePermissionsFor",e=>{try{this.permissionController.revokePermissions(e)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Mr(this,"updateCaveat",(e,t,r,n)=>{try{this.controllerMessenger.call("PermissionController:updateCaveat",e,t,r,n)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Mr(this,"updateNetworksList",e=>{try{this.networkOrderController.updateNetworksList(e)}catch(e){throw v.default.error(e.message),e}}),Mr(this,"updateAccountsList",e=>{try{this.accountOrderController.updateAccountsList(e)}catch(e){throw v.default.error(e.message),e}}),Mr(this,"setEnabledNetworks",async e=>{try{this.networkEnablementController.enableNetwork(e)}catch(e){throw v.default.error(e.message),e}await this.lookupSelectedNetworks()}),Mr(this,"setEnabledAllPopularNetworks",async()=>{try{this.networkEnablementController.enableAllPopularNetworks()}catch(e){throw v.default.error(e.message),e}await this.lookupSelectedNetworks()}),Mr(this,"updateHiddenAccountsList",e=>{try{this.accountOrderController.updateHiddenAccountsList(e)}catch(e){throw v.default.error(e.message),e}}),Mr(this,"rejectPermissionsRequest",e=>{try{this.permissionController.rejectPermissionsRequest(e)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Mr(this,"acceptPermissionsRequest",e=>{try{this.permissionController.acceptPermissionsRequest(e)}catch(e){if(!(e instanceof E.PermissionsRequestNotFoundError))throw e}}),Mr(this,"resolvePendingApproval",async(e,t,r)=>{try{await this.approvalController.accept(e,t,r)}catch(e){if(!(e instanceof T.ApprovalRequestNotFoundError))throw e}}),Mr(this,"rejectPendingApproval",(e,t)=>{try{this.approvalController.reject(e,new f.JsonRpcError(t.code,t.message,t.data))}catch(e){if(!(e instanceof T.ApprovalRequestNotFoundError))throw e}});const{isFirstMetaMaskControllerSetup:t}=e;this.defaultMaxListeners=20,this.sendUpdate=(0,u.debounce)(this.privateSendUpdate.bind(this),200*X.MILLISECOND),this.opts=e,this.requestSafeReload=e.requestSafeReload??(()=>Promise.resolve()),this.extension=e.browser,this.platform=e.platform,this.notificationManager=e.notificationManager;const r=e.initState||{},n="13.7.0";this.recordFirstTimeInfo(r),this.featureFlags=e.featureFlags,this.activeControllerConnections=0,this.offscreenPromise=e.offscreenPromise??Promise.resolve(),this.getRequestAccountTabIds=e.getRequestAccountTabIds,this.getOpenMetamaskTabsIds=e.getOpenMetamaskTabsIds,this.initializeChainlist(),this.controllerMessenger=new P.Messenger,this.currentMigrationVersion=e.currentMigrationVersion,this.store=new De.default({state:r,controllerMessenger:this.controllerMessenger,persist:!0}),this.connections={},this.createVaultMutex=new g.Mutex,this.seedlessOperationMutex=new g.Mutex,this.extension.runtime.onInstalled.addListener(e=>{e.reason}),this.multichainSubscriptionManager=new L.MultichainSubscriptionManager({getNetworkClientById:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:getNetworkClientById"),findNetworkClientIdByChainId:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:findNetworkClientIdByChainId")}),this.multichainMiddlewareManager=new L.MultichainMiddlewareManager,this.deprecatedNetworkVersions={},this.on("controllerConnectionChanged",e=>{const{completedOnboarding:t}=this.onboardingController.state;e>0&&t?this.triggerNetworkrequests():this.stopNetworkRequests()});const o={ApprovalController:vr.ApprovalControllerInit,LoggingController:mr.LoggingControllerInit,ErrorReportingService:gr.ErrorReportingServiceInit,AppMetadataController:fr.AppMetadataControllerInit,PreferencesController:Zt.PreferencesControllerInit,SnapKeyringBuilder:ar.SnapKeyringBuilderInit,KeyringController:or.KeyringControllerInit,AccountsController:dr.AccountsControllerInit,AddressBookController:yr.AddressBookControllerInit,AlertController:hr.AlertControllerInit,DecryptMessageManager:Cr.DecryptMessageManagerInit,DecryptMessageController:br.DecryptMessageControllerInit,EncryptionPublicKeyManager:Sr.EncryptionPublicKeyManagerInit,EncryptionPublicKeyController:wr.EncryptionPublicKeyControllerInit,SignatureController:kr.SignatureControllerInit,PermissionController:tr.PermissionControllerInit,PermissionLogController:sr.PermissionLogControllerInit,SubjectMetadataController:rr.SubjectMetadataControllerInit,AppStateController:er.AppStateControllerInit,NetworkController:ir.NetworkControllerInit,MetaMetricsController:jt.MetaMetricsControllerInit,MetaMetricsDataDeletionController:pr.MetaMetricsDataDeletionControllerInit,RemoteFeatureFlagController:Qt.RemoteFeatureFlagControllerInit,GasFeeController:qt.GasFeeControllerInit,UserOperationController:Tr.UserOperationControllerInit,ExecutionService:vt.ExecutionServiceInit,InstitutionalSnapController:dt.InstitutionalSnapControllerInit,RateLimitController:vt.RateLimitControllerInit,SnapsRegistry:vt.SnapsRegistryInit,CronjobController:vt.CronjobControllerInit,SelectedNetworkController:Vt.SelectedNetworkControllerInit,SnapController:vt.SnapControllerInit,SnapInsightsController:vt.SnapInsightsControllerInit,SnapInterfaceController:vt.SnapInterfaceControllerInit,WebSocketService:vt.WebSocketServiceInit,BackendWebSocketService:yt.BackendWebSocketServiceInit,AccountActivityService:yt.AccountActivityServiceInit,PPOMController:mt.PPOMControllerInit,PhishingController:ur.PhishingControllerInit,OnboardingController:zt.OnboardingControllerInit,AccountTrackerController:Wt.AccountTrackerControllerInit,TransactionController:pt.TransactionControllerInit,SmartTransactionsController:ft.SmartTransactionsControllerInit,SwapsController:Yt.SwapsControllerInit,BridgeController:Jt.BridgeControllerInit,BridgeStatusController:Xt.BridgeStatusControllerInit,NftController:ht.NftControllerInit,AssetsContractController:ht.AssetsContractControllerInit,NftDetectionController:ht.NftDetectionControllerInit,CurrencyRateController:Ut.CurrencyRateControllerInit,RatesController:$t.RatesControllerInit,TokenListController:Ft.TokenListControllerInit,TokenDetectionController:xt.TokenDetectionControllerInit,TokensController:Bt.TokensControllerInit,TokenBalancesController:Lt.TokenBalancesControllerInit,TokenRatesController:ht.TokenRatesControllerInit,AccountOrderController:cr.AccountOrderControllerInit,AccountTreeController:Mt.AccountTreeControllerInit,MultichainAssetsController:ut.MultichainAssetsControllerInit,MultichainAssetsRatesController:ut.MultichainAssetsRatesControllerInit,MultichainBalancesController:ut.MultichainBalancesControllerInit,MultichainTransactionsController:ut.MultichainTransactionsControllerInit,MultichainAccountService:At.MultichainAccountServiceInit,MultichainRouter:vt.MultichainRouterInit,MultichainNetworkController:ut.MultichainNetworkControllerInit,AuthenticationController:Ct.AuthenticationControllerInit,UserStorageController:bt.UserStorageControllerInit,NotificationServicesController:St.NotificationServicesControllerInit,NotificationServicesPushController:kt.NotificationServicesPushControllerInit,DeFiPositionsController:wt.DeFiPositionsControllerInit,DelegationController:Tt.DelegationControllerInit,OAuthService:It.OAuthServiceInit,SeedlessOnboardingController:It.SeedlessOnboardingControllerInit,SubscriptionController:Gt.SubscriptionControllerInit,SubscriptionService:Gt.SubscriptionServiceInit,NetworkOrderController:ht.NetworkOrderControllerInit,ShieldController:Rt.ShieldControllerInit,GatorPermissionsController:Ot.GatorPermissionsControllerInit,SnapsNameProvider:vt.SnapsNameProviderInit,EnsController:Kt.EnsControllerInit,NameController:Ht.NameControllerInit,NetworkEnablementController:nr.NetworkEnablementControllerInit,AnnouncementController:lr.AnnouncementControllerInit},{controllerApi:a,controllerMemState:i,controllerPersistedState:l,controllersByName:c}=Ar(Nr,this,Fr).call(this,{initFunctions:o,initState:r});this.controllerApi=a,this.controllerMemState=i,this.controllerPersistedState=l,this.controllersByName=c,this.approvalController=c.ApprovalController,this.loggingController=c.LoggingController,this.appMetadataController=c.AppMetadataController,this.preferencesController=c.PreferencesController,this.keyringController=c.KeyringController,this.accountsController=c.AccountsController,this.addressBookController=c.AddressBookController,this.alertController=c.AlertController,this.decryptMessageController=c.DecryptMessageController,this.encryptionPublicKeyController=c.EncryptionPublicKeyController,this.signatureController=c.SignatureController,this.permissionController=c.PermissionController,this.permissionLogController=c.PermissionLogController,this.subjectMetadataController=c.SubjectMetadataController,this.appStateController=c.AppStateController,this.networkController=c.NetworkController,this.metaMetricsController=c.MetaMetricsController,this.metaMetricsDataDeletionController=c.MetaMetricsDataDeletionController,this.remoteFeatureFlagController=c.RemoteFeatureFlagController,this.gasFeeController=c.GasFeeController,this.userOperationController=c.UserOperationController,this.cronjobController=c.CronjobController,this.rateLimitController=c.RateLimitController,this.selectedNetworkController=c.SelectedNetworkController,this.snapController=c.SnapController,this.snapInsightsController=c.SnapInsightsController,this.snapInterfaceController=c.SnapInterfaceController,this.snapsRegistry=c.SnapsRegistry,this.ppomController=c.PPOMController,this.phishingController=c.PhishingController,this.onboardingController=c.OnboardingController,this.accountTrackerController=c.AccountTrackerController,this.txController=c.TransactionController,this.smartTransactionsController=c.SmartTransactionsController,this.swapsController=c.SwapsController,this.bridgeController=c.BridgeController,this.bridgeStatusController=c.BridgeStatusController,this.backendWebSocketService=c.BackendWebSocketService,this.accountActivityService=c.AccountActivityService,this.nftController=c.NftController,this.nftDetectionController=c.NftDetectionController,this.assetsContractController=c.AssetsContractController,this.multichainAssetsController=c.MultichainAssetsController,this.multichainBalancesController=c.MultichainBalancesController,this.multichainTransactionsController=c.MultichainTransactionsController,this.multichainAssetsRatesController=c.MultichainAssetsRatesController,this.multichainAccountService=c.MultichainAccountService,this.tokenBalancesController=c.TokenBalancesController,this.tokenListController=c.TokenListController,this.tokenDetectionController=c.TokenDetectionController,this.tokensController=c.TokensController,this.tokenRatesController=c.TokenRatesController,this.currencyRateController=c.CurrencyRateController,this.multichainNetworkController=c.MultichainNetworkController,this.multichainRatesController=c.RatesController,this.authenticationController=c.AuthenticationController,this.userStorageController=c.UserStorageController,this.delegationController=c.DelegationController,this.notificationServicesController=c.NotificationServicesController,this.notificationServicesPushController=c.NotificationServicesPushController,this.deFiPositionsController=c.DeFiPositionsController,this.accountTreeController=c.AccountTreeController,this.oauthService=c.OAuthService,this.SubscriptionService=c.SubscriptionService,this.seedlessOnboardingController=c.SeedlessOnboardingController,this.subscriptionController=c.SubscriptionController,this.networkOrderController=c.NetworkOrderController,this.networkEnablementController=c.NetworkEnablementController,this.shieldController=c.ShieldController,this.gatorPermissionsController=c.GatorPermissionsController,this.ensController=c.EnsController,this.nameController=c.NameController,this.announcementController=c.AnnouncementController,this.accountOrderController=c.AccountOrderController,this.backup=new qe.default({preferencesController:this.preferencesController,addressBookController:this.addressBookController,accountsController:this.accountsController,networkController:this.networkController,trackMetaMetricsEvent:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:trackEvent")}),this.provider=this.networkController.getProviderAndBlockTracker().provider,this.blockTracker=this.networkController.getProviderAndBlockTracker().blockTracker,this.on("update",e=>{this.metaMetricsController.handleMetaMaskStateUpdate(e)}),this.controllerMessenger.subscribe("KeyringController:unlock",()=>this._onUnlock()),this.controllerMessenger.subscribe("KeyringController:lock",()=>this._onLock()),this.controllerMessenger.subscribe("KeyringController:stateChange",e=>{this._onKeyringControllerUpdate(e)}),this.userOperationController.hub.on("user-operation-added",this._onUserOperationAdded.bind(this)),this.userOperationController.hub.on("transaction-updated",this._onUserOperationTransactionUpdated.bind(this)),this.controllerMessenger.subscribe("SubscriptionController:stateChange",e=>{(0,Ee.getIsShieldSubscriptionActive)(e.subscriptions)?this.shieldController.start():this.shieldController.stop()});const d=this.controllerMessenger.getRestricted({name:"PetnamesBridge",allowedEvents:["NameController:stateChange","AccountsController:stateChange","AddressBookController:stateChange"],allowedActions:["AccountsController:listAccounts"]});new Ie.AddressBookPetnamesBridge({addressBookController:this.addressBookController,nameController:this.nameController,messenger:d}).init(),new _e.AccountIdentitiesPetnamesBridge({nameController:this.nameController,messenger:d}).init(),this.getSecurityAlertsConfig=async e=>(0,Te.getShieldGatewayConfig)(()=>this.controllerMessenger.call("AuthenticationController:getBearerToken"),()=>this.controllerMessenger.call("SubscriptionController:getSubscriptionByProduct",q.PRODUCT_TYPES.SHIELD),e),this.notificationServicesController.init(),this.snapController.init(),this.cronjobController.init(),this.controllerMessenger.subscribe("TransactionController:transactionStatusUpdated",({transactionMeta:e})=>{this._onFinishedTransaction(e)}),this.controllerMessenger.subscribe("OnboardingController:stateChange",(0,Ge.previousValueComparator)(async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n,firstTimeFlowType:o}=t;if(!r&&n){const{address:e}=this.accountsController.getSelectedAccount();this.isMultichainAccountsFeatureState2Enabled()&&(await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorageAtLeastOnce()),o===be.FirstTimeFlowType.socialImport?await this._importAccountsWithBalances():this.isMultichainAccountsFeatureState2Enabled()?await this.discoverAndCreateAccounts():await this._addAccountsWithBalance(),this.postOnboardingInitialization(),this.triggerNetworkrequests(),await this.tokenDetectionController.detectTokens({selectedAddress:e})}},this.onboardingController.state));const h=({origin:e})=>{if(e===Z.ORIGIN_METAMASK){const e=this.accountsController.getSelectedAccount().address;return e?[e]:[]}return this.getPermittedAccounts(e)};this.eip5792Middleware=(0,s.createScaffoldMiddleware)({wallet_getCapabilities:(0,s.createAsyncMiddleware)(async(e,t)=>(0,$.walletGetCapabilities)(e,t,{getAccounts:h,getCapabilities:$.getCapabilities.bind(null,{getDismissSmartAccountSuggestionEnabled:()=>this.preferencesController.state.preferences.dismissSmartAccountSuggestionEnabled,getIsSmartTransaction:e=>(0,ce.getIsSmartTransaction)(this._getMetaMaskState(),e),isAtomicBatchSupported:this.txController.isAtomicBatchSupported.bind(this.txController),isRelaySupported:Pt.isRelaySupported,getSendBundleSupportedChains:Nt.getSendBundleSupportedChains,isAuxiliaryFundsSupported:e=>ge.ALLOWED_BRIDGE_CHAIN_IDS.includes(e)},this.controllerMessenger)})),wallet_sendCalls:(0,s.createAsyncMiddleware)(async(e,t)=>(0,$.walletSendCalls)(e,t,{getAccounts:h,processSendCalls:$.processSendCalls.bind(null,{addTransaction:this.txController.addTransaction.bind(this.txController),addTransactionBatch:this.txController.addTransactionBatch.bind(this.txController),getDismissSmartAccountSuggestionEnabled:()=>this.preferencesController.state.preferences.dismissSmartAccountSuggestionEnabled,isAtomicBatchSupported:this.txController.isAtomicBatchSupported.bind(this.txController),validateSecurity:(e,t,r)=>(0,tt.validateRequestWithPPOM)({chainId:r,ppomController:this.ppomController,request:t,securityAlertId:e,updateSecurityAlertResponse:this.updateSecurityAlertResponse.bind(this),getSecurityAlertsConfig:this.getSecurityAlertsConfig.bind(this)}),isAuxiliaryFundsSupported:e=>ge.ALLOWED_BRIDGE_CHAIN_IDS.includes(e)},this.controllerMessenger)})),wallet_getCallsStatus:(0,s.createAsyncMiddleware)(async(e,t)=>(0,$.walletGetCallsStatus)(e,t,{getCallsStatus:$.getCallsStatus.bind(null,this.controllerMessenger)}))}),this.metamaskMiddleware=(0,We.default)({static:{eth_syncing:!1,web3_clientVersion:`MetaMask/v${n}`},version:n,getAccounts:h,processTransaction:(e,t)=>(0,Xe.addDappTransaction)(this.getAddTransactionRequest({transactionParams:e,dappRequest:t})),processTypedMessage:(...e)=>(0,Ze.addTypedMessage)({signatureController:this.signatureController,signatureParams:e}),processTypedMessageV3:(...e)=>(0,Ze.addTypedMessage)({signatureController:this.signatureController,signatureParams:e}),processTypedMessageV4:(...e)=>(0,Ze.addTypedMessage)({signatureController:this.signatureController,signatureParams:e}),processPersonalMessage:(...e)=>(0,Ze.addPersonalMessage)({signatureController:this.signatureController,signatureParams:e}),processEncryptionPublicKey:this.encryptionPublicKeyController.newRequestEncryptionPublicKey.bind(this.encryptionPublicKeyController),processDecryptMessage:this.decryptMessageController.newRequestDecryptMessage.bind(this.decryptMessageController),getPendingNonce:this.getPendingNonce.bind(this),getPendingTransactionByHash:e=>this.txController.state.transactions.find(t=>t.hash===e&&t.status===R.TransactionStatus.submitted),processRequestExecutionPermissions:(0,Se.isGatorPermissionsFeatureEnabled)()?Dt.forwardRequestToSnap.bind(null,{snapId:"npm:@metamask/permissions-kernel-snap",handleRequest:this.handleSnapRequest.bind(this)}):undefined}),this.on("update",e=>this._onStateUpdate(e));const p={AccountTracker:this.accountTrackerController,TokenRatesController:this.tokenRatesController,DecryptMessageController:this.decryptMessageController,EncryptionPublicKeyController:this.encryptionPublicKeyController,SignatureController:this.signatureController,SwapsController:this.swapsController,BridgeController:this.bridgeController,BridgeStatusController:this.bridgeStatusController,EnsController:this.ensController,ApprovalController:this.approvalController};this.store.updateStructure({AccountsController:this.accountsController,AppStateController:this.appStateController,AppMetadataController:this.appMetadataController,KeyringController:this.keyringController,PreferencesController:this.preferencesController,MetaMetricsController:this.metaMetricsController,MetaMetricsDataDeletionController:this.metaMetricsDataDeletionController,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,MultichainNetworkController:this.multichainNetworkController,NetworkController:this.networkController,AlertController:this.alertController,OnboardingController:this.onboardingController,SeedlessOnboardingController:this.seedlessOnboardingController,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController,SubjectMetadataController:this.subjectMetadataController,AnnouncementController:this.announcementController,NetworkOrderController:this.networkOrderController,NetworkEnablementController:this.networkEnablementController,AccountOrderController:this.accountOrderController,GasFeeController:this.gasFeeController,GatorPermissionsController:this.gatorPermissionsController,TokenListController:this.tokenListController,TokensController:this.tokensController,TokenBalancesController:this.tokenBalancesController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,PhishingController:this.phishingController,SelectedNetworkController:this.selectedNetworkController,LoggingController:this.loggingController,MultichainRatesController:this.multichainRatesController,NameController:this.nameController,UserOperationController:this.userOperationController,AuthenticationController:this.authenticationController,UserStorageController:this.userStorageController,NotificationServicesController:this.notificationServicesController,NotificationServicesPushController:this.notificationServicesPushController,RemoteFeatureFlagController:this.remoteFeatureFlagController,DeFiPositionsController:this.deFiPositionsController,...p,...l}),this.memStore=new De.default({config:{AccountsController:this.accountsController,AppStateController:this.appStateController,AppMetadataController:this.appMetadataController,MultichainAssetsController:this.multichainAssetsController,MultichainBalancesController:this.multichainBalancesController,MultichainTransactionsController:this.multichainTransactionsController,MultichainAssetsRatesController:this.multichainAssetsRatesController,TokenRatesController:this.tokenRatesController,MultichainNetworkController:this.multichainNetworkController,NetworkController:this.networkController,KeyringController:this.keyringController,PreferencesController:this.preferencesController,MetaMetricsController:this.metaMetricsController,MetaMetricsDataDeletionController:this.metaMetricsDataDeletionController,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,AlertController:this.alertController,OnboardingController:this.onboardingController,SeedlessOnboardingController:this.seedlessOnboardingController,SubscriptionController:this.subscriptionController,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController,SubjectMetadataController:this.subjectMetadataController,AnnouncementController:this.announcementController,NetworkOrderController:this.networkOrderController,NetworkEnablementController:this.networkEnablementController,AccountOrderController:this.accountOrderController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,TokenBalancesController:this.tokenBalancesController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,SelectedNetworkController:this.selectedNetworkController,LoggingController:this.loggingController,MultichainRatesController:this.multichainRatesController,SnapController:this.snapController,CronjobController:this.cronjobController,SnapsRegistry:this.snapsRegistry,SnapInterfaceController:this.snapInterfaceController,SnapInsightsController:this.snapInsightsController,NameController:this.nameController,UserOperationController:this.userOperationController,AuthenticationController:this.authenticationController,UserStorageController:this.userStorageController,NotificationServicesController:this.notificationServicesController,NotificationServicesPushController:this.notificationServicesPushController,RemoteFeatureFlagController:this.remoteFeatureFlagController,DeFiPositionsController:this.deFiPositionsController,PhishingController:this.phishingController,ShieldController:this.shieldController,...p,...i},controllerMessenger:this.controllerMessenger});const m=[this.accountTrackerController.resetState.bind(this.accountTrackerController),this.decryptMessageController.resetState.bind(this.decryptMessageController),this.encryptionPublicKeyController.resetState.bind(this.encryptionPublicKeyController),this.signatureController.resetState.bind(this.signatureController),this.swapsController.resetState.bind(this.swapsController),this.bridgeController.resetState.bind(this.bridgeController),this.ensController.resetState.bind(this.ensController),this.approvalController.clear.bind(this.approvalController)];ie.isManifestV3?!0===t&&(this.resetStates(m),this.extension.storage.session.set({isFirstMetaMaskControllerSetup:!1})):this.resetStates(m);!this.isUnlocked()&&this.onboardingController.state.completedOnboarding,this._startUISync(),this.extension.runtime.getPlatformInfo().then(({os:e})=>{this.appStateController.setBrowserEnvironment(e,this.extension.runtime.getBrowserInfo===undefined?"chrome":"firefox")}),this.setupControllerEventSubscriptions(),this.setupMultichainDataAndSubscriptions(),this.publicConfigStore=this.createPublicConfigStore(),this.extension.runtime.onMessageExternal.addListener(Oe.onMessageReceived),(0,Oe.checkForMultipleVersionsRunning)(),this.onboardingController.state.completedOnboarding&&this.postOnboardingInitialization()}getInfuraFeatureFlags(){(0,me.default)({url:"https://bridge.api.cx.metamask.io/featureFlags",cacheRefreshTime:20*X.MINUTE}).then(this.onFeatureFlagResponseReceived).catch(e=>{v.default.warn("Feature flag endpoint is unreachable",e)})}onFeatureFlagResponseReceived(e){const{multiChainAssets:t={}}=e,{pollInterval:r}=t;r>0&&this.tokenBalancesController.setIntervalLength(r*X.SECOND)}isMultichainAccountsFeatureState2Enabled(){var e;const t=null===(e=this.remoteFeatureFlagController)||void 0===e||null===(e=e.state)||void 0===e||null===(e=e.remoteFeatureFlags)||void 0===e?void 0:e.enableMultichainAccountsState2;return(0,V.isMultichainAccountsFeatureEnabled)(t,V.FEATURE_VERSION_2)}postOnboardingInitialization(){const{usePhishDetect:e}=this.preferencesController.state;e&&this.phishingController.maybeUpdateState()}async lookupSelectedNetworks(){const e=(0,he.selectAllEnabledNetworkClientIds)(this._getMetaMaskState());await Promise.allSettled([this.networkController.lookupNetwork(),...e.map(async e=>await this.networkController.lookupNetwork(e))])}triggerNetworkrequests(){this.tokenDetectionController.enable(),this.getInfuraFeatureFlags(),(0,j.isEvmAccountType)(this.accountsController.getSelectedMultichainAccount().type)||this.multichainRatesController.start()}stopNetworkRequests(){this.txController.stopIncomingTransactionPolling(),this.tokenDetectionController.disable(),this.multichainRatesController.stop()}resetStates(e){e.forEach(e=>{try{e()}catch(e){console.error(e)}})}async getSnapKeyring(){let[e]=this.keyringController.getKeyringsByType(Y.KeyringType.snap);return e||(await this.keyringController.addNewKeyring(Y.KeyringType.snap),[e]=this.keyringController.getKeyringsByType(Y.KeyringType.snap)),e}getSnapKeyringIfAvailable(){if(this.keyringController.isUnlocked()){const[e]=this.keyringController.getKeyringsByType(Y.KeyringType.snap);return e}return undefined}async forwardSelectedAccountGroupToSnapKeyring(e,t){if(e&&t){const r=this.accountTreeController.getAccountGroupObject(t);if(r){r.accounts.some(e=>{const t=this.accountsController.getAccount(e);return Boolean(t)&&!(0,j.isEvmAccountType)(t.type)})&&await e.setSelectedAccounts(r.accounts)}}}trackInsightSnapView(e){this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.InsightSnapViewed,category:ee.MetaMetricsEventCategory.Snaps,properties:{snap_id:e}})}_getSnapMetadata(e){var t;return null===(t=this.snapsRegistry.state.database)||void 0===t||null===(t=t.verifiedSnaps)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.metadata}async handleSnapRequest(e){return await this.controllerMessenger.call("SnapController:handleRequest",e)}setupControllerEventSubscriptions(){let e,t;try{var r;t=null===(r=this.accountsController.getSelectedMultichainAccount(fe.MultichainNetworks.SOLANA))||void 0===r?void 0:r.address}catch{}this.controllerMessenger.subscribe("PreferencesController:stateChange",(0,Ge.previousValueComparator)(async(e,t)=>{const{currentLocale:r}=t;await(0,we.updateCurrentLocale)(r)},this.preferencesController.state)),this.controllerMessenger.subscribe(`${this.accountsController.name}:selectedAccountChange`,async t=>{t.address&&t.address!==e&&(e=t.address,await this._onAccountChange(t.address))}),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,Qe.diffMap)(e,t);for(const[e,t]of r.entries())this._notifyAccountsChange(e,t)},Qe.getPermittedAccountsByOrigin),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,Qe.getChangedAuthorizations)(e,t),n=(0,Qe.getRemovedAuthorizations)(e,t);for(const[e,t]of n.entries()){const r=(0,U.getSessionScopes)(t,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});Object.entries(r).forEach(([t,r])=>{r.notifications.includes("eth_subscription")&&r.methods.includes("eth_subscribe")&&this.removeMultichainApiEthSubscriptionMiddleware({scope:t,origin:e})})}for(const[e,t]of r.entries()){const r=(0,U.getSessionScopes)(t,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});Object.entries(r).forEach(([t,r])=>{r.notifications.includes("eth_subscription")&&r.methods.includes("eth_subscribe")?Object.values(this.connections[e]??{}).forEach(({tabId:r})=>{this.addMultichainApiEthSubscriptionMiddleware({scope:t,origin:e,tabId:r})}):this.removeMultichainApiEthSubscriptionMiddleware({scope:t,origin:e})}),this._notifyAuthorizationChange(e,t)}},Qe.getAuthorizedScopesByOrigin),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{(0,u.uniq)([...t.keys(),...e.keys()]).forEach(r=>{var n,o;const a=t.get(r),s=e.get(r),i=Boolean(null==a||null===(n=a.sessionProperties)||void 0===n?void 0:n[U.KnownSessionProperties.SolanaAccountChangedNotifications]),l=Boolean(null==s||null===(o=s.sessionProperties)||void 0===o?void 0:o[U.KnownSessionProperties.SolanaAccountChangedNotifications]);if(!i&&!l)return;const c=(a?(0,U.getPermittedAccountsForScopes)(a,[fe.MultichainNetworks.SOLANA,fe.MultichainNetworks.SOLANA_DEVNET,fe.MultichainNetworks.SOLANA_TESTNET]):[]).map(e=>{const{address:t}=(0,F.parseCaipAccountId)(e);return t}),d=(0,u.uniq)(c),[h]=this.sortMultichainAccountsByLastSelected(d),p=(s?(0,U.getPermittedAccountsForScopes)(s,[fe.MultichainNetworks.SOLANA,fe.MultichainNetworks.SOLANA_DEVNET,fe.MultichainNetworks.SOLANA_TESTNET]):[]).map(e=>{const{address:t}=(0,F.parseCaipAccountId)(e);return t}),m=(0,u.uniq)(p),[f]=this.sortMultichainAccountsByLastSelected(m);h!==f&&this._notifySolanaAccountChange(r,f?[f]:[])})},Qe.getAuthorizedScopesByOrigin),this.controllerMessenger.subscribe(`${this.accountsController.name}:selectedAccountChange`,async e=>{if(e.type===j.SolAccountType.DataAccount&&e.address!==t){t=e.address;const r=(0,Qe.getOriginsWithSessionProperty)(this.permissionController.state,U.KnownSessionProperties.SolanaAccountChangedNotifications),n=(0,Qe.getPermittedAccountsForScopesByOrigin)(this.permissionController.state,[fe.MultichainNetworks.SOLANA,fe.MultichainNetworks.SOLANA_DEVNET,fe.MultichainNetworks.SOLANA_TESTNET]);if(n.size>0)for(const[t,o]of n.entries()){o.map(e=>{const{address:t}=(0,F.parseCaipAccountId)(e);return t}).includes(e.address)&&r[t]&&this._notifySolanaAccountChange(t,[e.address])}}}),this.controllerMessenger.subscribe(`${this.accountTreeController.name}:selectedAccountGroupChange`,e=>{this.forwardSelectedAccountGroupToSnapKeyring(this.getSnapKeyringIfAvailable(),e);const[r]=this.accountTreeController.getAccountsFromSelectedAccountGroup({scopes:[j.SolScope.Mainnet]});if(r&&r.type===j.SolAccountType.DataAccount&&r.address!==t){t=r.address;const e=(0,Qe.getOriginsWithSessionProperty)(this.permissionController.state,U.KnownSessionProperties.SolanaAccountChangedNotifications),n=(0,Qe.getPermittedAccountsForScopesByOrigin)(this.permissionController.state,[fe.MultichainNetworks.SOLANA,fe.MultichainNetworks.SOLANA_DEVNET,fe.MultichainNetworks.SOLANA_TESTNET]);if(n.size>0)for(const[t,o]of n.entries()){o.map(e=>{const{address:t}=(0,F.parseCaipAccountId)(e);return t}).includes(r.address)&&e[t]&&this._notifySolanaAccountChange(t,[r.address])}}}),this.controllerMessenger.subscribe(`${this.multichainAccountService.name}:multichainAccountGroupUpdated`,e=>{this.accountTreeController.getSelectedAccountGroup()===e.id&&this.forwardSelectedAccountGroupToSnapKeyring(this.getSnapKeyringIfAvailable(),e.id)}),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,async(e,t)=>{const r=(0,Qe.diffMap)(e,t);for(const[e,t]of r.entries()){const r=this.selectedNetworkController.getNetworkClientIdForDomain(e),n=this.networkController.getNetworkConfigurationByNetworkClientId(r);if(!n){v.default.warn(`No network configuration found for clientId: ${r}`);continue}const{chainId:o}=n;if(t.length>0&&!t.includes(o)){const r=this.networkController.findNetworkClientIdByChainId(t[0]);this.networkController.setActiveNetwork(r),this.selectedNetworkController.setNetworkClientIdForDomain(e,r)}}},Qe.getPermittedChainsByOrigin),this.controllerMessenger.subscribe("NetworkController:networkRemoved",({chainId:e})=>{const t=(0,F.toCaipChainId)("eip155",(0,F.hexToBigInt)(e).toString(10));this.removeAllScopePermissions(t)}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstallStarted`,(e,t,r)=>{var n;const o=null===(n=this._getSnapMetadata(e))||void 0===n?void 0:n.category;this.metaMetricsController.trackEvent({event:r?ee.MetaMetricsEventName.SnapUpdateStarted:ee.MetaMetricsEventName.SnapInstallStarted,category:ee.MetaMetricsEventCategory.Snaps,properties:{snap_id:e,origin:t,snap_category:o}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstallFailed`,(e,t,r,n)=>{var o;const a=n.includes("User rejected the request."),s=r?ee.MetaMetricsEventName.SnapUpdateFailed:ee.MetaMetricsEventName.SnapInstallFailed,i=r?ee.MetaMetricsEventName.SnapUpdateRejected:ee.MetaMetricsEventName.SnapInstallRejected,l=null===(o=this._getSnapMetadata(e))||void 0===o?void 0:o.category;this.metaMetricsController.trackEvent({event:a?i:s,category:ee.MetaMetricsEventCategory.Snaps,properties:{snap_id:e,origin:t,snap_category:l}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstalled`,(e,t,r)=>{var n;if(r)return;const o=e.id,a=null===(n=this._getSnapMetadata(o))||void 0===n?void 0:n.category;this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.SnapInstalled,category:ee.MetaMetricsEventCategory.Snaps,properties:{snap_id:o,version:e.version,origin:t,snap_category:a}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapUpdated`,(e,t,r,n)=>{var o;if(n)return;const a=e.id,s=null===(o=this._getSnapMetadata(a))||void 0===o?void 0:o.category;this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.SnapUpdated,category:ee.MetaMetricsEventCategory.Snaps,properties:{snap_id:a,old_version:t,new_version:e.version,origin:r,snap_category:s}})}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapTerminated`,e=>{const t=Object.values(this.approvalController.state.pendingApprovals).filter(t=>t.origin===e.id&&t.type.startsWith(J.RestrictedMethods.snap_dialog));for(const e of t)this.approvalController.reject(e.id,new Error("Snap was terminated."))}),this.controllerMessenger.subscribe(`${this.snapController.name}:snapUninstalled`,e=>{var t;const r=this.notificationServicesController.getNotificationsByType(B.TRIGGER_TYPES.SNAP).filter(t=>t.data.origin===e.id).map(e=>e.id);this.notificationServicesController.deleteNotificationsById(r);const n=e.id,o=null===(t=this._getSnapMetadata(n))||void 0===t?void 0:t.category;this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.SnapUninstalled,category:ee.MetaMetricsEventCategory.Snaps,properties:{snap_id:n,version:e.version,snap_category:o}})})}setupMultichainDataAndSubscriptions(){this.controllerMessenger.subscribe("AccountsController:selectedAccountChange",e=>{0===this.activeControllerConnections||(0,j.isEvmAccountType)(e.type)?this.multichainRatesController.stop():this.multichainRatesController.start()}),this.controllerMessenger.subscribe("CurrencyRateController:stateChange",({currentCurrency:e})=>{e!==this.multichainRatesController.state.fiatCurrency&&this.multichainRatesController.setFiatCurrency(e)})}addMultichainApiEthSubscriptionMiddleware({scope:e,origin:t,tabId:r}){const n=this.multichainSubscriptionManager.subscribe({scope:e,origin:t,tabId:r});this.multichainMiddlewareManager.addMiddleware({scope:e,origin:t,tabId:r,middleware:n.middleware})}removeMultichainApiEthSubscriptionMiddleware({scope:e,origin:t}){this.multichainMiddlewareManager.removeMiddlewareByScopeAndOrigin(e,t),this.multichainSubscriptionManager.unsubscribeByScopeAndOrigin(e,t)}createPublicConfigStore(){const e=new l.ObservableStore,t=async({isUnlocked:e})=>{const{chainId:t,networkVersion:r,isConnected:n}=await this.getProviderNetworkState();return{isUnlocked:e,chainId:t,networkVersion:n?r:"loading"}},r=async r=>{var n;(null===(n=r.networksMetadata[r.selectedNetworkClientId])||void 0===n?void 0:n.status)===z.NetworkStatus.Available&&e.putState(await t(r))};return this.on("update",r),r(this.getState()),e}async getProviderState(e,{isInitializingStreamProvider:t=!1}={}){const r=await this.getProviderNetworkState({origin:e,isInitializingStreamProvider:t}),n={};if(ie.isManifestV3){var o;const{chrome:e}=globalThis;n.extensionId=null==e||null===(o=e.runtime)||void 0===o?void 0:o.id}return{isUnlocked:!0,accounts:this.getPermittedAccounts(e),...n,...r}}async getProviderNetworkState({origin:e=M.METAMASK_DOMAIN,isInitializingStreamProvider:t=!1}={}){const r=this.controllerMessenger.call("SelectedNetworkController:getNetworkClientIdForDomain",e),n=this.controllerMessenger.call("NetworkController:getNetworkClientById",r),{chainId:o}=n.configuration,{completedOnboarding:a}=this.onboardingController.state;let s=this.deprecatedNetworkVersions[r];if(s===undefined&&a&&!t){try{const e=await n.provider.request({method:"net_version"});s=(0,le.convertNetworkId)(e)}catch(e){console.error(e),s=null}this.deprecatedNetworkVersions[r]=s}const i=this.networkController.state.networksMetadata[r];return{chainId:o,networkVersion:s??"loading",isConnected:(null==i?void 0:i.status)===z.NetworkStatus.Available}}getState(){const{vault:e}=this.keyringController.state,t=Boolean(e),r=this.memStore.getFlatState();return{isInitialized:t,...(0,lt.sanitizeUIState)(r)}}async _addNetworkAndSetActive(e){var t;const r=await this.networkController.addNetwork(e),{networkClientId:n}=(null==r||null===(t=r.rpcEndpoints)||void 0===t?void 0:t[r.defaultRpcEndpointIndex])??{};return await this.networkController.setActiveNetwork(n),r}getApi(){const{accountsController:e,addressBookController:t,alertController:r,appStateController:n,nftController:o,nftDetectionController:a,currencyRateController:s,tokenBalancesController:i,tokenDetectionController:l,ensController:c,tokenListController:d,gasFeeController:u,gatorPermissionsController:h,metaMetricsController:p,networkController:m,multichainNetworkController:f,announcementController:g,onboardingController:v,permissionController:y,preferencesController:C,tokensController:b,smartTransactionsController:w,txController:S,backup:k,approvalController:T,phishingController:P,tokenRatesController:E,accountTrackerController:M,authenticationController:A,userStorageController:I,notificationServicesController:_,notificationServicesPushController:R,deFiPositionsController:O,multichainAssetsRatesController:D}=this;return{getState:this.getState.bind(this),setCurrentCurrency:s.setCurrentCurrency.bind(s),setUseBlockie:C.setUseBlockie.bind(C),setAvatarType:e=>C.setPreference("avatarType",e),setUsePhishDetect:C.setUsePhishDetect.bind(C),setUseMultiAccountBalanceChecker:C.setUseMultiAccountBalanceChecker.bind(C),setUseSafeChainsListValidation:C.setUseSafeChainsListValidation.bind(C),setUseTokenDetection:C.setUseTokenDetection.bind(C),setUseNftDetection:C.setUseNftDetection.bind(C),setUse4ByteResolution:C.setUse4ByteResolution.bind(C),setUseCurrencyRateCheck:C.setUseCurrencyRateCheck.bind(C),setOpenSeaEnabled:C.setOpenSeaEnabled.bind(C),getProviderConfig:()=>(0,ue.getProviderConfig)({metamask:this.networkController.state}),grantPermissionsIncremental:this.permissionController.grantPermissionsIncremental.bind(this.permissionController),grantPermissions:this.permissionController.grantPermissions.bind(this.permissionController),setSecurityAlertsEnabled:C.setSecurityAlertsEnabled.bind(C),setAddSnapAccountEnabled:C.setAddSnapAccountEnabled.bind(C),setUseExternalNameSources:C.setUseExternalNameSources.bind(C),setUseTransactionSimulations:C.setUseTransactionSimulations.bind(C),setIpfsGateway:C.setIpfsGateway.bind(C),setIsIpfsGatewayEnabled:C.setIsIpfsGatewayEnabled.bind(C),setUseAddressBarEnsResolution:C.setUseAddressBarEnsResolution.bind(C),setParticipateInMetaMetrics:p.setParticipateInMetaMetrics.bind(p),setDataCollectionForMarketing:p.setDataCollectionForMarketing.bind(p),setMarketingCampaignCookieId:p.setMarketingCampaignCookieId.bind(p),setCurrentLocale:C.setCurrentLocale.bind(C),setServiceWorkerKeepAlivePreference:C.setServiceWorkerKeepAlivePreference.bind(C),markPasswordForgotten:this.markPasswordForgotten.bind(this),unMarkPasswordForgotten:this.unMarkPasswordForgotten.bind(this),getRequestAccountTabIds:this.getRequestAccountTabIds,getOpenMetamaskTabsIds:this.getOpenMetamaskTabsIds,markNotificationPopupAsAutomaticallyClosed:()=>this.notificationManager.markAsAutomaticallyClosed(),getCode:this.getCode.bind(this),addNewAccount:this.addNewAccount.bind(this),getSeedPhrase:this.getSeedPhrase.bind(this),resetAccount:this.resetAccount.bind(this),removeAccount:this.removeAccount.bind(this),importAccountWithStrategy:this.importAccountWithStrategy.bind(this),getNextAvailableAccountName:e.getNextAvailableAccountName.bind(e),getAccountsBySnapId:e=>(0,Je.getAccountsBySnapId)(this.getSnapKeyring.bind(this),e),checkIsSeedlessPasswordOutdated:this.checkIsSeedlessPasswordOutdated.bind(this),syncPasswordAndUnlockWallet:this.syncPasswordAndUnlockWallet.bind(this),subscriptionsStartPolling:this.subscriptionController.startPolling.bind(this.subscriptionController),getSubscriptionsEligibilities:this.subscriptionController.getSubscriptionsEligibilities.bind(this.subscriptionController),getSubscriptions:this.subscriptionController.getSubscriptions.bind(this.subscriptionController),getSubscriptionPricing:this.subscriptionController.getPricing.bind(this.subscriptionController),getSubscriptionCryptoApprovalAmount:this.subscriptionController.getCryptoApproveTransactionParams.bind(this.subscriptionController),cancelSubscription:this.subscriptionController.cancelSubscription.bind(this.subscriptionController),unCancelSubscription:this.subscriptionController.unCancelSubscription.bind(this.subscriptionController),getSubscriptionBillingPortalUrl:this.subscriptionController.getBillingPortalUrl.bind(this.subscriptionController),startSubscriptionWithCard:this.SubscriptionService.startSubscriptionWithCard.bind(this.SubscriptionService),updateSubscriptionCardPaymentMethod:this.SubscriptionService.updateSubscriptionCardPaymentMethod.bind(this.SubscriptionService),startSubscriptionWithCrypto:this.subscriptionController.startSubscriptionWithCrypto.bind(this.subscriptionController),updateSubscriptionCryptoPaymentMethod:this.SubscriptionService.updateSubscriptionCryptoPaymentMethod.bind(this.SubscriptionService),submitSubscriptionUserEvents:this.subscriptionController.submitUserEvent.bind(this.subscriptionController),connectHardware:this.connectHardware.bind(this),forgetDevice:this.forgetDevice.bind(this),checkHardwareStatus:this.checkHardwareStatus.bind(this),unlockHardwareWalletAccount:this.unlockHardwareWalletAccount.bind(this),attemptLedgerTransportCreation:this.attemptLedgerTransportCreation.bind(this),completeQrCodeScan:n.completeQrCodeScan.bind(n),cancelQrCodeScan:n.cancelQrCodeScan.bind(n),submitPassword:this.submitPassword.bind(this),verifyPassword:this.verifyPassword.bind(this),setActiveNetwork:async e=>await this.multichainNetworkController.setActiveNetwork(e),findNetworkClientIdByChainId:this.networkController.findNetworkClientIdByChainId.bind(this.networkController),getNetworksWithTransactionActivityByAccounts:this.multichainNetworkController.getNetworksWithTransactionActivityByAccounts.bind(this.multichainNetworkController),setActiveNetworkConfigurationId:e=>{this.networkController.setActiveNetwork(e)},setNetworkClientIdForDomain:(e,t)=>this.selectedNetworkController.setNetworkClientIdForDomain(e,t),rollbackToPreviousProvider:m.rollbackToPreviousProvider.bind(m),addNetwork:this._addNetworkAndSetActive.bind(this),updateNetwork:this.networkController.updateNetwork.bind(this.networkController),removeNetwork:this.multichainNetworkController.removeNetwork.bind(this.multichainNetworkController),getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getNetworkConfigurationByNetworkClientId:this.networkController.getNetworkConfigurationByNetworkClientId.bind(this.networkController),setSelectedAddress:e=>{const t=this.accountsController.getAccountByAddress(e);if(!t)throw new Error(`No account found for address: ${e}`);this.accountsController.setSelectedAccount(t.id)},toggleExternalServices:this.toggleExternalServices.bind(this),addToken:b.addToken.bind(b),updateTokenType:b.updateTokenType.bind(b),setFeatureFlag:C.setFeatureFlag.bind(C),setPreference:C.setPreference.bind(C),addKnownMethodData:C.addKnownMethodData.bind(C),setDismissSeedBackUpReminder:C.setDismissSeedBackUpReminder.bind(C),setOverrideContentSecurityPolicyHeader:C.setOverrideContentSecurityPolicyHeader.bind(C),setAdvancedGasFee:C.setAdvancedGasFee.bind(C),setTheme:C.setTheme.bind(C),setSnapsAddSnapAccountModalDismissed:C.setSnapsAddSnapAccountModalDismissed.bind(C),setManageInstitutionalWallets:C.setManageInstitutionalWallets.bind(C),setSelectedInternalAccount:e=>{this.accountsController.getAccount(e)&&this.accountsController.setSelectedAccount(e)},setAccountName:e.setAccountName.bind(e),setAccountLabel:(e,t)=>{const r=this.accountsController.getAccountByAddress(e);if(r===undefined)throw new Error(`No account found for address: ${e}`);this.accountsController.setAccountName(r.id,t)},setSelectedMultichainAccount:e=>{this.accountTreeController.setSelectedAccountGroup(e)},setAccountGroupName:(e,t)=>{this.accountTreeController.setAccountGroupName(e,t)},setAccountGroupPinned:this.accountTreeController.setAccountGroupPinned.bind(this.accountTreeController),setAccountGroupHidden:this.accountTreeController.setAccountGroupHidden.bind(this.accountTreeController),syncAccountTreeWithUserStorage:async()=>{await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorage()},createNextMultichainAccountGroup:async e=>{await this.multichainAccountService.createNextMultichainAccountGroup({entropySource:e})},alignMultichainWallets:async()=>{this.multichainAccountService&&await this.multichainAccountService.alignWallets()},getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),getTokenSymbol:this.getTokenSymbol.bind(this),getTokenStandardAndDetailsByChain:this.getTokenStandardAndDetailsByChain.bind(this),getERC1155BalanceOf:this.assetsContractController.getERC1155BalanceOf.bind(this.assetsContractController),addNft:o.addNft.bind(o),addNftVerifyOwnership:o.addNftVerifyOwnership.bind(o),removeAndIgnoreNft:o.removeAndIgnoreNft.bind(o),removeNft:o.removeNft.bind(o),checkAndUpdateAllNftsOwnershipStatus:o.checkAndUpdateAllNftsOwnershipStatus.bind(o),checkAndUpdateSingleNftOwnershipStatus:o.checkAndUpdateSingleNftOwnershipStatus.bind(o),getNFTContractInfo:o.getNFTContractInfo.bind(o),isNftOwner:o.isNftOwner.bind(o),setAddressBook:t.set.bind(t),removeFromAddressBook:t.delete.bind(t),setLastActiveTime:n.setLastActiveTime.bind(n),setCurrentExtensionPopupId:n.setCurrentExtensionPopupId.bind(n),setDefaultHomeActiveTabName:n.setDefaultHomeActiveTabName.bind(n),setConnectedStatusPopoverHasBeenShown:n.setConnectedStatusPopoverHasBeenShown.bind(n),setRecoveryPhraseReminderHasBeenShown:n.setRecoveryPhraseReminderHasBeenShown.bind(n),setRecoveryPhraseReminderLastShown:n.setRecoveryPhraseReminderLastShown.bind(n),setTermsOfUseLastAgreed:n.setTermsOfUseLastAgreed.bind(n),setSurveyLinkLastClickedOrClosed:n.setSurveyLinkLastClickedOrClosed.bind(n),setOnboardingDate:n.setOnboardingDate.bind(n),setLastViewedUserSurvey:n.setLastViewedUserSurvey.bind(n),setRampCardClosed:n.setRampCardClosed.bind(n),setNewPrivacyPolicyToastClickedOrClosed:n.setNewPrivacyPolicyToastClickedOrClosed.bind(n),setNewPrivacyPolicyToastShownDate:n.setNewPrivacyPolicyToastShownDate.bind(n),setSnapsInstallPrivacyWarningShownStatus:n.setSnapsInstallPrivacyWarningShownStatus.bind(n),setOutdatedBrowserWarningLastShown:n.setOutdatedBrowserWarningLastShown.bind(n),setIsUpdateAvailable:n.setIsUpdateAvailable.bind(n),setUpdateModalLastDismissedAt:n.setUpdateModalLastDismissedAt.bind(n),setLastUpdatedAt:n.setLastUpdatedAt.bind(n),setShowTestnetMessageInDropdown:n.setShowTestnetMessageInDropdown.bind(n),setShowBetaHeader:n.setShowBetaHeader.bind(n),setShowPermissionsTour:n.setShowPermissionsTour.bind(n),setShowAccountBanner:n.setShowAccountBanner.bind(n),setProductTour:n.setProductTour.bind(n),setShowNetworkBanner:n.setShowNetworkBanner.bind(n),updateNftDropDownState:n.updateNftDropDownState.bind(n),getLastInteractedConfirmationInfo:n.getLastInteractedConfirmationInfo.bind(n),setLastInteractedConfirmationInfo:n.setLastInteractedConfirmationInfo.bind(n),updateSlides:n.updateSlides.bind(n),removeSlide:n.removeSlide.bind(n),setEnableEnforcedSimulations:n.setEnableEnforcedSimulations.bind(n),setEnableEnforcedSimulationsForTransaction:n.setEnableEnforcedSimulationsForTransaction.bind(n),setEnforcedSimulationsSlippageForTransaction:n.setEnforcedSimulationsSlippageForTransaction.bind(n),setHasShownMultichainAccountsIntroModal:n.setHasShownMultichainAccountsIntroModal.bind(n),updateNetworkConnectionBanner:n.updateNetworkConnectionBanner.bind(n),setShowShieldEntryModalOnce:n.setShowShieldEntryModalOnce.bind(n),setShieldPausedToastLastClickedOrClosed:n.setShieldPausedToastLastClickedOrClosed.bind(n),setShieldEndingToastLastClickedOrClosed:n.setShieldEndingToastLastClickedOrClosed.bind(n),tryReverseResolveAddress:c.reverseResolveAddress.bind(c),startOAuthLogin:this.oauthService.startOAuthLogin.bind(this.oauthService),setMarketingConsent:this.oauthService.setMarketingConsent.bind(this.oauthService),getMarketingConsent:this.oauthService.getMarketingConsent.bind(this.oauthService),authenticate:this.seedlessOnboardingController.authenticate.bind(this.seedlessOnboardingController),resetOAuthLoginState:this.seedlessOnboardingController.clearState.bind(this.seedlessOnboardingController),createSeedPhraseBackup:this.createSeedPhraseBackup.bind(this),storeKeyringEncryptionKey:this.seedlessOnboardingController.storeKeyringEncryptionKey.bind(this.seedlessOnboardingController),restoreSocialBackupAndGetSeedPhrase:this.restoreSocialBackupAndGetSeedPhrase.bind(this),syncSeedPhrases:this.syncSeedPhrases.bind(this),changePassword:this.changePassword.bind(this),fetchAndUpdateGatorPermissions:h.fetchAndUpdateGatorPermissions.bind(h),setLocked:this.setLocked.bind(this),createNewVaultAndKeychain:this.createNewVaultAndKeychain.bind(this),createNewVaultAndRestore:this.createNewVaultAndRestore.bind(this),generateNewMnemonicAndAddToVault:this.generateNewMnemonicAndAddToVault.bind(this),importMnemonicToVault:this.importMnemonicToVault.bind(this),exportAccount:this.exportAccount.bind(this),updateTransaction:S.updateTransaction.bind(S),approveTransactionsWithSameNonce:S.approveTransactionsWithSameNonce.bind(S),createCancelTransaction:this.createCancelTransaction.bind(this),createSpeedUpTransaction:this.createSpeedUpTransaction.bind(this),estimateGas:this.estimateGas.bind(this),estimateGasFee:S.estimateGasFee.bind(S),getNextNonce:this.getNextNonce.bind(this),addTransaction:(e,t)=>(0,Xe.addTransaction)(this.getAddTransactionRequest({transactionParams:e,transactionOptions:t,waitForSubmit:!1})),addTransactionAndWaitForPublish:(e,t)=>(0,Xe.addTransaction)(this.getAddTransactionRequest({transactionParams:e,transactionOptions:t,waitForSubmit:!0})),createTransactionEventFragment:Me.createTransactionEventFragmentWithTxId.bind(null,this.getTransactionMetricsRequest()),setTransactionActive:S.setTransactionActive.bind(S),decryptMessage:this.decryptMessageController.decryptMessage.bind(this.decryptMessageController),decryptMessageInline:this.decryptMessageController.decryptMessageInline.bind(this.decryptMessageController),cancelDecryptMessage:this.decryptMessageController.cancelDecryptMessage.bind(this.decryptMessageController),encryptionPublicKey:this.encryptionPublicKeyController.encryptionPublicKey.bind(this.encryptionPublicKeyController),cancelEncryptionPublicKey:this.encryptionPublicKeyController.cancelEncryptionPublicKey.bind(this.encryptionPublicKeyController),setSeedPhraseBackedUp:v.setSeedPhraseBackedUp.bind(v),completeOnboarding:v.completeOnboarding.bind(v),setFirstTimeFlowType:v.setFirstTimeFlowType.bind(v),setAlertEnabledness:r.setAlertEnabledness.bind(r),setUnconnectedAccountAlertShown:r.setUnconnectedAccountAlertShown.bind(r),setWeb3ShimUsageAlertDismissed:r.setWeb3ShimUsageAlertDismissed.bind(r),removePermissionsFor:this.removePermissionsFor,approvePermissionsRequest:this.acceptPermissionsRequest,rejectPermissionsRequest:this.rejectPermissionsRequest,...(0,Qe.getPermissionBackgroundApiMethods)({permissionController:y,approvalController:T,accountsController:e,networkController:m,multichainNetworkController:f}),disableSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:disable"),enableSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:enable"),updateSnap:(e,t)=>(this.controllerMessenger.call("SnapController:install",e,t),null),removeSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:remove"),handleSnapRequest:this.handleSnapRequest.bind(this),revokeDynamicSnapPermissions:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:revokeDynamicPermissions"),disconnectOriginFromSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:disconnectOrigin"),updateNetworksList:this.updateNetworksList.bind(this),updateAccountsList:this.updateAccountsList.bind(this),setEnabledNetworks:this.setEnabledNetworks.bind(this),setEnabledAllPopularNetworks:this.setEnabledAllPopularNetworks.bind(this),updateHiddenAccountsList:this.updateHiddenAccountsList.bind(this),getPhishingResult:async e=>(await P.maybeUpdateState(),P.test(e)),deleteInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:deleteInterface"),updateInterfaceState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:updateInterfaceState"),fetchAndSetQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:fetchAndSetQuotes"),setSelectedQuoteAggId:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSelectedQuoteAggId"),resetSwapsState:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:resetSwapsState"),setSwapsTokens:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTokens"),clearSwapsQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:clearSwapsQuotes"),setApproveTxId:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setApproveTxId"),setTradeTxId:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setTradeTxId"),setSwapsTxGasPrice:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxGasPrice"),setSwapsTxGasLimit:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxGasLimit"),setSwapsTxMaxFeePerGas:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxMaxFeePerGas"),setSwapsTxMaxFeePriorityPerGas:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsTxMaxFeePriorityPerGas"),safeRefetchQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:safeRefetchQuotes"),stopPollingForQuotes:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:stopPollingForQuotes"),setBackgroundSwapRouteState:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setBackgroundSwapRouteState"),resetPostFetchState:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:resetPostFetchState"),setSwapsErrorKey:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsErrorKey"),setInitialGasEstimate:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setInitialGasEstimate"),setCustomApproveTxData:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setCustomApproveTxData"),setSwapsLiveness:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsLiveness"),setSwapsFeatureFlags:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsFeatureFlags"),setSwapsUserFeeLevel:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsUserFeeLevel"),setSwapsQuotesPollingLimitEnabled:this.controllerMessenger.call.bind(this.controllerMessenger,"SwapsController:setSwapsQuotesPollingLimitEnabled"),[N.BridgeBackgroundAction.RESET_STATE]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.RESET_STATE}`),[N.BridgeUserAction.UPDATE_QUOTE_PARAMS]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeUserAction.UPDATE_QUOTE_PARAMS}`),[N.BridgeBackgroundAction.TRACK_METAMETRICS_EVENT]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.TRACK_METAMETRICS_EVENT}`),[N.BridgeBackgroundAction.FETCH_QUOTES]:this.controllerMessenger.call.bind(this.controllerMessenger,`${N.BRIDGE_CONTROLLER_NAME}:${N.BridgeBackgroundAction.FETCH_QUOTES}`),[K.BridgeStatusAction.SUBMIT_TX]:this.controllerMessenger.call.bind(this.controllerMessenger,`${K.BRIDGE_STATUS_CONTROLLER_NAME}:${K.BridgeStatusAction.SUBMIT_TX}`),fetchSmartTransactionFees:w.getFees.bind(w),clearSmartTransactionFees:w.clearFees.bind(w),submitSignedTransactions:w.submitSignedTransactions.bind(w),cancelSmartTransaction:w.cancelSmartTransaction.bind(w),fetchSmartTransactionsLiveness:w.fetchLiveness.bind(w),updateSmartTransaction:w.updateSmartTransaction.bind(w),setStatusRefreshInterval:w.setStatusRefreshInterval.bind(w),trackMetaMetricsEvent:p.trackEvent.bind(p),trackMetaMetricsPage:p.trackPage.bind(p),createEventFragment:p.createEventFragment.bind(p),updateEventFragment:p.updateEventFragment.bind(p),finalizeEventFragment:p.finalizeEventFragment.bind(p),trackInsightSnapView:this.trackInsightSnapView.bind(this),addEventBeforeMetricsOptIn:p.addEventBeforeMetricsOptIn.bind(p),bufferedTrace:p.bufferedTrace.bind(p),bufferedEndTrace:p.bufferedEndTrace.bind(p),rejectAllPendingApprovals:this.rejectAllPendingApprovals.bind(this),rejectPendingApproval:this.rejectPendingApproval,requestUserApproval:T.addAndShowApprovalRequest.bind(T),resolvePendingApproval:this.resolvePendingApproval,resetViewedNotifications:g.resetViewed.bind(g),updateViewedNotifications:g.updateViewed.bind(g),currencyRateStartPolling:s.startPolling.bind(s),currencyRateStopPollingByPollingToken:s.stopPollingByPollingToken.bind(s),multichainAssetsRatesStartPolling:D.startPolling.bind(D),multichainAssetsRatesStopPollingByPollingToken:D.stopPollingByPollingToken.bind(D),tokenRatesStartPolling:E.startPolling.bind(E),tokenRatesStopPollingByPollingToken:E.stopPollingByPollingToken.bind(E),accountTrackerStartPolling:M.startPollingByNetworkClientId.bind(M),accountTrackerStopPollingByPollingToken:M.stopPollingByPollingToken.bind(M),tokenDetectionStartPolling:l.startPolling.bind(l),tokenDetectionStopPollingByPollingToken:l.stopPollingByPollingToken.bind(l),tokenListStartPolling:d.startPolling.bind(d),tokenListStopPollingByPollingToken:d.stopPollingByPollingToken.bind(d),tokenBalancesStartPolling:i.startPolling.bind(i),tokenBalancesStopPollingByPollingToken:i.stopPollingByPollingToken.bind(i),updateBalances:i.updateBalances.bind(i),deFiStartPolling:O.startPolling.bind(O),deFiStopPolling:O.stopPollingByPollingToken.bind(O),gasFeeStartPolling:u.startPolling.bind(u),gasFeeStopPollingByPollingToken:u.stopPollingByPollingToken.bind(u),getGasFeeTimeEstimate:u.getTimeEstimate.bind(u),addPollingTokenToAppState:n.addPollingToken.bind(n),removePollingTokenFromAppState:n.removePollingToken.bind(n),updateThrottledOriginState:n.updateThrottledOriginState.bind(n),backupUserData:k.backupUserData.bind(k),restoreUserData:k.restoreUserData.bind(k),detectTokens:l.detectTokens.bind(l),fetchHistoricalPricesForAsset:(...e)=>this.multichainAssetsRatesController.fetchHistoricalPricesForAsset(...e),detectNfts:a.detectNfts.bind(a),addDetectedTokens:b.addDetectedTokens.bind(b),addImportedTokens:b.addTokens.bind(b),ignoreTokens:b.ignoreTokens.bind(b),getBalancesInSingleCall:(...e)=>this.assetsContractController.getBalancesInSingleCall(...e),performSignIn:A.performSignIn.bind(A),performSignOut:A.performSignOut.bind(A),getUserProfileLineage:A.getUserProfileLineage.bind(A),getBearerToken:A.getBearerToken.bind(A),setIsBackupAndSyncFeatureEnabled:I.setIsBackupAndSyncFeatureEnabled.bind(I),deleteAccountSyncingDataFromUserStorage:I.performDeleteStorageAllFeatureEntries.bind(I),syncContactsWithUserStorage:I.syncContactsWithUserStorage.bind(I),checkAccountsPresence:_.checkAccountsPresence.bind(_),createOnChainTriggers:_.createOnChainTriggers.bind(_),disableAccounts:_.disableAccounts.bind(_),enableAccounts:_.enableAccounts.bind(_),fetchAndUpdateMetamaskNotifications:_.fetchAndUpdateMetamaskNotifications.bind(_),deleteNotificationsById:_.deleteNotificationsById.bind(_),getNotificationsByType:_.getNotificationsByType.bind(_),markMetamaskNotificationsAsRead:_.markMetamaskNotificationsAsRead.bind(_),setFeatureAnnouncementsEnabled:_.setFeatureAnnouncementsEnabled.bind(_),enablePushNotifications:R.enablePushNotifications.bind(R),disablePushNotifications:R.disablePushNotifications.bind(R),enableMetamaskNotifications:_.enableMetamaskNotifications.bind(_),disableMetamaskNotifications:_.disableNotificationServices.bind(_),throwTestError:this.throwTestError.bind(this),captureTestError:this.captureTestError.bind(this),updateProposedNames:this.nameController.updateProposedNames.bind(this.nameController),setName:this.nameController.setName.bind(this.nameController),createSnapAccount:async(e,t,r)=>{const n=await this.getSnapKeyring();return await n.createAccount(e,t,r)},multichainUpdateBalance:e=>this.multichainBalancesController.updateBalance(e),multichainUpdateTransactions:e=>this.multichainTransactionsController.updateTransactionsForAccount(e),decodeTransactionData:e=>(0,ot.decodeTransactionData)({...e,provider:this.provider}),createMetaMetricsDataDeletionTask:this.metaMetricsDataDeletionController.createMetaMetricsDataDeletionTask.bind(this.metaMetricsDataDeletionController),updateDataDeletionTaskStatus:this.metaMetricsDataDeletionController.updateDataDeletionTaskStatus.bind(this.metaMetricsDataDeletionController),endTrace:pe.endTrace,isRelaySupported:Pt.isRelaySupported,isSendBundleSupported:Nt.isSendBundleSupported,openUpdateTabAndReload:()=>(0,Et.openUpdateTabAndReload)(this.requestSafeReload.bind(this)),requestSafeReload:this.requestSafeReload.bind(this),applyTransactionContainersExisting:(e,t)=>(0,_t.applyTransactionContainersExisting)({containerTypes:t,messenger:this.controllerMessenger,transactionId:e,updateEditableParams:this.txController.updateEditableParams.bind(this.txController)}),lookupSelectedNetworks:this.lookupSelectedNetworks.bind(this)}}rejectOriginPendingApprovals(e){(0,ct.rejectOriginApprovals)({approvalController:this.approvalController,deleteInterface:e=>this.controllerMessenger.call("SnapInterfaceController:deleteInterface",e),origin:e})}async exportAccount(e,t){return await this.verifyPassword(t),this.keyringController.exportAccount(t,e)}async getTokenStandardAndDetails(e,t,r){var n,o,a,s;const i=Ar(Nr,this,Dr).call(this),{tokensChainsCache:l}=this.tokenListController.state,c=(null==l||null===(n=l[i])||void 0===n?void 0:n.data)||{},{allTokens:d}=this.tokensController.state,u=(null==d||null===(o=d[i])||void 0===o?void 0:o[t])||[],h={...ae.STATIC_MAINNET_TOKEN_LIST[null==e?void 0:e.toLowerCase()]||{},...c[null==e?void 0:e.toLowerCase()]||{},...u.find(({address:t})=>(0,ne.isEqualCaseInsensitive)(t,e))||{}},p=(0,ne.isEqualCaseInsensitive)(h.standard,W.TokenStandard.ERC20)||!0===h.erc20,m=!(r||(0,ne.isEqualCaseInsensitive)(h.standard,W.TokenStandard.ERC1155)||(0,ne.isEqualCaseInsensitive)(h.standard,W.TokenStandard.ERC721)||h.erc721),f=h.decimals!==undefined&&h.symbol;let g;if(p||m&&f)try{const r=t?await(0,re.fetchTokenBalance)(e,t,this.provider):undefined;g={address:e,balance:r,standard:W.TokenStandard.ERC20,decimals:h.decimals,symbol:h.symbol}}catch(e){v.default.warn(`Failed to get token balance. Error: ${e}`)}if(g===undefined)try{g=await this.assetsContractController.getTokenStandardAndDetails(e,t,r)}catch(e){v.default.warn(`Failed to get token standard and details. Error: ${e}`)}if(g){if((0,ne.isEqualCaseInsensitive)(g.standard,W.TokenStandard.ERC1155))try{const n=await(0,re.fetchERC1155Balance)(e,t,r,this.provider),o=null!=n&&n._hex?parseInt(n._hex,16).toString():null;g={...g,balance:o}}catch(e){v.default.warn("Failed to get token balance. Error:",e)}}return{...g,decimals:null===(a=g)||void 0===a||null===(a=a.decimals)||void 0===a?void 0:a.toString(10),balance:null===(s=g)||void 0===s||null===(s=s.balance)||void 0===s?void 0:s.toString(10)}}async getTokenStandardAndDetailsByChain(e,t,r,n){var o,a,s,i;const{tokensChainsCache:l}=this.tokenListController.state,c=(null==l||null===(o=l[n])||void 0===o?void 0:o.data)||{},{allTokens:d}=this.tokensController.state,u=this.accountsController.getSelectedAccount(),h=(null==d||null===(a=d[n])||void 0===a?void 0:a[u.address])||[];let p={};n===z.CHAIN_IDS.MAINNET&&(p=ae.STATIC_MAINNET_TOKEN_LIST[null==e?void 0:e.toLowerCase()]||{});const m=c[null==e?void 0:e.toLowerCase()]||{},f=h.find(({address:t})=>(0,ne.isEqualCaseInsensitive)(t,e))||{},g={...p,...m,...f},y=(0,ne.isEqualCaseInsensitive)(g.standard,W.TokenStandard.ERC20)||!0===g.erc20,C=!(r||(0,ne.isEqualCaseInsensitive)(g.standard,W.TokenStandard.ERC1155)||(0,ne.isEqualCaseInsensitive)(g.standard,W.TokenStandard.ERC721)||g.erc721),b=g.decimals!==undefined&&g.symbol;let w;if(y||C&&b)try{let r=0;Ar(Nr,this,Dr).call(this)===n&&(r=await(0,re.fetchTokenBalance)(e,t,this.provider)),w={address:e,balance:r,standard:W.TokenStandard.ERC20,decimals:g.decimals,symbol:g.symbol}}catch(e){v.default.warn(`Failed to get token balance. Error: ${e}`)}if(w===undefined)try{var S,k;const o=null===(S=this.networkController)||void 0===S||null===(S=S.state)||void 0===S||null===(S=S.networkConfigurationsByChainId)||void 0===S||null===(S=S[n])||void 0===S||null===(S=S.rpcEndpoints[null===(k=this.networkController)||void 0===k||null===(k=k.state)||void 0===k||null===(k=k.networkConfigurationsByChainId)||void 0===k||null===(k=k[n])||void 0===k?void 0:k.defaultRpcEndpointIndex])||void 0===S?void 0:S.networkClientId;w=await this.assetsContractController.getTokenStandardAndDetails(e,t,r,o)}catch(e){v.default.warn(`Failed to get token standard and details. Error: ${e}`)}if(w){if((0,ne.isEqualCaseInsensitive)(w.standard,W.TokenStandard.ERC1155))try{const n=await(0,re.fetchERC1155Balance)(e,t,r,this.provider),o=null!=n&&n._hex?parseInt(n._hex,16).toString():null;w={...w,balance:o}}catch(e){v.default.warn("Failed to get token balance. Error:",e)}}return{...w,decimals:null===(s=w)||void 0===s||null===(s=s.decimals)||void 0===s?void 0:s.toString(10),balance:null===(i=w)||void 0===i||null===(i=i.balance)||void 0===i?void 0:i.toString(10)}}async getTokenSymbol(e){try{const t=await this.assetsContractController.getTokenStandardAndDetails(e);return null==t?void 0:t.symbol}catch(e){return null}}async createSeedPhraseBackup(e,r,n){let o=!1;try{var a,s;null===(a=(s=this.metaMetricsController).bufferedTrace)||void 0===a||a.call(s,{name:pe.TraceName.OnboardingCreateKeyAndBackupSrp,op:pe.TraceOperation.OnboardingSecurityOp});const i=t.from(r),l=this._convertMnemonicToWordlistIndices(i);await this.seedlessOnboardingController.createToprfKeyAndBackupSeedPhrase(e,l,n),o=!0,await this.syncKeyringEncryptionKey()}catch(e){var i,l,c,d;const t=e instanceof Error?e.message:"Unknown error";throw null===(i=(l=this.metaMetricsController).bufferedTrace)||void 0===i||i.call(l,{name:pe.TraceName.OnboardingCreateKeyAndBackupSrpError,op:pe.TraceOperation.OnboardingError,tags:{errorMessage:t}}),null===(c=(d=this.metaMetricsController).bufferedEndTrace)||void 0===c||c.call(d,{name:pe.TraceName.OnboardingCreateKeyAndBackupSrpError}),v.default.error("[createSeedPhraseBackup] error",e),e}finally{var u,h;null===(u=(h=this.metaMetricsController).bufferedEndTrace)||void 0===u||u.call(h,{name:pe.TraceName.OnboardingCreateKeyAndBackupSrp,data:{success:o}})}}async fetchAllSecretData(e){let t=!1;try{var r,n;null===(r=(n=this.metaMetricsController).bufferedTrace)||void 0===r||r.call(n,{name:pe.TraceName.OnboardingFetchSrps,op:pe.TraceOperation.OnboardingSecurityOp});const o=await this.seedlessOnboardingController.fetchAllSecretData(e);return t=!0,o}catch(e){var o,a,s,i;const t=e instanceof Error?e.message:"Unknown error";throw null===(o=(a=this.metaMetricsController).bufferedTrace)||void 0===o||o.call(a,{name:pe.TraceName.OnboardingFetchSrpsError,op:pe.TraceOperation.OnboardingError,tags:{errorMessage:t}}),null===(s=(i=this.metaMetricsController).bufferedEndTrace)||void 0===s||s.call(i,{name:pe.TraceName.OnboardingFetchSrpsError}),e}finally{var l,c;null===(l=(c=this.metaMetricsController).bufferedEndTrace)||void 0===l||l.call(c,{name:pe.TraceName.OnboardingFetchSrps,data:{success:t}})}}async syncPasswordAndUnlockWallet(e){let t=!1;const r=this.onboardingController.getIsSocialLoginFlow();let n=!1;if(r)try{n=await this.seedlessOnboardingController.checkIsPasswordOutdated({skipCache:!1})}catch(e){v.default.error("error while checking if password is outdated",e)}if(!r||!n)return await this.submitPassword(e),r&&this.seedlessOnboardingController.renewRefreshToken(e).catch(e=>{v.default.error("error while revoking seedless refresh token",e)}).finally(()=>{this.seedlessOnboardingController.revokePendingRefreshTokens().catch(e=>{v.default.error("error while revoking pending refresh tokens",e)})}),t=!0,t;const o=await this.seedlessOperationMutex.acquire();try{const r=await this.keyringController.verifyPassword(e).then(()=>!0).catch(e=>{if(e.message.includes("Incorrect password"))return!1;throw v.default.error("error while verifying keyring password",e.message),e});if(await this.seedlessOnboardingController.submitGlobalPassword({globalPassword:e,maxKeyChainLength:20}).then(()=>{t=!0}).catch(e=>{if(v.default.error(`error while submitting global password: ${e.message} , isKeyringPasswordValid: ${r}`),e instanceof H.RecoveryError){if((null==e?void 0:e.message)===H.SeedlessOnboardingControllerErrorMessage.IncorrectPassword&&r)throw new Error(H.SeedlessOnboardingControllerErrorMessage.OutdatedPassword);throw new f.JsonRpcError(-32603,e.message,e.data)}if(e.message!==H.SeedlessOnboardingControllerErrorMessage.MaxKeyChainLengthExceeded)throw e;t=!1}),!t)return await this.seedlessOnboardingController.refreshAuthTokens(),await this.restoreSocialBackupAndGetSeedPhrase(e),t;const n=await this.seedlessOnboardingController.loadKeyringEncryptionKey();await this.submitEncryptionKey(n);let o=!1;try{var a,s;await this.seedlessOnboardingController.syncLatestGlobalPassword({globalPassword:e}),null===(a=(s=this.metaMetricsController).bufferedTrace)||void 0===a||a.call(s,{name:pe.TraceName.OnboardingResetPassword,op:pe.TraceOperation.OnboardingSecurityOp}),await this.keyringController.changePassword(e),o=!0,await this.syncKeyringEncryptionKey(),await this.seedlessOnboardingController.checkIsPasswordOutdated({skipCache:!0}),this.seedlessOnboardingController.renewRefreshToken(e).catch(e=>{v.default.error("error while revoking seedless refresh token",e)}).finally(()=>{this.seedlessOnboardingController.revokePendingRefreshTokens().catch(e=>{v.default.error("error while revoking pending refresh tokens",e)})})}catch(e){var i,l,c,d;const t=e instanceof Error?e.message:"Unknown error";throw null===(i=(l=this.metaMetricsController).bufferedTrace)||void 0===i||i.call(l,{name:pe.TraceName.OnboardingResetPasswordError,op:pe.TraceOperation.OnboardingError,tags:{errorMessage:t}}),null===(c=(d=this.metaMetricsController).bufferedEndTrace)||void 0===c||c.call(d,{name:pe.TraceName.OnboardingResetPasswordError}),await this.setLocked({skipSeedlessOperationLock:!0}),e}finally{var u,h;null===(u=(h=this.metaMetricsController).bufferedEndTrace)||void 0===u||u.call(h,{name:pe.TraceName.OnboardingResetPassword,data:{success:o}})}return t}finally{o()}}async syncKeyringEncryptionKey(){const e=await this.keyringController.exportEncryptionKey();await this.seedlessOnboardingController.storeKeyringEncryptionKey(e)}async checkIsSeedlessPasswordOutdated(e=!1){const t=this.onboardingController.getIsSocialLoginFlow(),{completedOnboarding:r}=this.onboardingController.state;if(!t||!r)return!1;return await this.seedlessOnboardingController.checkIsPasswordOutdated({skipCache:e})}async syncSeedPhrases(){if(!this.onboardingController.getIsSocialLoginFlow())throw new Error("Syncing seed phrases is only available for social login flow");const[e,...r]=await this.fetchAllSecretData();if(!e)throw new Error("No root SRP found");for(const e of r){if(!this.seedlessOnboardingController.getSecretDataBackupState(e.data,e.type)){if(e.type===H.SecretType.PrivateKey){await this.importAccountWithStrategy("privateKey",[(0,F.bytesToHex)(e.data)],{shouldCreateSocialBackup:!1,shouldSelectAccount:!1});continue}const r=this._convertEnglishWordlistIndicesToCodepoints(e.data),n=t.from(r).toString("utf8");await this.importMnemonicToVault(n,{shouldCreateSocialBackup:!1,shouldSelectAccount:!1,shouldImportSolanaAccount:!0})}}}async addNewSeedPhraseBackup(e,r,n=!0){const o=t.from(e,"utf8"),a=this._convertMnemonicToWordlistIndices(o);if(n){const e=await this.seedlessOperationMutex.acquire();let t=!1;try{var s,i;null===(s=(i=this.metaMetricsController).bufferedTrace)||void 0===s||s.call(i,{name:pe.TraceName.OnboardingAddSrp,op:pe.TraceOperation.OnboardingSecurityOp}),await this.seedlessOnboardingController.addNewSecretData(a,H.SecretType.Mnemonic,{keyringId:r}),t=!0}catch(e){var l,c,d,u;const t=e instanceof Error?e.message:"Unknown error";throw null===(l=(c=this.metaMetricsController).bufferedTrace)||void 0===l||l.call(c,{name:pe.TraceName.OnboardingAddSrpError,op:pe.TraceOperation.OnboardingError,tags:{errorMessage:t}}),null===(d=(u=this.metaMetricsController).bufferedEndTrace)||void 0===d||d.call(u,{name:pe.TraceName.OnboardingAddSrpError}),e}finally{var h,p;null===(h=(p=this.metaMetricsController).bufferedEndTrace)||void 0===h||h.call(p,{name:pe.TraceName.OnboardingAddSrp,data:{success:t}}),e()}}else this.seedlessOnboardingController.updateBackupMetadataState({keyringId:r,data:a,type:H.SecretType.Mnemonic})}async changePassword(e,t){const r=await this.seedlessOperationMutex.acquire(),n=this.onboardingController.getIsSocialLoginFlow();try{if(await this.keyringController.changePassword(e),n)try{await this.seedlessOnboardingController.changePassword(e,t);const r=await this.keyringController.exportEncryptionKey();await this.seedlessOnboardingController.storeKeyringEncryptionKey(r)}catch(e){v.default.error("error while changing seedless-onboarding password",e),v.default.error("reverting keyring password change"),await this.keyringController.changePassword(t);const r=await this.keyringController.exportEncryptionKey();throw await this.seedlessOnboardingController.storeKeyringEncryptionKey(r),e}}catch(e){throw v.default.error("error while changing password",e),e}finally{r()}}async createNewVaultAndKeychain(e){const t=await this.createVaultMutex.acquire();try{await this.keyringController.createNewVaultAndKeychain(e);const t=this.keyringController.state.keyrings[0];return await this.accountsController.updateAccounts(),this.accountTreeController.init(),await this.forwardSelectedAccountGroupToSnapKeyring(await this.getSnapKeyring(),this.accountTreeController.getSelectedAccountGroup()),t}finally{t()}}getDiscoveryCountByProvider(e){const t={Bitcoin:0,Solana:0},r=Object.values(j.SolAccountType);for(const n of e)r.includes(n.type)&&(t.Solana+=1);return t}async discoverAndCreateAccounts(e){try{var t;const r=e||(null===(t=this.keyringController.state.keyrings[0])||void 0===t?void 0:t.metadata.id);if(!r)throw new Error("No keyring id to discover accounts for");await this.getSnapKeyring();const n=this.controllerMessenger.call("MultichainAccountService:getMultichainAccountWallet",{entropySource:r}),o=await n.discoverAccounts();return this.getDiscoveryCountByProvider(o)}catch(e){return v.default.warn(`Failed to add accounts with balance. ${e}`),{Bitcoin:0,Solana:0}}}async importMnemonicToVault(e,r={shouldCreateSocialBackup:!0,shouldSelectAccount:!0,shouldImportSolanaAccount:!0}){const{shouldCreateSocialBackup:n,shouldSelectAccount:o,shouldImportSolanaAccount:a}=r,s=await this.createVaultMutex.acquire();try{if(this.keyringController.getKeyringsByType(h.KeyringTypes.hd).some(r=>t.from(this._convertEnglishWordlistIndicesToCodepoints(r.mnemonic)).toString("utf8")===e))throw new Error("This Secret Recovery Phrase has already been imported.");const{id:r}=await this.keyringController.addNewKeyring(h.KeyringTypes.hd,{mnemonic:e,numberOfAccounts:1}),[s]=await this.keyringController.withKeyring({id:r},async({keyring:e})=>e.getAccounts());if(this.onboardingController.getIsSocialLoginFlow())try{await this.addNewSeedPhraseBackup(e,r,n)}catch(e){throw await this.keyringController.removeAccount(s),e}if(o){const e=this.accountsController.getAccountByAddress(s);this.accountsController.setSelectedAccount(e.id)}(async()=>{var e,t;let n;this.isMultichainAccountsFeatureState2Enabled()&&await this.accountTreeController.syncWithUserStorage(),n=this.isMultichainAccountsFeatureState2Enabled()&&a?await this.discoverAndCreateAccounts(r):await this._addAccountsWithBalance(r,a);const o=this.getHDEntropyIndex();this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.ImportSecretRecoveryPhraseCompleted,properties:{hd_entropy_index:o,number_of_solana_accounts_discovered:null===(e=n)||void 0===e?void 0:e.Solana,number_of_bitcoin_accounts_discovered:null===(t=n)||void 0===t?void 0:t.Bitcoin}})})()}finally{s()}}async restoreSeedPhrasesToVault(e){if(!this.onboardingController.getIsSocialLoginFlow())return;const r=!1,n=!1;for(const o of e){if(this.seedlessOnboardingController.getSecretDataBackupState(o.data,o.type))continue;if(o.type===H.SecretType.PrivateKey){await this.importAccountWithStrategy("privateKey",[(0,F.bytesToHex)(o.data)],{shouldCreateSocialBackup:r,shouldSelectAccount:n});continue}const e=this._convertEnglishWordlistIndicesToCodepoints(o.data),a=t.from(e).toString("utf8");await this.importMnemonicToVault(a,{shouldCreateSocialBackup:r,shouldSelectAccount:n,shouldImportSolanaAccount:false})}}async restoreSocialBackupAndGetSeedPhrase(e){try{const[r,...n]=await this.fetchAllSecretData(e),o=this._convertEnglishWordlistIndicesToCodepoints(r.data),a=t.from(o).toString("utf8"),s=Array.from(t.from(a,"utf8").values());return await this.createNewVaultAndRestore(e,s),n.length>0&&await this.restoreSeedPhrasesToVault(n),a}catch(e){if(v.default.error("Error restoring social backup and getting seed phrase",e),e instanceof H.RecoveryError)throw new f.JsonRpcError(-32603,e.message,e.data);throw e}}async generateNewMnemonicAndAddToVault(){const e=await this.createVaultMutex.acquire();try{const{id:e}=await this.keyringController.addNewKeyring(h.KeyringTypes.hd),[t]=await this.keyringController.withKeyring({id:e},async({keyring:e})=>e.getAccounts()),r=this.accountsController.getAccountByAddress(t);return this.accountsController.setSelectedAccount(r.id),t}finally{e()}}async createNewVaultAndRestore(e,r){const n=await this.createVaultMutex.acquire();try{const{completedOnboarding:n}=this.onboardingController.state,o=t.from(r);this.permissionController.clearState(),await this.snapController.clearState(),this.accountTreeController.clearState(),this.accountOrderController.updateHiddenAccountsList([]),this.accountTrackerController.clearAccounts(),this.txController.clearUnapprovedTransactions(),n&&this.tokenDetectionController.enable();const a=this._convertMnemonicToWordlistIndices(o);if(await this.keyringController.createNewVaultAndRestore(e,a),await this.accountsController.updateAccounts(),this.multichainAccountService.init(),this.accountTreeController.reinit(),await this.forwardSelectedAccountGroupToSnapKeyring(await this.getSnapKeyring(),this.accountTreeController.getSelectedAccountGroup()),n&&(this.isMultichainAccountsFeatureState2Enabled()?(await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorageAtLeastOnce(),await this.discoverAndCreateAccounts()):await this._addAccountsWithBalance()),(0,Se.getIsSeedlessOnboardingFeatureEnabled)()){if(this.onboardingController.getIsSocialLoginFlow()){const e=this.keyringController.state.keyrings[0].metadata.id;this.seedlessOnboardingController.updateBackupMetadataState({keyringId:e,data:a,type:H.SecretType.Mnemonic}),await this.syncKeyringEncryptionKey()}}}finally{n()}}async _getMultichainWalletSnapClient(e){const t=await this.getSnapKeyring(),r=this.controllerMessenger;return new ve.MultichainWalletSnapClient(e,t,r)}async _addAccountsWithBalance(e,t=!0){try{const o=Ar(Nr,this,Dr).call(this),a=e?{id:e}:{type:h.KeyringTypes.hd},{accounts:s,entropySource:i}=await this.keyringController.withKeyring(a,async({keyring:e,metadata:t})=>({accounts:await e.getAccounts(),entropySource:t.id}));let l=s[s.length-1];for(let e=s.length;;e++){if("0x0"===await this.getBalance(l,this.provider)){var r,n;await this.tokenDetectionController.detectTokens({chainIds:[o],selectedAddress:l});const t=null===(r=this.tokensController.state.allTokens)||void 0===r||null===(r=r[o])||void 0===r?void 0:r[l],a=null===(n=this.tokensController.state.allDetectedTokens)||void 0===n||null===(n=n[o])||void 0===n?void 0:n[l];if(0===((null==t?void 0:t.length)??0)&&0===((null==a?void 0:a.length)??0)){1!==e&&await this.removeAccount(l);break}}l=await this.keyringController.withKeyring(a,async({keyring:e})=>{const[t]=await e.addAccounts(1);return t})}const c={Bitcoin:0,Solana:0},d=await this._getMultichainWalletSnapClient(ye.BITCOIN_WALLET_SNAP_ID),u=j.BtcScope.Mainnet,p=await d.discoverAccounts(i,u);if(c.Bitcoin=p.length,0===p.length&&await this._addSnapAccount(i,d,{scope:u,synchronize:!1}),t){const e=await this._getMultichainWalletSnapClient(Ce.SOLANA_WALLET_SNAP_ID),t=j.SolScope.Mainnet,r=await e.discoverAccounts(i,t);c.Solana=r.length,0===r.length&&await this._addSnapAccount(i,e,{scope:t})}return c}catch(e){return v.default.warn(`Failed to add accounts with balance. Error: ${e}`),{Bitcoin:0,Solana:0}}}async _importAccountsWithBalances(){const{keyrings:e}=this.keyringController.state;for(const{metadata:t}of e){await this.keyringController.withKeyring({id:t.id},async({keyring:e})=>e.type===h.KeyringTypes.hd)&&(this.isMultichainAccountsFeatureState2Enabled()?(await this.getSnapKeyring(),await this.accountTreeController.syncWithUserStorageAtLeastOnce(),await this.discoverAndCreateAccounts(t.id)):await this._addAccountsWithBalance(t.id,true))}}async _addSnapAccount(e,t,r={}){let n=e;try{if(!n){n=await this.keyringController.withKeyring({type:h.KeyringTypes.hd},async({metadata:e})=>e.id)}return await t.createAccount({...r,entropySource:n},{displayConfirmation:!1,displayAccountNameSuggestion:!1,setSelectedAccount:!1})}catch(e){return v.default.warn(`Failed to add Snap account. Error: ${e}`),(0,G.captureException)(e),null}}_convertMnemonicToWordlistIndices(e){const t=e.toString().split(" ").map(e=>_.wordlist.indexOf(e));return new Uint8Array(new Uint16Array(t).buffer)}_convertEnglishWordlistIndicesToCodepoints(e){return t.from(Array.from(new Uint16Array(e.buffer)).map(e=>_.wordlist[e]).join(" "))}async getBalance(e,t){const r=this.accountTrackerController.state.accountsByChainId[Ar(Nr,this,Dr).call(this)],n=null==r?void 0:r[e];if(n&&n.balance)return n.balance;try{return await t.request({method:"eth_getBalance",params:[e,"latest"]})||"0x0"}catch(e){throw v.default.error(e),e}}async submitPassword(e){await this.submitPasswordOrEncryptionKey({password:e})}async submitEncryptionKey(e){await this.submitPasswordOrEncryptionKey({encryptionKey:e})}async submitPasswordOrEncryptionKey({password:e,encryptionKey:t}){const r=this.onboardingController.getIsSocialLoginFlow();await this.offscreenPromise,t?await this.keyringController.submitEncryptionKey(t):(await this.keyringController.submitPassword(e),r&&await this.seedlessOnboardingController.submitPassword(e));try{await this.blockTracker.checkForLatestBlock()}catch(e){v.default.error("Error while unlocking extension.",e)}await this.accountsController.updateAccounts(),this.multichainAccountService.init(),this.accountTreeController.init(),await this.forwardSelectedAccountGroupToSnapKeyring(await this.getSnapKeyring(),this.accountTreeController.getSelectedAccountGroup())}async _loginUser(e){try{await this.submitPassword(e),await this.accountTrackerController.updateAccountsAllActiveNetworks()}finally{this._startUISync()}}_startUISync(){this.emit("startUISync"),this.startUISync=!0,this.memStore.subscribe(this.sendUpdate.bind(this))}async submitEncryptionKeyFromSessionStorage(){try{const{loginToken:e,loginSalt:t}=await this.extension.storage.session.get(["loginToken","loginSalt"]);if(e&&t){const{vault:r}=this.keyringController.state;if(JSON.parse(r).salt!==t)return console.warn("submitEncryptionKey: Stored salt and vault salt do not match"),void await this.clearLoginArtifacts();await this.keyringController.submitEncryptionKey(e,t)}}catch(e){throw await this.clearLoginArtifacts(),e}}async clearLoginArtifacts(){await this.extension.storage.session.remove(["loginToken","loginSalt"])}async verifyPassword(e){await this.keyringController.verifyPassword(e)}getPrimaryKeyringMnemonic(){const[e]=this.keyringController.getKeyringsByType(Y.KeyringType.hdKeyTree);if(!e.mnemonic)throw new Error("Primary keyring mnemonic unavailable.");return e.mnemonic}getPrimaryKeyringMnemonicSeed(){const[e]=this.keyringController.getKeyringsByType(Y.KeyringType.hdKeyTree);if(!e.seed)throw new Error("Primary keyring mnemonic unavailable.");return e.seed}async attemptLedgerTransportCreation(){return await Ar(Nr,this,Or).call(this,{name:Q.HardwareDeviceNames.ledger},async e=>e.attemptMakeApp())}async connectHardware(e,t,r){return Ar(Nr,this,Or).call(this,{name:e,hdPath:r},async e=>{let r=[];switch(t){case-1:r=await e.getPreviousPage();break;case 1:r=await e.getNextPage();break;default:r=await e.getFirstPage()}const n=await this.keyringController.getAccounts(),o=[...new Set(n.concat(r.map(e=>e.address.toLowerCase())))];return this.accountTrackerController.syncWithAddresses(o),r})}async checkHardwareStatus(e,t){return Ar(Nr,this,Or).call(this,{name:e,hdPath:t},async e=>e.isUnlocked())}async getHardwareTypeForMetric(e){return await this.keyringController.withKeyring({address:e},({keyring:e})=>Q.HardwareKeyringType[e.type])}async forgetDevice(e){return Ar(Nr,this,Or).call(this,{name:e},async e=>{for(const t of await e.getAccounts())this._onAccountRemoved(t);return e.forgetDevice(),!0})}async getAccountType(e){switch(await this.keyringController.getAccountKeyringType(e)){case Y.KeyringType.trezor:case Y.KeyringType.oneKey:case Y.KeyringType.lattice:case Y.KeyringType.qr:case Y.KeyringType.ledger:return"hardware";case Y.KeyringType.imported:return"imported";case Y.KeyringType.snap:return"snap";default:return"MetaMask"}}async getDeviceModel(e){return this.keyringController.withKeyring({address:e},async({keyring:e})=>{switch(e.type){case Y.KeyringType.trezor:case Y.KeyringType.oneKey:return e.getModel();case Y.KeyringType.qr:return e.getName();case Y.KeyringType.ledger:return Q.HardwareDeviceNames.ledger;case Y.KeyringType.lattice:return Q.HardwareDeviceNames.lattice;default:return undefined}})}getAccountLabel(e,t,r){return`${e[0].toUpperCase()}${e.slice(1)} ${parseInt(t,10)+1} ${r||""}`.trim()}async unlockHardwareWalletAccount(e,t,r,n){const{address:o}=await Ar(Nr,this,Or).call(this,{name:t,hdPath:r},async r=>{r.setAccountToUnlock(e);const[o]=await r.addAccounts(1);return{address:(0,x.normalize)(o),label:this.getAccountLabel(t===Q.HardwareDeviceNames.qr?r.getName():t,e,n)}});this.preferencesController.setSelectedAddress(o);const a=this.accountsController.listAccounts(),{identities:s}=this.preferencesController.state;return{unlockedAccount:o,identities:s,accounts:a}}async addNewAccount(e,t){const r=await this.keyringController.getAccounts(),n=t?{id:t}:{type:h.KeyringTypes.hd},o=await this.keyringController.withKeyring(n,async({keyring:t})=>{if(t.type!==h.KeyringTypes.hd)throw new Error("Cannot add account to non-HD keyring");const n=await t.getAccounts();if(e&&e!==n.length){if(e>n.length)throw new Error("Account out of sequence");const t=n[e];if(!t)throw new Error(`Can't find account at index ${e}`);return t}const[o]=await t.addAccounts(1);if(r.includes(o))throw await t.removeAccount(o),new Error(`Cannot add duplicate ${o} account`);return o});return r.includes(o)||this.preferencesController.setSelectedAddress(o),o}async getSeedPhrase(e,t){return this._convertEnglishWordlistIndicesToCodepoints(await this.keyringController.exportSeedPhrase(e,t))}async resetAccount(){const e=this.accountsController.getSelectedAccount().address,t=Ar(Nr,this,Dr).call(this);return this.txController.wipeTransactions({address:e,chainId:t}),this.smartTransactionsController.wipeSmartTransactions({address:e,ignoreNetwork:!1}),this.bridgeStatusController.wipeBridgeStatus({address:e,ignoreNetwork:!1}),this.networkController.resetConnection(),e}captureKeyringTypesWithMissingIdentities(e=[],t=[]){const r=t.filter(t=>!e.some(e=>e.address.toLowerCase()===t.toLowerCase())).map(e=>this.keyringController.getAccountKeyringType(e)),n=e.length,o=this.accountTrackerController.state.accountsByChainId[Ar(Nr,this,Dr).call(this)],a=Object.keys(o||{}).length;(0,G.captureException)(new Error(`Attempt to get permission specifications failed because their were ${t.length} accounts, but ${n} identities, and the ${r} keyrings included accounts with missing identities. Meanwhile, there are ${a} accounts in the account tracker.`))}sortEvmAccountsByLastSelected(e){const t=this.accountsController.listAccounts();return this.sortAddressesWithInternalAccounts(e,t)}sortMultichainAccountsByLastSelected(e){const t=this.accountsController.listMultichainAccounts();return this.sortAddressesWithInternalAccounts(e,t)}sortAddressesWithInternalAccounts(e,t){return e.sort((r,n)=>{const o=t.find(e=>e.address.toLowerCase()===r.toLowerCase()),a=t.find(e=>e.address.toLowerCase()===n.toLowerCase());if(!o)throw this.captureKeyringTypesWithMissingIdentities(t,e),new Error(`Missing identity for address: "${r}".`);if(!a)throw this.captureKeyringTypesWithMissingIdentities(t,e),new Error(`Missing identity for address: "${n}".`);return o.metadata.lastSelected===a.metadata.lastSelected?0:o.metadata.lastSelected===undefined?1:a.metadata.lastSelected===undefined?-1:a.metadata.lastSelected-o.metadata.lastSelected})}getPermittedAccounts(e){let t;try{t=this.permissionController.getCaveat(e,U.Caip25EndowmentPermissionName,U.Caip25CaveatType)}catch(e){if(e instanceof E.PermissionDoesNotExistError)return[];throw e}const r=(0,U.getEthAccounts)(t.value);return this.sortEvmAccountsByLastSelected(r)}async handleHyperliquidReferral(e,t){var r;if(!(null===(r=this.remoteFeatureFlagController)||void 0===r||null===(r=r.state)||void 0===r||null===(r=r.remoteFeatureFlags)||void 0===r?void 0:r.extensionUxDefiReferral))return;const n=this.getPermittedAccounts(Pe.HYPERLIQUID_ORIGIN);if(0===n.length)return;if(this.approvalController.has({origin:Pe.HYPERLIQUID_ORIGIN,type:Z.HYPERLIQUID_APPROVAL_TYPE}))return;const o=n[0],a=this.preferencesController.state.referrals.hyperliquid,s=a[o],i=Object.keys(a).filter(e=>a[e]===He.ReferralStatus.Declined),l=s===undefined,c=s===He.ReferralStatus.Approved;if(l)try{this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.ReferralViewed,category:ee.MetaMetricsEventCategory.Referrals,properties:{url:Pe.HYPERLIQUID_ORIGIN,trigger_type:t}});const r=await this.approvalController.add({origin:Pe.HYPERLIQUID_ORIGIN,type:Z.HYPERLIQUID_APPROVAL_TYPE,requestData:{selectedAddress:o},shouldShowRequest:t===ze.HyperliquidPermissionTriggerType.NewConnection});null!=r&&r.approved?(this._handleHyperliquidApprovedAccount(o,n,i),await this._handleHyperliquidReferralRedirect(e,o)):this.preferencesController.addReferralDeclinedAccount(o),this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.ReferralConfirmButtonClicked,category:ee.MetaMetricsEventCategory.Referrals,properties:{opt_in:Boolean(null==r?void 0:r.approved)}})}catch(e){if(e.code===f.errorCodes.provider.userRejectedRequest)return;throw e}c&&await this._handleHyperliquidReferralRedirect(e,o)}async _handleHyperliquidReferralRedirect(e,t){await this._updateHyperliquidReferralUrl(e),this.preferencesController.addReferralPassedAccount(t)}_handleHyperliquidApprovedAccount(e,t,r){0===r.length?this.preferencesController.setAccountsReferralApproved(t):(this.preferencesController.addReferralApprovedAccount(e),t.forEach(e=>{r.includes(e)&&this.preferencesController.removeReferralDeclinedAccount(e)}))}async _updateHyperliquidReferralUrl(e){try{const{url:t}=await a.default.tabs.get(e),{search:r}=new URL(t||""),n=`${Pe.HYPERLIQUID_ORIGIN}/join/${Pe.METAMASK_REFERRAL_CODE}${r}`;await a.default.tabs.update(e,{url:n})}catch(e){v.default.error("Failed to update URL to Hyperliquid referral page: ",e)}}removeAllScopePermissions(e){this.permissionController.updatePermissionsByCaveat(U.Caip25CaveatType,t=>U.Caip25CaveatMutators[U.Caip25CaveatType].removeScope(t,e))}removeAllAccountPermissions(e){this.permissionController.updatePermissionsByCaveat(U.Caip25CaveatType,t=>U.Caip25CaveatMutators[U.Caip25CaveatType].removeAccount(t,e))}async removeAccount(e){return this._onAccountRemoved(e),await this.keyringController.removeAccount(e),e}async importAccountWithStrategy(e,t,r={shouldCreateSocialBackup:!0,shouldSelectAccount:!0}){const{shouldCreateSocialBackup:n,shouldSelectAccount:o}=r,a=await this.keyringController.importAccountWithStrategy(e,t);if(this.onboardingController.getIsSocialLoginFlow()){const{id:e,privateKey:t}=await this.keyringController.withKeyring({address:a},async({keyring:e,metadata:t})=>{const r=await e.exportAccount(a);return{id:t.id,privateKey:r}});try{await this.addNewPrivateKeyBackup(t,e,n)}catch(e){throw await this.keyringController.removeAccount(a),e}}o&&this.preferencesController.setSelectedAddress(a)}async addNewPrivateKeyBackup(e,t,r=!0){const n=(0,F.hexToBytes)((0,F.add0x)(e));if(r){const e=await this.seedlessOperationMutex.acquire();try{await this.seedlessOnboardingController.addNewSecretData(n,H.SecretType.PrivateKey,{keyringId:t})}catch(e){throw v.default.error("Error adding new private key backup",e),e}finally{e()}}else this.seedlessOnboardingController.updateBackupMetadataState({keyringId:t,data:n,type:H.SecretType.PrivateKey})}async requestPermissionApproval(e,t,r={}){const n=(0,k.nanoid)();return this.approvalController.addAndShowApprovalRequest({id:n,origin:e,requestData:{metadata:{id:n,origin:e},permissions:t,...r},type:E.MethodNames.RequestPermissions})}async requestApprovalPermittedChainsPermission(e,t){const r=(0,U.setPermittedEthChainIds)({requiredScopes:{},optionalScopes:{},sessionProperties:{},isMultichainOrigin:!1},[t]);await this.permissionController.requestPermissionsIncremental({origin:e},{[U.Caip25EndowmentPermissionName]:{caveats:[{type:U.Caip25CaveatType,value:r}]}})}getNonEvmSupportedMethods(e){return this.controllerMessenger.call("MultichainRouter:getSupportedMethods",e)}notifySolanaAccountChangedForCurrentAccount(e){var t;let r;try{r=this.permissionController.getCaveat(e,U.Caip25EndowmentPermissionName,U.Caip25CaveatType)}catch{}if(!r)return;const n=null===(t=r.value.sessionProperties)||void 0===t?void 0:t[U.KnownSessionProperties.SolanaAccountChangedNotifications],o=(0,U.getSessionScopes)(r.value,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)}),a=o[fe.MultichainNetworks.SOLANA]||o[fe.MultichainNetworks.SOLANA_DEVNET]||o[fe.MultichainNetworks.SOLANA_TESTNET];if(n&&a){const{accounts:t}=a,r=t.map(e=>{const{address:t}=(0,F.parseCaipAccountId)(e);return t}),[n]=this.sortMultichainAccountsByLastSelected(r);n&&this._notifySolanaAccountChange(e,[n])}}getAddTransactionRequest({transactionParams:e,transactionOptions:t,dappRequest:r,...n}){var o;const a=(null==r?void 0:r.networkClientId)??(null==t?void 0:t.networkClientId),{chainId:s}=this.networkController.getNetworkConfigurationByNetworkClientId(a);return{internalAccounts:this.accountsController.listAccounts(),dappRequest:r,networkClientId:a,selectedAccount:this.accountsController.getAccountByAddress(e.from),transactionController:this.txController,transactionOptions:t,transactionParams:e,userOperationController:this.userOperationController,chainId:s,ppomController:this.ppomController,securityAlertsEnabled:null===(o=this.preferencesController.state)||void 0===o?void 0:o.securityAlertsEnabled,updateSecurityAlertResponse:this.updateSecurityAlertResponse.bind(this),getSecurityAlertResponse:this.appStateController.getAddressSecurityAlertResponse.bind(this.appStateController),addSecurityAlertResponse:this.appStateController.addAddressSecurityAlertResponse.bind(this.appStateController),getSecurityAlertsConfig:this.getSecurityAlertsConfig.bind(this),...n}}async createCancelTransaction(e,t,r){await this.txController.stopTransaction(e,t,r);return this.getState()}async createSpeedUpTransaction(e,t,r){await this.txController.speedUpTransaction(e,t,r);return this.getState()}async estimateGas(e){return new Promise((t,r)=>{this.provider.request({method:"eth_estimateGas",params:[e]}).then(e=>t(e.toString(16))).catch(e=>r(e))})}async updateSecurityAlertResponse(e,t,r){return await(0,tt.updateSecurityAlertResponse)({appStateController:this.appStateController,messenger:this.controllerMessenger,method:e,securityAlertId:t,securityAlertResponse:r,signatureController:this.signatureController,transactionController:this.txController})}getHDEntropyIndex(){const e=this.accountsController.getSelectedAccount(),t=this.keyringController.state.keyrings.filter(e=>e.type===h.KeyringTypes.hd).findIndex(t=>t.accounts.includes(e.address));return-1===t?undefined:t}markPasswordForgotten(){this.preferencesController.setPasswordForgotten(!0),this.sendUpdate()}unMarkPasswordForgotten(){this.preferencesController.setPasswordForgotten(!1),this.sendUpdate()}setupUntrustedCommunicationEip1193({connectionStream:e,sender:t,subjectType:r}){if(t.url&&this.onboardingController.state.completedOnboarding&&this.preferencesController.state.usePhishDetect){const{hostname:r}=new URL(t.url);this.phishingController.maybeUpdateState();const n=this.phishingController.test(t.url);if(null!=n&&n.result)return this.sendPhishingWarning(e,r),void this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.PhishingPageDisplayed,category:ee.MetaMetricsEventCategory.Phishing,properties:{url:r}})}let n;n=r||(t.id&&t.id!==this.extension.runtime.id?E.SubjectType.Extension:E.SubjectType.Website);const o=(0,Ke.setupMultiplex)(e);o.ignoreStream(et.METAMASK_CAIP_MULTICHAIN_PROVIDER),this.setupProviderConnectionEip1193(o.createStream(et.METAMASK_EIP_1193_PROVIDER),t,n),t.url&&this.setupPublicConfig(o.createStream("publicConfig"))}setupUntrustedCommunicationCaip({connectionStream:e,sender:t,subjectType:r}){let n;n=r||(t.id&&t.id!==this.extension.runtime.id?E.SubjectType.Extension:E.SubjectType.Website),this.setupProviderConnectionCaip(e,t,n)}setupTrustedCommunication(e,t){const r=(0,Ke.setupMultiplex)(e);this.setupControllerConnection(r.createStream("controller")),this.setupProviderConnectionEip1193(r.createStream("provider"),t,E.SubjectType.Internal)}setupPhishingCommunication({connectionStream:e}){const{usePhishDetect:t}=this.preferencesController.state;if(!t)return;const r=(0,Ke.setupMultiplex)(e).createStream("metamask-phishing-safelist");r.on("data",(0,Ve.default)({safelistPhishingDomain:this.safelistPhishingDomain.bind(this),backToSafetyPhishingWarning:this.backToSafetyPhishingWarning.bind(this)},r))}setUpCookieHandlerCommunication({connectionStream:e}){const{metaMetricsId:t,dataCollectionForMarketing:r,participateInMetaMetrics:n}=this.metaMetricsController.state;if(t&&r&&n){const t=(0,Ke.setupMultiplex)(e).createStream(et.METAMASK_COOKIE_HANDLER);t.on("data",(0,Ve.default)({getCookieFromMarketingPage:this.getCookieFromMarketingPage.bind(this)},t))}}getCookieFromMarketingPage(e){const{ga_client_id:t}=e;this.metaMetricsController.setMarketingCampaignCookieId(t)}sendPhishingWarning(e,t){(0,Ke.setupMultiplex)(e).createStream("phishing").write({hostname:t})}setupControllerConnection(e){const t=new it.PatchStore(this.memStore);let r=!1;const n=()=>{if(!(0,Ke.isStreamWritable)(e)||!r)return;const n=t.flushPendingPatches();e.write({jsonrpc:"2.0",method:"sendUpdate",params:[n]})},a={...this.getApi(),...this.controllerApi,startPatches:()=>{r=!0,n()},getStatePatches:()=>t.flushPendingPatches()};this.on("update",n),this.activeControllerConnections+=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.on("data",(0,Ve.default)(a,e));const s=()=>{(0,Ke.isStreamWritable)(e)&&e.write({jsonrpc:"2.0",method:"startUISync"})};this.startUISync?s():this.once("startUISync",s);const i=()=>{e.mmFinished||(this.activeControllerConnections-=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.mmFinished=!0,this.removeListener("update",n),t.destroy())};e.mmFinished=!1,(0,o.finished)(e,i),e.once("close",i),e.once("end",i)}setupProviderConnectionEip1193(e,t,r){let n,a;n=r===E.SubjectType.Internal?Z.ORIGIN_METAMASK:r===E.SubjectType.Snap?t.snapId:new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:n,extensionId:t.id,subjectType:E.SubjectType.Extension}),t.tab&&t.tab.id&&(a=t.tab.id);let s=n;t.tab&&t.tab.url&&(s=new URL(t.tab.url).origin);const l=this.setupProviderEngineEip1193({origin:n,sender:t,subjectType:r,tabId:a,mainFrameOrigin:s}),c=(0,je.default)(),d=(0,i.createEngineStream)({engine:l}),u=this.addConnection(n,{tabId:a,apiType:Ir,engine:l});(0,o.pipeline)(e,c,d,e,e=>{var t;l.destroy(),u&&this.removeConnection(n,u),!e||null!==(t=e.message)&&void 0!==t&&t.match("Premature close")||v.default.error(e)}),r!==E.SubjectType.Internal&&this._notifyChainChangeForConnection({engine:l},n)}setupProviderConnectionCaip(e,t,r){let n,a;n=r===E.SubjectType.Internal?Z.ORIGIN_METAMASK:r===E.SubjectType.Snap?t.snapId:new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:n,extensionId:t.id,subjectType:E.SubjectType.Extension}),t.tab&&t.tab.id&&(a=t.tab.id);const s=this.setupProviderEngineCaip({origin:n,sender:t,subjectType:r,tabId:a}),l=(0,je.default)(),c=(0,i.createEngineStream)({engine:s}),d=this.addConnection(n,{tabId:a,apiType:_r,engine:s});setTimeout(()=>this.notifySolanaAccountChangedForCurrentAccount(n),500),(0,o.pipeline)(e,l,c,e,e=>{var t;s.destroy(),d&&this.removeConnection(n,d),!e||null!==(t=e.message)&&void 0!==t&&t.match("Premature close")||v.default.error(e)})}setupCommonMiddlewareHooks(e){return{addSubjectMetadata:this.subjectMetadataController.addSubjectMetadata.bind(this.subjectMetadataController),getProviderState:this.getProviderState.bind(this),handleWatchAssetRequest:this.handleWatchAssetRequest.bind(this),requestUserApproval:this.approvalController.addAndShowApprovalRequest.bind(this.approvalController),getCaveat:({target:t,caveatType:r})=>{try{return this.permissionController.getCaveat(e,t,r)}catch(e){if(!(e instanceof E.PermissionDoesNotExistError))throw e}return undefined},requestPermittedChainsPermissionIncrementalForOrigin:t=>(0,U.requestPermittedChainsPermissionIncremental)({...t,origin:e,hooks:{requestPermissionsIncremental:this.permissionController.requestPermissionsIncremental.bind(this.permissionController),grantPermissionsIncremental:this.permissionController.grantPermissionsIncremental.bind(this.permissionController)}}),addNetwork:this._addNetworkAndSetActive.bind(this),updateNetwork:this.networkController.updateNetwork.bind(this.networkController),setActiveNetwork:async t=>{this.permissionController.hasPermission(e,U.Caip25EndowmentPermissionName)?this.selectedNetworkController.setNetworkClientIdForDomain(e,t):await this.networkController.setActiveNetwork(t)},getNetworkConfigurationByChainId:this.networkController.getNetworkConfigurationByChainId.bind(this.networkController),setTokenNetworkFilter:e=>{const{tokenNetworkFilter:t}=this.preferencesController.getPreferences();e&&1===Object.keys(t).length&&this.preferencesController.setPreference("tokenNetworkFilter",{[e]:!0})},setEnabledNetworks:e=>{this.networkEnablementController.enableNetwork(e)},getEnabledNetworks:e=>this.networkEnablementController.state.enabledNetworkMap[e]||{},getCurrentChainIdForDomain:e=>{const t=this.selectedNetworkController.getNetworkClientIdForDomain(e),{chainId:r}=this.networkController.getNetworkConfigurationByNetworkClientId(t);return r},getWeb3ShimUsageState:this.alertController.getWeb3ShimUsageState.bind(this.alertController),setWeb3ShimUsageRecorded:this.alertController.setWeb3ShimUsageRecorded.bind(this.alertController),rejectApprovalRequestsForOrigin:()=>this.rejectOriginPendingApprovals(e)}}setupProviderEngineEip1193({origin:e,subjectType:t,sender:r,tabId:n,mainFrameOrigin:o}){const a=new s.JsonRpcEngine;a.push((0,Be.default)({origin:e})),o&&a.push((0,Le.default)({mainFrameOrigin:o})),a.push((0,M.createSelectedNetworkMiddleware)(this.controllerMessenger));const i=this.selectedNetworkController.getProviderAndBlockTracker(e),l=(0,p.default)(i),c=(0,m.default)(i);return c.events.on("notification",e=>a.emit("notification",e)),n&&a.push((0,$e.default)({tabId:n})),a.push((0,Fe.default)({origin:e})),a.push(this.permissionLogController.createMiddleware()),a.push((0,at.default)()),a.push((0,st.default)({getThrottledOriginState:this.appStateController.getThrottledOriginState.bind(this.appStateController),updateThrottledOriginState:this.appStateController.updateThrottledOriginState.bind(this.appStateController)})),a.push((0,Ne.createPPOMMiddleware)(this.ppomController,this.preferencesController,this.networkController,this.appStateController,this.accountsController,this.updateSecurityAlertResponse.bind(this),this.getSecurityAlertsConfig.bind(this))),a.push((0,Re.createTrustSignalsMiddleware)(this.networkController,this.appStateController,this.phishingController,this.preferencesController,this.getPermittedAccounts.bind(this))),a.push((0,Ye.default)({getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHDEntropyIndex:this.getHDEntropyIndex.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),snapAndHardwareMessenger:this.controllerMessenger.getRestricted({name:"SnapAndHardwareMessenger",allowedActions:["KeyringController:getKeyringForAccount","KeyringController:getState","SnapController:get","AccountsController:getSelectedAccount"]}),appStateController:this.appStateController,metaMetricsController:this.metaMetricsController})),a.push((0,xe.createUnsupportedMethodMiddleware)()),t===E.SubjectType.Snap&&(0,ke.isSnapPreinstalled)(e)&&a.push((0,A.createPreinstalledSnapsMiddleware)({getPermissions:this.permissionController.getPermissions.bind(this.permissionController,e),getAllEvmAccounts:()=>this.controllerMessenger.call("AccountsController:listAccounts").map(e=>e.address),grantPermissions:t=>this.controllerMessenger.call("PermissionController:grantPermissions",{approvedPermissions:t,subject:{origin:e}})})),a.push((0,xe.createEthAccountsMethodMiddleware)({getAccounts:this.getPermittedAccounts.bind(this,e)})),t!==E.SubjectType.Internal&&(a.push(this.permissionController.createPermissionMiddleware({origin:e})),a.push((0,ze.createHyperliquidReferralMiddleware)(this.handleHyperliquidReferral.bind(this)))),t===E.SubjectType.Website&&a.push((0,Ue.default)({location:r.url,registerOnboarding:this.onboardingController.registerOnboarding})),a.push((0,rt.default)({messenger:this.controllerMessenger.getRestricted({name:"EvmMethodsToNonEvmAccountFilterMessenger",allowedActions:["AccountsController:getSelectedAccount"]})})),a.push((0,xe.createEip1193MethodMiddleware)({subjectType:t,...this.setupCommonMiddlewareHooks(e),metamaskState:this.getState(),sendMetrics:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAccounts:this.getPermittedAccounts.bind(this,e),getCaip25PermissionFromLegacyPermissionsForOrigin:e=>(0,U.getCaip25PermissionFromLegacyPermissions)(e),getPermissionsForOrigin:this.permissionController.getPermissions.bind(this.permissionController,e),requestPermissionsForOrigin:t=>this.permissionController.requestPermissions({origin:e},t,{metadata:{isEip1193Request:!0}}),revokePermissionsForOrigin:t=>{try{this.permissionController.revokePermissions({[e]:t})}catch(e){console.log(e)}},updateCaveat:this.permissionController.updateCaveat.bind(this.permissionController,e),hasApprovalRequestsForOrigin:()=>this.approvalController.has({origin:e})})),a.push((0,A.createSnapsMethodMiddleware)(t===E.SubjectType.Snap,{clearSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:clearSnapState",e),getUnlockPromise:this.controllerMessenger.call.bind(this.controllerMessenger,"AppStateController:getUnlockPromise"),getSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getPermitted",e),requestPermissions:async t=>await this.permissionController.requestPermissions({origin:e},t),getPermissions:this.permissionController.getPermissions.bind(this.permissionController,e),getSnapFile:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getFile",e),getSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getSnapState",e),updateSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:updateSnapState",e),installSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:install",e),invokeSnap:this.permissionController.executeRestrictedMethod.bind(this.permissionController,e,J.RestrictedMethods.wallet_snap),getIsLocked:()=>{const{isUnlocked:e}=this.controllerMessenger.call("KeyringController:getState");return!e},getIsActive:()=>this._isClientOpen,getInterfaceState:(...t)=>this.controllerMessenger.call("SnapInterfaceController:getInterface",e,...t).state,getInterfaceContext:(...t)=>this.controllerMessenger.call("SnapInterfaceController:getInterface",e,...t).context,createInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:createInterface",e),updateInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:updateInterface",e),resolveInterface:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapInterfaceController:resolveInterface",e),getSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:get"),trackError:e=>{var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r?void 0:r.call(t,e)},trackEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAllSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getAll"),openWebSocket:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:open",e),closeWebSocket:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:close",e),getWebSockets:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:getAll",e),sendWebSocketMessage:this.controllerMessenger.call.bind(this.controllerMessenger,"WebSocketService:sendMessage",e),getCurrencyRate:e=>{const t=this.multichainRatesController.state.rates[e],{fiatCurrency:r}=this.multichainRatesController.state;return t?{...t,currency:r}:undefined},getEntropySources:()=>this.controllerMessenger.call("KeyringController:getState").keyrings.map((e,t)=>e.type===h.KeyringTypes.hd?{id:e.metadata.id,name:e.metadata.name,type:"mnemonic",primary:0===t}:null).filter(Boolean),hasPermission:this.permissionController.hasPermission.bind(this.permissionController,e),scheduleBackgroundEvent:t=>this.controllerMessenger.call("CronjobController:schedule",{...t,snapId:e}),cancelBackgroundEvent:this.controllerMessenger.call.bind(this.controllerMessenger,"CronjobController:cancel",e),getBackgroundEvents:this.controllerMessenger.call.bind(this.controllerMessenger,"CronjobController:get",e),getNetworkConfigurationByChainId:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:getNetworkConfigurationByChainId"),getNetworkClientById:this.controllerMessenger.call.bind(this.controllerMessenger,"NetworkController:getNetworkClientById"),startTrace:e=>{const{_isStandaloneSpan:t,...r}=(0,pe.trace)(e);return r},endTrace:pe.endTrace,handleSnapRpcRequest:t=>this.handleSnapRequest({...t,origin:e}),getAllowedKeyringMethods:(0,Ae.keyringSnapPermissionsBuilder)(this.subjectMetadataController,e)})),a.push(l),a.push(c.middleware),a.push(this.metamaskMiddleware),a.push(this.eip5792Middleware),a.push((0,d.providerAsMiddleware)(i.provider)),a}setupProviderEngineCaip({origin:e,sender:t,subjectType:r,tabId:n}){const o=new s.JsonRpcEngine;o.push((0,Be.default)({origin:e})),n&&o.push((0,$e.default)({tabId:n})),o.push((0,Fe.default)({origin:e})),o.push((e,t,r,n)=>[Z.MESSAGE_TYPE.WALLET_CREATE_SESSION,Z.MESSAGE_TYPE.WALLET_INVOKE_METHOD,Z.MESSAGE_TYPE.WALLET_GET_SESSION,Z.MESSAGE_TYPE.WALLET_REVOKE_SESSION].includes(e.method)?r():n(f.rpcErrors.methodNotFound({data:{method:e.method}}))),o.push((0,Ye.default)({getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHDEntropyIndex:this.getHDEntropyIndex.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),snapAndHardwareMessenger:this.controllerMessenger.getRestricted({name:"SnapAndHardwareMessenger",allowedActions:["KeyringController:getKeyringForAccount","SnapController:get","AccountsController:getSelectedAccount"]}),appStateController:this.appStateController,metaMetricsController:this.metaMetricsController})),o.push(L.multichainMethodCallValidatorMiddleware);const a=(0,xe.makeMethodMiddlewareMaker)([L.walletRevokeSession,L.walletGetSession,L.walletInvokeMethod,L.walletCreateSession]);o.push(a({findNetworkClientIdByChainId:this.networkController.findNetworkClientIdByChainId.bind(this.networkController),listAccounts:this.accountsController.listAccounts.bind(this.accountsController),requestPermissionsForOrigin:(t,r={})=>this.permissionController.requestPermissions({origin:e},t,r),getCaveatForOrigin:this.permissionController.getCaveat.bind(this.permissionController,e),updateCaveat:this.permissionController.updateCaveat.bind(this.permissionController,e),getSelectedNetworkClientId:()=>this.networkController.state.selectedNetworkClientId,revokePermissionForOrigin:this.permissionController.revokePermission.bind(this.permissionController,e),getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this),isNonEvmScopeSupported:this.controllerMessenger.call.bind(this.controllerMessenger,"MultichainRouter:isSupportedScope"),handleNonEvmRequestForOrigin:t=>this.controllerMessenger.call("MultichainRouter:handleRequest",{...t,origin:e}),getNonEvmAccountAddresses:this.controllerMessenger.call.bind(this.controllerMessenger,"MultichainRouter:getSupportedAccounts"),trackSessionCreatedEvent:e=>this.metaMetricsController.trackEvent({event:ee.MetaMetricsEventName.PermissionsRequested,properties:{api_source:ee.MetaMetricsRequestedThrough.MultichainApi,method:Z.MESSAGE_TYPE.WALLET_CREATE_SESSION,chain_id_list:(0,U.getAllScopesFromCaip25CaveatValue)(e)}})})),o.push((0,xe.createUnsupportedMethodMiddleware)(new Set([...z.UNSUPPORTED_RPC_METHODS,"eth_requestAccounts","eth_accounts"]))),r===E.SubjectType.Website&&o.push((0,Ue.default)({location:t.url,registerOnboarding:this.onboardingController.registerOnboarding})),o.push((0,xe.createMultichainMethodMiddleware)({subjectType:r,...this.setupCommonMiddlewareHooks(e)})),o.push(this.metamaskMiddleware),o.push(this.eip5792Middleware);try{const t=this.permissionController.getCaveat(e,U.Caip25EndowmentPermissionName,U.Caip25CaveatType),r=(0,U.getSessionScopes)(t.value,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)});Object.entries(r).forEach(([t,r])=>{r.notifications.includes("eth_subscription")&&r.methods.includes("eth_subscribe")&&this.addMultichainApiEthSubscriptionMiddleware({scope:t,origin:e,tabId:n})})}catch(e){}return this.multichainSubscriptionManager.on("notification",(t,r,a)=>{e===t&&n===r&&o.emit("notification",a)}),o.push(this.multichainMiddlewareManager.generateMultichainMiddlewareForOriginAndTabId(e,n)),o.push(async(e,t,r,n)=>{const{provider:o}=this.networkController.getNetworkClientById(e.networkClientId);return t.result=await o.request(e),n()}),o}setupPublicConfig(e){const t=(0,c.storeAsStream)(this.publicConfigStore);(0,o.pipeline)(t,e,e=>{var r;t.destroy(),!e||null!==(r=e.message)&&void 0!==r&&r.match("Premature close")||v.default.error(e)})}addConnection(e,{tabId:t,apiType:r,engine:n}){if(e===Z.ORIGIN_METAMASK)return null;this.connections[e]||(this.connections[e]={});const o=(0,k.nanoid)();return this.connections[e][o]={tabId:t,apiType:r,engine:n},o}removeConnection(e,t){const r=this.connections[e];r&&(delete r[t],0===Object.keys(r).length&&delete this.connections[e])}removeAllConnections(e){const t=this.connections[e];t&&Object.keys(t).forEach(t=>{this.removeConnection(e,t)})}notifyConnections(e,t,r){const n=this.connections[e];n&&Object.values(n).forEach(e=>{r&&e.apiType!==r||e.engine&&e.engine.emit("notification",t)})}notifyAllConnections(e,t){const r="function"==typeof e?t=>e(t):()=>e;Object.keys(this.connections).forEach(e=>{Object.values(this.connections[e]).forEach(async n=>{if(!t||n.apiType===t)try{this.notifyConnection(n,await r(e))}catch(e){console.error(e)}})})}notifyConnection(e,t){try{e.engine&&e.engine.emit("notification",t)}catch(e){console.error(e)}}async _onKeyringControllerUpdate(e){const{keyrings:t}=e,r=t.reduce((e,{accounts:t})=>e.concat(t),[]).filter(nt.isEthAddress);r.length&&this.accountTrackerController.syncWithAddresses(r)}_onUnlock(){this.unMarkPasswordForgotten(),this.emit("unlock")}_onLock(){this.emit("lock")}_onStateUpdate(e){this.isClientOpenAndUnlocked=e.isUnlocked&&this._isClientOpen,this._notifyChainChange()}_onAccountRemoved(e){this.removeAllAccountPermissions(e)}privateSendUpdate(){this.emit("update",this.getState())}isUnlocked(){return this.keyringController.state.isUnlocked}getExternalPendingTransactions(e){return this.smartTransactionsController.getTransactions({addressFrom:e,status:"pending"})}async initializeChainlist(){const e=`cachedFetch:${z.CHAIN_SPEC_URL}`,{cachedResponse:t}=await(0,te.getStorageItem)(e)||{};t||await(0,te.setStorageItem)(e,{cachedResponse:(0,w.rawChainData)(),cachedTime:0}),await(0,Ge.initializeRpcProviderDomains)()}async getPendingNonce(e,t){const{nonceDetails:r,releaseLock:n}=await this.txController.getNonceLock(e,t),o=r.params.highestSuggested;return n(),o}async getNextNonce(e,t){const r=await this.txController.getNonceLock(e,t);return r.releaseLock(),r.nextNonce}throwTestError(e){setTimeout(()=>{const t=new Error(e);throw t.name="TestError",t})}captureTestError(e){setTimeout(()=>{const t=new Error(e);t.name="TestError",(0,G.captureException)(t)})}getTransactionMetricsRequest(){var e;return{...{createEventFragment:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:createEventFragment"),finalizeEventFragment:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:finalizeEventFragment"),getEventFragmentById:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:getEventFragmentById"),getParticipateInMetrics:()=>this.controllerMessenger.call("MetaMetricsController:getState").participateInMetaMetrics,trackEvent:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:trackEvent"),updateEventFragment:this.controllerMessenger.call.bind(this.controllerMessenger,"MetaMetricsController:updateEventFragment"),getAccountBalance:(e,t)=>{var r;return null===(r=this.accountTrackerController.state.accountsByChainId)||void 0===r||null===(r=r[t])||void 0===r||null===(r=r[e])||void 0===r?void 0:r.balance},getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),getEIP1559GasFeeEstimates:(...e)=>this.gasFeeController.fetchGasFeeEstimates(...e),getSelectedAddress:()=>this.accountsController.getSelectedAccount().address,getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),getTransaction:e=>this.txController.state.transactions.find(t=>t.id===e),getIsSmartTransaction:e=>(0,ce.getIsSmartTransaction)(this._getMetaMaskState(),e),getSmartTransactionByMinedTxHash:e=>this.smartTransactionsController.getSmartTransactionByMinedTxHash(e),getMethodData:e=>{if(!e)return null;const{knownMethodData:t,use4ByteResolution:r}=this.preferencesController.state,n=(0,Ge.addHexPrefix)(e);return(0,Ge.getMethodDataName)(t,r,n,this.preferencesController.addKnownMethodData.bind(this.preferencesController),this.provider)},getIsConfirmationAdvancedDetailsOpen:()=>this.preferencesController.state.preferences.showConfirmationAdvancedDetails,getHDEntropyIndex:this.getHDEntropyIndex.bind(this),getNetworkRpcUrl:e=>{try{var t;const n=this.networkController.findNetworkClientIdByChainId(e),o=this.networkController.getNetworkConfigurationByNetworkClientId(n);if(o.rpcUrl)return o.rpcUrl;if((null===(t=o.rpcEndpoints)||void 0===t?void 0:t.length)>0){var r;const e=o.defaultRpcEndpointIndex||0;return(null===(r=o.rpcEndpoints[e])||void 0===r?void 0:r.url)||o.rpcEndpoints[0].url}return"unknown"}catch(e){return console.error("Error getting RPC URL:",e),"unknown"}}},snapAndHardwareMessenger:this.controllerMessenger.getRestricted({name:"SnapAndHardwareMessenger",allowedActions:["KeyringController:getKeyringForAccount","KeyringController:getState","SnapController:get","AccountsController:getSelectedAccount"]}),provider:null===(e=this.controllerMessenger.call("NetworkController:getSelectedNetworkClient"))||void 0===e?void 0:e.provider}}updateAccountBalanceForTransactionNetwork(e){const{networkClientId:t,txParams:{from:r}}=e;this.accountTrackerController.updateAccountByAddress({address:r,networkClientId:t})}toggleExternalServices(e){this.preferencesController.toggleExternalServices(e),this.tokenListController.updatePreventPollingOnNetworkRestart(!e),e?(this.tokenDetectionController.enable(),this.gasFeeController.enableNonRPCGasFeeApis()):(this.tokenDetectionController.disable(),this.gasFeeController.disableNonRPCGasFeeApis())}async setLedgerTransportPreference(e){const t=window.navigator.hid?Q.LedgerTransportTypes.webhid:Q.LedgerTransportTypes.u2f;return null!=e&&e.updateTransportMethod?e.updateTransportMethod(t).catch(e=>{throw e}):undefined}recordFirstTimeInfo(e){if(!("firstTimeInfo"in e)){const t="13.7.0";e.firstTimeInfo={version:t,date:Date.now()}}}set isClientOpen(e){this._isClientOpen=e;const{isUnlocked:t}=this.controllerMessenger.call("KeyringController:getState");t&&this.controllerMessenger.call("SnapController:setClientActive",e),e?this.controllerMessenger.call("BackendWebSocketService:connect"):this.controllerMessenger.call("BackendWebSocketService:disconnect")}onClientClosed(){try{this.gasFeeController.stopAllPolling(),this.currencyRateController.stopAllPolling(),this.tokenRatesController.stopAllPolling(),this.tokenDetectionController.stopAllPolling(),this.tokenListController.stopAllPolling(),this.tokenBalancesController.stopAllPolling(),this.appStateController.clearPollingTokens(),this.accountTrackerController.stopAllPolling(),this.deFiPositionsController.stopAllPolling()}catch(e){console.error(e)}}onEnvironmentTypeClosed(e){const t=Z.POLLING_TOKEN_ENVIRONMENT_TYPES[e];this.appStateController.state[t].forEach(e=>{this.gasFeeController.stopPollingByPollingToken(e),this.currencyRateController.stopPollingByPollingToken(e),this.tokenRatesController.stopPollingByPollingToken(e),this.tokenDetectionController.stopPollingByPollingToken(e),this.tokenListController.stopPollingByPollingToken(e),this.tokenBalancesController.stopPollingByPollingToken(e),this.accountTrackerController.stopPollingByPollingToken(e),this.appStateController.removePollingToken(e,t)})}safelistPhishingDomain(e){return(0,Ge.getPlatform)()===Z.PLATFORM_FIREFOX||this.metaMetricsController.trackEvent({category:ee.MetaMetricsEventCategory.Phishing,event:ee.MetaMetricsEventName.ProceedAnywayClicked,properties:{url:e,referrer:{url:e}}},{excludeMetaMetricsId:!0}),this.phishingController.bypass(e)}async backToSafetyPhishingWarning(){this.metaMetricsController.trackEvent({category:ee.MetaMetricsEventCategory.Navigation,event:ee.MetaMetricsEventName.PortfolioLinkClicked,properties:{location:"phishing_page",text:"Back to safety"}}),await this.platform.switchToAnotherURL(undefined,"https://app.metamask.io/?metamaskEntry=phishing_page_portfolio_button")}async setLocked(e={skipSeedlessOperationLock:!1}){const{skipSeedlessOperationLock:t}=e,r=this.onboardingController.getIsSocialLoginFlow();let n;r&&!t&&(n=await this.seedlessOperationMutex.acquire());try{r&&await this.seedlessOnboardingController.setLocked(),await this.keyringController.setLocked()}catch(e){throw v.default.error("Error setting locked state",e),e}finally{n&&n()}}rejectAllPendingApprovals(){(0,ct.rejectAllApprovals)({approvalController:this.approvalController,deleteInterface:e=>this.controllerMessenger.call("SnapInterfaceController:deleteInterface",e)})}async getCode(e,t){const{provider:r}=this.networkController.getNetworkClientById(t);return await r.request({method:"eth_getCode",params:[e]})}async _onAccountChange(e){const t=(0,Qe.getPermittedAccountsByOrigin)(this.permissionController.state);for(const[r,n]of t.entries())n.includes(e)&&this._notifyAccountsChange(r,n)}_notifyAccountsChange(e,t){this.notifyConnections(e,{method:Qe.NOTIFICATION_NAMES.accountsChanged,params:t.length<2?t:this.getPermittedAccounts(e)},Ir),this.permissionLogController.updateAccountsHistory(e,t)}async _notifyAuthorizationChange(e,t){this.notifyConnections(e,{method:L.MultichainApiNotifications.sessionChanged,params:{sessionScopes:(0,U.getSessionScopes)(t,{getNonEvmSupportedMethods:this.getNonEvmSupportedMethods.bind(this)})}},_r)}async _notifySolanaAccountChange(e,t){this.notifyConnections(e,{method:L.MultichainApiNotifications.walletNotify,params:{scope:fe.MultichainNetworks.SOLANA,notification:{method:Qe.NOTIFICATION_NAMES.accountsChanged,params:t}}},_r)}async _notifyChainChange(){this.notifyAllConnections(async e=>({method:Qe.NOTIFICATION_NAMES.chainChanged,params:await this.getProviderNetworkState({origin:e})}),Ir)}async _notifyChainChangeForConnection(e,t){this.notifyConnection(e,{method:Qe.NOTIFICATION_NAMES.chainChanged,params:await this.getProviderNetworkState({origin:t})})}async _onFinishedTransaction(e){if(![R.TransactionStatus.confirmed,R.TransactionStatus.failed].includes(e.status))return;const t=performance.now(),r=(0,pe.trace)({name:pe.TraceName.OnFinishedTransaction,startTime:performance.timeOrigin});(0,pe.trace)({name:pe.TraceName.OnFinishedTransaction,startTime:performance.timeOrigin,parentContext:r,data:{transactionMeta:e}}),await this._createTransactionNotifcation(e),await this._updateNFTOwnership(e),this._trackTransactionFailure(e),await this.tokenBalancesController.updateBalances({chainIds:[e.chainId]}),(0,pe.endTrace)({name:pe.TraceName.OnFinishedTransaction,timestamp:performance.timeOrigin+t})}async _createTransactionNotifcation(e){const{chainId:t}=e;let r={};if(t){var n,o;const e=null===(n=this.networkController.state.networkConfigurationsByChainId)||void 0===n?void 0:n[t];r={blockExplorerUrl:null==e||null===(o=e.blockExplorerUrls)||void 0===o?void 0:o[null==e?void 0:e.defaultBlockExplorerUrlIndex]}}try{await this.platform.showTransactionNotification(e,r)}catch(e){v.default.error("Failed to create transaction notification",e)}}async _updateNFTOwnership(e){var t,r;const{type:n,txParams:o,chainId:a,txReceipt:s}=e,i=this.accountsController.getSelectedAccount().address,{allNfts:l}=this.nftController.state,c=null==s?void 0:s.logs,d=n===R.TransactionType.contractInteraction&&c,u=(n===R.TransactionType.tokenMethodTransferFrom||n===R.TransactionType.tokenMethodSafeTransferFrom)&&o!==undefined;if(!d&&!u)return;const h=null===(t=this.networkController)||void 0===t||null===(t=t.state)||void 0===t||null===(t=t.networkConfigurationsByChainId)||void 0===t||null===(t=t[a])||void 0===t||null===(t=t.rpcEndpoints[null===(r=this.networkController)||void 0===r||null===(r=r.state)||void 0===r||null===(r=r.networkConfigurationsByChainId)||void 0===r||null===(r=r[a])||void 0===r?void 0:r.defaultRpcEndpointIndex])||void 0===t?void 0:t.networkClientId;if(u){var p;const{data:e,to:t,from:r}=o,n=(0,oe.parseStandardTokenTransactionData)(e),s=(0,re.getTokenIdParam)(n)??(0,se.getTokenValueParam)(n),i=null==l||null===(p=l[r])||void 0===p||null===(p=p[a])||void 0===p?void 0:p.find(({address:e,tokenId:r})=>(0,ne.isEqualCaseInsensitive)(e,t)&&r===s);i&&this.nftController.checkAndUpdateSingleNftOwnershipStatus(i,!1,h,{userAddress:r})}else{const e=c.map(e=>{const t=e.topics&&e.topics[0]===de.TRANSFER_SINFLE_LOG_TOPIC_HASH,r=e.topics&&e.topics[0]===de.TOKEN_TRANSFER_LOG_TOPIC_HASH;let n;return t&&(n=e.topics&&e.topics[3]&&e.topics[3].match(null==i?void 0:i.slice(2))),r&&(n=e.topics&&e.topics[2]&&e.topics[2].match(null==i?void 0:i.slice(2))),{isERC1155NftTransfer:t,isERC721NftTransfer:r,isTransferToSelectedAddress:n,...e}});if(0!==e.length){const t=[];e.forEach(e=>{if(e.isTransferToSelectedAddress&&(e.isERC1155NftTransfer||e.isERC721NftTransfer)){let r;r=e.isERC1155NftTransfer?new O.Interface(D.abiERC1155):new O.Interface(D.abiERC721);try{const n=r.parseLog({data:e.data,topics:e.topics});t.push({contract:e.address,...n})}catch(e){}}});const r=[],n=[];t.forEach(e=>{var t;const o=(0,re.getTokenIdParam)(e),s=null==l||null===(t=l[i])||void 0===t||null===(t=t[a])||void 0===t?void 0:t.find(({address:t,tokenId:r})=>(0,ne.isEqualCaseInsensitive)(t,e.contract)&&r===o);s?r.push(s):n.push({tokenId:o,...e})});const o=r.map(async e=>this.nftController.checkAndUpdateSingleNftOwnershipStatus(e,!1,h,{selectedAddress:i}));await Promise.allSettled(o);const s=n.map(async e=>this.nftController.addNft(e.contract,e.tokenId,h));await Promise.allSettled(s)}}}_trackTransactionFailure(e){var t,r;const{txReceipt:n}=e,o=this.getState(),{allTokens:a}=this.tokensController.state,s=this.accountsController.getSelectedAccount(),i=(null==a||null===(t=a[e.chainId])||void 0===t?void 0:t[s.address])||[];n&&"0x0"===n.status&&this.metaMetricsController.trackEvent({event:"Tx Status Update: On-Chain Failure",category:ee.MetaMetricsEventCategory.Background,properties:{action:"Transactions",errorMessage:null===(r=e.simulationFails)||void 0===r?void 0:r.reason,numberOfTokens:i.length,numberOfAccounts:Object.keys(o.accounts).length}},{matomoEvent:!0})}_onUserOperationAdded(e){const t=this.txController.state.transactions.find(t=>t.id===e.id);t&&(t.type===R.TransactionType.swap?this.controllerMessenger.publish("TransactionController:transactionNewSwap",{transactionMeta:t}):t.type===R.TransactionType.swapApproval&&this.controllerMessenger.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:t}))}_onUserOperationTransactionUpdated(e){const t={...e,txParams:{...e.txParams,from:this.accountsController.getSelectedAccount().address}};this.txController.state.transactions.some(e=>e.id===t.id)||this.txController.update(e=>{e.transactions.push(t)}),this.txController.updateTransaction(t,"Generated from user operation"),this.controllerMessenger.publish("TransactionController:transactionStatusUpdated",{transactionMeta:t})}_getMetaMaskState(){return{metamask:this.getState()}}}async function Or(e,t){var r,n,o,a,s;const i=null===(r=this.opts.overrides)||void 0===r?void 0:r.keyrings;let l=null;switch(e.name){case Q.HardwareDeviceNames.trezor:l=(null==i||null===(n=i.trezor)||void 0===n?void 0:n.type)||y.TrezorKeyring.type;break;case Q.HardwareDeviceNames.oneKey:l=(null==i||null===(o=i.oneKey)||void 0===o?void 0:o.type)||(null===y.OneKeyKeyring||void 0===y.OneKeyKeyring?void 0:y.OneKeyKeyring.type);break;case Q.HardwareDeviceNames.ledger:l=(null==i||null===(a=i.ledger)||void 0===a?void 0:a.type)||C.LedgerKeyring.type;break;case Q.HardwareDeviceNames.qr:l=S.QrKeyring.type;break;case Q.HardwareDeviceNames.lattice:l=(null==i||null===(s=i.lattice)||void 0===s?void 0:s.type)||b.default.type;break;default:throw new Error("MetamaskController:#withKeyringForDevice - Unknown device")}return this.keyringController.withKeyring({type:l},async({keyring:r})=>{if(e.hdPath&&r.setHdPath&&r.setHdPath(e.hdPath),e.name===Q.HardwareDeviceNames.lattice&&(r.appName="MetaMask"),e.name===Q.HardwareDeviceNames.ledger&&await this.setLedgerTransportPreference(r),e.name===Q.HardwareDeviceNames.trezor||e.name===Q.HardwareDeviceNames.oneKey){const e=r.getModel();this.appStateController.setTrezorModel(e)}return r.network=(0,ue.getProviderConfig)({metamask:this.networkController.state}).type,await t(r)},{createIfMissing:!0})}function Dr(){const e=Ar(Nr,this,jr).call(this);return this.networkController.getNetworkClientById(e).configuration.chainId}function jr(){return this.networkController.state.selectedNetworkClientId}function Fr({existingControllers:e,initFunctions:t,initState:r}){var n;const o={currentMigrationVersion:this.opts.currentMigrationVersion,encryptor:this.opts.encryptor,extension:this.extension,platform:this.platform,getCronjobControllerStorageManager:()=>this.opts.cronjobControllerStorageManager,getFlatState:this.getState.bind(this),getPermittedAccounts:this.getPermittedAccounts.bind(this),getTransactionMetricsRequest:this.getTransactionMetricsRequest.bind(this),getUIState:this.getState.bind(this),infuraProjectId:this.opts.infuraProjectId,initLangCode:this.opts.initLangCode,keyringOverrides:null===(n=this.opts.overrides)||void 0===n?void 0:n.keyrings,updateAccountBalanceForTransactionNetwork:this.updateAccountBalanceForTransactionNetwork.bind(this),offscreenPromise:this.offscreenPromise,preinstalledSnaps:this.opts.preinstalledSnaps,persistedState:r,removeAccount:this.removeAccount.bind(this),removeAllConnections:this.removeAllConnections.bind(this),setupUntrustedCommunicationEip1193:this.setupUntrustedCommunicationEip1193.bind(this),setLocked:this.setLocked.bind(this),showNotification:this.platform._showNotification,showUserConfirmation:this.opts.showUserConfirmation,getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getHardwareTypeForMetric:this.getHardwareTypeForMetric.bind(this),trace:pe.trace};return(0,gt.initControllers)({baseControllerMessenger:this.controllerMessenger,existingControllers:e,initFunctions:t,initRequest:o})}r.default=Rr}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/metamask-controller.js"}],[334,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:2,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=2;try{"etherscan"===t.data.config.provider.type&&(t.data.config.provider.type="rpc",t.data.config.provider.rpcTarget="https://rpc.metamask.io/")}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/002.js"}],[335,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:3,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=3;try{"https://rawtestrpc.metamask.io/"===t.data.config.provider.rpcTarget&&(t.data.config.provider.rpcTarget="https://testrpc.metamask.io/")}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/003.js"}],[336,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:4,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=4;try{if("rpc"!==t.data.config.provider.type)return Promise.resolve(t);switch(t.data.config.provider.rpcTarget){case"https://testrpc.metamask.io/":t.data.config.provider={type:"testnet"};break;case"https://rpc.metamask.io/":t.data.config.provider={type:"mainnet"}}}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/004.js"}],[337,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:5,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=5;try{const e=function(e){const{config:t}=e,r={...e,KeyringController:{vault:e.vault,selectedAccount:t.selectedAccount,walletNicknames:e.walletNicknames}};return delete r.vault,delete r.walletNicknames,delete r.config.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #5${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/005.js"}],[338,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:6,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=6;try{const e=function(e){const t=e.KeyringController,r={...e,PreferencesController:{selectedAddress:t.selectedAccount}};return delete r.KeyringController.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #6${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/006.js"}],[339,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:7,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=7;try{const e=function(e){const t={...e,TransactionManager:{transactions:e.transactions||[],gasMultiplier:e.gasMultiplier||1}};return delete t.transactions,delete t.gasMultiplier,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #7${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/007.js"}],[34,{"@metamask/ens-controller":1748},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EnsControllerInit=void 0;var n=e("@metamask/ens-controller");r.EnsControllerInit=({controllerMessenger:e,initMessenger:t})=>({persistedStateKey:null,controller:new n.EnsController({messenger:e,onNetworkDidChange:e=>t.subscribe("NetworkController:networkDidChange",e)})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/ens-controller-init.ts"}],[340,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:8,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=8;try{const e=function(e){const t={...e,NoticeController:{noticesList:e.noticesList||[]}};return delete t.noticesList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #8${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/008.js"}],[341,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:9,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=9;try{const e=function(e){const t=(0,n.merge)({},e,{CurrencyController:{currentCurrency:e.currentFiat||e.fiatCurrency||"USD",conversionRate:e.conversionRate,conversionDate:e.conversionDate}});return delete t.currentFiat,delete t.fiatCurrency,delete t.conversionRate,delete t.conversionDate,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #9${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/009.js"}],[342,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:10,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=10;try{const e=function(e){const t=(0,n.merge)({},e,{ShapeShiftController:{shapeShiftTxList:e.shapeShiftTxList||[]}});return delete t.shapeShiftTxList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #10${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/010.js"}],[343,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[344,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach(e=>{e.read&&(e.body="")}),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[345,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[346,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[347,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),o=e("lodash");r.default={version:15,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map(e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e)}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[348,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),o=e("lodash");r.default={version:16,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e)}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[349,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),o=e("lodash");r.default={version:17,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[35,{"../../../../shared/constants/network":5800,"../../../../shared/constants/swaps":5815,"../init-utils":51,"@metamask/gas-fee-controller":1970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GasFeeControllerInit=void 0;var n=e("@metamask/gas-fee-controller"),o=e("../../../../shared/constants/swaps"),a=e("../../../../shared/constants/network"),s=e("../init-utils");const i=o.GAS_API_BASE_URL;r.GasFeeControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r})=>({controller:new n.GasFeeController({state:r.GasFeeController,messenger:e,interval:1e4,clientId:o.SWAPS_CLIENT_ID,legacyAPIEndpoint:`${i}/networks/<chain_id>/gasPrices`,EIP1559APIEndpoint:`${i}/networks/<chain_id>/suggestedGasFees`,getProvider:()=>{const{provider:e}=t.call("NetworkController:getSelectedNetworkClient")??{};return e},onNetworkDidChange:e=>{t.subscribe("NetworkController:networkDidChange",()=>{const r=t.call("NetworkController:getState");e(r)})},getCurrentNetworkEIP1559Compatibility:()=>t.call("NetworkController:getEIP1559Compatibility"),getCurrentAccountEIP1559Compatibility:()=>!0,getCurrentNetworkLegacyGasAPICompatibility:()=>(0,s.getGlobalChainId)(t)===a.CHAIN_IDS.BSC,getChainId:s.getGlobalChainId.bind(s.getGlobalChainId,t)})})}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/gas-fee-controller-init.ts"}],[350,{"fast-json-patch":4374,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},a=e("lodash");r.default={version:18,migrate(e){const t=(0,a.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,a.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map((e,t)=>0===t?e:function(e,t,r){const n=o.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e))).filter(e=>!Array.isArray(e)||e.length>0);var r;return e.history=t,e})}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[351,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),o=e("lodash");r.default={version:19,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const o=function(e){const t=e.map(e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)});return Math.max.apply(null,t)}(r.filter(e=>e.status===n.TransactionStatus.confirmed).filter(t=>t.txParams.from===e.txParams.from).filter(t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),a=function(e,t){const r=e.map(e=>{const{nonce:t}=e.txParams;return parseInt(t,16)});let n=t;for(;r.includes(n);)n+=1;return n}(r.filter(e=>e.status===n.TransactionStatus.submitted).filter(t=>t.txParams.from===e.txParams.from).filter(t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from),o),s=Math.max(a,o);return parseInt(e.txParams.nonce,16)>s+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e})}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[352,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[353,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[354,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),o=e("lodash");r.default={version:22,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[355,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex(e=>e.status===o.TransactionStatus.failed||e.status===o.TransactionStatus.rejected||e.status===o.TransactionStatus.confirmed||e.status===o.TransactionStatus.dropped);e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[356,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map((e,t)=>(e.status===o.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e)),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[3568,{"./types.js":3569},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./types.js");const o={type:"xstate.init"},a="xstate.assign";function s(e){return e===undefined?[]:[].concat(e)}function i(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function l(e){return t=>e===t}function c(e){return"string"==typeof e?{type:e}:e}function d(e,t){return{value:e,context:t,actions:[],changed:!1,matches:l(e)}}function u(e,t,r){let n=t,o=!1;return[e.filter(e=>{if(e.type===a){o=!0;let t=Object.assign({},n);return"function"==typeof e.assignment?t=e.assignment(n,r):Object.keys(e.assignment).forEach(o=>{t[o]="function"==typeof e.assignment[o]?e.assignment[o](n,r):e.assignment[o]}),n=t,!1}return!0}),n,o]}const h=(e,t)=>e.actions.forEach(({exec:r})=>r&&r(e.context,t));Object.defineProperty(r,"InterpreterStatus",{enumerable:!0,get:function(){return n.InterpreterStatus}}),r.assign=function(e){return{type:a,assignment:e}},r.createMachine=function(e,t={}){const[r,n]=u(s(e.states[e.initial].entry).map(e=>i(e,t.actions)),e.context,o),a={config:e,_options:t,initialState:{value:e.initial,actions:r,context:n,matches:l(e.initial)},transition:(t,r)=>{const{value:n,context:o}="string"==typeof t?{value:t,context:e.context}:t,h=c(r),p=e.states[n];if(p.on){const t=s(p.on[h.type]);for(const r of t){if(r===undefined)return d(n,o);const{target:t,actions:c=[],cond:m=()=>!0}="string"==typeof r?{target:r}:r,f=t===undefined,g=null!=t?t:n,v=e.states[g];if(m(o,h)){const e=(f?s(c):[].concat(p.exit,c,v.entry).filter(e=>e)).map(e=>i(e,a._options.actions)),[r,d,m]=u(e,o,h),g=null!=t?t:n;return{value:g,context:d,actions:r,changed:t!==n||r.length>0||m,matches:l(g)}}}}return d(n,o)}};return a},r.interpret=function(e){let t=e.initialState,r=n.InterpreterStatus.NotStarted;const a=new Set,s={_machine:e,send:o=>{r===n.InterpreterStatus.Running&&(t=e.transition(t,o),h(t,c(o)),a.forEach(e=>e(t)))},subscribe:e=>(a.add(e),e(t),{unsubscribe:()=>a.delete(e)}),start:a=>{if(a){const r="object"==typeof a?a:{context:e.config.context,value:a};t={value:r.value,actions:[],context:r.context,matches:l(r.value)}}else t=e.initialState;return r=n.InterpreterStatus.Running,h(t,o),s},stop:()=>(r=n.InterpreterStatus.Stopped,a.clear(),s),get state(){return t},get status(){return r}};return s}}}},{package:"@metamask/snaps-controllers>@xstate/fsm",file:"node_modules/@xstate/fsm/lib/index.js"}],[3569,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.InterpreterStatus=void 0,(n=r.InterpreterStatus||(r.InterpreterStatus={}))[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"}}},{package:"@metamask/snaps-controllers>@xstate/fsm",file:"node_modules/@xstate/fsm/lib/types.js"}],[357,{"../lib/util":332,"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("@metamask/transaction-controller"),a=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(e=>(e.status!==o.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,a.addHexPrefix)(e).toLowerCase(),to:()=>(0,a.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,a.addHexPrefix)(e),value:e=>(0,a.addHexPrefix)(e),data:e=>(0,a.addHexPrefix)(e),gas:e=>(0,a.addHexPrefix)(e),gasPrice:e=>(0,a.addHexPrefix)(e)},r={};return Object.keys(t).forEach(n=>{e[n]&&(r[n]=t[n](e[n]))}),r}(e.txParams)),e))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[358,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[359,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter(e=>e.status!==o.TransactionStatus.rejected)}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[36,{"@metamask/name-controller":2222},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NameControllerInit=void 0;var n=e("@metamask/name-controller");r.NameControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:r,getController:o})=>{const a=o("EnsController"),s=o("SnapsNameProvider"),i=()=>t.call("PreferencesController:getState").useExternalNameSources;return{controller:new n.NameController({messenger:e,state:r.NameController,providers:[new n.ENSNameProvider({reverseLookup:a.reverseResolveAddress.bind(a)}),new n.EtherscanNameProvider({isEnabled:i}),new n.TokenNameProvider({isEnabled:i}),new n.LensNameProvider({isEnabled:i}),s]})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/name-controller-init.ts"}],[360,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach(e=>{t.PreferencesController.accountTokens[e]={mainnet:r}}),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[361,{"./fail-tx":544,"@metamask/transaction-controller":2862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=e("@metamask/transaction-controller"),a=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,a.default)(29,"Stuck in approved state for too long.",e=>{const t=e.status===o.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5})}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[362,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId}),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[363,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[364,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[365,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[366,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[367,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[368,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[369,{"@metamask/controller-utils":1349,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach(e=>{r.add(e.chainId)});for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,o.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[37,{"../../lib/ppom/indexed-db-backend":271,"../../lib/ppom/ppom":274,"../init-utils":51,"@metamask/ppom-validator":2377},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMControllerInit=void 0;var n=e("@metamask/ppom-validator"),o=e("../../lib/ppom/indexed-db-backend"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(e("../../lib/ppom/ppom")),s=e("../init-utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}r.PPOMControllerInit=e=>{const{controllerMessenger:t,initMessenger:r,getController:i,persistedState:l}=e,{provider:c}=r.call("NetworkController:getSelectedNetworkClient")??{};return{controller:new n.PPOMController({messenger:t,storageBackend:new o.IndexedDBPPOMStorage("PPOMDB",1),provider:c,ppomProvider:{PPOM:a.PPOM,ppomInit:()=>a.default("./ppom_bg.wasm")},state:l.PPOMController,chainId:(0,s.getGlobalChainId)(r),securityAlertsEnabled:i("PreferencesController").state.securityAlertsEnabled,onPreferencesChange:r.subscribe.bind(r,"PreferencesController:stateChange"),cdnBaseUrl:"static.cx.metamask.io/api/v1/confirmations/ppom",blockaidPublicKey:"066ad3e8af5583385e312c156d238055215d5f25247c1e91055afa756cb98a88"})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/ppom-controller-init.ts"}],[370,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[371,{"../../../shared/modules/hexstring-utils":5906,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("../../../shared/modules/hexstring-utils");const a="SAI";function s(e={}){return e&&"object"==typeof e&&"DAI"===e.symbol&&"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359"===(0,o.toChecksumHexAddress)(e.address)}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)s(t)&&(t.symbol=a);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)s(e)&&(e.symbol=a)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[372,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[373,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[374,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[375,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[376,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[377,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;o.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const o=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[378,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[379,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach(e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())});return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[3797,{"./cache":3798,"./compile":3802,"./compile/async":3799,"./compile/error_classes":3800,"./compile/formats":3801,"./compile/resolve":3803,"./compile/rules":3804,"./compile/schema_obj":3805,"./compile/util":3807,"./data":3808,"./keyword":3836,"./refs/data.json":3837,"./refs/json-schema-draft-07.json":3838,"fast-json-stable-stringify":4375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./compile"),o=e("./compile/resolve"),a=e("./cache"),s=e("./compile/schema_obj"),i=e("fast-json-stable-stringify"),l=e("./compile/formats"),c=e("./compile/rules"),d=e("./data"),u=e("./compile/util");t.exports=v,v.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},v.prototype.compile=function(e,t){var r=this._addSchema(e,undefined,t);return r.validate||this._compile(r)},v.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var a=0;a<e.length;a++)this.addSchema(e[a],undefined,r,n);return this}var s=this._getId(e);if(s!==undefined&&"string"!=typeof s)throw new Error("schema id must be string");return k(this,t=o.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,n,!0),this},v.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},v.prototype.validateSchema=function(e,t){var r=e.$schema;if(r!==undefined&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(m)?m:undefined,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return n},v.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var a=r.schema,i=r.root,l=r.baseId,c=n.call(e,a,i,undefined,l);return e._fragments[t]=new s({ref:t,fragment:!0,schema:a,root:i,baseId:l,validate:c}),c}}(this,e)}},v.prototype.removeSchema=function(e){if(e instanceof RegExp)return C(this,this._schemas,e),C(this,this._refs,e),this;switch(typeof e){case"undefined":return C(this,this._schemas),C(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var a=this._getId(e);a&&(a=o.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},v.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},v.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=(t=t||{}).separator===undefined?", ":t.separator,n=t.dataVar===undefined?"data":t.dataVar,o="",a=0;a<e.length;a++){var s=e[a];s&&(o+=n+s.dataPath+" "+s.message+r)}return o.slice(0,-r.length)},v.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var a=this._opts.serialize,i=a?a(e):e,l=this._cache.get(i);if(l)return l;n=n||!1!==this._opts.addUsedSchema;var c=o.normalizeId(this._getId(e));c&&n&&k(this,c);var d,u=!1!==this._opts.validateSchema&&!t;u&&!(d=c&&c==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=o.ids.call(this,e),p=new s({id:c,schema:e,localRefs:h,cacheKey:i,meta:r});"#"!=c[0]&&n&&(this._refs[c]=p);this._cache.put(i,p),u&&d&&this.validateSchema(e,!0);return p},v.prototype._compile=function(e,t){if(e.compiling)return e.validate=a,a.schema=e.schema,a.errors=null,a.root=t||a,!0===e.schema.$async&&(a.$async=!0),a;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function a(){var t=e.validate,r=t.apply(this,arguments);return a.errors=t.errors,r}},v.prototype.compileAsync=e("./compile/async");var h=e("./keyword");v.prototype.addKeyword=h.add,v.prototype.getKeyword=h.get,v.prototype.removeKeyword=h.remove,v.prototype.validateKeyword=h.validate;var p=e("./compile/error_classes");v.ValidationError=p.Validation,v.MissingRefError=p.MissingRef,v.$dataMetaSchema=d;var m="http://json-schema.org/draft-07/schema",f=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function v(t){if(!(this instanceof v))return new v(t);t=this._opts=u.copy(t)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:T,warn:T,error:T};else{if(t===undefined&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new a,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return S;case"id":return b;default:return w}}(t),t.loopRequired=t.loopRequired||Infinity,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),t.serialize===undefined&&(t.serialize=i),this._metaOpts=function(e){for(var t=u.copy(e._opts),r=0;r<f.length;r++)delete t[f[r]];return t}(this),t.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),t.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(t){var r;t._opts.$data&&(r=e("./refs/data.json"),t.addMetaSchema(r,r.$id,!0));if(!1===t._opts.meta)return;var n=e("./refs/json-schema-draft-07.json");t._opts.$data&&(n=d(n,g));t.addMetaSchema(n,m,!0),t._refs["http://json-schema.org/schema"]=m}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function C(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function b(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function w(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function S(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function T(){}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/ajv.js"}],[3798,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/cache.js"}],[3799,{"./error_classes":3800},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./error_classes").MissingRef;t.exports=function e(t,r,o){var a=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=undefined);var s=i(t).then(function(){var e=a._addSchema(t,undefined,r);return e.validate||l(e)});o&&s.then(function(e){o(null,e)},o);return s;function i(t){var r=t.$schema;return r&&!a.getSchema(r)?e.call(a,{$ref:r},!0):Promise.resolve()}function l(e){try{return a._compile(e)}catch(t){if(t instanceof n)return function(t){var n=t.missingSchema;if(c(n))throw new Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var o=a._loadingSchemas[n];o||(o=a._loadingSchemas[n]=a._opts.loadSchema(n)).then(s,s);return o.then(function(e){if(!c(n))return i(e).then(function(){c(n)||a.addSchema(e,n,undefined,r)})}).then(function(){return l(e)});function s(){delete a._loadingSchemas[n]}function c(e){return a._refs[e]||a._schemas[e]}}(t);throw t}}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/async.js"}],[38,{"../../../../shared/constants/metametrics":5796,"../../../../shared/lib/trace":5888,"@metamask/signature-controller":2517},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureControllerInit=void 0;var n=e("@metamask/signature-controller"),o=e("../../../../shared/lib/trace"),a=e("../../../../shared/constants/metametrics");r.SignatureControllerInit=({controllerMessenger:e,initMessenger:t})=>{const r=new n.SignatureController({messenger:e,decodingApiUrl:"https://signature-insights.api.cx.metamask.io/v1",isDecodeSignatureRequestEnabled:()=>t.call("PreferencesController:getState").useTransactionSimulations,trace:o.trace});return r.hub.on("cancelWithReason",({metadata:e,reason:r})=>{t.call("MetaMetricsController:trackEvent",{event:r,category:a.MetaMetricsEventCategory.Transactions,properties:{action:"Sign Request",type:e.type}})}),{persistedStateKey:null,memStateKey:null,controller:r}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/signature-controller-init.ts"}],[380,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,s,i,l,c,d;null===(t=e.NetworkController)||void 0===t||delete t.settings;const u=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==u.type||"string"==typeof u.chainId&&a.test(u.chainId))&&"localhost"!==u.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(s=e.CachedBalancesController)||void 0===s||delete s.cachedBalances;const p=null===(i=e.TransactionController)||void 0===i?void 0:i.transactions;Array.isArray(p)&&p.forEach(e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&o.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))});const m=(null===(l=e.AddressBookController)||void 0===l?void 0:l.addressBook)||{};Object.keys(m).forEach(e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach(e=>{e&&"object"==typeof e&&(e.chainId=t)})}(m[e],t),m[t]?function(e,t,r){const n=e[t]||{},o={...e[r]};Object.keys(n).forEach(e=>{if(o[e]&&"object"==typeof o[e]){const t={};new Set([...Object.keys(o[e]),...Object.keys(n[e]||{})]).forEach(r=>{var a;t[r]=o[e][r]||(null===(a=n[e])||void 0===a?void 0:a[r])||""}),o[e]=t}else n[e]&&"object"==typeof n[e]&&(o[e]=n[e])}),e[r]=o}(m,e,t):m[t]=m[e],delete m[e]}}),null===(c=e.IncomingTransactionsController)||void 0===c||null===(c=c.incomingTxLastFetchedBlocksByNetwork)||void 0===c||delete c.localhost;const f=null===(d=e.PreferencesController)||void 0===d?void 0:d.accountTokens;f&&Object.keys(f).forEach(e=>{var t,r;const n=(null===(t=f[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=f[e].rpc||[];t.length>0?f[e].rpc=function(e,t){const r=a(e),n=a(t),o=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach(e=>{o.push({...r[e],...n[e]})}),o;function a(e){return e.reduce((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e),{})}}(n,t):f[e].rpc=n}null===(r=f[e])||void 0===r||delete r.localhost});return e}(r),t}};const o=/^0x[0-9a-f]+$/iu,a=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[3800,{"./resolve":3803},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./resolve");function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function a(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}t.exports={Validation:a(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:a(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/error_classes.js"}],[3801,{"./util":3807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./util"),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,i=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,d=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,u=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,m=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function f(e){return e="full"==e?"full":"fast",n.copy(f[e])}function g(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:a[n])}function v(e,t){var r=e.match(s);if(!r)return!1;var n=r[1],o=r[2],a=r[3],i=r[5];return(n<=23&&o<=59&&a<=59||23==n&&59==o&&60==a)&&(!t||i)}t.exports=f,f.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:d,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:u,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":m},f.full={date:g,time:v,"date-time":function(e){var t=e.split(y);return 2==t.length&&g(t[0])&&v(t[1],!0)},uri:function(e){return C.test(e)&&l.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:d,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:u,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":m};var y=/t|\s/i;var C=/\/|:/;var b=/[^\\]\\Z/;function w(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/formats.js"}],[3802,{"../dotjs/validate":3835,"./error_classes":3800,"./resolve":3803,"./util":3807,"fast-deep-equal":4368,"fast-json-stable-stringify":4375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./resolve"),o=e("./util"),a=e("./error_classes"),s=e("fast-json-stable-stringify"),i=e("../dotjs/validate"),l=o.ucs2length,c=e("fast-deep-equal"),d=a.Validation;function u(e,t,r){var n=p.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function h(e,t,r){var n=p.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function p(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function m(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function f(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return t[e]===undefined?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}t.exports=function e(t,r,p,C){var b=this,w=this._opts,S=[undefined],k={},T=[],P={},E=[],M={},A=[];r=r||{schema:t,refVal:S,refs:k};var I=u.call(this,t,r,C),_=this._compilations[I.index];if(I.compiling)return _.callValidate=function e(){var t=_.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var N=this._formats,R=this.RULES;try{var O=j(t,r,p,C);_.validate=O;var D=_.callValidate;return D&&(D.schema=O.schema,D.errors=null,D.refs=O.refs,D.refVal=O.refVal,D.root=O.root,D.$async=O.$async,w.sourceCode&&(D.source=O.source)),O}finally{h.call(this,t,r,C)}function j(t,s,u,h){var p=!s||s&&s.schema==t;if(s.schema!=r.schema)return e.call(b,t,s,u,h);var C,P=!0===t.$async,M=i({isTop:!0,schema:t,isRoot:p,baseId:h,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:a.MissingRef,RULES:R,validate:i,util:o,resolve:n,resolveRef:F,usePattern:L,useDefault:$,useCustomRule:U,opts:w,formats:N,logger:b.logger,self:b});M=y(S,g)+y(T,m)+y(E,f)+y(A,v)+M,w.processCode&&(M=w.processCode(M,t));try{C=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",M)(b,R,N,r,S,E,A,c,l,d),S[0]=C}catch(e){throw b.logger.error("Error compiling schema, function code:",M),e}return C.schema=t,C.errors=null,C.refs=k,C.refVal=S,C.root=p?C:s,P&&(C.$async=!0),!0===w.sourceCode&&(C.source={code:M,patterns:T,defaults:E}),C}function F(t,o,a){o=n.url(t,o);var s,i,l=k[o];if(l!==undefined)return B(s=S[l],i="refVal["+l+"]");if(!a&&r.refs){var c=r.refs[o];if(c!==undefined)return B(s=r.refVal[c],i=x(o,s))}i=x(o);var d=n.call(b,j,r,o);if(d===undefined){var u=p&&p[o];u&&(d=n.inlineRef(u,w.inlineRefs)?u:e.call(b,u,r,p,t))}if(d!==undefined)return function(e,t){var r=k[e];S[r]=t}(o,d),B(d,i);!function(e){delete k[e]}(o)}function x(e,t){var r=S.length;return S[r]=t,k[e]=r,"refVal"+r}function B(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function L(e){var t=P[e];return t===undefined&&(t=P[e]=T.length,T[t]=e),"pattern"+t}function $(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=M[t];return r===undefined&&(r=M[t]=E.length,E[r]=e),"default"+r}}function U(e,t,r,n){if(!1!==b._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error("parent schema must have all required keywords: "+o.join(","));var a=e.definition.validateSchema;if(a)if(!a(t)){var s="keyword schema is invalid: "+b.errorsText(a.errors);if("log"!=b._opts.validateSchema)throw new Error(s);b.logger.error(s)}}var i,l=e.definition.compile,c=e.definition.inline,d=e.definition.macro;if(l)i=l.call(b,t,r,n);else if(d)i=d.call(b,t,r,n),!1!==w.validateSchema&&b.validateSchema(i,!0);else if(c)i=c.call(b,n,e.keyword,t,r);else if(!(i=e.definition.validate))return;if(i===undefined)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var u=A.length;return A[u]=i,{code:"customRule"+u,validate:i}}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/index.js"}],[3803,{"./schema_obj":3805,"./util":3807,"fast-deep-equal":4368,"json-schema-traverse":3839,"uri-js":5706},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("uri-js"),o=e("fast-deep-equal"),a=e("./util"),s=e("./schema_obj"),i=e("json-schema-traverse");function l(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return l.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return m(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,a,i,d=c.call(this,t,r);return d&&(o=d.schema,t=d.root,i=d.baseId),o instanceof s?a=o.validate||e.call(this,o.schema,t,undefined,i):o!==undefined&&(a=m(o,this._opts.inlineRefs)?o:e.call(this,o,t,undefined,i)),a}function c(e,t){var r=n.parse(t),o=y(r),a=v(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==a){var i=b(o),l=this._refs[i];if("string"==typeof l)return d.call(this,e,l,r);if(l instanceof s)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[i])instanceof s))return;if(l.validate||this._compile(l),i==b(t))return{schema:l,root:e,baseId:a};e=l}if(!e.schema)return;a=v(this._getId(e.schema))}return h.call(this,r,a,e.schema,e)}function d(e,t,r){var n=c.call(this,e,t);if(n){var o=n.schema,a=n.baseId;e=n.root;var s=this._getId(o);return s&&(a=w(a,s)),h.call(this,r,a,o,e)}}t.exports=l,l.normalizeId=b,l.fullPath=v,l.url=w,l.ids=function(e){var t=b(this._getId(e)),r={"":t},s={"":v(t,!1)},l={},c=this;return i(e,{allKeys:!0},function(e,t,i,d,u,h,p){if(""!==t){var m=c._getId(e),f=r[d],g=s[d]+"/"+u;if(p!==undefined&&(g+="/"+("number"==typeof p?p:a.escapeFragment(p))),"string"==typeof m){m=f=b(f?n.resolve(f,m):m);var v=c._refs[m];if("string"==typeof v&&(v=c._refs[v]),v&&v.schema){if(!o(e,v.schema))throw new Error('id "'+m+'" resolves to more than one schema')}else if(m!=b(g))if("#"==m[0]){if(l[m]&&!o(e,l[m]))throw new Error('id "'+m+'" resolves to more than one schema');l[m]=e}else c._refs[m]=g}r[t]=f,s[t]=g}}),l},l.inlineRef=m,l.schema=c;var u=a.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),s=1;s<o.length;s++){var i=o[s];if(i){if((r=r[i=a.unescapeFragment(i)])===undefined)break;var l;if(!u[i]&&((l=this._getId(r))&&(t=w(t,l)),r.$ref)){var d=w(t,r.$ref),h=c.call(this,n,d);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return r!==undefined&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var p=a.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function m(e,t){return!1!==t&&(t===undefined||!0===t?f(e):t?g(e)<=t:void 0)}function f(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!f(t))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(t=e[n])&&!f(t))return!1}return!0}function g(e){var t,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&(r+=g(t)),r==Infinity)return Infinity}else for(var o in e){if("$ref"==o)return Infinity;if(p[o])r++;else if("object"==typeof(t=e[o])&&(r+=g(t)+1),r==Infinity)return Infinity}return r}function v(e,t){return!1!==t&&(e=b(e)),y(n.parse(e))}function y(e){return n.serialize(e).split("#")[0]+"#"}var C=/#\/?$/;function b(e){return e?e.replace(C,""):""}function w(e,t){return t=b(t),n.resolve(e,t)}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/resolve.js"}],[3804,{"../dotjs":3824,"./util":3807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../dotjs"),o=e("./util").toHash;t.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var o;if("object"==typeof r){var a=Object.keys(r)[0];o=r[a],r=a,o.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}}),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=o(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/rules.js"}],[3805,{"./util":3807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./util");t.exports=function(e){n.copy(e,this)}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/schema_obj.js"}],[3806,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/ucs2length.js"}],[3807,{"./ucs2length":3806,"fast-deep-equal":4368},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){var o=n?" !== ":" === ",a=n?" || ":" && ",s=n?"!":"",i=n?"":"!";switch(e){case"null":return t+o+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+a+"typeof "+t+o+'"object"'+a+i+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+o+'"number"'+a+i+"("+t+" % 1)"+a+t+o+t+(r?a+s+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+o+'"'+e+'"'+(r?a+s+"isFinite("+t+")":"")+")";default:return"typeof "+t+o+'"'+e+'"'}}t.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){if(1===e.length)return n(e[0],t,r,!0);var o="",s=a(e);for(var i in s.array&&s.object&&(o=s.null?"(":"(!"+t+" || ",o+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)o+=(o?" && ":"")+n(i,t,r,!0);return o},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var a=t[n];(o[a]||"array"===e&&"array"===a)&&(r[r.length]=a)}if(r.length)return r}else{if(o[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:a,getProperty:l,escapeQuotes:c,equal:e("fast-deep-equal"),ucs2length:e("./ucs2length"),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:d,getPathExpr:function(e,t,r,n){return p(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=d(r?"/"+m(t):l(t));return p(e,n)},getData:function(e,t,r){var n,o,a,s;if(""===e)return"rootData";if("/"==e[0]){if(!u.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,a="rootData"}else{if(!(s=e.match(h)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(o=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(a="data"+(t-n||""),!o)return a}for(var i=a,c=o.split("/"),d=0;d<c.length;d++){var p=c[d];p&&(i+=" && "+(a+=l(f(p))))}return i},unescapeFragment:function(e){return f(decodeURIComponent(e))},unescapeJsonPointer:f,escapeFragment:function(e){return encodeURIComponent(m(e))},escapeJsonPointer:m};var o=a(["string","number","integer","boolean","null"]);function a(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,i=/'|\\/g;function l(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(i,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function d(e){return"'"+c(e)+"'"}var u=/^\/(?:[^~]|~0|~1)*$/,h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function p(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function m(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function f(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/compile/util.js"}],[3808,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,a=t[r].split("/"),s=e;for(o=1;o<a.length;o++)s=s[a[o]];for(o=0;o<n.length;o++){var i=n[o],l=s[i];l&&(s[i]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/data.js"}],[3809,{"./refs/json-schema-draft-07.json":3838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./refs/json-schema-draft-07.json");t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/definition_schema.js"}],[381,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[3810,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h=e.opts.$data&&i&&i.$data;h?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i;var p="maximum"==t,m=p?"exclusiveMaximum":"exclusiveMinimum",f=e.schema[m],g=e.opts.$data&&f&&f.$data,v=p?"<":">",y=p?">":"<",C=undefined;if(!h&&"number"!=typeof i&&i!==undefined)throw new Error(t+" must be number");if(!g&&f!==undefined&&"number"!=typeof f&&"boolean"!=typeof f)throw new Error(m+" must be number or boolean");if(g){var b=e.util.getData(f.$data,s,e.dataPathArr),w="exclusive"+a,S="exclType"+a,k="exclIsNumber"+a,T="' + "+(M="op"+a)+" + '";o+=" var schemaExcl"+a+" = "+b+"; ",o+=" var "+w+"; var "+S+" = typeof "+(b="schemaExcl"+a)+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ";var P;C=m;(P=P||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(C||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var E=o;o=P.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+E+"]); ":o+=" validate.errors = ["+E+"]; return false; ":o+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+S+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+b+" "+v+"= "+n+") ? "+u+" "+y+"= "+b+" : "+u+" "+y+" "+n+" ) : ( ("+w+" = "+b+" === true) ? "+u+" "+y+"= "+n+" : "+u+" "+y+" "+n+" ) || "+u+" !== "+u+") { var op"+a+" = "+w+" ? '"+v+"' : '"+v+"='; ",i===undefined&&(C=m,c=e.errSchemaPath+"/"+m,n=b,h=g)}else{T=v;if((k="number"==typeof f)&&h){var M="'"+T+"'";o+=" if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" ( "+n+" === undefined || "+f+" "+v+"= "+n+" ? "+u+" "+y+"= "+f+" : "+u+" "+y+" "+n+" ) || "+u+" !== "+u+") { "}else{k&&i===undefined?(w=!0,C=m,c=e.errSchemaPath+"/"+m,n=f,y+="="):(k&&(n=Math[p?"min":"max"](f,i)),f===(!k||n)?(w=!0,C=m,c=e.errSchemaPath+"/"+m,y+="="):(w=!1,T+="="));M="'"+T+"'";o+=" if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+u+" "+y+" "+n+" || "+u+" !== "+u+") { "}}C=C||t,(P=P||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(C||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+M+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+T+" ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+l:""+i,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";E=o;return o=P.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+E+"]); ":o+=" validate.errors = ["+E+"]; return false; ":o+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",d&&(o+=" else { "),o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limit.js"}],[3811,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h=e.opts.$data&&i&&i.$data;if(h?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i,!h&&"number"!=typeof i)throw new Error(t+" must be number");o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+u+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var p=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=h?"' + "+n+" + '":""+i,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+l:""+i,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var f=o;return o=m.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limitItems.js"}],[3812,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h=e.opts.$data&&i&&i.$data;if(h?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i,!h&&"number"!=typeof i)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?o+=" "+u+".length ":o+=" ucs2length("+u+") ",o+=" "+p+" "+n+") { ";var m=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=h?"' + "+n+" + '":""+i,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+l:""+i,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var g=o;return o=f.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limitLength.js"}],[3813,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h=e.opts.$data&&i&&i.$data;if(h?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i,!h&&"number"!=typeof i)throw new Error(t+" must be number");o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" Object.keys("+u+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var p=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=h?"' + "+n+" + '":""+i,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+l:""+i,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var f=o;return o=m.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/_limitProperties.js"}],[3814,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,i=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var d="valid"+l.level,u=l.baseId,h=!0,p=o;if(p)for(var m,f=-1,g=p.length-1;f<g;)m=p[f+=1],(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all))&&(h=!1,l.schema=m,l.schemaPath=a+"["+f+"]",l.errSchemaPath=s+"/"+f,n+="  "+e.validate(l)+" ",l.baseId=u,i&&(n+=" if ("+d+") { ",c+="}"));return i&&(n+=h?" if (true) { ":" "+c.slice(0,-1)+" "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/allOf.js"}],[3815,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h="errs__"+o,p=e.util.copy(e),m="";p.level++;var f="valid"+p.level,g=s.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)});if(g){var v=p.baseId;n+=" var "+h+" = errors; var "+u+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var C=s;if(C)for(var b,w=-1,S=C.length-1;w<S;)b=C[w+=1],p.schema=b,p.schemaPath=i+"["+w+"]",p.errSchemaPath=l+"/"+w,n+="  "+e.validate(p)+" ",p.baseId=v,n+=" "+u+" = "+u+" || "+f+"; if (!"+u+") { ",m+="}";e.compositeRule=p.compositeRule=y,n+=" "+m+" if (!"+u+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else c&&(n+=" if (true) { ");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/anyOf.js"}],[3816,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.schema[t],a=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(a)+", validate.root.schema);"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/comment.js"}],[3817,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; "),h||(n+=" var schema"+o+" = validate.schema"+i+";"),n+="var "+u+" = equal("+d+", schema"+o+"); if (!"+u+") {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/const.js"}],[3818,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h="errs__"+o,p=e.util.copy(e);p.level++;var m="valid"+p.level,f="i"+o,g=p.dataLevel=e.dataLevel+1,v="data"+g,y=e.baseId,C=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+h+" = errors;var "+u+";",C){var b=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=s,p.schemaPath=i,p.errSchemaPath=l,n+=" var "+m+" = false; for (var "+f+" = 0; "+f+" < "+d+".length; "+f+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers,!0);var w=d+"["+f+"]";p.dataPathArr[g]=f;var S=e.validate(p);p.baseId=y,e.util.varOccurences(S,v)<2?n+=" "+e.util.varReplace(S,v,w)+" ":n+=" var "+v+" = "+w+"; "+S+" ",n+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=b,n+="  if (!"+m+") {"}else n+=" if ("+d+".length == 0) {";var k=k||[];k.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var T=n;return n=k.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",C&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/contains.js"}],[3819,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o,a=" ",s=e.level,i=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(i||""),p="valid"+s,m="errs__"+s,f=e.opts.$data&&l&&l.$data;f?(a+=" var schema"+s+" = "+e.util.getData(l.$data,i,e.dataPathArr)+"; ",o="schema"+s):o=l;var g,v,y,C,b,w=this,S="definition"+s,k=w.definition,T="";if(f&&k.$data){b="keywordValidate"+s;var P=k.validateSchema;a+=" var "+S+" = RULES.custom['"+t+"'].definition; var "+b+" = "+S+".validate;"}else{if(!(C=e.useCustomRule(w,l,e.schema,e)))return;o="validate.schema"+c,b=C.code,g=k.compile,v=k.inline,y=k.macro}var E=b+".errors",M="i"+s,A="ruleErr"+s,I=k.async;if(I&&!e.async)throw new Error("async keyword in sync schema");if(v||y||(a+=E+" = null;"),a+="var "+m+" = errors;var "+p+";",f&&k.$data&&(T+="}",a+=" if ("+o+" === undefined) { "+p+" = true; } else { ",P&&(T+="}",a+=" "+p+" = "+S+".validateSchema("+o+"); if ("+p+") { ")),v)k.statements?a+=" "+C.validate+" ":a+=" "+p+" = "+C.validate+"; ";else if(y){var _=e.util.copy(e);T="";_.level++;var N="valid"+_.level;_.schema=C.validate,_.schemaPath="";var R=e.compositeRule;e.compositeRule=_.compositeRule=!0;var O=e.validate(_).replace(/validate\.schema/g,b);e.compositeRule=_.compositeRule=R,a+=" "+O}else{(x=x||[]).push(a),a="",a+="  "+b+".call( ",e.opts.passContext?a+="this":a+="self",g||!1===k.schema?a+=" , "+h+" ":a+=" , "+o+" , "+h+" , validate.schema"+e.schemaPath+" ",a+=" , (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var D=i?"data"+(i-1||""):"parentData",j=i?e.dataPathArr[i]:"parentDataProperty",F=a+=" , "+D+" , "+j+" , rootData )  ";a=x.pop(),!1===k.errors?(a+=" "+p+" = ",I&&(a+="await "),a+=F+"; "):a+=I?" var "+(E="customErrors"+s)+" = null; try { "+p+" = await "+F+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+E+" = e.errors; else throw e; } ":" "+E+" = null; "+p+" = "+F+"; "}if(k.modifying&&(a+=" if ("+D+") "+h+" = "+D+"["+j+"];"),a+=""+T,k.valid)u&&(a+=" if (true) { ");else{var x;a+=" if ( ",k.valid===undefined?(a+=" !",a+=y?""+N:""+p):a+=" "+!k.valid+" ",a+=") { ",n=w.keyword,(x=x||[]).push(a),a="",(x=x||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+w.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+w.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var B=a;a=x.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+B+"]); ":a+=" validate.errors = ["+B+"]; return false; ":a+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=a;a=x.pop(),v?k.errors?"full"!=k.errors&&(a+="  for (var "+M+"="+m+"; "+M+"<errors; "+M+"++) { var "+A+" = vErrors["+M+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(a+=" "+A+".schema = "+o+"; "+A+".data = "+h+"; "),a+=" } "):!1===k.errors?a+=" "+L+" ":(a+=" if ("+m+" == errors) { "+L+" } else {  for (var "+M+"="+m+"; "+M+"<errors; "+M+"++) { var "+A+" = vErrors["+M+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(a+=" "+A+".schema = "+o+"; "+A+".data = "+h+"; "),a+=" } } "):y?(a+="   var err =   ",!1!==e.createErrors?(a+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+w.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+w.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; ")):!1===k.errors?a+=" "+L+" ":(a+=" if (Array.isArray("+E+")) { if (vErrors === null) vErrors = "+E+"; else vErrors = vErrors.concat("+E+"); errors = vErrors.length;  for (var "+M+"="+m+"; "+M+"<errors; "+M+"++) { var "+A+" = vErrors["+M+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+";  "+A+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(a+=" "+A+".schema = "+o+"; "+A+".data = "+h+"; "),a+=" } } else { "+L+" } "),a+=" } ",u&&(a+=" else { ")}return a}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/custom.js"}],[382,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const o=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,o.forEach(e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)}),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[3820,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="errs__"+o,h=e.util.copy(e),p="";h.level++;var m="valid"+h.level,f={},g={},v=e.opts.ownProperties;for(w in s)if("__proto__"!=w){var y=s[w],C=Array.isArray(y)?g:f;C[w]=y}n+="var "+u+" = errors;";var b=e.errorPath;for(var w in n+="var missing"+o+";",g)if((C=g[w]).length){if(n+=" if ( "+d+e.util.getProperty(w)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(w)+"') "),c){n+=" && ( ";var S=C;if(S)for(var k=-1,T=S.length-1;k<T;){_=S[k+=1],k&&(n+=" || "),n+=" ( ( "+(D=d+(O=e.util.getProperty(_)))+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(_)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?_:O)+") ) "}n+=")) {  ";var P="missing"+o,E="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,P,!0):b+" + "+P);var M=M||[];M.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+E+"', depsCount: "+C.length+", deps: '"+e.util.escapeQuotes(1==C.length?C[0]:C.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==C.length?n+="property "+e.util.escapeQuotes(C[0]):n+="properties "+e.util.escapeQuotes(C.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var A=n;n=M.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var I=C;if(I)for(var _,N=-1,R=I.length-1;N<R;){_=I[N+=1];var O=e.util.getProperty(_),D=(E=e.util.escapeQuotes(_),d+O);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,_,e.opts.jsonPointers)),n+=" if ( "+D+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(_)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+E+"', depsCount: "+C.length+", deps: '"+e.util.escapeQuotes(1==C.length?C[0]:C.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==C.length?n+="property "+e.util.escapeQuotes(C[0]):n+="properties "+e.util.escapeQuotes(C.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(p+="}",n+=" else { ")}e.errorPath=b;var j=h.baseId;for(var w in f){y=f[w];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))&&(n+=" "+m+" = true; if ( "+d+e.util.getProperty(w)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(w)+"') "),n+=") { ",h.schema=y,h.schemaPath=i+e.util.getProperty(w),h.errSchemaPath=l+"/"+e.util.escapeFragment(w),n+="  "+e.validate(h)+" ",h.baseId=j,n+=" }  ",c&&(n+=" if ("+m+") { ",p+="}"))}return c&&(n+="   "+p+" if ("+u+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/dependencies.js"}],[3821,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ");var p="i"+o,m="schema"+o;h||(n+=" var "+m+" = validate.schema"+i+";"),n+="var "+u+";",h&&(n+=" if (schema"+o+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+o+")) "+u+" = false; else {"),n+=u+" = false;for (var "+p+"=0; "+p+"<"+m+".length; "+p+"++) if (equal("+d+", "+m+"["+p+"])) { "+u+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+u+") {   ";var f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var g=n;return n=f.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/enum.js"}],[3822,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var u,h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",u="schema"+o):u=s;var p=e.opts.unknownFormats,m=Array.isArray(p);if(h){n+=" var "+(f="format"+o)+" = formats["+u+"]; var "+(g="isObject"+o)+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; var "+(v="formatType"+o)+" = "+g+" && "+f+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+o+" = "+f+".async; "),n+=" "+f+" = "+f+".validate; } if (  ",h&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+u+" && !"+f+" ",m&&(n+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),n+=") || "),n+=" ("+f+" && "+v+" == '"+r+"' && !(typeof "+f+" == 'function' ? ",e.async?n+=" (async"+o+" ? await "+f+"("+d+") : "+f+"("+d+")) ":n+=" "+f+"("+d+") ",n+=" : "+f+".test("+d+"))))) {"}else{var f;if(!(f=e.formats[s])){if("ignore"==p)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(m&&p.indexOf(s)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,v=(g="object"==typeof f&&!(f instanceof RegExp)&&f.validate)&&f.type||"string";if(g){var y=!0===f.async;f=f.validate}if(v!=r)return c&&(n+=" if (true) { "),n;if(y){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(C="formats"+e.util.getProperty(s)+".validate")+"("+d+"))) { "}else{n+=" if (! ";var C="formats"+e.util.getProperty(s);g&&(C+=".validate"),n+="function"==typeof f?" "+C+"("+d+") ":" "+C+".test("+d+") ",n+=") { "}}var b=b||[];b.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",n+=h?""+u:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+u+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+i:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var w=n;return n=b.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+w+"]); ":n+=" validate.errors = ["+w+"]; return false; ":n+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/format.js"}],[3823,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h="errs__"+o,p=e.util.copy(e);p.level++;var m="valid"+p.level,f=e.schema.then,g=e.schema.else,v=f!==undefined&&(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all)),y=g!==undefined&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),C=p.baseId;if(v||y){var b;p.createErrors=!1,p.schema=s,p.schemaPath=i,p.errSchemaPath=l,n+=" var "+h+" = errors; var "+u+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,n+="  "+e.validate(p)+" ",p.baseId=C,p.createErrors=!0,n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,v?(n+=" if ("+m+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(p)+" ",p.baseId=C,n+=" "+u+" = "+m+"; ",v&&y?n+=" var "+(b="ifClause"+o)+" = 'then'; ":b="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+m+") { ",y&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(p)+" ",p.baseId=C,n+=" "+u+" = "+m+"; ",v&&y?n+=" var "+(b="ifClause"+o)+" = 'else'; ":b="'else'",n+=" } "),n+=" if (!"+u+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { ")}else c&&(n+=" if (true) { ");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/if.js"}],[3824,{"./_limit":3810,"./_limitItems":3811,"./_limitLength":3812,"./_limitProperties":3813,"./allOf":3814,"./anyOf":3815,"./comment":3816,"./const":3817,"./contains":3818,"./dependencies":3820,"./enum":3821,"./format":3822,"./if":3823,"./items":3825,"./multipleOf":3826,"./not":3827,"./oneOf":3828,"./pattern":3829,"./properties":3830,"./propertyNames":3831,"./ref":3832,"./required":3833,"./uniqueItems":3834,"./validate":3835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={$ref:e("./ref"),allOf:e("./allOf"),anyOf:e("./anyOf"),$comment:e("./comment"),const:e("./const"),contains:e("./contains"),dependencies:e("./dependencies"),enum:e("./enum"),format:e("./format"),if:e("./if"),items:e("./items"),maximum:e("./_limit"),minimum:e("./_limit"),maxItems:e("./_limitItems"),minItems:e("./_limitItems"),maxLength:e("./_limitLength"),minLength:e("./_limitLength"),maxProperties:e("./_limitProperties"),minProperties:e("./_limitProperties"),multipleOf:e("./multipleOf"),not:e("./not"),oneOf:e("./oneOf"),pattern:e("./pattern"),properties:e("./properties"),propertyNames:e("./propertyNames"),required:e("./required"),uniqueItems:e("./uniqueItems"),validate:e("./validate")}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/index.js"}],[3825,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h="errs__"+o,p=e.util.copy(e),m="";p.level++;var f="valid"+p.level,g="i"+o,v=p.dataLevel=e.dataLevel+1,y="data"+v,C=e.baseId;if(n+="var "+h+" = errors;var "+u+";",Array.isArray(s)){var b=e.schema.additionalItems;if(!1===b){n+=" "+u+" = "+d+".length <= "+s.length+"; ";var w=l;l=e.errSchemaPath+"/additionalItems",n+="  if (!"+u+") {   ";var S=S||[];S.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var k=n;n=S.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l=w,c&&(m+="}",n+=" else { ")}var T=s;if(T)for(var P,E=-1,M=T.length-1;E<M;)if(P=T[E+=1],e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0||!1===P:e.util.schemaHasRules(P,e.RULES.all)){n+=" "+f+" = true; if ("+d+".length > "+E+") { ";var A=d+"["+E+"]";p.schema=P,p.schemaPath=i+"["+E+"]",p.errSchemaPath=l+"/"+E,p.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0),p.dataPathArr[v]=E;var I=e.validate(p);p.baseId=C,e.util.varOccurences(I,y)<2?n+=" "+e.util.varReplace(I,y,A)+" ":n+=" var "+y+" = "+A+"; "+I+" ",n+=" }  ",c&&(n+=" if ("+f+") { ",m+="}")}if("object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))){p.schema=b,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+f+" = true; if ("+d+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+d+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=d+"["+g+"]";p.dataPathArr[v]=g;I=e.validate(p);p.baseId=C,e.util.varOccurences(I,y)<2?n+=" "+e.util.varReplace(I,y,A)+" ":n+=" var "+y+" = "+A+"; "+I+" ",c&&(n+=" if (!"+f+") break; "),n+=" } }  ",c&&(n+=" if ("+f+") { ",m+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){p.schema=s,p.schemaPath=i,p.errSchemaPath=l,n+="  for (var "+g+" = 0; "+g+" < "+d+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=d+"["+g+"]";p.dataPathArr[v]=g;I=e.validate(p);p.baseId=C,e.util.varOccurences(I,y)<2?n+=" "+e.util.varReplace(I,y,A)+" ":n+=" var "+y+" = "+A+"; "+I+" ",c&&(n+=" if (!"+f+") break; "),n+=" }"}return c&&(n+=" "+m+" if ("+h+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/items.js"}],[3826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h=e.opts.$data&&i&&i.$data;if(h?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i,!h&&"number"!=typeof i)throw new Error(t+" must be number");o+="var division"+a+";if (",h&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+a+" = "+u+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+a+" !== parseInt(division"+a+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+l:""+i,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;return o=p.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/multipleOf.js"}],[3827,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="errs__"+o,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=i,h.errSchemaPath=l,n+=" var "+u+" = errors;  ";var m,f=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(m=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,m&&(h.opts.allErrors=m),e.compositeRule=h.compositeRule=f,n+=" if ("+p+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/not.js"}],[3828,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h="errs__"+o,p=e.util.copy(e),m="";p.level++;var f="valid"+p.level,g=p.baseId,v="prevValid"+o,y="passingSchemas"+o;n+="var "+h+" = errors , "+v+" = false , "+u+" = false , "+y+" = null; ";var C=e.compositeRule;e.compositeRule=p.compositeRule=!0;var b=s;if(b)for(var w,S=-1,k=b.length-1;S<k;)w=b[S+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=i+"["+S+"]",p.errSchemaPath=l+"/"+S,n+="  "+e.validate(p)+" ",p.baseId=g):n+=" var "+f+" = true; ",S&&(n+=" if ("+f+" && "+v+") { "+u+" = false; "+y+" = ["+y+", "+S+"]; } else { ",m+="}"),n+=" if ("+f+") { "+u+" = "+v+" = true; "+y+" = "+S+"; }";return e.compositeRule=p.compositeRule=C,n+=m+"if (!"+u+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/oneOf.js"}],[3829,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h=e.opts.$data&&i&&i.$data;h?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i,o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(i))+".test("+u+") ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",o+=h?""+n:""+e.util.toQuotedString(i),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=h?"' + "+n+" + '":""+e.util.escapeQuotes(i),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+l:""+e.util.toQuotedString(i),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;return o=p.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/pattern.js"}],[383,{"../../../shared/constants/network":5800,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:a}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},s=null===(r=o.BUILT_IN_NETWORKS[a])||void 0===r?void 0:r.chainId;s&&n!==s&&(e.NetworkController.provider.chainId=s);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[3830,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="errs__"+o,h=e.util.copy(e),p="";h.level++;var m="valid"+h.level,f="key"+o,g="idx"+o,v=h.dataLevel=e.dataLevel+1,y="data"+v,C="dataProperties"+o,b=Object.keys(s||{}).filter(O),w=e.schema.patternProperties||{},S=Object.keys(w).filter(O),k=e.schema.additionalProperties,T=b.length||S.length,P=!1===k,E="object"==typeof k&&Object.keys(k).length,M=e.opts.removeAdditional,A=P||E||M,I=e.opts.ownProperties,_=e.baseId,N=e.schema.required;if(N&&(!e.opts.$data||!N.$data)&&N.length<e.opts.loopRequired)var R=e.util.toHash(N);function O(e){return"__proto__"!==e}if(n+="var "+u+" = errors;var "+m+" = true;",I&&(n+=" var "+C+" = undefined;"),A){if(n+=I?" "+C+" = "+C+" || Object.keys("+d+"); for (var "+g+"=0; "+g+"<"+C+".length; "+g+"++) { var "+f+" = "+C+"["+g+"]; ":" for (var "+f+" in "+d+") { ",T){if(n+=" var isAdditional"+o+" = !(false ",b.length)if(b.length>8)n+=" || validate.schema"+i+".hasOwnProperty("+f+") ";else{var D=b;if(D)for(var j=-1,F=D.length-1;j<F;)Q=D[j+=1],n+=" || "+f+" == "+e.util.toQuotedString(Q)+" "}if(S.length){var x=S;if(x)for(var B=-1,L=x.length-1;B<L;)ae=x[B+=1],n+=" || "+e.usePattern(ae)+".test("+f+") "}n+=" ); if (isAdditional"+o+") { "}if("all"==M)n+=" delete "+d+"["+f+"]; ";else{var $=e.errorPath,U="' + "+f+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers)),P)if(M)n+=" delete "+d+"["+f+"]; ";else{n+=" "+m+" = false; ";var K=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var H=n;n=re.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+H+"]); ":n+=" validate.errors = ["+H+"]; return false; ":n+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=K,c&&(n+=" break; ")}else if(E)if("failing"==M){n+=" var "+u+" = errors;  ";var q=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);var V=d+"["+f+"]";h.dataPathArr[v]=f;var G=e.validate(h);h.baseId=_,e.util.varOccurences(G,y)<2?n+=" "+e.util.varReplace(G,y,V)+" ":n+=" var "+y+" = "+V+"; "+G+" ",n+=" if (!"+m+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+f+"]; }  ",e.compositeRule=h.compositeRule=q}else{h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);V=d+"["+f+"]";h.dataPathArr[v]=f;G=e.validate(h);h.baseId=_,e.util.varOccurences(G,y)<2?n+=" "+e.util.varReplace(G,y,V)+" ":n+=" var "+y+" = "+V+"; "+G+" ",c&&(n+=" if (!"+m+") break; ")}e.errorPath=$}T&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+m+") { ",p+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(b.length){var z=b;if(z)for(var Q,Y=-1,J=z.length-1;Y<J;){var X=s[Q=z[Y+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){var Z=e.util.getProperty(Q),ee=(V=d+Z,W&&X.default!==undefined);h.schema=X,h.schemaPath=i+Z,h.errSchemaPath=l+"/"+e.util.escapeFragment(Q),h.errorPath=e.util.getPath(e.errorPath,Q,e.opts.jsonPointers),h.dataPathArr[v]=e.util.toQuotedString(Q);G=e.validate(h);if(h.baseId=_,e.util.varOccurences(G,y)<2){G=e.util.varReplace(G,y,V);var te=V}else{te=y;n+=" var "+y+" = "+V+"; "}if(ee)n+=" "+G+" ";else{if(R&&R[Q]){n+=" if ( "+te+" === undefined ",I&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(Q)+"') "),n+=") { "+m+" = false; ";$=e.errorPath,K=l;var re,ne=e.util.escapeQuotes(Q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath($,Q,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";H=n;n=re.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+H+"]); ":n+=" validate.errors = ["+H+"]; return false; ":n+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=K,e.errorPath=$,n+=" } else { "}else c?(n+=" if ( "+te+" === undefined ",I&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(Q)+"') "),n+=") { "+m+" = true; } else { "):(n+=" if ("+te+" !== undefined ",I&&(n+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(Q)+"') "),n+=" ) { ");n+=" "+G+" } "}}c&&(n+=" if ("+m+") { ",p+="}")}}if(S.length){var oe=S;if(oe)for(var ae,se=-1,ie=oe.length-1;se<ie;){X=w[ae=oe[se+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){h.schema=X,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),n+=I?" "+C+" = "+C+" || Object.keys("+d+"); for (var "+g+"=0; "+g+"<"+C+".length; "+g+"++) { var "+f+" = "+C+"["+g+"]; ":" for (var "+f+" in "+d+") { ",n+=" if ("+e.usePattern(ae)+".test("+f+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);V=d+"["+f+"]";h.dataPathArr[v]=f;G=e.validate(h);h.baseId=_,e.util.varOccurences(G,y)<2?n+=" "+e.util.varReplace(G,y,V)+" ":n+=" var "+y+" = "+V+"; "+G+" ",c&&(n+=" if (!"+m+") break; "),n+=" } ",c&&(n+=" else "+m+" = true; "),n+=" }  ",c&&(n+=" if ("+m+") { ",p+="}")}}}return c&&(n+=" "+p+" if ("+u+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/properties.js"}],[3831,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="errs__"+o,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(n+="var "+u+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=i,h.errSchemaPath=l;var m="key"+o,f="idx"+o,g="i"+o,v="' + "+m+" + '",y="data"+(h.dataLevel=e.dataLevel+1),C="dataProperties"+o,b=e.opts.ownProperties,w=e.baseId;b&&(n+=" var "+C+" = undefined; "),n+=b?" "+C+" = "+C+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+C+".length; "+f+"++) { var "+m+" = "+C+"["+f+"]; ":" for (var "+m+" in "+d+") { ",n+=" var startErrs"+o+" = errors; ";var S=m,k=e.compositeRule;e.compositeRule=h.compositeRule=!0;var T=e.validate(h);h.baseId=w,e.util.varOccurences(T,y)<2?n+=" "+e.util.varReplace(T,y,S)+" ":n+=" var "+y+" = "+S+"; "+T+" ",e.compositeRule=h.compositeRule=k,n+=" if (!"+p+") { for (var "+g+"=startErrs"+o+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+m+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+v+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+v+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+u+" == errors) {"),n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/propertyNames.js"}],[3832,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o,a=" ",s=e.level,i=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h="valid"+s;if("#"==l||"#/"==l)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(p===undefined){var m=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(m),(y=y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(a+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(a+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;a=y.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(a+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,m);e.logger.warn(m),d&&(a+=" if (true) { ")}}else if(p.inline){var g=e.util.copy(e);g.level++;var v="valid"+g.level;g.schema=p.schema,g.schemaPath="",g.errSchemaPath=l,a+=" "+e.validate(g).replace(/validate\.schema/g,p.code)+" ",d&&(a+=" if ("+v+") { ")}else n=!0===p.$async||e.async&&!1!==p.$async,o=p.code}if(o){var y;(y=y||[]).push(a),a="",e.opts.passContext?a+=" "+o+".call(this, ":a+=" "+o+"( ",a+=" "+u+", (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var C=a+=" , "+(i?"data"+(i-1||""):"parentData")+" , "+(i?e.dataPathArr[i]:"parentDataProperty")+", rootData)  ";if(a=y.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(a+=" var "+h+"; "),a+=" try { await "+C+"; ",d&&(a+=" "+h+" = true; "),a+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(a+=" "+h+" = false; "),a+=" } ",d&&(a+=" if ("+h+") { ")}else a+=" if (!"+C+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",d&&(a+=" else { ")}return a}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/ref.js"}],[3833,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],i=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(a||""),u="valid"+o,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ");var p="schema"+o;if(!h)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],f=s;if(f)for(var g,v=-1,y=f.length-1;v<y;){g=f[v+=1];var C=e.schema.properties[g];C&&(e.opts.strictKeywords?"object"==typeof C&&Object.keys(C).length>0||!1===C:e.util.schemaHasRules(C,e.RULES.all))||(m[m.length]=g)}}else m=s;if(h||m.length){var b=e.errorPath,w=h||m.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(c)if(n+=" var missing"+o+"; ",w){h||(n+=" var "+p+" = validate.schema"+i+"; ");var k="' + "+(I="schema"+o+"["+(E="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,I,e.opts.jsonPointers)),n+=" var "+u+" = true; ",h&&(n+=" if (schema"+o+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+o+")) "+u+" = false; else {"),n+=" for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { "+u+" = "+d+"["+p+"["+E+"]] !== undefined ",S&&(n+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+p+"["+E+"]) "),n+="; if (!"+u+") break; } ",h&&(n+="  }  "),n+="  if (!"+u+") {   ",(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var T=n;n=A.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var P=m;if(P)for(var E=-1,M=P.length-1;E<M;){N=P[E+=1],E&&(n+=" || "),n+=" ( ( "+(j=d+(D=e.util.getProperty(N)))+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(N)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?N:D)+") ) "}n+=") {  ";var A;k="' + "+(I="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,I,!0):b+" + "+I),(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";T=n;n=A.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(w){h||(n+=" var "+p+" = validate.schema"+i+"; ");var I;k="' + "+(I="schema"+o+"["+(E="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,I,e.opts.jsonPointers)),h&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { if ("+d+"["+p+"["+E+"]] === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+p+"["+E+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var _=m;if(_)for(var N,R=-1,O=_.length-1;R<O;){N=_[R+=1];var D=e.util.getProperty(N),j=(k=e.util.escapeQuotes(N),d+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,N,e.opts.jsonPointers)),n+=" if ( "+j+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(N)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else c&&(n+=" if (true) {");return n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/required.js"}],[3834,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n,o=" ",a=e.level,s=e.dataLevel,i=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(s||""),h="valid"+a,p=e.opts.$data&&i&&i.$data;if(p?(o+=" var schema"+a+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=i,(i||p)&&!1!==e.opts.uniqueItems){p&&(o+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),o+=" var i = "+u+".length , "+h+" = true , j; if (i > 1) { ";var m=e.schema.items&&e.schema.items.type,f=Array.isArray(m);if(!m||"object"==m||"array"==m||f&&(m.indexOf("object")>=0||m.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+h+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var g="checkDataType"+(f?"s":"");o+=" if ("+e.util[g](m,"item",e.opts.strictNumbers,!0)+") continue; ",f&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",p&&(o+="  }  "),o+=" if (!"+h+") {   ";var v=v||[];v.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=p?"validate.schema"+l:""+i,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var y=o;o=v.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+y+"]); ":o+=" validate.errors = ["+y+"]; return false; ":o+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",d&&(o+=" else { ")}else d&&(o+=" if (true) { ");return o}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/uniqueItems.js"}],[3835,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n="",o=!0===e.schema.$async,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var i=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(i){var l="unknown keyword: "+i;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(n+=" var validate = ",o&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!a&&!e.schema.$ref){t="false schema";var c=e.level,d=e.dataLevel,u=e.schema[t],h=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,f="data"+(d||""),g="valid"+c;if(!1===e.schema){e.isTop?m=!0:n+=" var "+g+" = false; ",(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var v=n;n=Y.pop(),!e.compositeRule&&m?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=o?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var y=e.isTop;c=e.level=0,d=e.dataLevel=0,f="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==undefined&&e.opts.useDefaults&&e.opts.strictDefaults){var C="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(C);e.logger.warn(C)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{c=e.level,f="data"+((d=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}g="valid"+c,m=!e.opts.allErrors;var b="",w="",S=e.schema.type,k=Array.isArray(S);if(S&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==S.indexOf("null")&&(S=S.concat("null")):"null"!=S&&(S=[S,"null"],k=!0)),k&&1==S.length&&(S=S[0],k=!1),e.schema.$ref&&a){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),S){if(e.opts.coerceTypes)var T=e.util.coerceToTypes(e.opts.coerceTypes,S);var P=e.RULES.types[S];if(T||k||!0===P||P&&!J(P)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var E=k?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[E](S,f,e.opts.strictNumbers,!0)+") { ",T){var M="dataType"+c,A="coerced"+c;n+=" var "+M+" = typeof "+f+"; var "+A+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+M+" == 'object' && Array.isArray("+f+") && "+f+".length == 1) { "+f+" = "+f+"[0]; "+M+" = typeof "+f+"; if ("+e.util.checkDataType(e.schema.type,f,e.opts.strictNumbers)+") "+A+" = "+f+"; } "),n+=" if ("+A+" !== undefined) ; ";var I=T;if(I)for(var _,N=-1,R=I.length-1;N<R;)"string"==(_=I[N+=1])?n+=" else if ("+M+" == 'number' || "+M+" == 'boolean') "+A+" = '' + "+f+"; else if ("+f+" === null) "+A+" = ''; ":"number"==_||"integer"==_?(n+=" else if ("+M+" == 'boolean' || "+f+" === null || ("+M+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==_&&(n+=" && !("+f+" % 1)"),n+=")) "+A+" = +"+f+"; "):"boolean"==_?n+=" else if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+A+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+A+" = true; ":"null"==_?n+=" else if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+A+" = null; ":"array"==e.opts.coerceTypes&&"array"==_&&(n+=" else if ("+M+" == 'string' || "+M+" == 'number' || "+M+" == 'boolean' || "+f+" == null) "+A+" = ["+f+"]; ");n+=" else {   ",(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";v=n;n=Y.pop(),!e.compositeRule&&m?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+A+" !== undefined) {  ";var O=d?"data"+(d-1||""):"parentData";n+=" "+f+" = "+A+"; ",d||(n+="if ("+O+" !== undefined)"),n+=" "+O+"["+(d?e.dataPathArr[d]:"parentDataProperty")+"] = "+A+"; } "}else{(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";v=n;n=Y.pop(),!e.compositeRule&&m?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!a)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(n+=" } if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",w+="}");else{var D=e.RULES;if(D)for(var j=-1,F=D.length-1;j<F;)if(J(P=D[j+=1])){if(P.type&&(n+=" if ("+e.util.checkDataType(P.type,f,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==P.type&&e.schema.properties){u=e.schema.properties;var x=Object.keys(u);if(x)for(var B,L=-1,$=x.length-1;L<$;){if((H=u[B=x[L+=1]]).default!==undefined){var U=f+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){C="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(C);e.logger.warn(C)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}}else if("array"==P.type&&Array.isArray(e.schema.items)){var K=e.schema.items;if(K){N=-1;for(var H,q=K.length-1;N<q;)if((H=K[N+=1]).default!==undefined){U=f+"["+N+"]";if(e.compositeRule){if(e.opts.strictDefaults){C="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(C);e.logger.warn(C)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}}var V=P.rules;if(V)for(var G,W=-1,z=V.length-1;W<z;)if(X(G=V[W+=1])){var Q=G.code(e,G.keyword,P.type);Q&&(n+=" "+Q+" ",m&&(b+="}"))}if(m&&(n+=" "+b+" ",b=""),P.type&&(n+=" } ",S&&S===P.type&&!T)){n+=" else { ";var Y;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";v=n;n=Y.pop(),!e.compositeRule&&m?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}m&&(n+=" if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",w+="}")}}function J(e){for(var t=e.rules,r=0;r<t.length;r++)if(X(t[r]))return!0}function X(t){return e.schema[t.keyword]!==undefined||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(e.schema[r[n]]!==undefined)return!0}(t)}return m&&(n+=" "+w+" "),y?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+c+";",n}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/dotjs/validate.js"}],[3836,{"./definition_schema":3809,"./dotjs/custom":3819},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=/^[a-z_$][a-z0-9_$-]*$/i,o=e("./dotjs/custom"),a=e("./definition_schema");t.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var s=0;s<a.length;s++)l(e,a[s],t);else l(e,a,t);var i=t.metaSchema;i&&(t.$data&&this._opts.$data&&(i={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(i,!0))}function l(e,t,n){for(var a,s=0;s<r.length;s++){var i=r[s];if(i.type==t){a=i;break}}a||(a={type:t,rules:[]},r.push(a));var l={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};a.rules.push(l),r.custom[e]=l}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(a,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/keyword.js"}],[3837,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/refs/data.json"}],[3838,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}}},{package:"eslint>ajv",file:"node_modules/ajv/lib/refs/json-schema-draft-07.json"}],[3839,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),o(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function o(e,t,r,s,i,l,c,d,u,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var p in t(s,i,l,c,d,u,h),s){var m=s[p];if(Array.isArray(m)){if(p in n.arrayKeywords)for(var f=0;f<m.length;f++)o(e,t,r,m[f],i+"/"+p+"/"+f,l,i,p,s,f)}else if(p in n.propsKeywords){if(m&&"object"==typeof m)for(var g in m)o(e,t,r,m[g],i+"/"+p+"/"+a(g),l,i,p,s,g)}else(p in n.keywords||e.allKeys&&!(p in n.skipKeywords))&&o(e,t,r,m,i+"/"+p,l,i,p,s)}r(s,i,l,c,d,u,h)}}function a(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}}}},{package:"eslint>ajv>json-schema-traverse",file:"node_modules/ajv/node_modules/json-schema-traverse/index.js"}],[384,{"../../../shared/constants/network":5800,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,a={},s={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){a[e]={},t[e][o.NETWORK_TYPES.RPC]&&n.forEach(r=>{a[e][r.chainId]=t[e][o.NETWORK_TYPES.RPC]});for(const r of Object.keys(t[e]))switch(r){case o.NETWORK_TYPES.MAINNET:a[e][o.CHAIN_IDS.MAINNET]=t[e][o.NETWORK_TYPES.MAINNET];break;case"ropsten":a[e]["0x3"]=t[e].ropsten;break;case"rinkeby":a[e]["0x4"]=t[e].rinkeby;break;case o.NETWORK_TYPES.GOERLI:a[e][o.CHAIN_IDS.GOERLI]=t[e][o.NETWORK_TYPES.GOERLI];break;case"kovan":a[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=a}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){s[e]={},r[e][o.NETWORK_TYPES.RPC]&&n.forEach(t=>{s[e][t.chainId]=r[e][o.NETWORK_TYPES.RPC]});for(const t of Object.keys(r[e]))switch(t){case o.NETWORK_TYPES.MAINNET:s[e][o.CHAIN_IDS.MAINNET]=r[e][o.NETWORK_TYPES.MAINNET];break;case"ropsten":s[e]["0x3"]=r[e].ropsten;break;case"rinkeby":s[e]["0x4"]=r[e].rinkeby;break;case o.NETWORK_TYPES.GOERLI:s[e][o.CHAIN_IDS.GOERLI]=r[e][o.NETWORK_TYPES.GOERLI];break;case"kovan":s[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=s}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[385,{"@metamask/transaction-controller":2862,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,a=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach(e=>{e&&(e.type!==o.TransactionType.retry&&e.type!==o.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)});if(a){Object.entries(a).forEach(([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:o.TransactionType.incoming})})}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[386,{lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function o(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter(({decimals:e})=>o(e));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:a}=t.PreferencesController;if(a&&"object"==typeof a)for(const e of Object.keys(a)){const t=a[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter(({decimals:e})=>o(e));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=a,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[387,{"../../../shared/constants/network":5800,lodash:4816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),o=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,(e,t)=>{var r;return(null===(r=o.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??a}),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[a],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const a="UNKNOWN";o.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},o.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},o.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}]],[],{});