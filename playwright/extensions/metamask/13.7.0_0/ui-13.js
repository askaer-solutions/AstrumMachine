LavaPack.loadBundle([[7711,{"../../../components/component-library":6469,"../../../components/multichain-accounts/add-wallet-modal":6544,"../../../components/multichain-accounts/multichain-account-list":6554,"../../../components/multichain/pages/page":6806,"../../../helpers/constants/design-system":7023,"../../../hooks/accounts/useAccountsOperationsLoadingStates":7086,"../../../hooks/social-sync/useSyncSRPs":7131,"../../../hooks/useAssetsUpdateAllAccountBalances":7139,"../../../hooks/useI18nContext":7157,"../../../selectors/multichain-accounts/account-tree":7951,"./utils":7713,"@metamask/design-system-react":1707,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountList=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("react-redux"),r=e("@metamask/design-system-react"),s=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),l=e("../../../components/multichain-accounts/multichain-account-list"),u=e("../../../selectors/multichain-accounts/account-tree"),d=e("../../../components/multichain-accounts/add-wallet-modal"),p=e("../../../hooks/accounts/useAccountsOperationsLoadingStates"),m=e("../../../components/component-library"),f=e("../../../components/multichain/pages/page"),g=e("../../../hooks/useAssetsUpdateAllAccountBalances"),h=e("../../../hooks/social-sync/useSyncSRPs"),y=e("./utils");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}n.AccountList=()=>{const e=(0,c.useI18nContext)(),t=(0,o.useHistory)(),n=(0,i.useSelector)(u.getAccountTree),{wallets:b}=n,{selectedAccountGroup:E}=n,[k,C]=(0,a.useState)(""),v=(0,i.useSelector)(u.getNormalizedGroupsMetadata),{isAccountTreeSyncingInProgress:x,loadingMessage:_}=(0,p.useAccountsOperationsLoadingStates)(),T=(0,a.useMemo)(()=>x?_:e("addWallet"),[x,_,e]);(0,g.useAssetsUpdateAllAccountBalances)(),(0,h.useSyncSRPs)();const S=(0,a.useMemo)(()=>Object.keys(b).length>1,[b]),I=(0,a.useCallback)(e=>C(e.target.value),[]),w=(0,a.useMemo)(()=>(0,y.filterWalletsByGroupNameOrAddress)(b,k,v),[b,k,v]),N=(0,a.useMemo)(()=>Object.keys(w).length>0,[w]),[O,A]=(0,a.useState)(!1),M=(0,a.useCallback)(()=>{A(!0)},[A]),B=(0,a.useCallback)(()=>{A(!1)},[A]);return a.default.createElement(f.Page,{className:"account-list-page"},a.default.createElement(f.Header,{textProps:{variant:s.TextVariant.headingSm},startAccessory:a.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:e("back"),iconName:r.IconName.ArrowLeft,onClick:()=>t.goBack()})},e("accounts")),a.default.createElement(f.Content,{className:"account-list-page__content"},a.default.createElement(m.Box,{flexDirection:s.FlexDirection.Column,paddingTop:1,paddingLeft:4,paddingRight:4,paddingBottom:2},a.default.createElement(m.TextFieldSearch,{size:m.TextFieldSearchSize.Lg,placeholder:e("searchYourAccounts"),value:k,onChange:I,clearButtonOnClick:()=>C(""),width:s.BlockSize.Full,borderWidth:0,backgroundColor:s.BackgroundColor.backgroundMuted,borderRadius:s.BorderRadius.LG,"data-testid":"multichain-account-list-search"})),a.default.createElement(m.Box,{display:s.Display.Flex,height:s.BlockSize.Full,flexDirection:s.FlexDirection.Column,className:"multichain-account-menu-popover__list"},N?a.default.createElement(l.MultichainAccountList,{wallets:w,selectedAccountGroups:[E],isInSearchMode:Boolean(k),displayWalletHeader:S}):a.default.createElement(m.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,width:s.BlockSize.Full,height:s.BlockSize.Full},a.default.createElement(m.Text,{color:s.TextColor.textAlternative,variant:s.TextVariant.bodyMdMedium},e("noAccountsFound"))))),a.default.createElement(f.Footer,{className:"shadow-sm"},a.default.createElement(r.Button,{variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,onClick:M,isDisabled:x,isFullWidth:!0,"data-testid":"account-list-add-wallet-button"},a.default.createElement(m.Box,{gap:2,display:s.Display.Flex,alignItems:s.AlignItems.center},x&&a.default.createElement(r.Icon,{className:"add-multichain-account__icon-box__icon-loading",name:r.IconName.Loading,color:r.IconColor.IconMuted,size:r.IconSize.Lg}),a.default.createElement(m.Text,{variant:s.TextVariant.bodyMdMedium},T)))),a.default.createElement(d.AddWalletModal,{isOpen:O,onClose:B}))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-list/account-list.tsx"}],[7712,{"./account-list":7711},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AccountList",{enumerable:!0,get:function(){return a.AccountList}});var a=e("./account-list")}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-list/index.ts"}],[7713,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterWalletsByGroupNameOrAddress=function(e,t,n){const a=t.trim().toLowerCase();if(!a)return e;return Object.entries(e).reduce((e,[t,o])=>{let i=!1;const r=Object.entries(o.groups||{}).reduce((e,[t,o])=>{const r=n[t],s=null==r?void 0:r.name.includes(a),c=null==r?void 0:r.accounts.some(e=>e.includes(a));return(s||c)&&(e[t]=o,i=!0),e},{});return i&&(e[t]={...o,groups:r}),e},{})}}}},{package:"$root$",file:"ui/pages/multichain-accounts/account-list/utils.ts"}],[7714,{"../../../components/multichain/import-account/import-account":6693,"../../../components/multichain/pages/page":6806,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"@metamask/design-system-react":1707,react:5258,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddWalletPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("@metamask/design-system-react"),r=e("../../../components/multichain/pages/page"),s=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),l=e("../../../components/multichain/import-account/import-account");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}n.AddWalletPage=()=>{const e=(0,c.useI18nContext)(),t=(0,o.useHistory)(),n=(0,a.useCallback)(async e=>{e&&t.goBack()},[t]);return a.default.createElement(r.Page,{className:"max-w-[600px]"},a.default.createElement(r.Header,{textProps:{variant:s.TextVariant.headingSm},startAccessory:a.default.createElement(i.ButtonIcon,{size:i.ButtonIconSize.Md,ariaLabel:e("back"),iconName:i.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"add-wallet-page-back-button"})},e("addWallet")),a.default.createElement(r.Content,null,a.default.createElement(i.Text,{variant:i.TextVariant.HeadingSm},e("privateKey")),a.default.createElement(l.ImportAccount,{onActionComplete:n})))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/add-wallet-page/add-wallet-page.tsx"}],[7715,{"./add-wallet-page":7714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AddWalletPage",{enumerable:!0,get:function(){return a.AddWalletPage}});var a=e("./add-wallet-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/add-wallet-page/index.ts"}],[7716,{"../../../../shared/constants/metametrics":5796,"../../../components/component-library":6469,"../../../components/multichain/menu-items/view-explorer-menu-item":6705,"../../../components/multichain/pages/page":6806,"../../../components/ui/qr-code-view":6939,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/utils/multichain/blockExplorer":7064,"../../../hooks/useI18nContext":7157,"../../../hooks/useMultichainSelector":7167,"../../../selectors":7947,"../../../selectors/multichain":7956,"../account-details":7706,"@metamask/utils":2908,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressQRCode=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("@metamask/utils"),r=e("react-redux"),s=e("react-router-dom"),c=e("../../../components/multichain/pages/page"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system"),p=(a=e("../../../components/ui/qr-code-view"))&&a.__esModule?a:{default:a},m=e("../../../selectors"),f=e("../../../selectors/multichain"),g=e("../../../hooks/useMultichainSelector"),h=e("../../../helpers/utils/multichain/blockExplorer"),y=e("../../../components/multichain/menu-items/view-explorer-menu-item"),b=e("../../../contexts/metametrics"),E=e("../../../../shared/constants/metametrics"),k=e("../account-details");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}n.AddressQRCode=()=>{const e=(0,l.useI18nContext)(),t=(0,s.useHistory)(),{address:n}=(0,s.useParams)(),a=(0,o.useContext)(b.MetaMetricsContext),C=(0,r.useSelector)(e=>(0,m.getInternalAccountByAddress)(e,n)),v=(0,g.useMultichainSelector)(f.getMultichainNetwork,C),x=(0,h.getMultichainAccountUrl)(C.address,v),_=(0,i.parseCaipChainId)(v.chainId).reference,T="Account Details QR Code Page",S=(0,o.useCallback)(()=>{a({event:E.MetaMetricsEventName.BlockExplorerLinkClicked,category:E.MetaMetricsEventCategory.Accounts,properties:{location:T,chain_id:_}}),(0,y.openBlockExplorer)(x,T,a)},[_,a,x]);return o.default.createElement(c.Page,{className:"address-qr-code-page"},o.default.createElement(c.Header,{backgroundColor:d.BackgroundColor.backgroundDefault,startAccessory:o.default.createElement(u.ButtonIcon,{ariaLabel:"Back",iconName:u.IconName.ArrowLeft,size:u.ButtonIconSize.Sm,onClick:()=>t.goBack()})},e("address")),o.default.createElement(c.Content,{paddingTop:0},o.default.createElement(p.default,{Qr:{data:n},location:"Account Details Page",accountName:C.metadata.name})),o.default.createElement(c.Footer,null,o.default.createElement(u.ButtonSecondary,{onClick:S,size:u.ButtonSecondarySize.Lg,"data-testid":x,textProps:{variant:d.TextVariant.bodyMdMedium},style:{width:"100%"}},(()=>{switch((0,k.getAccountTypeCategory)(C)){case"evm":return e("viewAddressOnExplorer",["Etherscan"]);case"solana":return e("viewAddressOnExplorer",["Solscan"]);default:return e("viewOnExplorer")}})())))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/address-qr-code/address-qr-code.tsx"}],[7717,{"./address-qr-code":7716},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./address-qr-code");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/multichain-accounts/address-qr-code/index.ts"}],[7718,{"../../../../shared/constants/keyring":5792,"../../../../shared/constants/metametrics":5796,"../../../../shared/modules/hexstring-utils":5906,"../../../../shared/modules/selectors/networks":5918,"../../../components/app/preferred-avatar":6195,"../../../components/component-library":6469,"../../../components/component-library/icon":6468,"../../../components/multichain-accounts/account-details-row":6536,"../../../components/multichain-accounts/account-remove-modal":6538,"../../../components/multichain-accounts/edit-account-name-modal":6547,"../../../components/multichain/pages/page":6806,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../helpers/utils/metrics":7062,"../../../helpers/utils/util":7082,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../selectors/multichain-accounts/account-tree":7951,"../../../store/actions":7975,"@metamask/bridge-controller":1275,"@metamask/design-system-react":1707,"@metamask/keyring-api":2060,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseAccountDetails=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom"),r=e("@metamask/keyring-api"),s=e("@metamask/bridge-controller"),c=e("@metamask/design-system-react"),l=e("../../../selectors"),u=e("../../../components/component-library"),d=e("../../../components/multichain/pages/page"),p=e("../../../helpers/constants/design-system"),m=e("../../../helpers/constants/routes"),f=e("../../../components/component-library/icon"),g=e("../../../../shared/modules/hexstring-utils"),h=e("../../../helpers/utils/util"),y=e("../../../hooks/useI18nContext"),b=e("../../../components/multichain-accounts/account-details-row"),E=e("../../../components/multichain-accounts/edit-account-name-modal"),k=e("../../../store/actions"),C=e("../../../selectors/multichain-accounts/account-tree"),v=e("../../../../shared/constants/keyring"),x=e("../../../components/multichain-accounts/account-remove-modal"),_=e("../../../../shared/constants/metametrics"),T=e("../../../contexts/metametrics"),S=e("../../../../shared/modules/selectors/networks"),I=e("../../../helpers/utils/metrics"),w=e("../../../components/app/preferred-avatar");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}n.BaseAccountDetails=({children:e,account:t,address:n})=>{var N;const O=(0,i.useHistory)(),A=(0,o.useDispatch)(),M=(0,y.useI18nContext)(),B=(0,a.useContext)(T.MetaMetricsContext),R=(0,o.useSelector)(S.getCurrentChainId),P=(0,o.useSelector)(l.getHDEntropyIndex),D=(0,o.useSelector)(l.getHardwareWalletType),F=(0,o.useSelector)(l.getIsSocialLoginFlow),{metadata:{name:L},type:j}=t,W=(0,r.isEvmAccountType)(j)?null===(N=(0,g.toChecksumHexAddress)(n))||void 0===N?void 0:N.toLowerCase():n,$=(0,h.shortenAddress)(W),[U,z]=(0,a.useState)(!1),{keyring:G}=t.metadata,V=(0,I.formatAccountType)((0,l.getAccountTypeForKeyring)(G)),q=(0,a.useCallback)(()=>{A((0,k.setAccountDetailsAddress)("")),O.goBack()},[O,A]),{id:J,name:K}=(0,o.useSelector)(e=>(0,C.getWalletIdAndNameByAccountAddress)(e,n)),H=`/wallet-details/${encodeURIComponent(J)}`,Y=t.metadata.keyring.type!==v.KeyringType.hdKeyTree&&!(0,l.isSolanaAccount)(t)&&!F,[X,Q]=(0,a.useState)(!1),Z=(0,a.useCallback)(()=>{A((0,k.removeAccount)(t.address)),B({event:_.MetaMetricsEventName.AccountRemoved,category:_.MetaMetricsEventCategory.Accounts,properties:{account_hardware_type:D,chain_id:R,account_type:V,hd_entropy_index:P,caip_chain_id:(0,s.formatChainIdToCaip)(R)}}),A((0,k.setAccountDetailsAddress)("")),O.push(m.DEFAULT_ROUTE)},[A,t.address,B,D,R,V,P,O]);return a.default.createElement(d.Page,{backgroundColor:p.BackgroundColor.backgroundDefault,className:"multichain-account-details-page"},a.default.createElement(d.Header,{backgroundColor:p.BackgroundColor.backgroundDefault,startAccessory:a.default.createElement(u.ButtonIcon,{ariaLabel:"Back",iconName:f.IconName.ArrowLeft,size:u.ButtonIconSize.Sm,onClick:q})},L),a.default.createElement(d.Content,{paddingTop:3,gap:4},a.default.createElement(u.Box,{className:"flex justify-center"},a.default.createElement(w.PreferredAvatar,{address:n,size:c.AvatarAccountSize.Xl,"data-testid":"avatar"})),a.default.createElement(u.Box,{className:"multichain-account-details__section"},a.default.createElement(b.AccountDetailsRow,{label:M("accountName"),value:L,endAccessory:a.default.createElement(u.ButtonIcon,{iconName:f.IconName.Edit,color:p.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:M("edit"),marginLeft:2}),onClick:()=>z(!0)}),a.default.createElement(b.AccountDetailsRow,{label:M("address"),value:$,endAccessory:a.default.createElement(u.ButtonIcon,{iconName:f.IconName.ArrowRight,color:p.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:M("next"),marginLeft:2,"data-testid":"account-address-navigation-button"}),onClick:()=>{O.push(`${m.ACCOUNT_DETAILS_QR_CODE_ROUTE}/${n}`)}}),a.default.createElement(b.AccountDetailsRow,{label:M("wallet"),value:K,endAccessory:a.default.createElement(u.ButtonIcon,{iconName:f.IconName.ArrowRight,color:p.IconColor.iconAlternative,size:u.ButtonIconSize.Md,ariaLabel:M("next"),marginLeft:2,"data-testid":"wallet-details-link"}),onClick:()=>{O.push(H)}})),e,Y&&a.default.createElement(u.Box,{className:"multichain-account-details__remove_account_section"},a.default.createElement(u.Button,{size:u.ButtonSize.Lg,width:p.BlockSize.Full,variant:u.ButtonVariant.Secondary,danger:!0,onClick:()=>Q(!0)},M("removeAccount"))),U&&a.default.createElement(E.EditAccountNameModal,{isOpen:U,onClose:()=>z(!1),currentAccountName:L,address:n}),X&&a.default.createElement(x.AccountRemoveModal,{isOpen:X,onClose:()=>Q(!1),onSubmit:Z,accountName:t.metadata.name,accountAddress:t.address})))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/base-account-details/base-account-details.tsx"}],[7719,{"./multichain-account-address-list-page":7720,"./multichain-account-address-list-page.types":7721},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AddressListQueryParams",{enumerable:!0,get:function(){return o.AddressListQueryParams}}),Object.defineProperty(n,"AddressListSource",{enumerable:!0,get:function(){return o.AddressListSource}}),Object.defineProperty(n,"MultichainAccountAddressListPage",{enumerable:!0,get:function(){return a.MultichainAccountAddressListPage}});var a=e("./multichain-account-address-list-page"),o=e("./multichain-account-address-list-page.types")}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-address-list-page/index.ts"}],[7720,{"../../../components/multichain-accounts/address-qr-code-modal/address-qr-code-modal":6545,"../../../components/multichain-accounts/multichain-address-rows-list":6563,"../../../components/multichain/pages/page":6806,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"../../../selectors/multichain-accounts/account-tree":7951,"./multichain-account-address-list-page.types":7721,"@metamask/design-system-react":1707,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountAddressListPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("react-redux"),r=e("@metamask/design-system-react"),s=e("../../../components/multichain/pages/page"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/multichain-accounts/multichain-address-rows-list"),d=e("../../../selectors/multichain-accounts/account-tree"),p=e("../../../components/multichain-accounts/address-qr-code-modal/address-qr-code-modal"),m=e("./multichain-account-address-list-page.types");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.MultichainAccountAddressListPage=()=>{var e,t;const n=(0,l.useI18nContext)(),f=(0,o.useHistory)(),g=(0,o.useLocation)(),{accountGroupId:h}=(0,o.useParams)(),y=h?decodeURIComponent(h):null,b=(0,i.useSelector)(e=>y?(0,d.getMultichainAccountGroupById)(e,y):null),E=new URLSearchParams(g.search).get(m.AddressListQueryParams.Source)===m.AddressListSource.Receive?n("receivingAddress"):`${(null==b||null===(e=b.metadata)||void 0===e?void 0:e.name)||n("account")} / ${n("addresses")}`,[k,C]=(0,a.useState)(!1),[v,x]=(0,a.useState)(null),_=(0,a.useCallback)((e,t,n,a)=>{x({address:e,networkName:t,chainId:n,networkImageSrc:a}),C(!0)},[]),T=(0,a.useCallback)(()=>{C(!1),x(null)},[]);return a.default.createElement(s.Page,{className:"max-w-[600px]"},a.default.createElement(s.Header,{textProps:{variant:c.TextVariant.headingSm},startAccessory:a.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:n("back"),iconName:r.IconName.ArrowLeft,onClick:()=>f.goBack(),"data-testid":"multichain-account-address-list-page-back-button"})},E),a.default.createElement(s.Content,{padding:0},a.default.createElement(r.Box,{flexDirection:r.BoxFlexDirection.Column},y?a.default.createElement(u.MultichainAddressRowsList,{groupId:y,onQrClick:_}):null)),v&&a.default.createElement(p.AddressQRCodeModal,{isOpen:k,onClose:T,address:v.address,accountName:(null==b||null===(t=b.metadata)||void 0===t?void 0:t.name)||n("account"),networkName:v.networkName,chainId:v.chainId,networkImageSrc:v.networkImageSrc}))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-address-list-page/multichain-account-address-list-page.tsx"}],[7721,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressListSource=n.AddressListQueryParams=void 0;n.AddressListQueryParams=function(e){return e.Source="source",e}({}),n.AddressListSource=function(e){return e.Receive="receive",e}({})}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-address-list-page/multichain-account-address-list-page.types.ts"}],[7722,{"./multichain-account-details-page":7723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountDetailsPage",{enumerable:!0,get:function(){return a.MultichainAccountDetailsPage}});var a=e("./multichain-account-details-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-details-page/index.ts"}],[7723,{"../../../../shared/constants/metametrics":5796,"../../../components/app/preferred-avatar":6195,"../../../components/component-library":6469,"../../../components/multichain-accounts/account-details-row":6536,"../../../components/multichain-accounts/account-remove-modal":6538,"../../../components/multichain-accounts/multichain-account-edit-modal":6550,"../../../components/multichain-accounts/multichain-srp-backup":6570,"../../../components/multichain/pages/page":6806,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/multichain-accounts/useWalletInfo":7121,"../../../hooks/useI18nContext":7157,"../../../selectors/multichain-accounts/account-tree":7951,"../../../selectors/multichain-accounts/utils":7954,"../../../store/actions":7975,"@metamask/account-api":1129,"@metamask/design-system-react":1707,"@metamask/keyring-controller":2070,classnames:4094,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountDetailsPage=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom"),r=e("react-redux"),s=e("@metamask/account-api"),c=(a=e("classnames"))&&a.__esModule?a:{default:a},l=e("@metamask/design-system-react"),u=e("@metamask/keyring-controller"),d=e("../../../components/component-library"),p=e("../../../components/app/preferred-avatar"),m=e("../../../components/multichain/pages/page"),f=e("../../../helpers/constants/design-system"),g=e("../../../hooks/useI18nContext"),h=e("../../../components/multichain-accounts/account-details-row"),y=e("../../../selectors/multichain-accounts/account-tree"),b=e("../../../selectors/multichain-accounts/utils"),E=e("../../../helpers/constants/routes"),k=e("../../../components/multichain-accounts/multichain-srp-backup"),C=e("../../../hooks/multichain-accounts/useWalletInfo"),v=e("../../../components/multichain-accounts/multichain-account-edit-modal"),x=e("../../../components/multichain-accounts/account-remove-modal"),_=e("../../../store/actions"),T=e("../../../../shared/constants/metametrics"),S=e("../../../contexts/metametrics");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}n.MultichainAccountDetailsPage=()=>{var e;const t=(0,g.useI18nContext)(),n=(0,i.useHistory)(),a=(0,r.useDispatch)(),I=(0,o.useContext)(S.MetaMetricsContext),{id:w}=(0,i.useParams)(),N=decodeURIComponent(w),O=(0,r.useSelector)(e=>(0,y.getMultichainAccountGroupById)(e,N)),A=(0,b.extractWalletIdFromGroupId)(N),M=(0,r.useSelector)(e=>(0,y.getWallet)(e,A)),{keyringId:B,isSRPBackedUp:R}=(0,C.useWalletInfo)(A),P=`${E.MULTICHAIN_WALLET_DETAILS_PAGE_ROUTE}/${encodeURIComponent(A)}`,D=(null==M?void 0:M.type)!==s.AccountWalletType.Entropy&&(null==M?void 0:M.type)!==s.AccountWalletType.Snap,F=(0,r.useSelector)(e=>(0,y.getNetworkAddressCount)(e,N)),L=(0,r.useSelector)(e=>(0,y.getInternalAccountsFromGroupById)(e,N)),j=(0,r.useSelector)(e=>(0,y.getInternalAccountByGroupAndCaip)(e,N,"eip155:1")),W=(0,r.useSelector)(e=>(0,y.getIconSeedAddressByAccountGroupId)(e,N)),[$,U]=(0,o.useState)(!1),[z,G]=(0,o.useState)(!1),V=(null==M?void 0:M.type)===s.AccountWalletType.Entropy,q=L.some(e=>e.metadata.keyring.type===u.KeyringTypes.simple),J=!1===R,K=(0,o.useCallback)(()=>{var e;const t=null===(e=L[0])||void 0===e?void 0:e.address;t&&(a((0,_.removeAccount)(t)),I({event:T.MetaMetricsEventName.AccountRemoved,category:T.MetaMetricsEventCategory.Accounts,properties:{account_type:null==M?void 0:M.type}}),a((0,_.setAccountDetailsAddress)("")),n.push(E.DEFAULT_ROUTE))},[a,I,n,null==M?void 0:M.type,L]);return o.default.createElement(m.Page,{className:"multichain-account-details-page"},o.default.createElement(m.Header,{textProps:{variant:f.TextVariant.headingSm},startAccessory:o.default.createElement(d.ButtonIcon,{size:d.ButtonIconSize.Md,ariaLabel:t("back"),iconName:d.IconName.ArrowLeft,onClick:()=>n.goBack(),"data-testid":"back-button"})},O.metadata.name),o.default.createElement(m.Content,{className:"multichain-account-details-page__content",paddingTop:3,gap:4},o.default.createElement(d.Box,{className:"flex justify-center",paddingBottom:6},o.default.createElement(p.PreferredAvatar,{address:W,size:l.AvatarAccountSize.Xl,"data-testid":"avatar"})),o.default.createElement(d.Box,{className:"multichain-account-details-page__section"},o.default.createElement(h.AccountDetailsRow,{label:t("accountName"),value:O.metadata.name,onClick:()=>{U(!0)},endAccessory:o.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowRight,color:f.IconColor.iconAlternative,size:d.ButtonIconSize.Sm,ariaLabel:t("accountName"),marginLeft:2,"data-testid":"account-name-action"})}),o.default.createElement(h.AccountDetailsRow,{label:t("networks"),value:`${F} ${t(F>1?"addressesLabel":"addressLabel")}`,onClick:()=>{n.push(`${E.MULTICHAIN_ACCOUNT_ADDRESS_LIST_PAGE_ROUTE}/${encodeURIComponent(N)}`)},endAccessory:o.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowRight,color:f.IconColor.iconAlternative,size:d.ButtonIconSize.Sm,ariaLabel:t("addresses"),marginLeft:2,"data-testid":"network-addresses-link"})}),(V||q)&&o.default.createElement(h.AccountDetailsRow,{label:t("privateKeys"),value:t("unlockToReveal"),onClick:()=>{n.push(`${E.MULTICHAIN_ACCOUNT_PRIVATE_KEY_LIST_PAGE_ROUTE}/${encodeURIComponent(N)}`)},endAccessory:o.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowRight,color:f.IconColor.iconAlternative,size:d.ButtonIconSize.Sm,ariaLabel:t("privateKeys"),marginLeft:2,"data-testid":"private-keys-action"})}),o.default.createElement(h.AccountDetailsRow,{label:t("smartAccountLabel"),value:t("setUp"),onClick:()=>{const e=null==j?void 0:j.address;e&&n.push(`${E.MULTICHAIN_SMART_ACCOUNT_PAGE_ROUTE}/${encodeURIComponent(e)}`)},endAccessory:o.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowRight,color:f.IconColor.iconAlternative,size:d.ButtonIconSize.Sm,ariaLabel:t("smartAccountLabel"),marginLeft:2,"data-testid":"smart-account-action"})})),o.default.createElement(d.Box,{className:"multichain-account-details-page__section"},o.default.createElement(h.AccountDetailsRow,{label:t("wallet"),value:M.metadata.name,onClick:()=>{n.push(P)},endAccessory:o.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowRight,color:f.IconColor.iconAlternative,size:d.ButtonIconSize.Sm,ariaLabel:t("wallet"),marginLeft:2,"data-testid":"wallet-details-link"})}),V?o.default.createElement(k.MultichainSrpBackup,{className:(0,c.default)("multichain-account-details__row","multichain-account-details-page__srp-button"),shouldShowBackupReminder:J,keyringId:B}):null),D&&o.default.createElement(d.Box,{className:"multichain-account-details-page__section"},o.default.createElement(h.AccountDetailsRow,{label:t("removeAccount"),labelColor:f.TextColor.errorDefault,value:"",onClick:()=>G(!0),endAccessory:o.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowRight,color:f.IconColor.iconAlternative,size:d.ButtonIconSize.Md,ariaLabel:t("removeAccount"),marginLeft:2,"data-testid":"account-remove-action"})})),$&&o.default.createElement(v.MultichainAccountEditModal,{isOpen:$,onClose:()=>U(!1),accountGroupId:O.id}),z&&o.default.createElement(x.AccountRemoveModal,{isOpen:z,onClose:()=>G(!1),onSubmit:K,accountName:O.metadata.name,accountAddress:null===(e=L[0])||void 0===e?void 0:e.address})))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-details-page/multichain-account-details-page.tsx"}],[7724,{"./multichain-account-private-key-list-page":7725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountPrivateKeyListPage",{enumerable:!0,get:function(){return a.MultichainAccountPrivateKeyListPage}});var a=e("./multichain-account-private-key-list-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-private-key-list-page/index.ts"}],[7725,{"../../../components/component-library":6469,"../../../components/multichain-accounts/multichain-private-key-list":6565,"../../../components/multichain/pages/page":6806,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/zendesk-url":7035,"../../../hooks/useI18nContext":7157,"../../../selectors/multichain-accounts/account-tree":7951,"@metamask/design-system-react":1707,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountPrivateKeyListPage=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("react-router-dom"),s=e("@metamask/design-system-react"),c=e("../../../components/multichain/pages/page"),l=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext"),d=e("../../../components/multichain-accounts/multichain-private-key-list"),p=e("../../../components/component-library"),m=e("../../../selectors/multichain-accounts/account-tree"),f=(a=e("../../../helpers/constants/zendesk-url"))&&a.__esModule?a:{default:a};function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.MultichainAccountPrivateKeyListPage=()=>{const e=(0,u.useI18nContext)(),t=(0,r.useHistory)(),{accountGroupId:n}=(0,r.useParams)(),a=n?decodeURIComponent(n):null,g=(0,i.useSelector)(e=>a?(0,m.getMultichainAccountGroupById)(e,a):null),h=(0,o.useMemo)(()=>g?g.metadata.name:e("account"),[g,e]),y=o.default.createElement(p.ButtonLink,{size:p.ButtonLinkSize.Inherit,textProps:{variant:l.TextVariant.bodyMd,alignItems:l.AlignItems.flexStart},as:"a",href:f.default.PRIVATE_KEY_GUIDE,target:"_blank",rel:"noopener noreferrer"},e("learnMoreUpperCase"));return o.default.createElement(c.Page,{className:"max-w-[600px]"},o.default.createElement(c.Header,{textProps:{variant:l.TextVariant.headingSm},startAccessory:o.default.createElement(s.ButtonIcon,{size:s.ButtonIconSize.Md,ariaLabel:e("back"),iconName:s.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"multichain-account-address-list-page-back-button"})},h," / ",e("privateKeys")),o.default.createElement(c.Content,null,o.default.createElement(p.BannerAlert,{"data-testid":"backup-state-banner-alert",title:e("revealMultichainPrivateKeysBannerTitle"),paddingTop:2,paddingBottom:2,severity:p.BannerAlertSeverity.Danger},e("revealMultichainPrivateKeysBannerDescription",[y])),o.default.createElement(s.Box,{flexDirection:s.BoxFlexDirection.Column},a?o.default.createElement(d.MultichainPrivateKeyList,{groupId:a,goBack:t.goBack,"data-testid":"multichain-account-private-key-list"}):null)))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-account-private-key-list-page/multichain-account-private-key-list-page.tsx"}],[7726,{"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/network":5800,"../../../../shared/lib/caip25-caveat-merger":5830,"../../../../shared/lib/multichain/scope-utils":5877,"../../../../shared/modules/selectors/networks":5918,"../../../components/component-library":6469,"../../../components/multichain-accounts/multichain-account-cell":6548,"../../../components/multichain-accounts/multichain-site-cell/multichain-site-cell":6568,"../../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-accounts-page":6573,"../../../components/multichain/pages/page":6806,"../../../components/ui/tabs":6954,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/utils/util":7082,"../../../hooks/useAccountGroupsForPermissions":7134,"../../../hooks/useFormatters":7153,"../../../hooks/useI18nContext":7157,"../../../hooks/useOriginTrustSignals":7176,"../../../hooks/useTrustSignals":7197,"../../../selectors":7947,"../../../selectors/assets":7939,"../../../selectors/multichain":7956,"../../permissions-connect/connect-page/utils":7794,"@metamask/chain-agnostic-permission":1329,"@metamask/utils":2908,lodash:4816,react:5258,"react-redux":5202,"react-tippy":5240},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountsConnectPageMode=n.MultichainAccountsConnectPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("@metamask/chain-agnostic-permission"),r=e("@metamask/utils"),s=e("lodash"),c=e("react-tippy"),l=e("../../../hooks/useI18nContext"),u=e("../../../selectors"),d=e("../../../../shared/modules/selectors/networks"),p=e("../../../components/component-library"),m=e("../../../components/multichain/pages/page"),f=e("../../../helpers/constants/design-system"),g=e("../../../../shared/constants/network"),h=e("../../../components/ui/tabs"),y=e("../../../helpers/utils/util"),b=e("../../../../shared/constants/metametrics"),E=e("../../../contexts/metametrics"),k=e("../../../../shared/lib/caip25-caveat-merger"),C=e("../../../components/multichain-accounts/multichain-account-cell"),v=e("../../../hooks/useAccountGroupsForPermissions"),x=e("../../permissions-connect/connect-page/utils"),_=e("../../../components/multichain-accounts/multichain-site-cell/multichain-site-cell"),T=e("../../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-accounts-page"),S=e("../../../../shared/lib/multichain/scope-utils"),I=e("../../../selectors/assets"),w=e("../../../hooks/useFormatters"),N=e("../../../selectors/multichain"),O=e("../../../hooks/useTrustSignals"),A=e("../../../hooks/useOriginTrustSignals");function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}let B=n.MultichainAccountsConnectPageMode=function(e){return e.Summary="summary",e.EditAccounts="edit-accounts",e}({});n.MultichainAccountsConnectPage=({request:e,permissionsRequestId:t,rejectPermissionsRequest:n,approveConnection:M,targetSubjectMetadata:R})=>{const P=(0,l.useI18nContext)(),D=(0,a.useContext)(E.MetaMetricsContext),[F,L]=(0,a.useState)(B.Summary),{isEip1193Request:j}=e.metadata??{},{formatCurrencyWithMinThreshold:W}=(0,w.useFormatters)(),$=(0,o.useSelector)(I.selectBalanceForAllWallets),U=null==$?void 0:$.wallets,z=(0,o.useSelector)(t=>{var n;return(0,u.getPermissions)(t,null===(n=e.metadata)||void 0===n?void 0:n.origin)}),G=(0,a.useMemo)(()=>z?(0,x.getCaip25CaveatValueFromPermissions)(z):{requiredScopes:{},optionalScopes:{},sessionProperties:{},isMultichainOrigin:!0},[z]),V=(0,a.useMemo)(()=>(0,x.getCaip25CaveatValueFromPermissions)(e.permissions),[e.permissions]),q=(0,a.useMemo)(()=>G?(0,k.mergeCaip25CaveatValues)(V,G):V,[G,V]),J=(0,i.getCaipAccountIdsFromCaip25CaveatValue)(V),K=(0,a.useMemo)(()=>(0,i.getAllNamespacesFromCaip25CaveatValue)(q),[q]),H=(0,a.useMemo)(()=>K.filter(e=>e!==r.KnownCaipNamespace.Wallet),[K]),Y=(0,o.useSelector)(d.getAllNetworkConfigurationsByCaipChainId),[X,Q]=(0,a.useMemo)(()=>Object.entries(Y).reduce(([e,t],[n,a])=>{const o=n;return(g.CAIP_FORMATTED_EVM_TEST_CHAINS.includes(o)?t:e).push({...a,caipChainId:o}),[e,t]},[[],[]]),[Y]),Z=(0,o.useSelector)(N.getMultichainNetwork),ee=(0,a.useMemo)(()=>(0,i.getAllScopesFromCaip25CaveatValue)(G),[G]),te=(0,a.useMemo)(()=>(0,i.getAllScopesFromCaip25CaveatValue)(V).filter(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t!==r.KnownCaipNamespace.Wallet}),[V]),ne=(0,a.useMemo)(()=>{const e=[...X,...Q].map(({caipChainId:e})=>e);let t=[];te.filter(e=>(0,r.parseCaipChainId)(e).namespace===r.KnownCaipNamespace.Wallet).length>0&&j&&(t=X.map(({caipChainId:e})=>e).filter(e=>H.includes((0,r.parseCaipChainId)(e).namespace)));const n=Array.from(new Set([...te.filter(t=>e.includes(t)),...t])),a=Z.chainId,o=Q.find(e=>e.caipChainId===a),i=o?[...X,o].map(({caipChainId:e})=>e):X.map(({caipChainId:e})=>e);return n.length>0?Array.from(new Set([...n,...ee])):K.length>0?Array.from(new Set(i.filter(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return K.includes(t)}))):i},[X,Q,te,j,Z.chainId,K,H,ee]),{connectedAccountGroups:ae,supportedAccountGroups:oe,connectedAccountGroupWithRequested:ie,caipAccountIdsOfConnectedAndRequestedAccountGroups:re,selectedAndRequestedAccountGroups:se}=(0,v.useAccountGroupsForPermissions)(G,J,ne,H),[ce,le]=(0,a.useState)(!1),[ue,de]=(0,a.useState)(ne),pe=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&le(!0),de(e)},[le,de]),{suggestedAccountGroups:me,suggestedCaipAccountIds:fe}=(0,a.useMemo)(()=>{if(ae.length>0)return{suggestedAccountGroups:ie,suggestedCaipAccountIds:re};if(0===oe.length)return{suggestedAccountGroups:[],suggestedCaipAccountIds:[]};if(0===J.length){const[e]=oe;return{suggestedAccountGroups:[e],suggestedCaipAccountIds:(0,S.getCaip25AccountIdsFromAccountGroupAndScope)([e],ne)}}return{suggestedAccountGroups:se,suggestedCaipAccountIds:(0,S.getCaip25AccountIdsFromAccountGroupAndScope)(se,ne)}},[ae,oe,J,se,ie,re,ne]),[ge,he]=(0,a.useState)(me.map(e=>e.id)),[ye,be]=(0,a.useState)(fe),Ee=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&le(!0);const n=[...ue],a=new Set(e),o=oe.filter(e=>a.has(e.id)),i=(0,S.getCaip25AccountIdsFromAccountGroupAndScope)(o,n);pe(n,{isUserModified:t}),he(e),be(i),L(B.Summary)},[ue,oe,pe]);(0,a.useEffect)(()=>{const e=me.map(e=>e.id);ce||(0,s.isEqual)(e,ge)||Ee(e,{isUserModified:!1})},[ce,Ee,ge,me]);const ke=(0,a.useCallback)(()=>{D({category:b.MetaMetricsEventCategory.Navigation,event:b.MetaMetricsEventName.ViewPermissionedAccounts,properties:{location:"Connect view (accounts tab), Permissions toast, Permissions (dapp)"}}),L(B.EditAccounts)},[D]),Ce=(0,a.useCallback)(()=>{n(t)},[t,n]),ve=(0,a.useCallback)(()=>{const t={...e,permissions:{...e.permissions,...(0,i.generateCaip25Caveat)(q,ye,ue)}};M(t)},[e,q,ye,ue,M]),xe=(0,y.transformOriginToTitle)(R.origin),_e=(0,A.useOriginTrustSignals)(R.origin),Te=(0,a.useCallback)(e=>{var t;const n=oe.find(t=>t.id===e),o=n?null==U||null===(t=U[n.walletId])||void 0===t||null===(t=t.groups)||void 0===t?void 0:t[e]:undefined,i=(null==o?void 0:o.totalBalanceInUserCurrency)??0,r=(null==o?void 0:o.userCurrency)??"";return a.default.createElement(C.MultichainAccountCell,{accountId:e,accountName:(null==n?void 0:n.metadata.name)||"Unknown Account",balance:W(i,r),key:e,walletName:null==n?void 0:n.walletName})},[oe,U,W]);return F===B.Summary?a.default.createElement(m.Page,{"data-testid":"connect-page",className:"main-container multichain-connect-page",backgroundColor:f.BackgroundColor.backgroundDefault},a.default.createElement(m.Header,{paddingTop:8,paddingBottom:4},a.default.createElement(p.Box,{display:f.Display.Flex,justifyContent:f.JustifyContent.center,marginBottom:8},R.iconUrl?a.default.createElement(a.default.Fragment,null,a.default.createElement(p.Box,{style:{filter:"blur(16px) brightness(1.1)",position:"absolute"}},a.default.createElement(p.AvatarFavicon,{backgroundColor:f.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Xl,src:R.iconUrl,name:xe})),a.default.createElement(p.AvatarFavicon,{backgroundColor:f.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Lg,src:R.iconUrl,name:xe,style:{zIndex:1,background:"transparent"}})):a.default.createElement(p.AvatarBase,{size:p.AvatarBaseSize.Lg,display:f.Display.Flex,alignItems:f.AlignItems.center,justifyContent:f.JustifyContent.center,color:f.TextColor.textAlternative,style:{borderWidth:"0px"},backgroundColor:f.BackgroundColor.backgroundMuted},(0,y.isIpAddress)(xe)?"?":(0,y.getAvatarFallbackLetter)(xe))),a.default.createElement(p.Box,{display:f.Display.Flex,alignItems:f.AlignItems.center,justifyContent:f.JustifyContent.center,gap:2,marginBottom:1},a.default.createElement(p.Text,{variant:f.TextVariant.headingLg,style:{wordBreak:"break-word",whiteSpace:"normal"}},xe),_e.state===O.TrustSignalDisplayState.Verified&&a.default.createElement(c.Tooltip,{title:P("alertReasonOriginTrustSignalVerified"),position:"bottom",style:{display:"flex"}},a.default.createElement(p.Icon,{name:p.IconName.VerifiedFilled,color:f.IconColor.infoDefault,size:p.IconSize.Sm}))),a.default.createElement(p.Box,{display:f.Display.Flex,justifyContent:f.JustifyContent.center},a.default.createElement(p.Text,{color:f.TextColor.textAlternative},P("connectionDescription")))),a.default.createElement(m.Content,{paddingLeft:4,paddingRight:4,backgroundColor:f.BackgroundColor.transparent},a.default.createElement(h.Tabs,{onTabClick:()=>null,defaultActiveTabKey:"accounts"},a.default.createElement(h.Tab,{className:"multichain-connect-page__tab",name:P("accounts"),tabKey:"accounts","data-testid":"accounts-tab"},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(p.Box,{backgroundColor:f.BackgroundColor.backgroundDefault,borderRadius:f.BorderRadius.XL},ge.map(Te)),0===ge.length&&a.default.createElement(p.Box,{className:"connect-page__accounts-empty",display:f.Display.Flex,justifyContent:f.JustifyContent.flexStart,alignItems:f.AlignItems.center,borderRadius:f.BorderRadius.XL},a.default.createElement(p.ButtonLink,{onClick:ke,"data-testid":"edit"},P("selectAccountToConnect"))),ge.length>0&&a.default.createElement(p.Box,{marginTop:4,display:f.Display.Flex,justifyContent:f.JustifyContent.flexStart,padding:4},a.default.createElement(p.Box,{className:"connect-page__edit-icon",marginRight:4,display:f.Display.Flex,alignItems:f.AlignItems.center,justifyContent:f.JustifyContent.center,backgroundColor:f.BackgroundColor.infoMuted,borderRadius:f.BorderRadius.MD,padding:2},a.default.createElement(p.Icon,{name:p.IconName.Edit,size:p.IconSize.Md,color:f.IconColor.infoDefault})),a.default.createElement(p.ButtonLink,{color:f.TextColor.infoDefault,onClick:ke,"data-testid":"edit"},P("editAccounts"))))),a.default.createElement(h.Tab,{name:P("permissions"),className:"multichain-connect-page__tab",tabKey:"permissions","data-testid":"permissions-tab",disabled:0===ge.length},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(_.MultichainSiteCell,{nonTestNetworks:X,testNetworks:Q,supportedAccountGroups:oe,showEditAccounts:ke,onSelectChainIds:pe,selectedAccountGroupIds:ge,selectedChainIds:ue,isConnectFlow:!0}))))),a.default.createElement(m.Footer,null,a.default.createElement(p.Box,{display:f.Display.Flex,flexDirection:f.FlexDirection.Column,gap:4,width:f.BlockSize.Full},a.default.createElement(p.Box,{display:f.Display.Flex,gap:4,width:f.BlockSize.Full},a.default.createElement(p.Button,{block:!0,variant:p.ButtonVariant.Secondary,size:p.ButtonSize.Lg,"data-testid":"cancel-btn",onClick:Ce},P("cancel")),a.default.createElement(p.Button,{block:!0,"data-testid":"confirm-btn",size:p.ButtonSize.Lg,onClick:ve,disabled:0===ge.length||0===ue.length},P("connect")))))):a.default.createElement(T.MultichainEditAccountsPage,{supportedAccountGroups:oe,defaultSelectedAccountGroups:ge,onSubmit:Ee,onClose:()=>L(B.Summary)})}}}},{package:"$root$",file:"ui/pages/multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page.tsx"}],[7727,{"./smart-account-page":7728},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SmartAccountPage",{enumerable:!0,get:function(){return a.SmartAccountPage}});var a=e("./smart-account-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/smart-account-page/index.ts"}],[7728,{"../../../components/multichain-accounts/smart-contract-account-toggle-section":6575,"../../../components/multichain/pages/page":6806,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"@metamask/design-system-react":1707,react:5258,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SmartAccountPage=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-router-dom"),r=e("@metamask/design-system-react"),s=e("../../../components/multichain/pages/page"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../components/multichain-accounts/smart-contract-account-toggle-section");n.SmartAccountPage=()=>{const e=(0,l.useI18nContext)(),t=(0,i.useHistory)(),{address:n}=(0,i.useParams)(),a=n?decodeURIComponent(n):null;return a?o.default.createElement(s.Page,{className:"max-w-[600px]"},o.default.createElement(s.Header,{textProps:{variant:c.TextVariant.headingSm},startAccessory:o.default.createElement(r.ButtonIcon,{size:r.ButtonIconSize.Md,ariaLabel:e("back"),iconName:r.IconName.ArrowLeft,onClick:()=>t.goBack(),"data-testid":"smart-account-page-back-button"})},e("smartAccount")),o.default.createElement(s.Content,null,o.default.createElement(r.Box,{flexDirection:r.BoxFlexDirection.Column},o.default.createElement(u.SmartContractAccountToggleSection,{address:a})))):null}}}},{package:"$root$",file:"ui/pages/multichain-accounts/smart-account-page/smart-account-page.tsx"}],[7729,{"./wallet-details-page":7730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"WalletDetailsPage",{enumerable:!0,get:function(){return a.WalletDetailsPage}});var a=e("./wallet-details-page")}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details-page/index.ts"}],[7730,{"../../../components/component-library":6469,"../../../components/multichain-accounts/add-multichain-account":6542,"../../../components/multichain-accounts/multichain-account-cell":6548,"../../../components/multichain-accounts/multichain-srp-backup":6570,"../../../components/multichain/pages/page":6806,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/multichain-accounts/useWalletBalance":7120,"../../../hooks/multichain-accounts/useWalletInfo":7121,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../selectors/multichain-accounts/account-tree":7951,"@metamask/account-api":1129,classnames:4094,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WalletDetailsPage=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom"),r=e("react-redux"),s=e("@metamask/account-api"),c=(a=e("classnames"))&&a.__esModule?a:{default:a},l=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../components/multichain/pages/page"),p=e("../../../hooks/useI18nContext"),m=e("../../../selectors/multichain-accounts/account-tree"),f=e("../../../helpers/constants/routes"),g=e("../../../components/multichain-accounts/multichain-account-cell"),h=e("../../../components/multichain-accounts/add-multichain-account"),y=e("../../../hooks/multichain-accounts/useWalletInfo"),b=e("../../../components/multichain-accounts/multichain-srp-backup"),E=e("../../../hooks/multichain-accounts/useWalletBalance"),k=e("../../../selectors");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v.apply(null,arguments)}n.WalletDetailsPage=()=>{const e=(0,p.useI18nContext)(),t=(0,i.useHistory)(),{id:n}=(0,i.useParams)(),a=decodeURIComponent(n),C=(0,r.useSelector)(m.getWalletsWithAccounts)[a],{multichainAccounts:x,keyringId:_,isSRPBackedUp:T}=(0,y.useWalletInfo)(a),S=(0,E.useSingleWalletDisplayBalance)(a),I=(0,E.useSingleWalletAccountsBalanceCallback)(a),{privacyMode:w}=(0,r.useSelector)(k.getPreferences);(0,o.useEffect)(()=>{C||t.push(f.ACCOUNT_LIST_PAGE_ROUTE)},[C,t]);const N=(null==C?void 0:C.type)===s.AccountWalletType.Entropy,O=!1===T,A={display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween,alignItems:u.AlignItems.center,backgroundColor:u.BackgroundColor.backgroundMuted},M=(0,o.useMemo)(()=>x.map(e=>o.default.createElement(g.MultichainAccountCell,{key:`multichain-account-cell-${e.id}`,accountId:e.id,accountName:e.metadata.name,balance:I(e.id)??"",disableHoverEffect:!0,privacyMode:w})),[x,w,I]),B=(0,o.useMemo)(()=>`${null==C?void 0:C.metadata.name} / ${e("accounts")}`,[null==C?void 0:C.metadata.name,e]);return o.default.createElement(d.Page,{className:"multichain-wallet-details-page"},o.default.createElement(d.Header,{textProps:{variant:u.TextVariant.headingSm},startAccessory:o.default.createElement(l.ButtonIcon,{size:l.ButtonIconSize.Md,ariaLabel:e("back"),iconName:l.IconName.ArrowLeft,onClick:()=>{t.goBack()},"data-testid":"back-button"})},B),o.default.createElement(d.Content,null,o.default.createElement(l.Box,{marginBottom:4,className:"multichain-wallet-details-page__rows-container"},o.default.createElement(l.Box,v({className:(0,c.default)("multichain-wallet-details-page__row","multichain-wallet-details-page__row--first"),padding:4},A),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textDefault},e("walletName")),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textAlternative},null==C?void 0:C.metadata.name)),o.default.createElement(l.Box,v({className:"multichain-wallet-details-page__row",padding:4},A),o.default.createElement(l.Text,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textDefault},e("balance")),o.default.createElement(l.SensitiveText,{variant:u.TextVariant.bodyMdMedium,color:u.TextColor.textAlternative,isHidden:w,ellipsis:!0},S??"$ n/a")),N?o.default.createElement(b.MultichainSrpBackup,{className:(0,c.default)("multichain-wallet-details-page__row","multichain-wallet-details-page__row--last","multichain-wallet-details-page__srp-button"),shouldShowBackupReminder:O,keyringId:_}):null),o.default.createElement(l.Box,{display:u.Display.Flex,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundMuted,borderRadius:u.BorderRadius.XL},M,N&&o.default.createElement(h.AddMultichainAccount,{walletId:a}))))}}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details-page/wallet-details-page.tsx"}],[7731,{"./wallet-details.component":7732},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("./wallet-details.component"))&&a.__esModule?a:{default:a};n.default=o.default}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details/index.ts"}],[7732,{"../../../../shared/lib/trace":5888,"../../../components/app/srp-quiz-modal":6352,"../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":6390,"../../../components/component-library":6469,"../../../components/component-library/modal-content/deprecated":6479,"../../../components/multichain/multichain-accounts/wallet-details-account-item/wallet-details-account-item":6712,"../../../components/multichain/multichain-accounts/wallet-details-account-type-selection":6713,"../../../components/multichain/pages/page":6806,"../../../ducks/metamask/metamask":7010,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/accounts/useMultichainWalletSnapClient":7087,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../selectors/multichain-accounts/account-tree":7951,"../../../store/actions":7975,"@metamask/keyring-api":2060,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom"),i=e("react-redux"),r=e("@metamask/keyring-api"),s=e("../../../components/component-library"),c=e("../../../components/component-library/modal-content/deprecated"),l=e("../../../helpers/constants/design-system"),u=e("../../../components/multichain/pages/page"),d=e("../../../selectors"),p=e("../../../hooks/useI18nContext"),m=e("../../../selectors/multichain-accounts/account-tree"),f=e("../../../ducks/metamask/metamask"),g=x(e("../../../components/multichain/multichain-accounts/wallet-details-account-item/wallet-details-account-item")),h=x(e("../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),y=x(e("../../../components/app/srp-quiz-modal")),b=e("../../../components/multichain/multichain-accounts/wallet-details-account-type-selection"),E=e("../../../store/actions"),k=e("../../../helpers/constants/routes"),C=e("../../../../shared/lib/trace"),v=e("../../../hooks/accounts/useMultichainWalletSnapClient");function x(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T.apply(null,arguments)}const S=()=>{var e;const t=(0,p.useI18nContext)(),n=(0,o.useHistory)(),x=(0,i.useDispatch)(),{id:_}=(0,o.useParams)(),S=decodeURIComponent(_),I=(0,i.useSelector)(m.getWalletsWithAccounts),w=(0,i.useSelector)(f.getIsPrimarySeedPhraseBackedUp),N=(0,i.useSelector)(d.getMetaMaskHdKeyrings),[O,A]=(0,a.useState)(!1),M=I[S],[B,R]=(0,a.useState)({}),[P,D]=(0,a.useState)(!1),F=(0,v.useMultichainWalletSnapClient)(v.WalletClientType.Solana),L=(0,v.useMultichainWalletSnapClient)(v.WalletClientType.Bitcoin),j=(0,a.useMemo)(()=>Object.values(B).reduce((e,t)=>e+Number(t||0),0).toString(),[B]),W=(0,a.useCallback)((e,t)=>{R(n=>({...n,[e]:t}))},[]),$=e=>{x((0,E.setAccountDetailsAddress)(e.address)),n.push(`${k.ACCOUNT_DETAILS_ROUTE}/${e.address}`)},U=()=>{n.goBack()};if(!M)return a.default.createElement(u.Page,{className:"wallet-details-page"},a.default.createElement(u.Header,{textProps:{variant:l.TextVariant.headingSm},startAccessory:a.default.createElement(s.ButtonIcon,{size:s.ButtonIconSize.Md,ariaLabel:t("back"),iconName:s.IconName.ArrowLeft,onClick:U})},t("walletDetails")),a.default.createElement(u.Content,null,a.default.createElement(s.BannerAlert,{severity:s.BannerAlertSeverity.Danger,title:t("walletNotFoundTitle")},t("walletNotFoundDescription",[_]))));const z=M.id.split(":")[1],G=M.id.includes("entropy"),V=(null===(e=N[0])||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.id)===z,q=!w&&V,J=Object.values(M.groups).flatMap(e=>e.accounts),K=()=>{D(!1)},H=async(e,t)=>{(0,C.trace)({name:C.TraceName.AddAccount});try{let n;if(e===v.WalletClientType.Solana)n=F;else{if(e!==v.WalletClientType.Bitcoin)return console.error(`Unsupported client type: ${e}`),!1;n=L}return n?(await n.createAccount({scope:t,entropySource:z},{displayConfirmation:!1,displayAccountNameSuggestion:!1,setSelectedAccount:!1}),!0):(console.error(`Client not available for type: ${e}`),!1)}catch(t){return console.error(`Error creating ${e} account:`,t),!1}finally{(0,C.endTrace)({name:C.TraceName.AddAccount})}},Y={display:l.Display.Flex,justifyContent:l.JustifyContent.spaceBetween,alignItems:l.AlignItems.center,backgroundColor:l.BackgroundColor.backgroundAlternative};return a.default.createElement(u.Page,{className:"wallet-details-page"},a.default.createElement(u.Header,{textProps:{variant:l.TextVariant.headingSm},startAccessory:a.default.createElement(s.ButtonIcon,{size:s.ButtonIconSize.Md,ariaLabel:t("back"),iconName:s.IconName.ArrowLeft,onClick:U})},t("walletDetails")),a.default.createElement(u.Content,null,a.default.createElement(s.Box,{marginBottom:4,className:"wallet-details-page__rows-container"},a.default.createElement(s.Box,T({className:"wallet-details-page__row",padding:4},Y),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textDefault},t("walletName")),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textAlternative},M.metadata.name)),a.default.createElement(s.Box,T({className:"wallet-details-page__row",padding:4},Y),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textDefault},t("balance")),a.default.createElement(h.default,{value:j,type:"PRIMARY",ethNumberOfDecimals:4,hideTitle:!0,showFiat:!0,isAggregatedFiatOverviewBalance:!0,hideLabel:!0,textProps:{color:l.TextColor.textAlternative,variant:l.TextVariant.bodyMdMedium}}))),G?a.default.createElement(s.Box,{marginBottom:4,className:"wallet-details-page__rows-container"},a.default.createElement(s.Box,T({className:"wallet-details-page__row wallet-details-page__srp-button",padding:4,marginBottom:1,width:l.BlockSize.Full,textAlign:l.TextAlign.Left},Y,{as:"button",onClick:()=>{if(q){const e=`${k.ONBOARDING_REVIEW_SRP_ROUTE}/?isFromReminder=true`;n.push(e)}else A(!0)}}),a.default.createElement(s.Box,null,a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.textDefault},t("secretRecoveryPhrase"))),a.default.createElement(s.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:2},q?a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.errorDefault},t("backup")):null,a.default.createElement(s.Icon,{name:s.IconName.ArrowRight,size:s.IconSize.Sm,color:l.IconColor.iconAlternative})))):null,J.length>0&&a.default.createElement(s.Box,{className:"wallet-details-page__rows-container"},J.map(e=>a.default.createElement(g.default,T({key:e.id,account:e,onClick:$,onBalanceUpdate:W,className:"wallet-details-page__row"},Y))),G?a.default.createElement(s.Box,T({className:"wallet-details-page__row wallet-details-page__add-account-button",padding:4,width:l.BlockSize.Full,textAlign:l.TextAlign.Left},Y,{as:"button",onClick:()=>{D(!0)}}),a.default.createElement(s.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:3},a.default.createElement(s.Icon,{name:s.IconName.Add,size:s.IconSize.Md,color:l.IconColor.primaryDefault}),a.default.createElement(s.Text,{variant:l.TextVariant.bodyMdMedium,color:l.TextColor.primaryDefault},t("addAccount")))):null)),G&&O&&a.default.createElement(y.default,{keyringId:z,isOpen:O,onClose:()=>A(!1),closeAfterCompleting:!0}),P&&a.default.createElement(s.Modal,{isOpen:!0,onClose:K},a.default.createElement(s.ModalOverlay,null),a.default.createElement(c.ModalContent,{className:"multichain-account-menu-popover",modalDialogProps:{className:"multichain-account-menu-popover__dialog",padding:0,display:l.Display.Flex,flexDirection:l.FlexDirection.Column}},a.default.createElement(b.WalletDetailsAccountTypeSelection,{onAccountTypeSelect:async e=>{let t=!1;e===v.EVM_WALLET_TYPE?t=await(async()=>{(0,C.trace)({name:C.TraceName.AddAccount});try{return await x((0,E.addNewAccount)(z,!1)),!0}catch(e){return console.error("Error creating Ethereum account:",e),!1}finally{(0,C.endTrace)({name:C.TraceName.AddAccount})}})():e===v.WalletClientType.Solana?t=await H(v.WalletClientType.Solana,r.SolScope.Mainnet):e===v.WalletClientType.Bitcoin&&(t=await H(v.WalletClientType.Bitcoin,r.BtcScope.Mainnet)),t&&K()},onClose:K}))))};S.propTypes={};n.default=S}}},{package:"$root$",file:"ui/pages/multichain-accounts/wallet-details/wallet-details.component.tsx"}],[7733,{"../../../shared/constants/urls":5820,"../../../shared/lib/deep-links/routes/nonevm":5840,"../../../shared/lib/deep-links/routes/route":5844,"../../../shared/lib/deep-links/routes/swap":5845,"../../components/component-library":6469,"../../components/multichain/network-list-menu/add-non-evm-account/add-non-evm-account":6721,"../../helpers/constants/design-system":7023,"../../hooks/ramps/useRamps/useRamps":7123,"../../hooks/useMultichainBalances":7166,"../../selectors":7947,"../../selectors/multichain":7956,"../../store/actions":7975,react:5258,"react-redux":5202,"react-router-dom":5226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NonEvmBalanceCheck=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("react-router-dom"),s=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),l=e("../../store/actions"),u=e("../../hooks/useMultichainBalances"),d=e("../../../shared/lib/deep-links/routes/nonevm"),p=e("../../../shared/lib/deep-links/routes/route"),m=e("../../../shared/lib/deep-links/routes/swap"),f=e("../../hooks/ramps/useRamps/useRamps"),g=e("../../selectors/multichain"),h=e("../../selectors"),y=e("../../../shared/constants/urls"),b=(a=e("../../components/multichain/network-list-menu/add-non-evm-account/add-non-evm-account"))&&a.__esModule?a:{default:a};function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}const{getExtensionURL:k}=globalThis.platform;n.NonEvmBalanceCheck=()=>{const e=(0,r.useLocation)(),t=(0,i.useDispatch)(),n=(0,i.useSelector)(h.getMetaMetricsId),a=(0,i.useSelector)(h.getParticipateInMetaMetrics),E=(0,i.useSelector)(h.getDataCollectionForMarketing),C=(0,i.useSelector)(h.getMetaMaskAccountsOrdered),v=(0,i.useSelector)(g.getLastSelectedNonEvmAccount),x=new URLSearchParams(e.search).get(d.NonEvmQueryParams.ChainId),{assetsWithBalance:_}=(0,u.useMultichainBalances)(),T=C.some(e=>e.scopes.includes(x));return(0,o.useEffect)(()=>{if(x&&T){var e;null!=v&&null!==(e=v.scopes)&&void 0!==e&&e.includes(x)&&t((0,l.setSelectedAccount)(v.address));const o=_.some(e=>e.chainId===x&&e.balance&&"0"!==e.balance);window.location.href=o?(e=>{const t=new URLSearchParams;return t.set("sourceToken",e),t.set(m.BridgeQueryParams.SWAPS,"true"),k(p.SWAP_ROUTE,t.toString())})(x):((e,t,n,a)=>{const o=new URLSearchParams;o.set("metamaskEntry",f.RampsMetaMaskEntry.BuySellButton),o.set("chainId",e),t&&o.set("metametricsId",t),o.set("metricsEnabled",String(n)),a&&o.set("marketingEnabled",String(a));const i=new URL("/buy",y.BaseUrl.Portfolio);return i.search=o.toString(),i.toString()})(x,n,a,E)}},[x,_,n,a,E,T,C]),T?null:o.default.createElement(s.Modal,{isOpen:!0,onClose:()=>{}},o.default.createElement(s.ModalOverlay,null),o.default.createElement(s.ModalContent,{modalDialogProps:{padding:0,display:c.Display.Flex,flexDirection:c.FlexDirection.Column}},o.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,width:c.BlockSize.Full,padding:2},o.default.createElement(b.default,{chainId:x}))))}}}},{package:"$root$",file:"ui/pages/nonevm-balance-check/index.tsx"}],[7734,{"./notification-details":7738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./notification-details"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/notification-details/index.js"}],[7735,{"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../notifications/notification-components/types/notifications/notifications":7761,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationDetailsBody=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=e("../../notifications/notification-components/types/notifications/notifications");n.NotificationDetailsBody=({body:e,notification:t})=>o.default.createElement(i.Box,{display:r.Display.Flex,flexDirection:r.FlexDirection.Column,padding:0},e.type===s.NotificationComponentType.AnnouncementBody&&o.default.createElement(o.default.Fragment,null,o.default.createElement(e.Image,{notification:t}),o.default.createElement(e.Description,{notification:t})),e.type===s.NotificationComponentType.OnChainBody&&o.default.createElement(o.default.Fragment,null,e.Image&&o.default.createElement(e.Image,{notification:t}),e.From&&o.default.createElement(e.From,{notification:t}),e.To&&o.default.createElement(e.To,{notification:t}),e.Account&&o.default.createElement(e.Account,{notification:t}),e.Asset&&o.default.createElement(e.Asset,{notification:t}),e.AssetReceived&&o.default.createElement(e.AssetReceived,{notification:t}),e.Status&&o.default.createElement(e.Status,{notification:t}),e.Network&&o.default.createElement(e.Network,{notification:t}),e.Rate&&o.default.createElement(e.Rate,{notification:t}),e.Provider&&o.default.createElement(e.Provider,{notification:t}),e.NetworkFee&&o.default.createElement(e.NetworkFee,{notification:t})),e.type===s.NotificationComponentType.SnapBody&&o.default.createElement(e.Content,{notification:t}))}}},{package:"$root$",file:"ui/pages/notification-details/notification-details-body/notification-details-body.tsx"}],[7736,{"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../notifications/notification-components/types/notifications/notifications":7761,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationDetailsFooter=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=e("../../notifications/notification-components/types/notifications/notifications");n.NotificationDetailsFooter=({footer:e,notification:t})=>o.default.createElement(i.Box,{width:r.BlockSize.Full,display:r.Display.Flex,flexDirection:r.FlexDirection.Row,justifyContent:r.JustifyContent.spaceBetween,padding:4,gap:4},e.type===s.NotificationComponentType.OnChainFooter&&o.default.createElement(e.ScanLink,{notification:t}),e.type===s.NotificationComponentType.AnnouncementFooter&&o.default.createElement(i.Box,{display:r.Display.Flex,gap:4,flexDirection:r.FlexDirection.Row,width:r.BlockSize.Full},o.default.createElement(e.ExternalLink,{notification:t}),o.default.createElement(e.ExtensionLink,{notification:t})),e.type===s.NotificationComponentType.SnapFooter&&o.default.createElement(e.Link,{notification:t}))}}},{package:"$root$",file:"ui/pages/notification-details/notification-details-footer/notification-details-footer.tsx"}],[7737,{"../../../components/component-library":6469,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationDetailsHeader=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library");n.NotificationDetailsHeader=({children:e,onClickBack:t})=>o.default.createElement(i.HeaderBase,{padding:4,startAccessory:o.default.createElement(i.ButtonIcon,{ariaLabel:"Back",iconName:i.IconName.ArrowLeft,size:i.ButtonIconSize.Md,onClick:t,"data-testid":"notification-details-back-button"}),endAccessory:null},e)}}},{package:"$root$",file:"ui/pages/notification-details/notification-details-header/notification-details-header.tsx"}],[7738,{"../../components/component-library":6469,"../../components/multichain":6702,"../../components/multichain/pages/page":6806,"../../helpers/constants/design-system":7023,"../../helpers/constants/routes":7028,"../../hooks/metamask-notifications/useNotifications":7116,"../../hooks/useNotificationTimeouts":7174,"../../selectors/metamask-notifications/metamask-notifications":7948,"../notifications/notification-components":7753,"./notification-details-body/notification-details-body":7735,"./notification-details-footer/notification-details-footer":7736,"./notification-details-header/notification-details-header":7737,"./utils/utils":7739,"@metamask/notification-services-controller/notification-services":2255,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useNavigate)(),{notification:t}=function(){const{pathname:e}=(0,i.useLocation)(),t=(0,h.getExtractIdentifier)(e),n=(0,o.useSelector)((0,m.getMetamaskNotificationById)(t));return{notification:n}}();if(function(e){const{markNotificationAsRead:t}=(0,p.useMarkNotificationAsRead)(),{setNotificationTimeout:n}=(0,g.useSnapNotificationTimeouts)();(0,a.useEffect)(()=>(e&&t([{id:e.id,type:e.type,isRead:e.isRead}]),()=>{(null==e?void 0:e.type)===r.TRIGGER_TYPES.SNAP&&n(e.id)}),[])}(t),!t)return e(l.NOTIFICATIONS_ROUTE),null;if(!(0,f.hasNotificationComponents)(t.type))return e(l.NOTIFICATIONS_ROUTE),null;const n=f.NotificationComponents[t.type];return a.default.createElement(u.NotificationsPage,null,a.default.createElement(y.NotificationDetailsHeader,{onClickBack:()=>e(l.NOTIFICATIONS_ROUTE)},a.default.createElement(n.details.title,{notification:t})),a.default.createElement(d.Content,{padding:0},a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:2,width:c.BlockSize.Full,height:c.BlockSize.Full,justifyContent:c.JustifyContent.spaceBetween},a.default.createElement(b.NotificationDetailsBody,{body:n.details.body,notification:t}),a.default.createElement(E.NotificationDetailsFooter,{footer:n.footer,notification:t}))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=e("@metamask/notification-services-controller/notification-services"),s=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),l=e("../../helpers/constants/routes"),u=e("../../components/multichain"),d=e("../../components/multichain/pages/page"),p=e("../../hooks/metamask-notifications/useNotifications"),m=e("../../selectors/metamask-notifications/metamask-notifications"),f=e("../notifications/notification-components"),g=e("../../hooks/useNotificationTimeouts"),h=e("./utils/utils"),y=e("./notification-details-header/notification-details-header"),b=e("./notification-details-body/notification-details-body"),E=e("./notification-details-footer/notification-details-footer");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notification-details/notification-details.tsx"}],[7739,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getExtractIdentifier=function(e){if("string"!=typeof e)return"";const t=e.split("/");return t.length>2?t[2]:""}}}},{package:"$root$",file:"ui/pages/notification-details/utils/utils.ts"}],[7740,{"./notifications-settings":7744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./notifications-settings"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/notifications-settings/index.js"}],[7741,{"../../../shared/constants/metametrics":5796,"../../components/component-library":6469,"../../components/multichain":6702,"../../contexts/metamask-notifications/metamask-notifications":6983,"../../contexts/metametrics":6985,"../../helpers/constants/design-system":7023,"../../hooks/metamask-notifications/useNotifications":7116,"../../hooks/useI18nContext":7157,"../../selectors/identity/backup-and-sync":7946,"../../selectors/metamask-notifications/metamask-notifications":7948,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsSettingsAllowNotifications=function({loading:e,setLoading:t,disabled:n,dataTestId:g}){const h=(0,i.useI18nContext)(),y=(0,a.useContext)(r.MetaMetricsContext),{listNotifications:b}=(0,d.useMetamaskNotificationsContext)(),E=(0,o.useSelector)(l.selectIsMetamaskNotificationsEnabled),[k,C]=(0,a.useState)(E),v=(0,o.useSelector)(l.getIsUpdatingMetamaskNotifications),x=(0,o.useSelector)(u.selectIsBackupAndSyncEnabled),{enableNotifications:_,error:T}=(0,c.useEnableNotifications)(),{disableNotifications:S,error:I}=(0,c.useDisableNotifications)(),w=T||I;(0,a.useEffect)(()=>{t(v)},[v,t]),(0,a.useEffect)(()=>{C(E)},[E]),(0,a.useEffect)(()=>{!w&&E&&b()},[E,w,b]);const N=(0,a.useCallback)(async()=>{t(!0),E?(y({category:s.MetaMetricsEventCategory.NotificationSettings,event:s.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"notifications",was_profile_syncing_on:x,old_value:!0,new_value:!1}}),await S()):(y({category:s.MetaMetricsEventCategory.NotificationSettings,event:s.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"notifications",was_profile_syncing_on:x,old_value:!1,new_value:!0}}),await _()),t(!1),C(!k)},[t,E,S,_,k,x,y]),O=(0,a.useMemo)(()=>a.default.createElement(p.Text,{as:"a",href:"https://support.metamask.io/privacy-and-security/profile-privacy",target:"_blank",rel:"noopener noreferrer",key:"privacy-link",color:m.TextColor.infoDefault},h("notificationsSettingsPageAllowNotificationsLink")),[h]);return a.default.createElement(p.Box,{display:m.Display.Flex,justifyContent:m.JustifyContent.flexStart,flexDirection:m.FlexDirection.Column,alignItems:m.AlignItems.flexStart,gap:4,paddingLeft:8,paddingRight:8,paddingBottom:8},a.default.createElement(f.NotificationsSettingsBox,{value:k,onToggle:N,disabled:n,loading:e,dataTestId:g},a.default.createElement(f.NotificationsSettingsType,{title:h("allowNotifications")})),a.default.createElement(p.Text,{variant:m.TextVariant.bodyMd,color:m.TextColor.textAlternative},h("notificationsSettingsPageAllowNotifications",[O])),w&&a.default.createElement(p.Box,null,a.default.createElement(p.Text,{as:"p",color:m.TextColor.errorDefault},h(E?"turnOffMetamaskNotificationsError":"turnOnMetamaskNotificationsError"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("../../hooks/useI18nContext"),r=e("../../contexts/metametrics"),s=e("../../../shared/constants/metametrics"),c=e("../../hooks/metamask-notifications/useNotifications"),l=e("../../selectors/metamask-notifications/metamask-notifications"),u=e("../../selectors/identity/backup-and-sync"),d=e("../../contexts/metamask-notifications/metamask-notifications"),p=e("../../components/component-library"),m=e("../../helpers/constants/design-system"),f=e("../../components/multichain");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings-allow-notifications.tsx"}],[7742,{"../../../shared/constants/metametrics":5796,"../../components/multichain":6702,"../../contexts/metametrics":6985,"../../helpers/utils/util":7082,"../../hooks/metamask-notifications/useNotifications":7116,"../../hooks/metamask-notifications/useSwitchNotifications":7117,"@metamask/controller-utils":1349,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsSettingsPerAccount=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/controller-utils"),i=e("../../contexts/metametrics"),r=e("../../../shared/constants/metametrics"),s=e("../../hooks/metamask-notifications/useSwitchNotifications"),c=e("../../components/multichain"),l=e("../../hooks/metamask-notifications/useNotifications"),u=e("../../helpers/utils/util");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}n.NotificationsSettingsPerAccount=({address:e,name:t,isEnabled:n,isLoading:d,disabledSwitch:p,refetchAccountSettings:m})=>{const f=(0,a.useContext)(i.MetaMetricsContext),{toggleAccount:g,loading:h,error:y}=function(e,t){const{onChange:n,error:o}=(0,s.useSwitchAccountNotificationsChange)(),{listNotifications:i}=(0,l.useListNotifications)(),[r,c]=(0,a.useState)(!1);return{toggleAccount:(0,a.useCallback)(async a=>{c(!0);try{await n([e],a),await t(),i()}catch{}c(!1)},[e,i,t,n]),loading:r,error:o}}(e,m),b=d||h,E=y,k=(0,a.useCallback)(async()=>{f({category:r.MetaMetricsEventCategory.NotificationSettings,event:r.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"account_notifications",old_value:n,new_value:!n}}),await g(!n)},[e,n,g,f]),C=(0,o.toChecksumHexAddress)(e),v=(0,u.shortenAddress)(C);return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.NotificationsSettingsBox,{value:n??!1,onToggle:k,key:e,disabled:p,loading:b,error:E,dataTestId:`${v}-notifications-settings`},a.default.createElement(c.NotificationsSettingsAccount,{address:e,name:t})))}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings-per-account.tsx"}],[7743,{"../../../shared/constants/metametrics":5796,"../../components/component-library":6469,"../../components/multichain":6702,"../../contexts/metamask-notifications/metamask-notifications":6983,"../../contexts/metametrics":6985,"../../helpers/constants/design-system":7023,"../../hooks/metamask-notifications/useSwitchNotifications":7117,"../../hooks/useI18nContext":7157,"../../selectors/metamask-notifications/metamask-notifications":7948,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsSettingsTypes=function({disabled:e}){const t=(0,s.useI18nContext)(),{listNotifications:n}=(0,c.useMetamaskNotificationsContext)(),f=(0,a.useContext)(i.MetaMetricsContext),g=(0,o.useSelector)(m.selectIsFeatureAnnouncementsEnabled),{onChange:h,error:y}=(0,l.useSwitchFeatureAnnouncementsChange)(),[b,E]=(0,a.useState)(g);return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Box,{paddingLeft:8,paddingRight:8,paddingBottom:4,paddingTop:4,"data-testid":"notifications-settings-per-types"},a.default.createElement(u.Text,{variant:d.TextVariant.bodyMd,color:d.TextColor.textDefault},t("customizeYourNotifications")),a.default.createElement(u.Text,{variant:d.TextVariant.bodySm,color:d.TextColor.textAlternative},t("customizeYourNotificationsText"))),a.default.createElement(u.Box,{display:d.Display.Flex,justifyContent:d.JustifyContent.flexStart,flexDirection:d.FlexDirection.Column,alignItems:d.AlignItems.flexStart,gap:6,paddingLeft:8,paddingRight:8,paddingBottom:4},a.default.createElement(p.NotificationsSettingsBox,{value:b,onToggle:async()=>{E(!b);try{h(!b),f({category:r.MetaMetricsEventCategory.NotificationSettings,event:r.MetaMetricsEventName.NotificationsSettingsUpdated,properties:{settings_type:"product_announcements",old_value:b,new_value:!b}}),n()}catch(e){E(b)}},error:y,disabled:e,dataTestId:"product-announcements"},a.default.createElement(p.NotificationsSettingsType,{icon:u.IconName.Star,title:t("productAnnouncements")}))),a.default.createElement(u.Box,{borderColor:d.BorderColor.borderMuted,width:d.BlockSize.Full,style:{height:"1px",borderBottomWidth:0}}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("../../contexts/metametrics"),r=e("../../../shared/constants/metametrics"),s=e("../../hooks/useI18nContext"),c=e("../../contexts/metamask-notifications/metamask-notifications"),l=e("../../hooks/metamask-notifications/useSwitchNotifications"),u=e("../../components/component-library"),d=e("../../helpers/constants/design-system"),p=e("../../components/multichain"),m=e("../../selectors/metamask-notifications/metamask-notifications");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings-types.tsx"}],[7744,{"../../components/component-library":6469,"../../components/multichain":6702,"../../components/multichain/pages/page":6806,"../../helpers/constants/design-system":7023,"../../helpers/constants/routes":7028,"../../hooks/metamask-notifications/useSwitchNotifications":7117,"../../hooks/useI18nContext":7157,"../../selectors":7947,"../../selectors/metamask-notifications/metamask-notifications":7948,"./notifications-settings-allow-notifications":7741,"./notifications-settings-per-account":7742,"./notifications-settings-types":7743,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e;const t=(0,i.useNavigate)(),n=(0,i.useLocation)(),b=(0,r.useI18nContext)(),E=(0,o.useSelector)(p.selectIsMetamaskNotificationsEnabled),k=(0,o.useSelector)(p.getIsUpdatingMetamaskNotifications),C=function(){const e=(0,o.useSelector)(p.getValidNotificationAccounts),t=(0,o.useSelector)(m.getInternalAccounts),n=(0,a.useMemo)(()=>e.map(e=>t.find(t=>t.address.toLowerCase()===e.toLowerCase())).filter(e=>Boolean(e)),[e,t]);return n}(),[v,x]=(0,a.useState)(k),_=(0,a.useMemo)(()=>C.map(e=>e.address),[C]),T=(0,f.useAccountSettingsProps)(_),S=T.accountsBeingUpdated.length>0,I=async()=>{await T.update(_)},w=null===(e=n.state)||void 0===e?void 0:e.fromPage;return a.default.createElement(u.NotificationsPage,null,a.default.createElement(d.Header,{startAccessory:a.default.createElement(c.ButtonIcon,{ariaLabel:"Back",iconName:c.IconName.ArrowLeft,size:c.ButtonIconSize.Md,onClick:()=>t(w||s.NOTIFICATIONS_ROUTE)}),endAccessory:null},b("notifications")),a.default.createElement(d.Content,{padding:0},a.default.createElement(g.NotificationsSettingsAllowNotifications,{loading:v,setLoading:x,dataTestId:"notifications-settings-allow",disabled:S}),a.default.createElement(c.Box,{borderColor:l.BorderColor.borderMuted,width:l.BlockSize.Full,style:{height:"1px",borderBottomWidth:0}}),E&&a.default.createElement(a.default.Fragment,null,a.default.createElement(h.NotificationsSettingsTypes,{disabled:v||S}),a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Box,{paddingLeft:8,paddingRight:8,paddingBottom:4,paddingTop:4,"data-testid":"notifications-settings-per-account"},a.default.createElement(c.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault},b("accountActivity")),a.default.createElement(c.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textAlternative},b("accountActivityText"))),a.default.createElement(c.Box,{display:l.Display.Flex,justifyContent:l.JustifyContent.flexStart,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.flexStart,gap:6,paddingLeft:8,paddingRight:8,paddingBottom:4},C.map(e=>{var t;return a.default.createElement(y.NotificationsSettingsPerAccount,{key:e.id,address:e.address,name:e.metadata.name,disabledSwitch:T.initialLoading||S,isLoading:T.accountsBeingUpdated.includes(e.address),isEnabled:(null===(t=T.data)||void 0===t?void 0:t[e.address.toLowerCase()])??!1,refetchAccountSettings:I})}))))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=e("../../hooks/useI18nContext"),s=e("../../helpers/constants/routes"),c=e("../../components/component-library"),l=e("../../helpers/constants/design-system"),u=e("../../components/multichain"),d=e("../../components/multichain/pages/page"),p=e("../../selectors/metamask-notifications/metamask-notifications"),m=e("../../selectors"),f=e("../../hooks/metamask-notifications/useSwitchNotifications"),g=e("./notifications-settings-allow-notifications"),h=e("./notifications-settings-types"),y=e("./notifications-settings-per-account");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications-settings/notifications-settings.tsx"}],[7745,{"../../components/component-library":6469,"../../helpers/constants/design-system":7023,"../../hooks/useI18nContext":7157,"../../selectors/metamask-notifications/metamask-notifications":7948,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NewFeatureTag=function(){const e=(0,l.useI18nContext)();if((0,i.useSelector)(r.selectIsMetamaskNotificationsFeatureSeen))return null;return o.default.createElement(s.Tag,{backgroundColor:c.BackgroundColor.infoMuted,borderStyle:c.BorderStyle.none,borderRadius:c.BorderRadius.MD,label:e("new"),labelProps:{color:c.TextColor.primaryDefault,variant:c.TextVariant.bodySm},paddingLeft:2,paddingRight:2})};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("../../selectors/metamask-notifications/metamask-notifications"),s=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),l=e("../../hooks/useI18nContext")}}},{package:"$root$",file:"ui/pages/notifications/NewFeatureTag.tsx"}],[7746,{"./notifications":7767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./notifications"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/notifications/index.js"}],[7747,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../../../../helpers/utils/util":7082,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../helpers/utils/util"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain"),m=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ERC1155_RECEIVED,g.ERC1155_SENT]),y=e=>e.type===g.ERC1155_SENT,b=e=>y(e)?(0,r.t)("notificationItemNFTSentTo"):(0,r.t)("notificationItemNFTReceivedFrom"),E=e=>{const t=(0,l.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,u.createTextItems)([b(e)||"",t],d.TextVariant.bodySm)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{var n,a,i,r,s;return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:null!==(n=e.data.nft)&&void 0!==n&&n.image?m.NotificationListItemIconType.Nft:m.NotificationListItemIconType.Token,value:(null===(a=e.data.nft)||void 0===a?void 0:a.image)||"http://foo.com/bar.png",badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:E(e),description:(r=e,(0,u.createTextItems)([(null===(s=r.data.nft)||void 0===s?void 0:s.collection.name)||""],d.TextVariant.bodyMd)),createdAt:new Date(e.createdAt),amount:(null===(i=e.data.nft)||void 0===i?void 0:i.token_id)||"",onClick:t})},details:{title:({notification:e})=>o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} NFT`,date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:c.NotificationComponentType.OnChainBody,Image:({notification:e})=>{var t,n,a;const{nativeCurrencyLogo:i,nativeCurrencyName:r}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailNft,{networkSrc:i,tokenId:(null===(t=e.data.nft)||void 0===t?void 0:t.token_id)||"",tokenName:(null===(n=e.data.nft)||void 0===n?void 0:n.name)||"",tokenSrc:(null===(a=e.data.nft)||void 0===a?void 0:a.image)||"",networkName:r})},From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:()=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||""}),Asset:({notification:e})=>{var t,n,a;const{nativeCurrencyLogo:i}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailCollection,{icon:{src:(null===(t=e.data.nft)||void 0===t?void 0:t.image)||"",badgeSrc:i},label:(0,r.t)("notificationItemCollection")||"",collection:`${null===(n=e.data.nft)||void 0===n?void 0:n.collection.name} (${null===(a=e.data.nft)||void 0===a?void 0:a.token_id})`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/erc1155-sent-received/erc1155-sent-received.tsx"}],[7748,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../../../../helpers/utils/util":7082,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),u=e("../../../../helpers/utils/util"),d=e("../../../../helpers/utils/notification.util"),p=e("../../../../components/multichain"),m=e("../../../../helpers/constants/design-system"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ERC20_RECEIVED,g.ERC20_SENT]),y=e=>e.type===g.ERC20_SENT,b=e=>y(e)?(0,r.t)("notificationItemSentTo"):(0,r.t)("notificationItemReceivedFrom"),E=e=>{const t=(0,u.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,d.createTextItems)([b(e)||"",t],m.TextVariant.bodySm)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:l.NotificationListItemIconType.Token,value:e.data.token.image,badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:E(e),description:(n=e,(0,d.createTextItems)([n.data.token.name],m.TextVariant.bodyMd)),createdAt:new Date(e.createdAt),amount:`${(0,d.getAmount)(e.data.token.amount,e.data.token.decimals,{shouldEllipse:!0})} ${e.data.token.symbol}`,onClick:t});var n},details:{title:({notification:e})=>o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} ${e.data.token.symbol}`,date:(0,d.formatIsoDateString)(e.createdAt)}),body:{type:c.NotificationComponentType.OnChainBody,From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:({notification:e})=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:m.TextColor.successDefault,backgroundColor:m.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||"",action:o.default.createElement(p.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,r.t)("notificationItemTransactionId")||""})}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,d.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:e.data.token.image,badge:{src:t,position:f.BadgeWrapperPosition.topRight}},label:(0,r.t)("asset")||"",detail:e.data.token.symbol,fiatValue:`$${(0,d.getUsdAmount)(e.data.token.amount,e.data.token.decimals,e.data.token.usd)}`,value:`${(0,d.getAmount)(e.data.token.amount,e.data.token.decimals,{shouldEllipse:!0})} ${e.data.token.symbol}`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,d.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/erc20-sent-received/erc20-sent-received.tsx"}],[7749,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../../../../helpers/utils/util":7082,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../helpers/utils/util"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain"),m=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ERC721_RECEIVED,g.ERC721_SENT]),y=e=>e.type===g.ERC721_SENT,b=e=>y(e)?(0,r.t)("notificationItemNFTSentTo"):(0,r.t)("notificationItemNFTReceivedFrom"),E=e=>{const t=(0,l.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,u.createTextItems)([b(e)||"",t],d.TextVariant.bodySm)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:m.NotificationListItemIconType.Nft,value:e.data.nft.image,badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:E(e),description:(n=e,(0,u.createTextItems)([n.data.nft.collection.name],d.TextVariant.bodyMd)),createdAt:new Date(e.createdAt),amount:`#${e.data.nft.token_id}`,onClick:t});var n},details:{title:({notification:e})=>o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} NFT`,date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:c.NotificationComponentType.OnChainBody,Image:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailNft,{networkSrc:t,tokenId:e.data.nft.token_id,tokenName:e.data.nft.name,tokenSrc:e.data.nft.image,networkName:n})},From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:()=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||""}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailCollection,{icon:{src:e.data.nft.image,badgeSrc:t},label:(0,r.t)("notificationItemCollection")||"",collection:`${e.data.nft.collection.name} (${e.data.nft.token_id})`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/erc721-sent-received/erc721-sent-received.tsx"}],[7750,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../../../../helpers/utils/util":7082,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../helpers/utils/util"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain"),m=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),f=e("../../../../components/component-library");const{TRIGGER_TYPES:g}=i.NotificationServicesController.Constants,h=(0,s.isOfTypeNodeGuard)([g.ETH_RECEIVED,g.ETH_SENT]),y=e=>e.type===g.ETH_SENT,b=e=>y(e)?(0,r.t)("notificationItemSentTo"):(0,r.t)("notificationItemReceivedFrom"),E=e=>(0,u.getNetworkDetailsByChainId)(e.chain_id),k=e=>{const t=(0,l.shortenAddress)(y(e)?e.data.to:e.data.from);return(0,u.createTextItems)([b(e)||"",t],d.TextVariant.bodySm)},C=e=>{const{nativeCurrencySymbol:t}=E(e);return(0,u.createTextItems)([t],d.TextVariant.bodyMd)};n.components={guardFn:h,item:({notification:e,onClick:t})=>{const{nativeCurrencySymbol:n,nativeCurrencyLogo:a}=E(e);return o.default.createElement(p.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:m.NotificationListItemIconType.Token,value:a,badge:{icon:y(e)?f.IconName.Arrow2UpRight:f.IconName.Received,position:f.BadgeWrapperPosition.bottomRight}},title:k(e),description:C(e),createdAt:new Date(e.createdAt),amount:`${(0,u.formatAmount)(parseFloat(e.data.amount.eth),{shouldEllipse:!0})} ${n}`,onClick:t})},details:{title:({notification:e})=>{const{nativeCurrencySymbol:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailTitle,{title:`${y(e)?(0,r.t)("notificationItemSent"):(0,r.t)("notificationItemReceived")} ${t}`,date:(0,u.formatIsoDateString)(e.createdAt)})},body:{type:c.NotificationComponentType.OnChainBody,From:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemFrom")}${y(e)?` (${(0,r.t)("you")})`:""}`,address:e.data.from}),To:({notification:e})=>o.default.createElement(p.NotificationDetailAddress,{side:`${(0,r.t)("notificationItemTo")}${y(e)?"":` (${(0,r.t)("you")})`}`,address:e.data.to}),Status:({notification:e})=>o.default.createElement(p.NotificationDetailInfo,{icon:{iconName:f.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||"",action:o.default.createElement(p.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,r.t)("notificationItemTransactionId")||""})}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencySymbol:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t,badge:{src:t,position:f.BadgeWrapperPosition.topRight}},label:(0,r.t)("asset")||"",detail:n,fiatValue:`$${(0,u.formatAmount)(parseFloat(e.data.amount.usd),{shouldEllipse:!0})}`,value:`${(0,u.formatAmount)(parseFloat(e.data.amount.eth),{shouldEllipse:!0})} ${n}`})},Network:({notification:e})=>{const{nativeCurrencyLogo:t,nativeCurrencyName:n}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(p.NotificationDetailAsset,{icon:{src:t},label:(0,r.t)("notificationDetailNetwork")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(p.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(p.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/eth-sent-received/eth-sent-received.tsx"}],[7751,{"../../../../../shared/constants/metametrics":5796,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../contexts/metametrics":6985,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExternalLinkButton=n.ExtensionLinkButton=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../../shared/constants/metametrics"),i=e("../../../../contexts/metametrics"),r=e("../../../../components/multichain"),s=e("../../../../components/component-library");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const l=e=>{const t=(0,a.useContext)(i.MetaMetricsContext);return(0,a.useCallback)(()=>{t({category:o.MetaMetricsEventCategory.NotificationInteraction,event:o.MetaMetricsEventName.NotificationDetailClicked,properties:{notification_id:e.id,notification_type:e.type,clicked_item:e.clickType}})},[e.clickType,e.id,e.type,t])};n.ExtensionLinkButton=e=>{const{notification:t}=e,n=l({id:t.id,type:t.type,clickType:"internal_link"});return t.data.extensionLink?a.default.createElement(r.NotificationDetailButton,{variant:s.ButtonVariant.Primary,text:t.data.extensionLink.extensionLinkText,href:`/${t.data.extensionLink.extensionLinkRoute}`,isExternal:!0,onClick:n}):null};n.ExternalLinkButton=e=>{const{notification:t}=e,n=l({id:t.id,type:t.type,clickType:"external_link"});return t.data.externalLink?a.default.createElement(r.NotificationDetailButton,{variant:s.ButtonVariant.Secondary,text:t.data.externalLink.externalLinkText,href:`${t.data.externalLink.externalLinkUrl}`,isExternal:!0,onClick:n}):null}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/feature-announcement/annonucement-footer-buttons.tsx"}],[7752,{"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../node-guard":7756,"../types/notifications/notifications":7761,"./annonucement-footer-buttons":7751,"@metamask/notification-services-controller":2284,dompurify:4232,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a=f(e("react")),o=e("@metamask/notification-services-controller"),i=f(e("dompurify")),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),l=e("../../../../helpers/utils/notification.util"),u=e("../../../../components/component-library"),d=e("../../../../components/multichain"),p=e("../../../../helpers/constants/design-system"),m=e("./annonucement-footer-buttons");function f(e){return e&&e.__esModule?e:{default:e}}const g=(0,i.default)(window),{TRIGGER_TYPES:h}=o.NotificationServicesController.Constants,y=(0,r.isOfTypeNodeGuard)([h.FEATURES_ANNOUNCEMENT]),b=e=>(0,l.createTextItems)([e.data.shortDescription],p.TextVariant.bodyMd);n.components={guardFn:y,item:({notification:e,onClick:t})=>{return a.default.createElement(d.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:c.NotificationListItemIconType.Token,value:"./images/product-announcement-logo.svg"},title:(n=e,(0,l.createTextItems)([n.data.title],p.TextVariant.bodySm)),description:b(e),createdAt:new Date(e.createdAt),onClick:t});var n},details:{title:({notification:e})=>a.default.createElement(d.NotificationDetailTitle,{title:e.data.title,date:(0,l.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.AnnouncementBody,Image:({notification:e})=>a.default.createElement(u.Box,{display:p.Display.Block,width:p.BlockSize.Full,paddingLeft:4,paddingRight:4,paddingBottom:4},a.default.createElement(u.Box,{as:"img",src:`https:${e.data.image.url}?fm=jpg&fl=progressive&w=1000&q=80`,alt:e.data.title,title:e.data.title,display:p.Display.Block,justifyContent:p.JustifyContent.center,borderRadius:p.BorderRadius.XL,width:p.BlockSize.Full})),Description:({notification:e})=>a.default.createElement(u.Box,{paddingLeft:4,paddingRight:4},a.default.createElement(u.Text,{variant:p.TextVariant.bodyMd,as:"div",dangerouslySetInnerHTML:{__html:g.sanitize(e.data.longDescription)}}))}},footer:{type:s.NotificationComponentType.AnnouncementFooter,ExtensionLink:m.ExtensionLinkButton,ExternalLink:m.ExternalLinkButton}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/feature-announcement/feature-announcement.tsx"}],[7753,{"./erc1155-sent-received/erc1155-sent-received":7747,"./erc20-sent-received/erc20-sent-received":7748,"./erc721-sent-received/erc721-sent-received":7749,"./eth-sent-received/eth-sent-received":7750,"./feature-announcement/feature-announcement":7752,"./lido-stake-ready-to-be-withdrawn/lido-stake-ready-to-be-withdrawn":7754,"./lido-withdrawal-requested/lido-withdrawal-requested":7755,"./snap/snap":7758,"./stake/stake":7759,"./swap-completed/swap-completed":7760,"@metamask/notification-services-controller":2284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasNotificationComponents=n.TRIGGER_TYPES=n.NotificationComponents=void 0;var a=e("@metamask/notification-services-controller"),o=e("./erc20-sent-received/erc20-sent-received"),i=e("./erc721-sent-received/erc721-sent-received"),r=e("./erc1155-sent-received/erc1155-sent-received"),s=e("./eth-sent-received/eth-sent-received"),c=e("./feature-announcement/feature-announcement"),l=e("./stake/stake"),u=e("./swap-completed/swap-completed"),d=e("./lido-withdrawal-requested/lido-withdrawal-requested"),p=e("./lido-stake-ready-to-be-withdrawn/lido-stake-ready-to-be-withdrawn"),m=e("./snap/snap");const{TRIGGER_TYPES:f}=a.NotificationServicesController.Constants;n.TRIGGER_TYPES=f;const g=n.NotificationComponents={[f.ERC20_SENT]:o.components,[f.ERC20_RECEIVED]:o.components,[f.ERC721_SENT]:i.components,[f.ERC721_RECEIVED]:i.components,[f.ERC1155_SENT]:r.components,[f.ERC1155_RECEIVED]:r.components,[f.ETH_SENT]:s.components,[f.ETH_RECEIVED]:s.components,[f.FEATURES_ANNOUNCEMENT]:c.components,[f.ROCKETPOOL_STAKE_COMPLETED]:l.components,[f.ROCKETPOOL_UNSTAKE_COMPLETED]:l.components,[f.LIDO_STAKE_COMPLETED]:l.components,[f.LIDO_WITHDRAWAL_COMPLETED]:l.components,[f.LIDO_WITHDRAWAL_REQUESTED]:d.components,[f.METAMASK_SWAP_COMPLETED]:u.components,[f.LIDO_STAKE_READY_TO_BE_WITHDRAWN]:p.components,[f.SNAP]:m.components};n.hasNotificationComponents=e=>e in g}}},{package:"$root$",file:"ui/pages/notifications/notification-components/index.ts"}],[7754,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../components/multichain"),l=e("../../../../../shared/lib/translate"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),m=e("../../../../components/component-library");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,r.isOfTypeNodeGuard)([f.LIDO_STAKE_READY_TO_BE_WITHDRAWN]),h=e=>{const t=(0,u.formatAmount)(parseFloat(e.data.staked_eth.amount),{shouldEllipse:!0}),n=(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawnMessage",[`${t} ${e.data.staked_eth.symbol}`])||"";return(0,u.createTextItems)([n],d.TextVariant.bodyMd)};n.components={guardFn:g,item:({notification:e,onClick:t})=>o.default.createElement(c.NotificationListItem,{id:e.trigger_id,isRead:e.isRead,icon:{type:p.NotificationListItemIconType.Token,value:e.data.staked_eth.image,badge:{icon:m.IconName.Stake,position:m.BadgeWrapperPosition.bottomRight}},title:(0,u.createTextItems)([(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawn")||""],d.TextVariant.bodySm),description:h(e),createdAt:new Date(e.createdAt),onClick:t}),details:{title:({notification:e})=>o.default.createElement(c.NotificationDetailTitle,{title:(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawn")||"",date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(c.NotificationDetailAddress,{side:(0,l.t)("account")||"",address:e.address}):null,Status:()=>o.default.createElement(c.NotificationDetailInfo,{icon:{iconName:m.IconName.Check,color:d.TextColor.successDefault,backgroundColor:d.BackgroundColor.successMuted},label:(0,l.t)("notificationItemStatus")||"",detail:(0,l.t)("notificationItemConfirmed")||""}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(c.NotificationDetailAsset,{icon:{src:e.data.staked_eth.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,l.t)("notificationItemLidoStakeReadyToBeWithdrawn")||"",detail:e.data.staked_eth.symbol,fiatValue:`$${(0,u.formatAmount)(parseFloat(e.data.staked_eth.usd),{shouldEllipse:!0})}`,value:`${(0,u.formatAmount)(parseFloat(e.data.staked_eth.amount),{shouldEllipse:!0})} ${e.data.staked_eth.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(c.NotificationDetailAsset,{icon:{src:e.data.staked_eth.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,l.t)("notificationItemStakingProvider")||"",detail:e.data.staked_eth.symbol})}}},footer:{type:s.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(c.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/lido-stake-ready-to-be-withdrawn/lido-stake-ready-to-be-withdrawn.tsx"}],[7755,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),l=e("../../../../components/multichain"),u=e("../../../../helpers/utils/notification.util"),d=e("../../../../../shared/lib/translate"),p=e("../../../../helpers/constants/design-system"),m=e("../../../../components/component-library");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,r.isOfTypeNodeGuard)([f.LIDO_WITHDRAWAL_REQUESTED]),h=e=>{const t=(0,u.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0}),n=(0,d.t)("notificationItemLidoWithdrawalRequestedMessage",[`${t} ${e.data.stake_in.symbol}`])||"";return(0,u.createTextItems)([n],p.TextVariant.bodyMd)};n.components={guardFn:g,item:({notification:e,onClick:t})=>o.default.createElement(l.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:c.NotificationListItemIconType.Token,value:e.data.stake_in.image,badge:{icon:m.IconName.Stake,position:m.BadgeWrapperPosition.bottomRight}},title:(0,u.createTextItems)([(0,d.t)("notificationItemUnStakingRequested")||""],p.TextVariant.bodySm),description:h(e),createdAt:new Date(e.createdAt),amount:`${(0,u.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0})} ${e.data.stake_in.symbol}`,onClick:t}),details:{title:({notification:e})=>o.default.createElement(l.NotificationDetailTitle,{title:(0,d.t)("notificationItemUnStakingRequested")||"",date:(0,u.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(l.NotificationDetailAddress,{side:(0,d.t)("account")||"",address:e.address}):null,Status:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:m.IconName.Check,color:p.TextColor.successDefault,backgroundColor:p.BackgroundColor.successMuted},label:(0,d.t)("notificationItemStatus")||"",detail:(0,d.t)("notificationItemConfirmed")||"",action:o.default.createElement(l.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,d.t)("notificationItemTransactionId")||""})}),Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_in.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,d.t)("notificationItemUnStakingRequested")||"",detail:e.data.stake_in.symbol,fiatValue:`$${(0,u.getUsdAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,e.data.stake_in.usd)}`,value:`${(0,u.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0})} ${e.data.stake_in.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,u.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_in.image,badge:{src:t,position:m.BadgeWrapperPosition.topRight}},label:(0,d.t)("notificationItemStakingProvider")||"",detail:"Lido-staked ETH"})}}},footer:{type:s.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(l.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/lido-withdrawal-requested/lido-withdrawal-requested.tsx"}],[7756,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isOfTypeNodeGuard=void 0;n.isOfTypeNodeGuard=e=>t=>e.includes(t.type)}}},{package:"$root$",file:"ui/pages/notifications/notification-components/node-guard.ts"}],[7757,{"../../../../../shared/constants/metametrics":5796,"../../../../components/app/snaps/snap-link-warning":6236,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../contexts/metametrics":6985,"../../../../hooks/snaps/useSnapNavigation":7129,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapFooterButton=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=u(e("../../../../hooks/snaps/useSnapNavigation")),i=u(e("../../../../components/app/snaps/snap-link-warning")),r=e("../../../../components/multichain"),s=e("../../../../components/component-library"),c=e("../../../../contexts/metametrics"),l=e("../../../../../shared/constants/metametrics");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}n.SnapFooterButton=e=>{var t;const n=(0,a.useContext)(c.MetaMetricsContext),{useSnapNavigate:u}=(0,o.default)(),[d,p]=(0,a.useState)(!1),m=e.notification.data,f=null==m||null===(t=m.detailedView)||void 0===t?void 0:t.footerLink,g=(0,a.useCallback)(()=>{p(!1)},[]),h=(0,a.useCallback)((t,a)=>{n({category:l.MetaMetricsEventCategory.NotificationInteraction,event:l.MetaMetricsEventName.NotificationDetailClicked,properties:{notification_id:e.notification.id,notification_type:e.notification.type,clicked_item:a?"external_link":"internal_link"}}),a?p(!0):u(t)},[u,e.notification.id,e.notification.type,n]);if(!f)return null;const{href:y,text:b}=f,E=!y.startsWith("metamask:");return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,{isOpen:d,onClose:g,url:y}),a.default.createElement(r.NotificationDetailButton,{variant:s.ButtonVariant.Secondary,isExternal:E,text:b,onClick:()=>h(y,E)}))}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/snap/snap-footer-button.tsx"}],[7758,{"../../../../components/app/snaps/snap-icon":6232,"../../../../components/app/snaps/snap-ui-markdown":6289,"../../../../components/app/snaps/snap-ui-renderer":6328,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../../../../helpers/utils/util":7082,"../../../../hooks/metamask-notifications/useNotifications":7116,"../../../../selectors":7947,"../node-guard":7756,"../types/notifications/notifications":7761,"./snap-footer-button":7757,"@metamask/notification-services-controller/notification-services":2255,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("@metamask/notification-services-controller/notification-services"),c=e("../../../../components/multichain"),l=e("../../../../selectors"),u=e("../../../../helpers/utils/util"),d=e("../types/notifications/notifications"),p=e("../../../../helpers/utils/notification.util"),m=e("../../../../components/app/snaps/snap-ui-renderer"),f=e("../../../../helpers/constants/design-system"),g=e("../../../../components/component-library"),h=e("../node-guard"),y=e("../../../../components/app/snaps/snap-icon"),b=e("../../../../hooks/metamask-notifications/useNotifications"),E=e("../../../../components/app/snaps/snap-ui-markdown"),k=e("./snap-footer-button");n.components={guardFn:(0,h.isOfTypeNodeGuard)([s.TRIGGER_TYPES.SNAP]),item:({notification:e,onClick:t})=>{const n=(0,r.useNavigate)(),a=(0,i.useSelector)(l.getSnapsMetadata),s=(0,u.getSnapName)(a),{markNotificationAsRead:d}=(0,b.useMarkNotificationAsRead)();return o.default.createElement(c.NotificationListItemSnap,{id:e.id,snapId:e.data.origin,isRead:e.isRead,createdAt:new Date(e.createdAt),title:{items:[{text:s(e.data.origin)}]},snapMessage:e.data.message,handleSnapClick:t,handleSnapButton:()=>{e.isRead||d([{id:e.id,type:e.type,isRead:e.isRead}]),n((0,u.getSnapRoute)(e.data.origin))}})},details:{title:({notification:e})=>o.default.createElement(c.NotificationDetailTitle,{title:e.data.detailedView.title,date:(0,p.formatIsoDateString)(e.createdAt)}),body:{type:d.NotificationComponentType.SnapBody,Content:({notification:e})=>{const t=(0,i.useSelector)(l.getSnapsMetadata),n=(0,u.getSnapName)(t),a=e.data.origin;return o.default.createElement(o.default.Fragment,null,o.default.createElement(g.Box,{display:f.Display.Flex,style:{borderBottom:"1px solid var(--color-border-muted)"},flexDirection:f.FlexDirection.Column,padding:[4,2,4,4]},o.default.createElement(g.Box,{display:f.Display.Flex,alignItems:f.AlignItems.center,paddingBottom:2},o.default.createElement(y.SnapIcon,{snapId:a,avatarSize:g.IconSize.Xl}),o.default.createElement(g.Text,{paddingLeft:4,fontWeight:f.FontWeight.Medium},n(a))),o.default.createElement(E.SnapUIMarkdown,{markdown:!0},e.data.message)),o.default.createElement(g.Box,{paddingLeft:1,paddingRight:1},o.default.createElement(m.SnapUIRenderer,{snapId:e.data.origin,interfaceId:e.data.detailedView.interfaceId,contentBackgroundColor:f.BackgroundColor.backgroundDefault})))}}},footer:{type:d.NotificationComponentType.SnapFooter,Link:k.SnapFooterButton}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/snap/snap.tsx"}],[7759,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../../../../../shared/lib/translate"),s=e("../node-guard"),c=e("../types/notifications/notifications"),l=e("../../../../components/multichain"),u=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),d=e("../../../../components/component-library"),p=e("../../../../helpers/utils/notification.util"),m=e("../../../../helpers/constants/design-system");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,s.isOfTypeNodeGuard)([f.ROCKETPOOL_STAKE_COMPLETED,f.ROCKETPOOL_UNSTAKE_COMPLETED,f.LIDO_STAKE_COMPLETED,f.LIDO_WITHDRAWAL_COMPLETED]),h={[f.LIDO_STAKE_COMPLETED]:(0,r.t)("notificationItemStaked"),[f.LIDO_WITHDRAWAL_COMPLETED]:(0,r.t)("notificationItemUnStakeCompleted"),[f.ROCKETPOOL_STAKE_COMPLETED]:(0,r.t)("notificationItemStakeCompleted"),[f.ROCKETPOOL_UNSTAKE_COMPLETED]:(0,r.t)("notificationItemUnStakeCompleted")},y={[f.ROCKETPOOL_STAKE_COMPLETED]:"staked",[f.ROCKETPOOL_UNSTAKE_COMPLETED]:"unstaked",[f.LIDO_STAKE_COMPLETED]:"staked",[f.LIDO_WITHDRAWAL_COMPLETED]:"unstaked"},b={[f.LIDO_STAKE_COMPLETED]:"Lido-staked ETH",[f.LIDO_WITHDRAWAL_COMPLETED]:"Lido-staked ETH",[f.ROCKETPOOL_STAKE_COMPLETED]:"Rocket Pool-staked ETH",[f.ROCKETPOOL_UNSTAKE_COMPLETED]:"Rocket Pool-staked ETH"},E=e=>{const t=y[e.type];return(0,p.createTextItems)(["staked"===t?e.data.stake_out.symbol:e.data.stake_in.symbol],m.TextVariant.bodyMd)};n.components={guardFn:g,item:({notification:e,onClick:t})=>{const n=y[e.type],a="staked"===n?e.data.stake_in:e.data.stake_out,i=(0,p.getAmount)(a.amount,a.decimals,{shouldEllipse:!0});return o.default.createElement(l.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:u.NotificationListItemIconType.Token,value:e.data.stake_out.image,badge:{icon:d.IconName.Stake,position:d.BadgeWrapperPosition.bottomRight}},title:(r=e,(0,p.createTextItems)([h[r.type]||""],m.TextVariant.bodySm)),description:E(e),createdAt:new Date(e.createdAt),amount:`${i} ${"staked"===n?e.data.stake_in.symbol:e.data.stake_out.symbol}`,onClick:t});var r},details:{title:({notification:e})=>{const t="staked"===y[e.type]?`${(0,r.t)("notificationItemStaked")} ${e.data.stake_in.symbol}`:`${(0,r.t)("notificationItemUnStaked")} ${e.data.stake_in.symbol}`;return o.default.createElement(l.NotificationDetailTitle,{title:t,date:(0,p.formatIsoDateString)(e.createdAt)})},body:{type:c.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(l.NotificationDetailAddress,{side:(0,r.t)("account")||"",address:e.address}):null,Asset:({notification:e})=>{const t=y[e.type],{nativeCurrencyLogo:n}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_in.image,badge:{src:n,position:d.BadgeWrapperPosition.topRight}},label:"staked"===t?(0,r.t)("notificationItemStaked")||"":(0,r.t)("notificationItemUnStaked")||"",detail:e.data.stake_in.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,e.data.stake_in.usd)}`,value:`${(0,p.getAmount)(e.data.stake_in.amount,e.data.stake_in.decimals,{shouldEllipse:!0})} ${e.data.stake_in.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_out.image,badge:{src:t,position:d.BadgeWrapperPosition.topRight}},label:(0,r.t)("notificationItemReceived")||"",detail:e.data.stake_out.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.stake_out.amount,e.data.stake_out.decimals,e.data.stake_out.usd)}`,value:`${(0,p.getAmount)(e.data.stake_out.amount,e.data.stake_out.decimals,{shouldEllipse:!0})} ${e.data.stake_out.symbol}`})},Status:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:d.IconName.Check,color:m.TextColor.successDefault,backgroundColor:m.BackgroundColor.successMuted},label:(0,r.t)("notificationItemStatus")||"",detail:(0,r.t)("notificationItemConfirmed")||"",action:o.default.createElement(l.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,r.t)("notificationItemTransactionId")||""})}),Provider:({notification:e})=>{const t=y[e.type],n=b[e.type];return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.stake_out.image,badge:{src:"staked"===t?e.data.stake_out.image:e.data.stake_in.image}},label:(0,r.t)("notificationItemStakingProvider")||"",detail:n})},NetworkFee:({notification:e})=>o.default.createElement(l.NotificationDetailNetworkFee,{notification:e})}},footer:{type:c.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(l.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/stake/stake.tsx"}],[7760,{"../../../../../shared/lib/translate":5893,"../../../../components/component-library":6469,"../../../../components/multichain":6702,"../../../../components/multichain/notification-list-item-icon/notification-list-item-icon":6770,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/notification.util":7068,"../node-guard":7756,"../types/notifications/notifications":7761,"@metamask/notification-services-controller":2284,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.components=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("@metamask/notification-services-controller"),r=e("../node-guard"),s=e("../types/notifications/notifications"),c=e("../../../../../shared/lib/translate"),l=e("../../../../components/multichain"),u=e("../../../../components/multichain/notification-list-item-icon/notification-list-item-icon"),d=e("../../../../components/component-library"),p=e("../../../../helpers/utils/notification.util"),m=e("../../../../helpers/constants/design-system");const{TRIGGER_TYPES:f}=i.NotificationServicesController.Constants,g=(0,r.isOfTypeNodeGuard)([f.METAMASK_SWAP_COMPLETED]),h=e=>(0,p.createTextItems)([e.data.token_out.symbol],m.TextVariant.bodyMd);n.components={guardFn:g,item:({notification:e,onClick:t})=>{return o.default.createElement(l.NotificationListItem,{id:e.id,isRead:e.isRead,icon:{type:u.NotificationListItemIconType.Token,value:e.data.token_out.image,badge:{icon:d.IconName.SwapHorizontal,position:d.BadgeWrapperPosition.bottomRight}},title:(n=e,(0,p.createTextItems)([(0,c.t)("notificationItemSwapped")||"",n.data.token_in.symbol,(0,c.t)("notificationItemSwappedFor")||""],m.TextVariant.bodySm)),description:h(e),createdAt:new Date(e.createdAt),amount:`${(0,p.getAmount)(e.data.token_out.amount,e.data.token_out.decimals,{shouldEllipse:!0})} ${e.data.token_out.symbol}`,onClick:t});var n},details:{title:({notification:e})=>o.default.createElement(l.NotificationDetailTitle,{title:`${(0,c.t)("notificationItemSwapped")||""} ${e.data.token_out.symbol}`,date:(0,p.formatIsoDateString)(e.createdAt)}),body:{type:s.NotificationComponentType.OnChainBody,Account:({notification:e})=>e.address?o.default.createElement(l.NotificationDetailAddress,{side:(0,c.t)("account")||"",address:e.address}):null,Asset:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.token_in.image,badge:{src:t,position:d.BadgeWrapperPosition.topRight}},label:(0,c.t)("notificationItemSwapped")||"",detail:e.data.token_in.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.token_in.amount,e.data.token_in.decimals,e.data.token_in.usd)}`,value:`${(0,p.getAmount)(e.data.token_in.amount,e.data.token_in.decimals,{shouldEllipse:!0})} ${e.data.token_in.symbol}`})},AssetReceived:({notification:e})=>{const{nativeCurrencyLogo:t}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:e.data.token_out.image,badge:{src:t,position:d.BadgeWrapperPosition.topRight}},label:(0,c.t)("notificationItemTo")||"",detail:e.data.token_out.symbol,fiatValue:`$${(0,p.getUsdAmount)(e.data.token_out.amount,e.data.token_out.decimals,e.data.token_out.usd)}`,value:`${(0,p.getAmount)(e.data.token_out.amount,e.data.token_out.decimals,{shouldEllipse:!0})} ${e.data.token_out.symbol}`})},Status:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:d.IconName.Check,color:m.TextColor.successDefault,backgroundColor:m.BackgroundColor.successMuted},label:(0,c.t)("notificationItemStatus")||"",detail:(0,c.t)("notificationItemConfirmed")||"",action:o.default.createElement(l.NotificationDetailCopyButton,{notification:e,text:e.tx_hash,displayText:(0,c.t)("notificationItemTransactionId")||""})}),Network:({notification:e})=>{const{nativeCurrencyName:t,nativeCurrencyLogo:n}=(0,p.getNetworkDetailsByChainId)(e.chain_id);return o.default.createElement(l.NotificationDetailAsset,{icon:{src:n},label:(0,c.t)("notificationItemNetwork")||"",detail:t})},Rate:({notification:e})=>o.default.createElement(l.NotificationDetailInfo,{icon:{iconName:d.IconName.SwapHorizontal,color:m.TextColor.infoDefault,backgroundColor:m.BackgroundColor.infoMuted},label:(0,c.t)("notificationItemRate")||"",detail:`1 ${e.data.token_out.symbol}  ${(1/parseFloat(e.data.rate)).toFixed(5)} ${e.data.token_in.symbol}`}),NetworkFee:({notification:e})=>o.default.createElement(l.NotificationDetailNetworkFee,{notification:e})}},footer:{type:s.NotificationComponentType.OnChainFooter,ScanLink:({notification:e})=>o.default.createElement(l.NotificationDetailBlockExplorerButton,{notification:e,chainId:e.chain_id,txHash:e.tx_hash})}}}}},{package:"$root$",file:"ui/pages/notifications/notification-components/swap-completed/swap-completed.tsx"}],[7761,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationComponentType=void 0;n.NotificationComponentType=function(e){return e.AnnouncementBody="body_feature_announcement",e.AnnouncementFooter="footer_feature_announcement",e.OnChainBody="body_onchain_notification",e.OnChainFooter="footer_onchain_notification",e.SnapBody="body_snap_notification",e.SnapFooter="footer_snap_notification",e}({})}}},{package:"$root$",file:"ui/pages/notifications/notification-components/types/notifications/notifications.ts"}],[7762,{"../../../shared/constants/metametrics":5796,"../../components/component-library":6469,"../../contexts/metametrics":6985,"../../helpers/constants/design-system":7023,"../../helpers/constants/routes":7028,"../../hooks/metamask-notifications/useNotifications":7116,"../../hooks/useNotificationTimeouts":7174,"./notification-components":7753,"@metamask/utils":2908,react:5258,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsListItem=function({notification:e}){const t=(0,o.useNavigate)(),n=(0,a.useContext)(r.MetaMetricsContext),{setNotificationTimeout:f}=(0,p.useSnapNotificationTimeouts)(),{markNotificationAsRead:g}=(0,d.useMarkNotificationAsRead)(),h=(0,a.useCallback)(()=>{n({category:s.MetaMetricsEventCategory.NotificationInteraction,event:s.MetaMetricsEventName.NotificationClicked,properties:{notification_id:e.id,notification_type:e.type,..."chain_id"in e&&{chain_id:e.chain_id},previously_read:e.isRead}}),g([{id:e.id,type:e.type,isRead:e.isRead}]),e.type!==m.TRIGGER_TYPES.SNAP||(0,i.hasProperty)(e.data,"detailedView")?t(`${u.NOTIFICATIONS_ROUTE}/${e.id}`):f(e.id)},[e,g,t]);if(!(0,m.hasNotificationComponents)(e.type))return null;const y=m.NotificationComponents[e.type];return a.default.createElement(c.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Row,width:l.BlockSize.Full,"data-testid":`notification-list-item-${e.id}`},a.default.createElement(y.item,{notification:e,onClick:h}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("@metamask/utils"),r=e("../../contexts/metametrics"),s=e("../../../shared/constants/metametrics"),c=e("../../components/component-library"),l=e("../../helpers/constants/design-system"),u=e("../../helpers/constants/routes"),d=e("../../hooks/metamask-notifications/useNotifications"),p=e("../../hooks/useNotificationTimeouts"),m=e("./notification-components");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-item.tsx"}],[7763,{"../../components/component-library":6469,"../../helpers/constants/design-system":7023,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsPlaceholder=function({title:e,text:t}){return o.default.createElement(i.Box,{height:r.BlockSize.Full,width:r.BlockSize.Full,display:r.Display.Flex,justifyContent:r.JustifyContent.center,alignItems:r.AlignItems.center,flexDirection:r.FlexDirection.Column,gap:2,"data-testid":"notifications-list-placeholder"},o.default.createElement(i.Icon,{name:i.IconName.Notification,size:i.IconSize.Xl}),o.default.createElement(i.Text,{variant:r.TextVariant.headingSm},e),o.default.createElement(i.Text,{variant:r.TextVariant.bodyMd,textAlign:r.TextAlign.Center},t))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../components/component-library"),r=e("../../helpers/constants/design-system")}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-placeholder.tsx"}],[7764,{"../../../shared/constants/metametrics":5796,"../../components/component-library":6469,"../../contexts/metametrics":6985,"../../helpers/constants/design-system":7023,"../../hooks/metamask-notifications/useNotifications":7116,"../../hooks/useI18nContext":7157,"../../hooks/useNotificationTimeouts":7174,"@metamask/notification-services-controller/notification-services":2255,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsListReadAllButton=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/notification-services-controller/notification-services"),i=e("../../contexts/metametrics"),r=e("../../../shared/constants/metametrics"),s=e("../../hooks/useI18nContext"),c=e("../../hooks/metamask-notifications/useNotifications"),l=e("../../components/component-library"),u=e("../../helpers/constants/design-system"),d=e("../../hooks/useNotificationTimeouts");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}n.NotificationsListReadAllButton=({notifications:e})=>{const t=(0,s.useI18nContext)(),{markNotificationAsRead:n}=(0,c.useMarkNotificationAsRead)(),p=(0,a.useContext)(i.MetaMetricsContext),{setNotificationTimeout:m}=(0,d.useSnapNotificationTimeouts)();return a.default.createElement(l.Box,{paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,className:"notifications__list__read__all__button"},a.default.createElement(l.Button,{onClick:()=>{let t=[];e&&e.length>0&&(t=e.filter(e=>(null==e?void 0:e.id)!==undefined&&!e.isRead).map(e=>({id:e.id,type:e.type,isRead:e.isRead})),t.filter(e=>e.type===o.TRIGGER_TYPES.SNAP).forEach(e=>m(e.id))),p({category:r.MetaMetricsEventCategory.NotificationInteraction,event:r.MetaMetricsEventName.MarkAllNotificationsRead}),n(t)},variant:l.ButtonVariant.Primary,width:u.BlockSize.Full,"data-testid":"notifications-list-read-all-button"},t("notificationsMarkAllAsRead")))}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-read-all-button.tsx"}],[7765,{"../../../shared/constants/metametrics":5796,"../../components/component-library":6469,"../../contexts/metamask-notifications/metamask-notifications":6983,"../../contexts/metametrics":6985,"../../helpers/constants/design-system":7023,"../../hooks/metamask-notifications/useNotifications":7116,"../../hooks/useI18nContext":7157,"../../selectors/metamask-notifications/metamask-notifications":7948,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsListTurnOnNotifications=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("../../hooks/useI18nContext"),r=e("../../contexts/metametrics"),s=e("../../../shared/constants/metametrics"),c=e("../../hooks/metamask-notifications/useNotifications"),l=e("../../selectors/metamask-notifications/metamask-notifications"),u=e("../../contexts/metamask-notifications/metamask-notifications"),d=e("../../components/component-library"),p=e("../../helpers/constants/design-system");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}n.NotificationsListTurnOnNotifications=()=>{const e=(0,i.useI18nContext)(),t=(0,a.useContext)(r.MetaMetricsContext),{listNotifications:n}=(0,u.useMetamaskNotificationsContext)(),{enableNotifications:m,error:f}=(0,c.useEnableNotifications)(),g=f,h=(0,o.useSelector)(l.getIsUpdatingMetamaskNotifications),[y,b]=(0,a.useState)(h||!1);(0,a.useEffect)(()=>{b(h)},[h]);const E=a.default.createElement(d.Text,{as:"a",href:"https://metamask.io/privacy.html",target:"_blank",rel:"noopener noreferrer",key:"privacy-link",color:p.TextColor.infoDefault},e("turnOnMetamaskNotificationsMessagePrivacyLink")),k=a.default.createElement(d.Text,{as:"span",fontWeight:p.FontWeight.Bold,key:"strong-text"},e("turnOnMetamaskNotificationsMessagePrivacyBold"));return a.default.createElement(d.Container,{maxWidth:d.ContainerMaxWidth.Sm,height:p.BlockSize.Full,margin:"auto",display:p.Display.Flex,justifyContent:p.JustifyContent.center,alignItems:p.AlignItems.center,flexDirection:p.FlexDirection.Column,gap:4,"data-testid":"notifications-list-turn-on-notifications",textAlign:p.TextAlign.Center,paddingLeft:4,paddingRight:4,paddingTop:4},a.default.createElement(d.Text,{variant:p.TextVariant.headingSm},e("metamaskNotificationsAreOff")),a.default.createElement(d.Box,{as:"img",src:"./images/turn-on-metamask-notifications.png",width:p.BlockSize.Full,borderRadius:p.BorderRadius.MD}),a.default.createElement(d.Text,{as:"p"},e("turnOnMetamaskNotificationsMessageSecond",[E])),a.default.createElement(d.Text,{as:"p"},e("turnOnMetamaskNotificationsMessageThird",[k])),a.default.createElement(d.Box,null,a.default.createElement(d.Button,{onClick:()=>(async()=>{await m(),t({category:s.MetaMetricsEventCategory.NotificationInteraction,event:s.MetaMetricsEventName.EnablingNotifications}),g||h||n()})(),size:d.ButtonSize.Md,disabled:y,loading:y},e("turnOnMetamaskNotificationsButton")),g&&a.default.createElement(d.Text,{as:"p",color:p.TextColor.errorDefault},e("turnOnMetamaskNotificationsError"))))}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list-turn-on-notifications.tsx"}],[7766,{"../../components/component-library":6469,"../../components/ui/icon/preloader/preloader-icon.component":6901,"../../helpers/constants/design-system":7023,"../../hooks/useI18nContext":7157,"../../selectors/metamask-notifications/metamask-notifications":7948,"./notifications-list-item":7762,"./notifications-list-placeholder":7763,"./notifications-list-read-all-button":7764,"./notifications-list-turn-on-notifications":7765,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationsList=function(e){return a.default.createElement(i.Box,{"data-testid":"notifications-list",height:r.BlockSize.Full,width:r.BlockSize.Full,className:"notifications__list"},a.default.createElement(k,e),e.notifications.length>0&&e.notificationsCount>0?a.default.createElement(m.NotificationsListReadAllButton,{notifications:e.notifications}):null)},n.TAB_KEYS=void 0;var a=f(e("react")),o=e("react-redux"),i=e("../../components/component-library"),r=e("../../helpers/constants/design-system"),s=f(e("../../components/ui/icon/preloader/preloader-icon.component")),c=e("../../selectors/metamask-notifications/metamask-notifications"),l=e("../../hooks/useI18nContext"),u=e("./notifications-list-placeholder"),d=e("./notifications-list-turn-on-notifications"),p=e("./notifications-list-item"),m=e("./notifications-list-read-all-button");function f(e){return e&&e.__esModule?e:{default:e}}let g=n.TAB_KEYS=function(e){return e.ALL="notifications-all-tab",e.WALLET="notifications-wallet-tab",e.WEB3="notifications-other-tab",e}({});function h(){return a.default.createElement(i.Box,{height:r.BlockSize.Full,width:r.BlockSize.Full,display:r.Display.Flex,justifyContent:r.JustifyContent.center,alignItems:r.AlignItems.center,flexDirection:r.FlexDirection.Column,"data-testid":"notifications-list-loading"},a.default.createElement(s.default,{size:36}))}function y(){const e=(0,l.useI18nContext)();return a.default.createElement(u.NotificationsPlaceholder,{title:e("notificationsPageEmptyTitle"),text:e("notificationsPageNoNotificationsContent")})}function b(){const e=(0,l.useI18nContext)();return a.default.createElement(u.NotificationsPlaceholder,{title:e("notificationsPageErrorTitle"),text:e("notificationsPageErrorContent")})}function E(e){const{notification:t}=e;return a.default.createElement(p.NotificationsListItem,{notification:t})}function k({activeTab:e,notifications:t,isLoading:n,isError:i}){const r=(0,o.useSelector)(c.selectIsMetamaskNotificationsEnabled);return e!==g.WALLET||r?n?a.default.createElement(h,null):i?a.default.createElement(b,null):0===t.length?a.default.createElement(y,null):a.default.createElement(a.default.Fragment,null,t.map(e=>a.default.createElement(E,{key:e.id,notification:e}))):a.default.createElement(d.NotificationsListTurnOnNotifications,null)}}}},{package:"$root$",file:"ui/pages/notifications/notifications-list.tsx"}],[7767,{"../../components/component-library":6469,"../../components/multichain":6702,"../../components/multichain/pages/page":6806,"../../components/ui/tabs":6954,"../../contexts/metamask-notifications/metamask-notifications":6983,"../../helpers/constants/design-system":7023,"../../helpers/constants/routes":7028,"../../hooks/metamask-notifications/useCounter":7115,"../../hooks/useI18nContext":7157,"../../selectors":7947,"../../selectors/metamask-notifications/metamask-notifications":7948,"../../store/actions":7975,"./NewFeatureTag":7745,"./notifications-list":7766,"@metamask/notification-services-controller":2284,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useNavigate)(),t=(0,s.useI18nContext)(),n=(0,o.useDispatch)(),{isLoading:r,error:h}=(0,m.useMetamaskNotificationsContext)(),[C,v]=(0,a.useState)(E.TAB_KEYS.ALL),x=_(),{notificationsUnreadCount:S}=(0,f.useUnreadNotificationsCounter)(),I=(0,a.useMemo)(()=>T(C,x),[C,x]);let w=!1;return w=(0,o.useSelector)(g.getNotifySnaps).length>0,(0,a.useEffect)(()=>{n((0,b.deleteExpiredNotifications)())},[n]),a.default.createElement(d.NotificationsPage,null,a.default.createElement(p.Header,{startAccessory:a.default.createElement(c.ButtonIcon,{ariaLabel:"Back",iconName:c.IconName.ArrowLeft,size:c.ButtonIconSize.Md,onClick:()=>{e(u.DEFAULT_ROUTE)},"data-testid":"back-button"}),endAccessory:a.default.createElement(c.ButtonIcon,{ariaLabel:"Notifications Settings",iconName:c.IconName.Setting,size:c.ButtonIconSize.Md,iconProps:{size:c.IconSize.Lg},onClick:()=>{e(u.NOTIFICATIONS_SETTINGS_ROUTE)},"data-testid":"notifications-settings-button"}),marginBottom:0},t("notifications")),a.default.createElement(p.Content,{padding:0},w&&a.default.createElement(l.Tabs,{defaultActiveTabKey:C,onTabClick:e=>v(e),tabListProps:{className:"px-4"}},a.default.createElement(l.Tab,{"data-testid":E.TAB_KEYS.ALL,name:t("all"),tabKey:E.TAB_KEYS.ALL}),a.default.createElement(l.Tab,{"data-testid":E.TAB_KEYS.WALLET,name:a.default.createElement(c.Box,{display:y.Display.Flex,justifyContent:y.JustifyContent.center,alignItems:y.AlignItems.center,gap:2},t("wallet"),a.default.createElement(k.NewFeatureTag,null)),tabKey:E.TAB_KEYS.WALLET}),a.default.createElement(l.Tab,{"data-testid":E.TAB_KEYS.WEB3,name:t("web3"),tabKey:E.TAB_KEYS.WEB3})),a.default.createElement(E.NotificationsList,{activeTab:C,notifications:I,isLoading:r,isError:Boolean(h),notificationsCount:S})))},n.filterNotifications=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=e("@metamask/notification-services-controller"),s=e("../../hooks/useI18nContext"),c=e("../../components/component-library"),l=e("../../components/ui/tabs"),u=e("../../helpers/constants/routes"),d=e("../../components/multichain"),p=e("../../components/multichain/pages/page"),m=e("../../contexts/metamask-notifications/metamask-notifications"),f=e("../../hooks/metamask-notifications/useCounter"),g=e("../../selectors"),h=e("../../selectors/metamask-notifications/metamask-notifications"),y=e("../../helpers/constants/design-system"),b=e("../../store/actions"),E=e("./notifications-list"),k=e("./NewFeatureTag");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}const{TRIGGER_TYPES:v,TRIGGER_TYPES_WALLET_SET:x}=r.NotificationServicesController.Constants,_=()=>{const{featureAnnouncementNotifications:e,walletNotifications:t,snapNotifications:n}=(()=>{const e=(0,o.useSelector)(h.selectIsFeatureAnnouncementsEnabled),t=(0,o.useSelector)(h.selectIsMetamaskNotificationsEnabled),n=(0,o.useSelector)(h.getMetamaskNotifications);return{featureAnnouncementNotifications:(0,a.useMemo)(()=>e?(n??[]).filter(e=>e.type===v.FEATURES_ANNOUNCEMENT):[],[e,n]),walletNotifications:(0,a.useMemo)(()=>t?(n??[]).filter(e=>e.type!==v.FEATURES_ANNOUNCEMENT&&e.type!==v.SNAP):[],[t,n]),snapNotifications:(0,a.useMemo)(()=>(n??[]).filter(e=>e.type===v.SNAP),[n])}})();return(0,a.useMemo)(()=>[...n,...e,...t].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),[n,e,t])},T=(e,t)=>e===E.TAB_KEYS.ALL?t:e===E.TAB_KEYS.WALLET?t.filter(e=>x.has(e.type)||e.type===v.FEATURES_ANNOUNCEMENT):e===E.TAB_KEYS.WEB3?t.filter(e=>e.type===v.SNAP):t;n.filterNotifications=T}}},{package:"$root$",file:"ui/pages/notifications/notifications.tsx"}],[7768,{"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/lib/trace":5888,"../../../components/component-library":6469,"../../../components/component-library/button":6448,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,i.useDispatch)(),n=(0,l.useI18nContext)(),y=(0,i.useSelector)(d.getFirstTimeFlowType),b=(0,i.useSelector)(d.getSocialLoginEmail),E=(0,i.useSelector)(d.getSocialLoginType),k=(0,a.useContext)(f.MetaMetricsContext),{bufferedTrace:C,bufferedEndTrace:v,onboardingParentContext:x}=k;return(0,a.useEffect)(()=>(y!==p.FirstTimeFlowType.socialCreate&&e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0}),y===p.FirstTimeFlowType.socialCreate&&(k({category:g.MetaMetricsEventCategory.Onboarding,event:g.MetaMetricsEventName.AccountAlreadyExistsPageViewed}),null==C||C({name:h.TraceName.OnboardingNewSocialAccountExists,op:h.TraceOperation.OnboardingUserJourney,parentContext:null==x?void 0:x.current})),()=>{y===p.FirstTimeFlowType.socialCreate&&(null==v||v({name:h.TraceName.OnboardingNewSocialAccountExists}))}),[y,e,x,C,v,k]),a.default.createElement(c.Box,{className:"account-exist","data-testid":"account-exist",display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.center,height:s.BlockSize.Full,gap:6},a.default.createElement(c.Box,null,a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.flexStart},a.default.createElement(c.Text,{variant:s.TextVariant.headingLg,as:"h2",justifyContent:s.JustifyContent.center,style:{alignSelf:s.AlignItems.flexStart},marginBottom:4},n("accountAlreadyExistsTitle")),a.default.createElement(c.Box,{width:s.BlockSize.Full,display:s.Display.Flex,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,marginBottom:6},a.default.createElement("img",{src:"images/account-status.png",width:276,height:276,alt:n("accountAlreadyExistsTitle"),style:{alignSelf:"center"}})),a.default.createElement(c.Text,{variant:s.TextVariant.bodyMd,marginBottom:6},n("accountAlreadyExistsLoginDescription",[b||"-"])))),a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,width:s.BlockSize.Full,gap:4},a.default.createElement(r.Button,{"data-testid":"onboarding-complete-done",variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:async()=>{k({category:g.MetaMetricsEventCategory.Onboarding,event:g.MetaMetricsEventName.WalletImportStarted,properties:{account_type:`${g.MetaMetricsEventAccountType.Imported}_${E}`}}),null==C||C({name:h.TraceName.OnboardingExistingSocialLogin,op:h.TraceOperation.OnboardingUserJourney,tags:{source:"account_status_redirect"},parentContext:null==x?void 0:x.current}),await t((0,m.setFirstTimeFlowType)(p.FirstTimeFlowType.socialImport)),e(u.ONBOARDING_UNLOCK_ROUTE,{replace:!0})}},n("accountAlreadyExistsLogin")),a.default.createElement(r.Button,{"data-testid":"account-exist-login-with-different-method",variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:async n=>{n.preventDefault(),await t((0,m.resetOnboarding)()),await(0,m.forceUpdateMetamaskState)(t),e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0})}},n("useDifferentLoginMethod"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../components/component-library/button"),s=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),l=e("../../../hooks/useI18nContext"),u=e("../../../helpers/constants/routes"),d=e("../../../selectors"),p=e("../../../../shared/constants/onboarding"),m=e("../../../store/actions"),f=e("../../../contexts/metametrics"),g=e("../../../../shared/constants/metametrics"),h=e("../../../../shared/lib/trace");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/account-exist/account-exist.tsx"}],[7769,{"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/lib/trace":5888,"../../../components/component-library":6469,"../../../components/component-library/button":6448,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,i.useDispatch)(),n=(0,l.useI18nContext)(),y=(0,i.useSelector)(d.getFirstTimeFlowType),b=(0,i.useSelector)(d.getSocialLoginEmail),E=(0,i.useSelector)(d.getSocialLoginType),k=(0,a.useContext)(h.MetaMetricsContext),{bufferedTrace:C,bufferedEndTrace:v,onboardingParentContext:x}=k;return(0,a.useEffect)(()=>(y!==p.FirstTimeFlowType.socialImport&&e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0}),y===p.FirstTimeFlowType.socialImport&&(k({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.AccountNotFoundPageViewed}),null==C||C({name:g.TraceName.OnboardingExistingSocialAccountNotFound,op:g.TraceOperation.OnboardingUserJourney,parentContext:null==x?void 0:x.current})),()=>{y===p.FirstTimeFlowType.socialImport&&(null==v||v({name:g.TraceName.OnboardingExistingSocialAccountNotFound}))}),[y,e,x,C,v,k]),a.default.createElement(c.Box,{className:"account-not-found","data-testid":"account-not-found",display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.center,gap:6,height:s.BlockSize.Full},a.default.createElement(c.Box,null,a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.flexStart},a.default.createElement(c.Text,{variant:s.TextVariant.headingLg,as:"h2",justifyContent:s.JustifyContent.center,style:{alignSelf:s.AlignItems.flexStart},marginBottom:4},n("accountNotFoundTitle")),a.default.createElement(c.Box,{width:s.BlockSize.Full,display:s.Display.Flex,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,marginBottom:6},a.default.createElement("img",{src:"images/account-status.png",width:276,height:276,alt:n("accountNotFoundTitle"),style:{alignSelf:"center"}})),a.default.createElement(c.Text,{variant:s.TextVariant.bodyMd,marginBottom:6},n("accountNotFoundDescription",[b||"-"])))),a.default.createElement(c.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,width:s.BlockSize.Full,gap:4},a.default.createElement(r.Button,{"data-testid":"onboarding-complete-done",variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:()=>{k({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:`${f.MetaMetricsEventAccountType.Default}_${E}`}}),null==C||C({name:g.TraceName.OnboardingNewSocialCreateWallet,op:g.TraceOperation.OnboardingUserJourney,tags:{source:"account_status_redirect"},parentContext:null==x?void 0:x.current}),t((0,m.setFirstTimeFlowType)(p.FirstTimeFlowType.socialCreate)),e(u.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})}},n("accountNotFoundCreateOne")),a.default.createElement(r.Button,{"data-testid":"account-exist-login-with-different-method",variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,width:s.BlockSize.Full,onClick:async()=>{await t((0,m.resetOnboarding)()),await(0,m.forceUpdateMetamaskState)(t),e(u.ONBOARDING_WELCOME_ROUTE,{replace:!0})}},n("useDifferentLoginMethod"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../components/component-library/button"),s=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),l=e("../../../hooks/useI18nContext"),u=e("../../../helpers/constants/routes"),d=e("../../../selectors"),p=e("../../../../shared/constants/onboarding"),m=e("../../../store/actions"),f=e("../../../../shared/constants/metametrics"),g=e("../../../../shared/lib/trace"),h=e("../../../contexts/metametrics");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/account-not-found/account-not-found.tsx"}],[7770,{"../../../../shared/constants/app":5781,"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/lib/trace":5888,"../../../../shared/modules/browser-runtime.utils":5897,"../../../components/app/password-form/password-form":6176,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../helpers/constants/zendesk-url":7035,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,buffer:4061,"prop-types":5074,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=C(e("prop-types")),i=e("react-router-dom-v5-compat"),r=e("react-redux"),s=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/design-system"),l=e("../../../helpers/constants/routes"),u=C(e("../../../helpers/constants/zendesk-url")),d=e("../../../selectors"),p=e("../../../contexts/metametrics"),m=e("../../../../shared/constants/metametrics"),f=e("../../../components/component-library"),g=e("../../../../shared/constants/onboarding"),h=C(e("../../../components/app/password-form/password-form")),y=e("../../../../shared/constants/app"),b=e("../../../../shared/modules/browser-runtime.utils"),E=e("../../../store/actions"),k=e("../../../../shared/lib/trace");function C(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const x=(0,b.getBrowserName)()===y.PLATFORM_FIREFOX;function _({createNewAccount:e,importWithRecoveryPhrase:n,secretRecoveryPhrase:o}){const y=(0,s.useI18nContext)(),[b,C]=(0,a.useState)(""),[v,_]=(0,a.useState)(!1),[T,S]=(0,a.useState)(!1),I=(0,i.useNavigate)(),w=(0,r.useDispatch)(),N=(0,r.useSelector)(d.getFirstTimeFlowType),O=(0,a.useContext)(p.MetaMetricsContext),{bufferedTrace:A,bufferedEndTrace:M,onboardingParentContext:B}=O,R=(0,r.useSelector)(d.getCurrentKeyring),P=(0,r.useSelector)(d.getIsSocialLoginFlow),D=(0,r.useSelector)(d.getSocialLoginType),F=(0,r.useSelector)(d.getParticipateInMetaMetrics),L=(0,r.useSelector)(d.getIsParticipateInMetaMetricsSet),j=(0,r.useSelector)(d.getMetaMetricsId),W=t.from(j??"").toString("base64"),$=Boolean(F&&W),U=`https://start.metamask.io/?${new URLSearchParams({mmi:W,env:"production"})}`;(0,a.useEffect)(()=>{R&&!T?N===g.FirstTimeFlowType.import||N===g.FirstTimeFlowType.socialImport?x||N!==g.FirstTimeFlowType.socialImport?I(L?l.ONBOARDING_COMPLETION_ROUTE:l.ONBOARDING_METAMETRICS,{replace:!0}):I(l.ONBOARDING_COMPLETION_ROUTE,{replace:!0}):N===g.FirstTimeFlowType.socialCreate?I(l.ONBOARDING_COMPLETION_ROUTE,{replace:!0}):I(l.ONBOARDING_REVIEW_SRP_ROUTE,{replace:!0}):N!==g.FirstTimeFlowType.import||o||I(l.ONBOARDING_IMPORT_WITH_SRP_ROUTE,{replace:!0})},[R,I,N,T,o,L]);const z=(e,t=!1)=>{if(t&&D){return`${e}_${String(D).toLowerCase()}`}return e};(0,a.useEffect)(()=>(null==A||A({name:k.TraceName.OnboardingPasswordSetupAttempt,op:k.TraceOperation.OnboardingUserJourney,parentContext:null==B?void 0:B.current}),()=>{null==M||M({name:k.TraceName.OnboardingPasswordSetupAttempt})}),[B,A,M]);const G=a.default.createElement("a",{onClick:e=>{e.stopPropagation(),O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.ExternalLinkClicked,properties:{text:"Learn More",location:"create_password",url:u.default.PASSWORD_ARTICLE}})},key:"create-password__link-text",href:u.default.PASSWORD_ARTICLE,target:"_blank",rel:"noopener noreferrer"},a.default.createElement("span",{className:"create-password__link-text"},y("learnMoreUpperCaseWithDot"))),V=y(P?"createPasswordMarketing":"passwordTermsWarning");return a.default.createElement(f.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,width:c.BlockSize.Full,gap:4,as:"form",className:"create-password","data-testid":"create-password",onSubmit:async t=>{if(null==t||t.preventDefault(),b)try{o&&N===g.FirstTimeFlowType.import?await(async()=>{O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImportAttempted}),await n(b,o),null==M||M({name:k.TraceName.OnboardingExistingSrpImport}),null==M||M({name:k.TraceName.OnboardingJourneyOverall}),O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImported,properties:{biometrics_enabled:!1}}),O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupCompleted,properties:{wallet_setup_type:"import",new_wallet:!1,account_type:z(m.MetaMetricsEventAccountType.Imported,P)}}),I(x||P?l.ONBOARDING_COMPLETION_ROUTE:l.ONBOARDING_METAMETRICS,{replace:!0})})():await(async()=>{O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletCreationAttempted,properties:{account_type:z(m.MetaMetricsEventAccountType.Default,P)}}),e&&(S(!0),await e(b)),P&&(null==M||M({name:k.TraceName.OnboardingNewSocialCreateWallet}),null==M||M({name:k.TraceName.OnboardingJourneyOverall})),O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletCreated,properties:{biometrics_enabled:!1,account_type:z(m.MetaMetricsEventAccountType.Default,P)}}),O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupCompleted,properties:{wallet_setup_type:"new",new_wallet:!0,account_type:z(m.MetaMetricsEventAccountType.Default,P)}}),P?(v&&(w((0,E.setMarketingConsent)(!0)),w((0,E.setDataCollectionForMarketing)(!0))),I(l.ONBOARDING_DOWNLOAD_APP_ROUTE,{replace:!0})):I(l.ONBOARDING_REVIEW_SRP_ROUTE,{replace:!0})})()}catch(e){(e=>{const t=e instanceof Error?e.message:"Unknown error";null==A||A({name:k.TraceName.OnboardingPasswordSetupError,op:k.TraceOperation.OnboardingUserJourney,parentContext:B.current,tags:{errorMessage:t}}),null==M||M({name:k.TraceName.OnboardingPasswordSetupError}),console.error(e)})(e),O({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupFailure})}}},a.default.createElement(f.Box,null,a.default.createElement(f.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(f.ButtonIcon,{iconName:f.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:f.ButtonIconSize.Md,"data-testid":"create-password-back-button",type:"button",onClick:async e=>{e.preventDefault(),N===g.FirstTimeFlowType.import?I(l.ONBOARDING_IMPORT_WITH_SRP_ROUTE,{replace:!0}):(await w((0,E.resetOnboarding)()),await(0,E.forceUpdateMetamaskState)(w),I(l.ONBOARDING_WELCOME_ROUTE,{replace:!0}))},ariaLabel:y("back")})),a.default.createElement(f.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(f.Text,{variant:c.TextVariant.headingLg,as:"h2"},y("createPassword")),P?a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,as:"h2"},y("createPasswordDetailsSocial"),a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.warningDefault,as:"span"},y("createPasswordDetailsSocialReset"))):a.default.createElement(f.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,as:"h2"},y("createPasswordDetails"))),a.default.createElement(h.default,{onChange:e=>C(e)}),a.default.createElement(f.Box,{className:"create-password__terms-container",alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.spaceBetween,marginTop:6,backgroundColor:c.BackgroundColor.backgroundMuted,padding:3,borderRadius:c.BorderRadius.LG},a.default.createElement(f.Checkbox,{inputProps:{"data-testid":"create-password-terms"},alignItems:c.AlignItems.flexStart,isChecked:v,onChange:()=>{_(!v)},label:a.default.createElement(f.Text,{variant:c.TextVariant.bodySm,color:c.TextColor.textDefault},V,!P&&a.default.createElement(a.default.Fragment,null,a.default.createElement("br",null),G))}))),a.default.createElement(f.Box,null,a.default.createElement(f.Button,{"data-testid":"create-password-submit",variant:f.ButtonVariant.Primary,width:c.BlockSize.Full,size:f.ButtonSize.Lg,className:"create-password__form--submit-button",disabled:!b||!P&&!v},y("createPasswordCreate"))),$?a.default.createElement("iframe",{src:U,className:"create-password__analytics-iframe","data-testid":"create-password-iframe"}):null)}_.propTypes={createNewAccount:o.default.func,importWithRecoveryPhrase:o.default.func,secretRecoveryPhrase:o.default.string}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/pages/onboarding-flow/create-password/create-password.js"}],[7771,{"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../components/component-library":6469,"../../../components/component-library/button":6448,"../../../components/component-library/lottie-animation":6475,"../../../contexts/metametrics":6985,"../../../ducks/metamask/metamask":7010,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,lodash:4816,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useNavigate)(),t=(0,i.useDispatch)(),n=(0,u.useI18nContext)(),{search:E}=(0,o.useLocation)(),k=(0,i.useSelector)(h.getIsPrimarySeedPhraseBackedUp),C=(0,i.useSelector)(p.getSocialLoginType),v=(0,i.useSelector)(p.getExternalServicesOnboardingToggleState),x=(0,a.useContext)(m.MetaMetricsContext),_=(0,i.useSelector)(p.getFirstTimeFlowType),T=new URLSearchParams(E),S=T.get("isFromReminder"),I=T.get("isFromSettingsSecurity"),w=(0,a.useMemo)(()=>n(k?S?"yourWalletIsReadyFromReminder":"yourWalletIsReady":"yourWalletIsReadyRemind"),[S,k,n]),N=(0,a.useMemo)(()=>C?n("walletReadySocialDetails1",[(0,r.capitalize)(C)]):n(k?S?"walletReadyLoseSrpFromReminder":"walletReadyLoseSrp":"walletReadyLoseSrpRemind"),[C,k,n,S]),O=(0,a.useMemo)(()=>C?n("walletReadySocialDetails2"):k||S?n("walletReadyLearn",[a.default.createElement(l.ButtonLink,{key:"walletReadyLearn",size:l.ButtonLinkSize.Inherit,textProps:{variant:c.TextVariant.bodyMd,alignItems:c.AlignItems.flexStart},as:"a",href:"https://support.metamask.io/stay-safe/safety-in-web3/basic-safety-and-security-tips-for-metamask/",target:"_blank",rel:"noopener noreferrer"},n("learnHow"))]):n("walletReadyLearnRemind"),[C,k,S,n]),A=(0,a.useMemo)(()=>a.default.createElement(b.LottieAnimation,{path:"images/animations/fox/celebrating.lottie.json",loop:!0,autoplay:!0}),[k,S]),M=(0,a.useCallback)(async()=>{k&&x({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.ExtensionPinned,properties:{wallet_setup_type:_===g.FirstTimeFlowType.import?"import":"new",new_wallet:_===g.FirstTimeFlowType.create}}),S?e(I?d.SECURITY_ROUTE:d.DEFAULT_ROUTE):(await t((0,y.toggleExternalServices)(v)),await t((0,y.setCompletedOnboarding)()),e(d.DEFAULT_ROUTE))},[k,S,t,v,e,x,_,I]);return a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:6,className:"creation-successful","data-testid":"wallet-ready"},a.default.createElement(l.Box,null,a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.flexStart},a.default.createElement(l.Text,{variant:c.TextVariant.headingLg,as:"h2",justifyContent:c.JustifyContent.center,style:{alignSelf:c.AlignItems.flexStart},marginBottom:4},w),a.default.createElement(l.Box,{width:c.BlockSize.Full,display:c.Display.Flex,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,marginBottom:6},a.default.createElement(l.Box,{display:c.Display.Flex,style:{width:"144px",height:"144px"}},A)),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,marginBottom:6},N),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative,marginBottom:6},O)),!S&&a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.flexStart,className:"creation-successful__settings-actions",gap:4},a.default.createElement(s.Button,{variant:s.ButtonVariant.Secondary,"data-testid":"manage-default-settings",borderRadius:c.BorderRadius.LG,width:c.BlockSize.Full,onClick:()=>e(d.ONBOARDING_PRIVACY_SETTINGS_ROUTE)},a.default.createElement(l.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center},a.default.createElement(l.Icon,{name:l.IconName.Setting,size:l.IconSize.Md,marginInlineEnd:3}),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},n("manageDefaultSettings"))),a.default.createElement(l.Icon,{name:l.IconName.ArrowRight,color:c.IconColor.iconAlternative,size:l.IconSize.Sm})))),a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center},a.default.createElement(s.Button,{"data-testid":"onboarding-complete-done",variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,width:c.BlockSize.Full,onClick:M},n("done"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("lodash"),s=e("../../../components/component-library/button"),c=e("../../../helpers/constants/design-system"),l=e("../../../components/component-library"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/routes"),p=e("../../../selectors"),m=e("../../../contexts/metametrics"),f=e("../../../../shared/constants/metametrics"),g=e("../../../../shared/constants/onboarding"),h=e("../../../ducks/metamask/metamask"),y=e("../../../store/actions"),b=e("../../../components/component-library/lottie-animation");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/creation-successful/creation-successful.js"}],[7772,{"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,r.useI18nContext)(),t=(0,o.useNavigate)(),n=(0,i.useSelector)(u.getCurrentKeyring);return(0,a.useEffect)(()=>{n||t(c.ONBOARDING_WELCOME_ROUTE,{replace:!0})},[n,t]),a.default.createElement(l.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,height:s.BlockSize.Full,gap:6,className:"onboarding-download-app","data-testid":"onboarding-download-app"},a.default.createElement(l.Box,null,a.default.createElement(l.Text,{variant:s.TextVariant.headingLg,marginBottom:4},e("downloadAppTitle")),a.default.createElement(l.Box,{display:s.Display.Flex,alignItems:s.AlignItems.flexStart,justifyContent:s.JustifyContent.center,marginBottom:4},a.default.createElement("img",{src:"/images/onboarding-download-app.png",alt:"Download the app"})),a.default.createElement(l.Text,{variant:s.TextVariant.bodyMd,color:s.TextColor.textAlternative},e("downloadAppDescription"))),a.default.createElement(l.Box,null,a.default.createElement(l.Button,{variant:l.ButtonVariant.Primary,size:l.ButtonSize.Lg,block:!0,"data-testid":"download-app-continue",onClick:async()=>{t(c.ONBOARDING_COMPLETION_ROUTE,{replace:!0})}},e("continue"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=e("../../../hooks/useI18nContext"),s=e("../../../helpers/constants/design-system"),c=e("../../../helpers/constants/routes"),l=e("../../../components/component-library"),u=e("../../../selectors");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/download-app/download-app.tsx"}],[7773,{"../../../../shared/constants/metametrics":5796,"../../../components/app/srp-details-modal":6340,"../../../components/app/srp-input-import":6342,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../selectors/selectors":7963,"../../../store/actions":7975,"@ethersproject/hdnode":708,"prop-types":5074,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=E(e("prop-types")),s=e("@ethersproject/hdnode"),c=e("../../../helpers/constants/design-system"),l=e("../../../helpers/constants/routes"),u=e("../../../hooks/useI18nContext"),d=E(e("../../../components/app/srp-input-import")),p=e("../../../selectors"),m=e("../../../contexts/metametrics"),f=e("../../../../shared/constants/metametrics"),g=e("../../../selectors/selectors"),h=e("../../../components/component-library"),y=E(e("../../../components/app/srp-details-modal")),b=e("../../../store/actions");function E(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}const C=e=>e!==e.toLowerCase();function v({submitSecretRecoveryPhrase:e}){const t=(0,i.useDispatch)(),[n,r]=(0,a.useState)(""),[E,k]=(0,a.useState)(!1),[v,x]=(0,a.useState)(""),_=(0,o.useNavigate)(),T=(0,i.useSelector)(g.getHDEntropyIndex),S=(0,u.useI18nContext)(),I=(0,i.useSelector)(p.getCurrentKeyring);(0,a.useEffect)(()=>{I&&_(l.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})},[I,_]);const w=(0,a.useContext)(m.MetaMetricsContext),N=(0,a.useCallback)(()=>{w({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.SrpDefinitionClicked,properties:{location:"import_srp"}}),k(!0)},[w]),O=(0,a.useCallback)(()=>{let t="";!C(n)&&(0,s.isValidMnemonic)(n)||(t=S("invalidSeedPhraseNotFound")),x(t),t||(e(n),w({category:f.MetaMetricsEventCategory.Onboarding,event:f.MetaMetricsEventName.OnboardingWalletSecurityPhraseConfirmed,properties:{hd_entropy_index:T}}),_(l.ONBOARDING_CREATE_PASSWORD_ROUTE))},[n,S,T,w,_,e]);return(0,a.useEffect)(()=>{x("")},[n]),a.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:4,className:"import-srp","data-testid":"import-srp"},E&&a.default.createElement(y.default,{onClose:()=>k(!1)}),a.default.createElement(h.Box,null,a.default.createElement(h.Box,{marginBottom:4},a.default.createElement(h.ButtonIcon,{iconName:h.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:h.ButtonIconSize.Md,"data-testid":"import-srp-back-button",onClick:async e=>{e.preventDefault(),await t((0,b.resetOnboarding)()),await(0,b.forceUpdateMetamaskState)(t),_(l.ONBOARDING_WELCOME_ROUTE,{replace:!0})},ariaLabel:S("back")})),a.default.createElement(h.Box,{textAlign:c.TextAlign.Left,marginBottom:2},a.default.createElement(h.Text,{variant:c.TextVariant.headingLg},S("importAWallet"))),a.default.createElement(h.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center,marginBottom:4},a.default.createElement(h.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textAlternative},S("typeYourSRP")),a.default.createElement(h.ButtonIcon,{iconName:h.IconName.Info,size:h.ButtonIconSize.Sm,color:c.IconColor.iconAlternative,onClick:N,ariaLabel:"info"})),a.default.createElement(h.Box,{width:c.BlockSize.Full},a.default.createElement("form",{onSubmit:e=>e.preventDefault()},a.default.createElement(d.default,{onChange:r}),v&&a.default.createElement(h.Box,{marginTop:2},a.default.createElement(h.Text,{"data-testid":"import-srp-error",variant:c.TextVariant.bodySm,color:c.TextColor.errorDefault},v))))),a.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,width:c.BlockSize.Full,textAlign:c.TextAlign.Left},a.default.createElement(h.Button,{width:c.BlockSize.Full,size:h.ButtonSize.Lg,type:"primary","data-testid":"import-srp-confirm",onClick:O,disabled:!n.trim()||Boolean(v)},S("continue"))))}v.propTypes={submitSecretRecoveryPhrase:r.default.func}}}},{package:"$root$",file:"ui/pages/onboarding-flow/import-srp/import-srp.js"}],[7774,{"../../../../shared/constants/app":5781,"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/modules/browser-runtime.utils":5897,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,loglevel:4824,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,l.useI18nContext)(),t=(0,i.useDispatch)(),n=(0,r.useNavigate)(),a=(0,i.useSelector)(d.getFirstTimeFlowType),m=(0,i.useSelector)(d.getIsParticipateInMetaMetricsSet),b=(0,i.useSelector)(d.getParticipateInMetaMetrics),k=(0,i.useSelector)(d.getDataCollectionForMarketing),[C,v]=(0,o.useState)(!0),[x,_]=(0,o.useState)(!1),T=(0,o.useRef)(null),S=(0,o.useRef)(null);(0,o.useEffect)(()=>{m&&v(b),k&&_(k)},[m,b,k]);const I=(0,i.useSelector)(d.getCurrentKeyring),w=(0,o.useContext)(g.MetaMetricsContext);let N=(0,i.useSelector)(d.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn);E&&a!==y.FirstTimeFlowType.restore&&(N=I&&a===y.FirstTimeFlowType.socialCreate?f.ONBOARDING_COMPLETION_ROUTE:f.ONBOARDING_WELCOME_ROUTE);return o.default.createElement(h.Box,{className:"onboarding-metametrics","data-testid":"onboarding-metametrics",display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:4},o.default.createElement(h.Text,{variant:c.TextVariant.headingLg,textAlign:c.TextAlign.Left,fontWeight:c.FontWeight.Bold,marginBottom:4},e("onboardingMetametricsTitle")),o.default.createElement(h.Box,{width:c.BlockSize.Full,display:c.Display.Flex,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,className:"onboarding-metametrics__user-control"},o.default.createElement("img",{src:"images/user-control.png",alt:"User control",height:200,width:200})),o.default.createElement(h.Text,{variant:c.TextVariant.bodySmMedium,color:c.TextColor.textAlternative,textAlign:c.TextAlign.Left},e("onboardingMetametricsDescription")),o.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:2,padding:3,borderRadius:c.BorderRadius.LG,backgroundColor:c.BackgroundColor.backgroundMuted,className:"onboarding-metametrics__checkbox",role:"button",tabIndex:0,onClick:()=>{var e;null===(e=T.current)||void 0===e||e.click()},onKeyDown:e=>{var t;" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),null===(t=T.current)||void 0===t||t.click())}},o.default.createElement(h.Checkbox,{id:"metametrics-opt-in","data-testid":"metametrics-checkbox",isChecked:C,onChange:()=>{v(e=>!e),C&&_(!1)},inputRef:T,onClick:e=>e.stopPropagation(),inputProps:{onClick:e=>e.stopPropagation()},label:o.default.createElement(h.Text,{variant:c.TextVariant.bodyMdMedium},e("onboardingMetametricCheckboxTitleOne")),alignItems:c.AlignItems.center}),o.default.createElement(h.Text,{variant:c.TextVariant.bodySm,color:c.TextColor.textAlternative,textAlign:c.TextAlign.Left},e("onboardingMetametricCheckboxDescriptionOne"))),o.default.createElement(h.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:2,padding:3,borderRadius:c.BorderRadius.LG,backgroundColor:c.BackgroundColor.backgroundMuted,className:""+(C?"onboarding-metametrics__checkbox":"onboarding-metametrics__checkbox-disabled"),disabled:!C,role:C?"button":undefined,tabIndex:C?0:undefined,onClick:C?()=>{var e;null===(e=S.current)||void 0===e||e.click()}:undefined,onKeyDown:C&&(e=>{var t;" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),null===(t=S.current)||void 0===t||t.click())})},o.default.createElement(h.Checkbox,{id:"metametrics-datacollection-opt-in","data-testid":"metametrics-data-collection-checkbox",isChecked:C&&x,isDisabled:!C,onChange:()=>{_(e=>!e)},inputRef:S,onClick:e=>e.stopPropagation(),inputProps:{onClick:e=>e.stopPropagation()},label:o.default.createElement(h.Text,{variant:c.TextVariant.bodyMdMedium},e("onboardingMetametricCheckboxTitleTwo")),alignItems:c.AlignItems.center}),o.default.createElement(h.Text,{variant:c.TextVariant.bodySm,color:c.TextColor.textAlternative,textAlign:c.TextAlign.Left},e("onboardingMetametricCheckboxDescriptionTwo"))),o.default.createElement(h.Box,{width:c.BlockSize.Full},o.default.createElement(h.Button,{"data-testid":"metametrics-i-agree",size:h.ButtonSize.Lg,width:c.BlockSize.Full,onClick:async e=>{e.preventDefault();try{C?(t((0,u.setDataCollectionForMarketing)(x)),t((0,u.setParticipateInMetaMetrics)(!0)),await w({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.AppInstalled}),await w({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.AnalyticsPreferenceSelected,properties:{is_metrics_opted_in:!0,has_marketing_consent:Boolean(x),location:"onboarding_metametrics"}})):(t((0,u.setParticipateInMetaMetrics)(!1)),t((0,u.setDataCollectionForMarketing)(!1)))}catch(e){s.default.error("onConfirm::error",e)}finally{n(N)}}},e("onboardingMetametricsContinue"))))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=(a=e("loglevel"))&&a.__esModule?a:{default:a},c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../store/actions"),d=e("../../../selectors"),p=e("../../../../shared/constants/metametrics"),m=e("../../../../shared/constants/app"),f=e("../../../helpers/constants/routes"),g=e("../../../contexts/metametrics"),h=e("../../../components/component-library"),y=e("../../../../shared/constants/onboarding");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}const E=(0,e("../../../../shared/modules/browser-runtime.utils").getBrowserName)()===m.PLATFORM_FIREFOX}}},{package:"$root$",file:"ui/pages/onboarding-flow/metametrics/metametrics.js"}],[7775,{"../../../../app/_locales/index.json":2,"../../../../shared/constants/preferences":5805,"../../../components/component-library":6469,"../../../components/ui/dropdown":6883,"../../../components/ui/metafox-logo":6923,"../../../ducks/locale/locale":7009,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../store/actions":7975,classnames:4094,"prop-types":5074,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=E;var a=b(e("react")),o=b(e("prop-types")),i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=b(e("classnames")),c=b(e("../../../components/ui/metafox-logo")),l=e("../../../hooks/useI18nContext"),u=b(e("../../../components/ui/dropdown")),d=e("../../../ducks/locale/locale"),p=e("../../../store/actions"),m=b(e("../../../../app/_locales/index.json")),f=e("../../../components/component-library"),g=e("../../../helpers/constants/design-system"),h=e("../../../helpers/constants/routes"),y=e("../../../../shared/constants/preferences");function b(e){return e&&e.__esModule?e:{default:e}}function E({isWelcomePage:e}){const t=(0,i.useDispatch)(),{pathname:n}=(0,r.useLocation)(),o=(0,l.useI18nContext)(),b=(0,i.useSelector)(d.getCurrentLocale),E=m.default.map(e=>({name:e.name,value:e.code}));return a.default.createElement(f.Box,{display:g.Display.Flex,alignItems:g.AlignItems.center,backgroundColor:g.BackgroundColor.backgroundDefault,width:g.BlockSize.Full,padding:4,className:(0,s.default)("onboarding-app-header",{"onboarding-app-header--welcome":e})},a.default.createElement(f.Box,{display:g.Display.Flex,width:g.BlockSize.Full,justifyContent:g.JustifyContent.spaceBetween,className:"onboarding-app-header__contents"},a.default.createElement(c.default,{theme:n===h.ONBOARDING_WELCOME_ROUTE?y.ThemeType.light:undefined,unsetIconHeight:!0,isOnboarding:!0}),n===h.ONBOARDING_COMPLETION_ROUTE?a.default.createElement(f.Box,{paddingTop:12,className:"onboarding-app-header__banner-tip-container"},a.default.createElement(f.BannerTip,{borderColor:g.BorderColor.borderMuted,backgroundColor:g.BackgroundColor.backgroundMuted,title:o("pinMetaMask"),gap:4,titleProps:{color:g.TextColor.textDefault,variant:g.TextVariant.bodyMdMedium,paddingRight:2},className:"onboarding-app-header__banner-tip",padding:3,alignItems:g.AlignItems.center},a.default.createElement(f.Text,{variant:g.TextVariant.bodySm,alignItems:g.AlignItems.center,color:g.TextColor.textAlternative,paddingRight:2},o("pinMetaMaskDescription",[a.default.createElement(f.Icon,{name:f.IconName.Extension,key:"extension",color:g.TextColor.textDefault,size:f.IconSize.Md,className:"onboarding-app-header__banner-tip-icon"}),a.default.createElement(f.Icon,{name:f.IconName.Keep,key:"keep",color:g.TextColor.textDefault,size:f.IconSize.Md,className:"onboarding-app-header__banner-tip-icon"})])))):a.default.createElement(u.default,{"data-testid":"select-locale",className:(0,s.default)("onboarding-app-header__dropdown",{"onboarding-app-header__dropdown--welcome--login":e}),options:E,selectedOption:b,onChange:async e=>t((0,p.updateCurrentLocale)(e))})))}E.propTypes={isWelcomePage:o.default.bool}}}},{package:"$root$",file:"ui/pages/onboarding-flow/onboarding-app-header/onboarding-app-header.js"}],[7776,{"../../../../shared/constants/app":5781,"../../../../shared/constants/onboarding":5803,"../../../../shared/modules/browser-runtime.utils":5897,"../../../ducks/metamask/metamask":7010,"../../../helpers/constants/routes":7028,"../../../selectors":7947,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useSelector)(c.getCompletedOnboarding),t=(0,i.useSelector)(c.getIsInitialized),n=(0,i.useSelector)(d.getIsSocialLoginUserAuthenticated),a=(0,i.useSelector)(c.getSeedPhraseBackedUp),m=(0,i.useSelector)(d.getFirstTimeFlowType),f=(0,i.useSelector)(d.getIsSocialLoginFlow),g=(0,i.useSelector)(c.getIsUnlocked),h=(0,i.useSelector)(d.getIsParticipateInMetaMetricsSet);if(e)return o.default.createElement(r.Navigate,{to:s.DEFAULT_ROUTE,replace:!0});if(null!==a||g&&f)return o.default.createElement(r.Navigate,{to:h?s.ONBOARDING_COMPLETION_ROUTE:s.ONBOARDING_METAMETRICS,replace:!0});if(g)return o.default.createElement(r.Navigate,{to:s.LOCK_ROUTE,replace:!0});if(!t&&!n){let e;return e=(0,u.getBrowserName)()===l.PLATFORM_FIREFOX?o.default.createElement(r.Navigate,{to:s.ONBOARDING_METAMETRICS,replace:!0}):o.default.createElement(r.Navigate,{to:s.ONBOARDING_WELCOME_ROUTE,replace:!0}),e}if(!t&&n&&m===p.FirstTimeFlowType.socialCreate)return o.default.createElement(r.Navigate,{to:s.ONBOARDING_CREATE_PASSWORD_ROUTE,replace:!0});return o.default.createElement(r.Navigate,{to:s.ONBOARDING_UNLOCK_ROUTE,replace:!0})};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("../../../helpers/constants/routes"),c=e("../../../ducks/metamask/metamask"),l=e("../../../../shared/constants/app"),u=e("../../../../shared/modules/browser-runtime.utils"),d=e("../../../selectors"),p=e("../../../../shared/constants/onboarding")}}},{package:"$root$",file:"ui/pages/onboarding-flow/onboarding-flow-switch/onboarding-flow-switch.js"}],[7777,{"../../../app/scripts/lib/util":332,"../../../shared/constants/app":5781,"../../../shared/constants/onboarding":5803,"../../../shared/lib/trace":5888,"../../../shared/modules/environment":5901,"../../components/app/toast-master/utils":6360,"../../components/component-library":6469,"../../components/ui/loading-screen":6911,"../../contexts/metametrics":6985,"../../ducks/metamask/metamask":7010,"../../helpers/constants/design-system":7023,"../../helpers/constants/routes":7028,"../../selectors":7947,"../../store/actions":7975,"../unlock-page":7930,"./account-exist/account-exist":7768,"./account-not-found/account-not-found":7769,"./create-password/create-password":7770,"./creation-successful/creation-successful":7771,"./download-app/download-app":7772,"./import-srp/import-srp":7773,"./metametrics/metametrics":7774,"./onboarding-app-header/onboarding-app-header":7775,"./onboarding-flow-switch/onboarding-flow-switch":7776,"./pin-extension/pin-extension":7778,"./privacy-settings/privacy-settings":7779,"./recovery-phrase/confirm-recovery-phrase":7781,"./recovery-phrase/reveal-recovery-phrase":7784,"./recovery-phrase/review-recovery-phrase":7785,"./welcome/welcome":7790,classnames:4094,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const[e,t]=(0,a.useState)(""),[n,F]=(0,a.useState)(!1),L=(0,i.useDispatch)(),{pathname:j,search:W}=(0,o.useLocation)(),$=(0,o.useNavigate)(),U=(0,i.useSelector)(l.getCompletedOnboarding),z=(0,i.useSelector)(d.getFirstTimeFlowTypeRouteAfterUnlock),G=new URLSearchParams(W).get("isFromReminder"),V=new URLSearchParams(W).get("isFromSettingsSecurity"),q=(0,a.useContext)(p.MetaMetricsContext),{bufferedTrace:J,onboardingParentContext:K}=q,H=(0,i.useSelector)(l.getIsUnlocked),Y=(0,i.useSelector)(d.getFirstTimeFlowType),X=(0,E.getIsSeedlessOnboardingFeatureEnabled)(),Q=(0,i.useSelector)(l.getIsPrimarySeedPhraseBackedUp),Z=(0,h.getEnvironmentType)()===y.ENVIRONMENT_TYPE_POPUP,ee=(0,a.useMemo)(()=>j===c.ONBOARDING_WELCOME_ROUTE,[j]);(0,a.useEffect)(()=>{(0,m.submitRequestToBackgroundAndCatch)("setOnboardingDate")},[]),(0,a.useEffect)(()=>{U&&!G&&$(c.DEFAULT_ROUTE)},[$,U,G]),(0,a.useEffect)(()=>{const t=[c.ONBOARDING_REVIEW_SRP_ROUTE,c.ONBOARDING_CONFIRM_SRP_ROUTE].some(e=>null==j?void 0:j.startsWith(e));!H||U||e||t&&$(c.ONBOARDING_UNLOCK_ROUTE),Q&&t&&U&&$(V?c.SECURITY_ROUTE:c.DEFAULT_ROUTE,{replace:!0})},[H,U,e,j,$,Q,V]),(0,a.useEffect)(()=>{const e=null==J?void 0:J({name:k.TraceName.OnboardingJourneyOverall,op:k.TraceOperation.OnboardingUserJourney});K&&(K.current=e)},[K,J]);let te=j===c.ONBOARDING_WELCOME_ROUTE||j===c.ONBOARDING_UNLOCK_ROUTE;return a.default.createElement(f.Box,{backgroundColor:g.BackgroundColor.backgroundDefault,width:g.BlockSize.Full,height:g.BlockSize.Full,display:g.Display.Flex,flexDirection:g.FlexDirection.Column,alignItems:j===c.ONBOARDING_WELCOME_ROUTE?g.AlignItems.flexStart:g.AlignItems.center,justifyContent:g.JustifyContent.flexStart,className:(0,r.default)("onboarding-flow",{"onboarding-flow--welcome-login":ee})},!Z&&a.default.createElement(M.default,{isWelcomePage:ee}),a.default.createElement(f.Box,{className:(0,r.default)("onboarding-flow__container",{"onboarding-flow__container--full":te,"onboarding-flow__container--popup":Z}),width:g.BlockSize.Full,borderStyle:te||Z?g.BorderStyle.none:g.BorderStyle.solid,borderRadius:g.BorderRadius.LG,marginTop:j===c.ONBOARDING_WELCOME_ROUTE||Z?0:3,marginInline:"auto",borderColor:g.BorderColor.borderMuted},a.default.createElement(o.Routes,null,a.default.createElement(o.Route,{path:c.ONBOARDING_ACCOUNT_EXIST,element:a.default.createElement(B.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_ACCOUNT_NOT_FOUND,element:a.default.createElement(R.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_CREATE_PASSWORD_ROUTE,element:a.default.createElement(x.default,{createNewAccount:async e=>{try{let n;F(!0),X&&Y===b.FirstTimeFlowType.socialCreate?n=await L((0,u.createNewVaultAndSyncWithSocial)(e)):Y===b.FirstTimeFlowType.create&&(n=await L((0,u.createNewVaultAndGetSeedPhrase)(e))),t(n)}finally{F(!1)}},importWithRecoveryPhrase:async(e,t)=>await L((0,u.createNewVaultAndRestore)(e,t)),secretRecoveryPhrase:e})}),a.default.createElement(o.Route,{path:c.ONBOARDING_REVEAL_SRP_ROUTE,element:a.default.createElement(P.default,{setSecretRecoveryPhrase:t})}),a.default.createElement(o.Route,{path:c.ONBOARDING_REVIEW_SRP_ROUTE,element:a.default.createElement(_.default,{secretRecoveryPhrase:e})}),a.default.createElement(o.Route,{path:c.ONBOARDING_CONFIRM_SRP_ROUTE,element:a.default.createElement(T.default,{secretRecoveryPhrase:e})}),a.default.createElement(o.Route,{path:c.ONBOARDING_IMPORT_WITH_SRP_ROUTE,element:a.default.createElement(N.default,{submitSecretRecoveryPhrase:t})}),a.default.createElement(o.Route,{path:c.ONBOARDING_UNLOCK_ROUTE,element:a.default.createElement(s.default,{onSubmit:async e=>{try{let n;F(!0),n=X&&Y===b.FirstTimeFlowType.socialImport?await L((0,u.restoreSocialBackupAndGetSeedPhrase)(e)):await L((0,u.unlockAndGetSeedPhrase)(e)),t(n),Y===b.FirstTimeFlowType.socialImport&&await L((0,u.setCompletedOnboarding)()),$(z,{replace:!0})}finally{F(!1)}}})}),a.default.createElement(o.Route,{path:c.ONBOARDING_PRIVACY_SETTINGS_ROUTE,element:a.default.createElement(S.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_COMPLETION_ROUTE,element:a.default.createElement(I.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_WELCOME_ROUTE,element:a.default.createElement(w.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_PIN_EXTENSION_ROUTE,element:a.default.createElement(O.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_METAMETRICS,element:a.default.createElement(A.default,null)}),a.default.createElement(o.Route,{path:c.ONBOARDING_DOWNLOAD_APP_ROUTE,element:a.default.createElement(D.default,null)}),a.default.createElement(o.Route,{path:"*",element:a.default.createElement(v.default,null)}))),n&&a.default.createElement(C.default,null))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=F(e("classnames")),s=F(e("../unlock-page")),c=e("../../helpers/constants/routes"),l=e("../../ducks/metamask/metamask"),u=e("../../store/actions"),d=e("../../selectors"),p=e("../../contexts/metametrics"),m=e("../../components/app/toast-master/utils"),f=e("../../components/component-library"),g=e("../../helpers/constants/design-system"),h=e("../../../app/scripts/lib/util"),y=e("../../../shared/constants/app"),b=e("../../../shared/constants/onboarding"),E=e("../../../shared/modules/environment"),k=e("../../../shared/lib/trace"),C=F(e("../../components/ui/loading-screen")),v=F(e("./onboarding-flow-switch/onboarding-flow-switch")),x=F(e("./create-password/create-password")),_=F(e("./recovery-phrase/review-recovery-phrase")),T=F(e("./recovery-phrase/confirm-recovery-phrase")),S=F(e("./privacy-settings/privacy-settings")),I=F(e("./creation-successful/creation-successful")),w=F(e("./welcome/welcome")),N=F(e("./import-srp/import-srp")),O=F(e("./pin-extension/pin-extension")),A=F(e("./metametrics/metametrics")),M=F(e("./onboarding-app-header/onboarding-app-header")),B=F(e("./account-exist/account-exist")),R=F(e("./account-not-found/account-not-found")),P=F(e("./recovery-phrase/reveal-recovery-phrase")),D=F(e("./download-app/download-app"));function F(e){return e&&e.__esModule?e:{default:e}}function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/onboarding-flow.js"}],[7778,{"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/modules/browser-runtime.utils":5897,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,classnames:4094,react:5258,"react-redux":5202,"react-responsive-carousel":5218,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,u.useI18nContext)(),t=(0,i.useNavigate)(),[n,a]=(0,o.useState)(0),E=(0,r.useDispatch)(),k=(0,o.useContext)(f.MetaMetricsContext),C=(0,r.useSelector)(g.getFirstTimeFlowType),v=(0,r.useSelector)(g.getCurrentKeyring),x=(0,r.useSelector)(g.getExternalServicesOnboardingToggleState);return(0,o.useEffect)(()=>{v||t(p.ONBOARDING_WELCOME_ROUTE,{replace:!0})},[v,t]),o.default.createElement(m.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.spaceBetween,height:d.BlockSize.Full,gap:6,className:"onboarding-pin-extension","data-testid":"onboarding-pin-extension"},o.default.createElement(m.Box,null,o.default.createElement(s.Carousel,{selectedItem:n,showThumbs:!1,showStatus:!1,dynamicHeight:!0,renderArrowPrev:(t,n,a)=>o.default.createElement(m.ButtonIcon,{iconName:m.IconName.Arrow2Left,size:m.ButtonIconSize.Lg,borderRadius:d.BorderRadius.full,borderWidth:2,borderColor:d.IconColor.iconDefault,className:(0,c.default)("onboarding-pin-extension__arrow",{"onboarding-pin-extension__arrow--disabled":!n}),disabled:!n,title:a,onClick:t,ariaLabel:e("prev")}),renderArrowNext:(t,n,a)=>o.default.createElement(m.ButtonIcon,{iconName:m.IconName.Arrow2Right,size:m.ButtonIconSize.Lg,borderRadius:d.BorderRadius.full,borderWidth:2,borderColor:d.IconColor.iconDefault,className:(0,c.default)("onboarding-pin-extension__arrow","onboarding-pin-extension__arrow--next",{"onboarding-pin-extension__arrow--disabled":!n}),disabled:!n,title:a,onClick:t,ariaLabel:e("next"),"data-testid":"pin-extension-next"}),onChange:e=>a(e)},o.default.createElement(m.Box,{display:d.Display.Flex,alignItems:d.AlignItems.flexStart,justifyContent:d.JustifyContent.center,className:"onboarding-pin-extension__image-container"},o.default.createElement("img",{src:"/images/onboarding-extension-pin.svg",alt:e("onboardingPinExtensionAltPin")})),o.default.createElement(m.Box,{display:d.Display.Flex,alignItems:d.AlignItems.flexStart,justifyContent:d.JustifyContent.center,className:"onboarding-pin-extension__image-container"},o.default.createElement("img",{src:"/images/onboarding-extension-launch.svg",alt:e("onboardingPinExtensionAltLaunch")}))),o.default.createElement(m.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.flexStart,width:d.BlockSize.Full,marginTop:4,gap:4},o.default.createElement(m.Text,{variant:d.TextVariant.headingLg,fontWeight:d.FontWeight.Medium,as:"h2"},e("onboardingPinExtensionTitle")),0===n?o.default.createElement(m.Box,null,o.default.createElement(m.Text,{variant:d.TextVariant.bodyMd},e("onboardingPinExtensionDescription"))):o.default.createElement(m.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,gap:4},o.default.createElement(m.Text,{variant:d.TextVariant.bodyMd},e("onboardingPinExtensionDescription2")),o.default.createElement(m.Text,{variant:d.TextVariant.bodyMd},e("onboardingPinExtensionDescription3",[(0,b.getBrowserName)()]))))),o.default.createElement(m.Box,null,o.default.createElement(m.Button,{variant:m.ButtonVariant.Primary,size:m.ButtonSize.Lg,block:!0,"data-testid":"pin-extension-done",onClick:async()=>{await E((0,l.toggleExternalServices)(x)),await E((0,l.setCompletedOnboarding)()),k({category:h.MetaMetricsEventCategory.Onboarding,event:h.MetaMetricsEventName.ExtensionPinned,properties:{wallet_setup_type:C===y.FirstTimeFlowType.import?"import":"new",new_wallet:C===y.FirstTimeFlowType.create}}),t(p.DEFAULT_ROUTE)}},e("done"))))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom-v5-compat"),r=e("react-redux"),s=e("react-responsive-carousel"),c=(a=e("classnames"))&&a.__esModule?a:{default:a},l=e("../../../store/actions"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/design-system"),p=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),f=e("../../../contexts/metametrics"),g=e("../../../selectors"),h=e("../../../../shared/constants/metametrics"),y=e("../../../../shared/constants/onboarding"),b=e("../../../../shared/modules/browser-runtime.utils");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/pin-extension/pin-extension.js"}],[7779,{"../../../../app/scripts/lib/util":332,"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/network":5800,"../../../../shared/lib/ui-utils":5894,"../../../../shared/modules/selectors/networks":5918,"../../../components/app/identity/backup-and-sync-toggle/backup-and-sync-toggle":6083,"../../../components/component-library":6469,"../../../components/ui/button":6859,"../../../contexts/metametrics":6985,"../../../ducks/app/app":6995,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../helpers/constants/zendesk-url":7035,"../../../hooks/identity/useBackupAndSync":7111,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../selectors/identity/backup-and-sync":7946,"../../../store/actions":7975,"../../settings/security-tab/delete-metametrics-data-button":7854,"../../settings/security-tab/metametrics-toggle/metametrics-toggle":7857,"./setting":7780,"@metamask/profile-sync-controller/user-storage":2393,"@metamask/snaps-sdk":2671,classnames:4094,loglevel:4824,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,k.useI18nContext)(),t=(0,o.useDispatch)(),n=(0,i.useNavigate)(),[A,M]=(0,a.useState)(!1),[R,P]=(0,a.useState)(null),[D,F]=(0,a.useState)(!0),L=(0,o.useSelector)(e=>e.metamask),{use4ByteResolution:j,useTokenDetection:W,useCurrencyRateCheck:$,useMultiAccountBalanceChecker:U,ipfsGateway:z,useAddressBarEnsResolution:G,useTransactionSimulations:V}=L,q=(0,o.useSelector)(C.getUseExternalNameSources),J=(0,o.useSelector)(C.getIsSocialLoginFlow),K=(0,o.useSelector)(C.getDataCollectionForMarketing),[H,Y]=(0,a.useState)(j),[X,Q]=(0,a.useState)(W),[Z,ee]=(0,a.useState)($),[te,ne]=(0,a.useState)(U),[ae,oe]=(0,a.useState)(V),[ie,re]=(0,a.useState)(z),[se,ce]=(0,a.useState)(null),[le,ue]=(0,a.useState)(G),[de,pe]=(0,a.useState)(q),me=(0,a.useContext)(y.MetaMetricsContext),fe=(0,o.useSelector)(v.getNetworkConfigurationsByChainId),ge=(0,o.useSelector)(C.getExternalServicesOnboardingToggleState),he=(0,o.useSelector)(S.selectIsBackupAndSyncEnabled),{setIsBackupAndSyncFeatureEnabled:ye,error:be}=(0,d.useBackupAndSync)();(0,a.useEffect)(()=>{ye(c.BACKUPANDSYNC_FEATURES.main,!!ge)},[ge,ye]);const Ee=e=>{P(e),M(!0),setTimeout(()=>{F(!1)},B)},ke=[{id:1,title:e("general"),subtitle:e("generalDescription")},{id:2,title:e("assets"),subtitle:e("assetsDescription")},{id:3,title:e(J?"securityDefaultSettingsSocialLogin":"security"),subtitle:e(J?"securitySocialLoginDefaultSettingsDescription":"securityDescription")}];return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"privacy-settings","data-testid":"privacy-settings"},a.default.createElement("div",{className:(0,r.default)("container",{"show-detail":A,"show-list":!A})},a.default.createElement("div",{className:"list-view"},a.default.createElement(h.Box,{className:"privacy-settings__header",marginTop:6,marginBottom:6,display:b.Display.Flex,flexDirection:b.FlexDirection.Column,justifyContent:b.JustifyContent.flexStart},a.default.createElement(h.Box,{display:b.Display.Flex,alignItems:b.AlignItems.center,flexDirection:b.FlexDirection.Row,justifyContent:b.JustifyContent.flexStart},a.default.createElement(g.default,{type:"inline",icon:a.default.createElement(h.Icon,{name:h.IconName.ArrowLeft,size:h.IconSize.Lg,color:b.IconColor.iconDefault}),"data-testid":"privacy-settings-back-button",onClick:()=>{if(t((0,x.setUse4ByteResolution)(H)),t((0,x.setUseTokenDetection)(X)),t((0,x.setUseMultiAccountBalanceChecker)(te)),t((0,x.setUseCurrencyRateCheck)(Z)),t((0,x.setUseAddressBarEnsResolution)(le)),(0,x.setUseTransactionSimulations)(ae),(0,x.setUseExternalNameSources)(de),ge||ye(c.BACKUPANDSYNC_FEATURES.main,!1),ie&&!se){const{host:e}=new URL((0,u.addUrlProtocolPrefix)(ie));t((0,x.setIpfsGateway)(e))}me({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.OnboardingWalletAdvancedSettings,properties:{settings_group:"onboarding_advanced_configuration",is_profile_syncing_enabled:he,is_basic_functionality_enabled:ge,turnon_token_detection:X}}),n(E.ONBOARDING_COMPLETION_ROUTE,{replace:!0})}}),a.default.createElement(h.Box,{display:b.Display.Flex,alignItems:b.AlignItems.center,justifyContent:b.JustifyContent.center,width:b.BlockSize.Full},a.default.createElement(h.Text,{variant:b.TextVariant.headingLg,as:"h2"},e("defaultSettingsTitle")))),a.default.createElement(h.Text,{variant:b.TextVariant.bodyLgMedium,marginTop:5},e("defaultSettingsSubTitle")),a.default.createElement("a",{href:"https://support.metamask.io/privacy-and-security/privacy-best-practices",target:"_blank",rel:"noreferrer",key:"learnMoreAboutPrivacy",style:{fontSize:"var(--font-size-5)"}},e("learnMoreAboutPrivacy"))),a.default.createElement(h.Box,null,a.default.createElement(h.Box,{as:"ul",marginTop:4,marginBottom:4,style:{listStyleType:"none"},className:"privacy-settings__categories-list"},ke.map(e=>a.default.createElement(h.Box,{marginTop:5,marginBottom:5,key:e.id,className:"categories-item",onClick:()=>Ee(e)},a.default.createElement(h.Box,{display:b.Display.Flex,alignItems:b.AlignItems.flexStart,justifyContent:b.JustifyContent.spaceBetween,"data-testid":`category-item-${e.title}`},a.default.createElement(h.Text,{variant:b.TextVariant.bodyLgMedium},e.title),a.default.createElement(g.default,{type:"inline",icon:a.default.createElement(h.Icon,{name:h.IconName.ArrowRight,color:b.IconColor.iconDefault}),onClick:()=>Ee(e)})),a.default.createElement(h.Text,{className:"description",variant:b.TextVariant.bodyMd,color:b.TextColor.textAlternative},e.subtitle)))))),a.default.createElement("div",{className:(0,r.default)("detail-view",{hidden:!A&&D})},a.default.createElement(h.Box,{className:"privacy-settings__header",marginTop:6,marginBottom:5,display:b.Display.Flex,flexDirection:b.FlexDirection.Row,justifyContent:b.JustifyContent.flexStart},a.default.createElement(g.default,{"data-testid":"category-back-button",type:"inline",icon:a.default.createElement(h.Icon,{name:h.IconName.ArrowLeft,size:h.IconSize.Lg,color:b.IconColor.iconDefault}),onClick:()=>{M(!1),setTimeout(()=>{F(!0)},B)}}),a.default.createElement(h.Box,{display:b.Display.Flex,alignItems:b.AlignItems.center,justifyContent:b.JustifyContent.center,width:b.BlockSize.Full},a.default.createElement(h.Text,{variant:b.TextVariant.headingLg,as:"h2"},null==R?void 0:R.title))),a.default.createElement("div",{className:"privacy-settings__settings","data-testid":"privacy-settings-settings"},1===(null==R?void 0:R.id)?a.default.createElement(a.default.Fragment,null,a.default.createElement(O.Setting,{dataTestId:"basic-functionality-toggle",value:ge,setValue:e=>{e?(t((0,_.onboardingToggleBasicFunctionalityOn)()),me({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.SettingsUpdated,properties:{settings_group:"onboarding_advanced_configuration",settings_type:"basic_functionality",old_value:!1,new_value:!0,was_profile_syncing_on:!1}})):t((0,_.openBasicFunctionalityModal)())},title:e("basicConfigurationLabel"),description:e("basicConfigurationDescription",[a.default.createElement("a",{href:"https://consensys.io/privacy-policy",key:"link",target:"_blank",rel:"noreferrer noopener"},e("privacyMsg"))])}),a.default.createElement(I.BackupAndSyncToggle,null),be&&a.default.createElement(h.Box,{paddingBottom:4},a.default.createElement(h.Text,{as:"p",color:b.TextColor.errorDefault,variant:b.TextVariant.bodySm},e("notificationsSettingsBoxError"))),a.default.createElement(O.Setting,{title:e("onboardingAdvancedPrivacyNetworkTitle"),showToggle:!1,description:a.default.createElement(a.default.Fragment,null,e("onboardingAdvancedPrivacyNetworkDescription",[a.default.createElement("a",{href:"https://consensys.io/privacy-policy/",key:"link",target:"_blank",rel:"noopener noreferrer"},e("privacyMsg")),a.default.createElement("a",{href:f.default.ADD_SOLANA_ACCOUNTS,key:"link",target:"_blank",rel:"noopener noreferrer"},e("onboardingAdvancedPrivacyNetworkDescriptionCallToAction"))]),a.default.createElement(h.Box,{paddingTop:4},a.default.createElement(h.Box,{display:b.Display.Flex,flexDirection:b.FlexDirection.Column,gap:5},Object.values(fe).filter(({chainId:e})=>!T.TEST_CHAINS.includes(e)).map(e=>{var n,o;return a.default.createElement(h.Box,{key:e.chainId,className:"privacy-settings__customizable-network",onClick:()=>{t((0,x.setEditedNetwork)({chainId:e.chainId})),t((0,x.toggleNetworkMenu)())},display:b.Display.Flex,alignItems:b.AlignItems.center,justifyContent:b.JustifyContent.spaceBetween},a.default.createElement(h.Box,{display:b.Display.Flex,alignItems:b.AlignItems.center},a.default.createElement(h.AvatarNetwork,{src:T.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[e.chainId]}),a.default.createElement(h.Box,{textAlign:b.TextAlign.Left,marginLeft:3},a.default.createElement(h.Text,{variant:b.TextVariant.bodySmMedium},e.name),a.default.createElement(h.Text,{variant:b.TextVariant.bodyXs,color:b.TextColor.textAlternative},null===(n=new URL(null==e||null===(o=e.rpcEndpoints[null==e?void 0:e.defaultRpcEndpointIndex])||void 0===o?void 0:o.url))||void 0===n?void 0:n.origin))),a.default.createElement(h.ButtonIcon,{iconName:h.IconName.ArrowRight,size:h.IconSize.Md}))}),a.default.createElement(h.ButtonLink,{onClick:()=>{t((0,x.toggleNetworkMenu)({isAddingNewNetwork:!0}))},justifyContent:b.JustifyContent.Left,variant:s.ButtonVariant.link},a.default.createElement(h.Box,{display:b.Display.Flex,alignItems:b.AlignItems.center},a.default.createElement(h.Icon,{name:h.IconName.Add,marginRight:3}),a.default.createElement(h.Text,{color:b.TextColor.primaryDefault},e("addANetwork")))))))})):null,2===(null==R?void 0:R.id)?a.default.createElement(a.default.Fragment,null,a.default.createElement(O.Setting,{value:X,setValue:Q,title:e("turnOnTokenDetection"),description:e("useTokenDetectionPrivacyDesc")}),a.default.createElement(O.Setting,{value:ae,setValue:oe,title:e("simulationsSettingSubHeader"),description:e("simulationsSettingDescription",[a.default.createElement("a",{key:"learn_more_link",href:m.TRANSACTION_SIMULATIONS_LEARN_MORE_LINK,rel:"noreferrer",target:"_blank"},e("learnMoreUpperCase"))])}),a.default.createElement(O.Setting,{title:e("onboardingAdvancedPrivacyIPFSTitle"),showToggle:!1,description:a.default.createElement(a.default.Fragment,null,e("onboardingAdvancedPrivacyIPFSDescription"),a.default.createElement(h.Box,{paddingTop:2},a.default.createElement(h.TextField,{value:ie,style:{width:"100%"},inputProps:{"data-testid":"ipfs-input"},onChange:t=>{(t=>{re(t);try{const{host:e}=new URL((0,u.addUrlProtocolPrefix)(t));if(!e||"gateway.ipfs.io"===e)throw new Error;ce(null)}catch(t){ce(e("onboardingAdvancedPrivacyIPFSInvalid"))}})(t.target.value)}}),ie?a.default.createElement(h.Text,{variant:b.TextVariant.bodySm,color:se?b.TextColor.errorDefault:b.TextColor.successDefault},se||e("onboardingAdvancedPrivacyIPFSValid")):null))}),a.default.createElement(O.Setting,{value:Z,setValue:ee,title:e("currencyRateCheckToggle"),dataTestId:"currency-rate-check-toggle",description:e("currencyRateCheckToggleDescription",[a.default.createElement("a",{key:"coingecko_link",href:m.COINGECKO_LINK,rel:"noreferrer",target:"_blank"},e("coingecko")),a.default.createElement("a",{key:"cryptocompare_link",href:m.CRYPTOCOMPARE_LINK,rel:"noreferrer",target:"_blank"},e("cryptoCompare")),a.default.createElement("a",{key:"privacy_policy_link",href:m.PRIVACY_POLICY_LINK,rel:"noreferrer",target:"_blank"},e("privacyMsg"))])}),a.default.createElement(O.Setting,{value:le,setValue:ue,title:e("ensDomainsSettingTitle"),description:a.default.createElement(a.default.Fragment,null,a.default.createElement(h.Text,{variant:b.TextVariant.inherit},e("ensDomainsSettingDescriptionIntroduction")),a.default.createElement(h.Box,{as:"ul",marginTop:4,marginBottom:4,paddingInlineStart:4,style:{listStyleType:"circle"}},a.default.createElement(h.Text,{variant:b.TextVariant.inherit,as:"li"},e("ensDomainsSettingDescriptionPart1")),a.default.createElement(h.Text,{variant:b.TextVariant.inherit,as:"li"},e("ensDomainsSettingDescriptionPart2"))),a.default.createElement(h.Text,{variant:b.TextVariant.inherit},e("ensDomainsSettingDescriptionOutroduction")))}),a.default.createElement(O.Setting,{value:te,setValue:ne,title:e("useMultiAccountBalanceChecker"),description:e("useMultiAccountBalanceCheckerSettingDescription")})):null,3===(null==R?void 0:R.id)?a.default.createElement(a.default.Fragment,null,a.default.createElement(O.Setting,{value:H,setValue:Y,title:e("use4ByteResolution"),description:e("toggleDecodeDescription")}),a.default.createElement(O.Setting,{value:de,setValue:pe,title:e("externalNameSourcesSetting"),description:e("externalNameSourcesSettingDescription")}),J&&a.default.createElement(a.default.Fragment,null,a.default.createElement(N.default,{dataCollectionForMarketing:K,setDataCollectionForMarketing:async e=>{try{t((0,x.setMarketingConsent)(e))}catch(e){l.default.error("Error setting marketing consent in default settings",e)}t((0,x.setDataCollectionForMarketing)(e))},fromDefaultSettings:!0}),a.default.createElement(w.default,{defaultPrivacySettings:!0}))):null)))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=A(e("classnames")),s=e("@metamask/snaps-sdk"),c=e("@metamask/profile-sync-controller/user-storage"),l=A(e("loglevel")),u=e("../../../../app/scripts/lib/util"),d=e("../../../hooks/identity/useBackupAndSync"),p=e("../../../../shared/constants/metametrics"),m=e("../../../../shared/lib/ui-utils"),f=A(e("../../../helpers/constants/zendesk-url")),g=A(e("../../../components/ui/button")),h=e("../../../components/component-library"),y=e("../../../contexts/metametrics"),b=e("../../../helpers/constants/design-system"),E=e("../../../helpers/constants/routes"),k=e("../../../hooks/useI18nContext"),C=e("../../../selectors"),v=e("../../../../shared/modules/selectors/networks"),x=e("../../../store/actions"),_=e("../../../ducks/app/app"),T=e("../../../../shared/constants/network"),S=e("../../../selectors/identity/backup-and-sync"),I=e("../../../components/app/identity/backup-and-sync-toggle/backup-and-sync-toggle"),w=A(e("../../settings/security-tab/delete-metametrics-data-button")),N=A(e("../../settings/security-tab/metametrics-toggle/metametrics-toggle")),O=e("./setting");function A(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}const B=500}}},{package:"$root$",file:"ui/pages/onboarding-flow/privacy-settings/privacy-settings.js"}],[7780,{"../../../components/component-library":6469,"../../../components/ui/toggle-button":6962,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"prop-types":5074,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Setting=void 0;var a=l(e("react")),o=l(e("prop-types")),i=e("../../../components/component-library"),r=l(e("../../../components/ui/toggle-button")),s=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext");function l(e){return e&&e.__esModule?e:{default:e}}const u=({value:e,setValue:t,title:n,description:o,showToggle:l=!0,dataTestId:u,disabled:d=!1})=>{const p=(0,c.useI18nContext)();return a.default.createElement(i.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.flexStart,marginTop:3,marginBottom:3,className:"privacy-settings__setting__wrapper","data-testid":u},a.default.createElement("div",{className:"privacy-settings__setting"},a.default.createElement(i.Text,{variant:s.TextVariant.bodyMdMedium},n),a.default.createElement(i.Text,{variant:s.TextVariant.bodySm,color:s.TextColor.textAlternative,as:"div"},o)),l?a.default.createElement("div",{className:"privacy-settings__setting__toggle"},a.default.createElement(r.default,{value:e,onToggle:e=>t(!e),offLabel:p("off"),onLabel:p("on"),disabled:d})):null)};n.Setting=u,u.propTypes={value:o.default.bool,setValue:o.default.func,title:o.default.string,description:o.default.oneOfType([o.default.object,o.default.string]),showToggle:o.default.bool,dataTestId:o.default.string,disabled:o.default.bool}}}},{package:"$root$",file:"ui/pages/onboarding-flow/privacy-settings/setting.js"}],[7781,{"../../../../shared/constants/app":5781,"../../../../shared/constants/metametrics":5796,"../../../../shared/lib/trace":5888,"../../../../shared/modules/browser-runtime.utils":5897,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors/selectors":7963,"../../../store/actions":7975,"./confirm-srp-modal":7782,"./recovery-phrase-chips":7783,"prop-types":5074,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=x;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=k(e("prop-types")),s=e("../../../components/component-library"),c=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),u=e("../../../store/actions"),d=e("../../../contexts/metametrics"),p=e("../../../../shared/constants/metametrics"),m=e("../../../selectors/selectors"),f=e("../../../helpers/constants/routes"),g=e("../../../../shared/constants/app"),h=e("../../../../shared/lib/trace"),y=e("../../../../shared/modules/browser-runtime.utils"),b=k(e("./confirm-srp-modal")),E=k(e("./recovery-phrase-chips"));function k(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}const v=e=>{const t=new Set,n=e.length;if(0===n)return[];for(;t.size<3;){const e=Math.floor(Math.random()*n);t.add(e)}return Array.from(t).map(t=>({index:t,word:e[t]}))};function x({secretRecoveryPhrase:e=""}){const t=(0,i.useDispatch)(),n=(0,o.useNavigate)(),{search:r}=(0,o.useLocation)(),k=(0,l.useI18nContext)(),C=(0,a.useContext)(d.MetaMetricsContext),{bufferedEndTrace:x}=C,_=(0,i.useSelector)(m.getHDEntropyIndex),T=(0,a.useMemo)(()=>e?e.split(" "):[],[e]),S=new URLSearchParams(r),I=S.get("isFromReminder"),w=S.get("isFromSettingsSecurity"),N=new URLSearchParams;I&&N.set("isFromReminder",I),w&&N.set("isFromSettingsSecurity",w);const O=N.toString(),[A,M]=(0,a.useState)(!1),[B,R]=(0,a.useState)(!1),[P,D]=(0,a.useState)(v(T)),[F,L]=(0,a.useState)("");(0,a.useEffect)(()=>{e||n(`${f.ONBOARDING_REVEAL_SRP_ROUTE}${O?`?${O}`:""}`,{replace:!0})},[n,e,O]);const j=(0,a.useCallback)(()=>{const e=v(T);D(e)},[T]),W=(0,a.useCallback)(e=>{if(e.some(e=>!e.word))L("");else{const t=[...T];e.forEach(e=>{t[e.index]=e.word}),L(t.join(" "))}},[T]),$=(0,a.useCallback)(()=>{R(F===e),M(!0)},[F,e]),U=(0,a.useCallback)(()=>{t((0,u.setSeedPhraseBackedUp)(!0)),C({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.OnboardingWalletSecurityPhraseConfirmed,properties:{hd_entropy_index:_}}),null==x||x({name:h.TraceName.OnboardingNewSrpCreateWallet}),null==x||x({name:h.TraceName.OnboardingJourneyOverall});const e=(0,y.getBrowserName)()===g.PLATFORM_FIREFOX||I?f.ONBOARDING_COMPLETION_ROUTE:f.ONBOARDING_METAMETRICS;n(`${e}${O?`?${O}`:""}`,{replace:!0})},[t,_,n,C,I,O,x]),z=(0,a.useCallback)(()=>{n(f.REVEAL_SRP_LIST_ROUTE,{replace:!0})},[n]);return a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,gap:6,className:"recovery-phrase recovery-phrase__confirm","data-testid":"confirm-recovery-phrase"},a.default.createElement(s.Box,null,A&&a.default.createElement(b.default,{isError:!B,onContinue:U,onClose:()=>{j(),M(!1)}}),I&&w?a.default.createElement(s.Box,{className:"recovery-phrase__header",display:c.Display.Grid,alignItems:c.AlignItems.center,gap:1,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(s.ButtonIcon,{iconName:s.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:s.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-confirm-back-button",onClick:()=>n(-1),ariaLabel:k("back")}),a.default.createElement(s.Text,{variant:c.TextVariant.headingSm,textAlign:c.TextAlign.Center},k("confirmRecoveryPhraseTitleSettings")),a.default.createElement(s.ButtonIcon,{iconName:s.IconName.Close,color:c.IconColor.iconDefault,size:s.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-confirm-close-button",onClick:z,ariaLabel:k("close")})):a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(s.ButtonIcon,{iconName:s.IconName.ArrowLeft,color:c.IconColor.iconDefault,size:s.ButtonIconSize.Md,"data-testid":"confirm-recovery-phrase-back-button",onClick:()=>n(-1),ariaLabel:k("back")})),a.default.createElement(s.Box,{justifyContent:c.JustifyContent.flexStart,marginBottom:4,width:c.BlockSize.Full},a.default.createElement(s.Text,{variant:c.TextVariant.headingLg,as:"h2"},k("confirmRecoveryPhraseTitle")))),a.default.createElement(s.Box,{marginBottom:6},a.default.createElement(s.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textDefault},k("confirmRecoveryPhraseDetails"))),T.length>0&&a.default.createElement(E.default,{secretRecoveryPhrase:T,quizWords:P,confirmPhase:!0,setInputValue:W})),a.default.createElement(s.Box,{width:c.BlockSize.Full},a.default.createElement(s.Button,{variant:s.ButtonVariant.Primary,width:c.BlockSize.Full,"data-testid":"recovery-phrase-confirm",size:s.ButtonSize.Lg,className:"recovery-phrase__footer__confirm--button",onClick:()=>$(),disabled:""===F.trim()},k("continue"))))}x.propTypes={secretRecoveryPhrase:r.default.string}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/confirm-recovery-phrase.js"}],[7782,{"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onContinue:e,onClose:t,isError:n}){const a=(0,r.useI18nContext)();return o.default.createElement(s.Modal,{isOpen:!0,onClose:()=>null,className:"confirm-srp-modal","data-testid":"confirm-srp-modal"},o.default.createElement(s.ModalOverlay,null),o.default.createElement(s.ModalContent,{alignItems:i.AlignItems.center},o.default.createElement(s.ModalHeader,null,o.default.createElement(s.Box,{textAlign:i.TextAlign.Center},o.default.createElement(s.Icon,{name:n?s.IconName.CircleX:s.IconName.Confirmation,size:s.IconSize.Xl,className:"skip-srp-backup-popover__icon",color:n?i.IconColor.errorDefault:i.IconColor.successDefault}),o.default.createElement(s.Text,{variant:i.TextVariant.headingMd,textAlign:i.TextAlign.Center,marginTop:2,as:"h2"},a(n?"confirmSrpErrorTitle":"confirmSrpSuccessTitle")))),o.default.createElement(s.Box,{paddingLeft:4,paddingRight:4},o.default.createElement(s.Text,{variant:i.TextVariant.bodyMd},a(n?"confirmSrpErrorDescription":"confirmSrpSuccessDescription")),o.default.createElement(s.Box,{marginTop:6},o.default.createElement(s.Button,{"data-testid":"confirm-srp-modal-button",variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,onClick:()=>{n?t():e()},block:!0},a(n?"tryAgain":"gotIt"))))))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../helpers/constants/design-system"),r=e("../../../hooks/useI18nContext"),s=e("../../../components/component-library")}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/confirm-srp-modal.tsx"}],[7783,{"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,classnames:4094,"prop-types":5074,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p,n.fakeSeedPhraseWords=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=l(e("classnames")),i=l(e("prop-types")),r=e("../../../components/component-library"),s=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/design-system");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=n.fakeSeedPhraseWords=["candy","maple","cake","sugar","pudding","cream","honey","rich","smooth","crumble","sweet","treat"];function p({secretRecoveryPhrase:e,phraseRevealed:t=!0,revealPhrase:n,confirmPhase:i,quizWords:l=[],setInputValue:u}){const p=(0,s.useI18nContext)(),m=(0,a.useMemo)(()=>l.map(e=>e.index),[l]),[f,g]=(0,a.useState)(m.map(e=>({index:e,word:"",actualIndexInSrp:-1}))),h=e=>{const t=e.reduce((e,t)=>(""===t.word&&e.push(t.index),e),[]);return t.length?Math.min(...t):-1},[y,b]=(0,a.useState)(h(f)),E=(0,a.useCallback)((e,t)=>{const n=[...f],a=n.findIndex(e=>e.index===y);n[a]={index:y,word:e,actualIndexInSrp:t},g(n),b(h(n))},[f,y]),k=(0,a.useCallback)(e=>{const t=[...f],n=t.findIndex(t=>t.word===e);t[n]={...t[n],word:"",actualIndexInSrp:-1},g(t),b(t[n].index)},[f]);(0,a.useEffect)(()=>{null==u||u(f)},[f,u]),(0,a.useEffect)(()=>{if(l.length){const e=l.map(e=>({index:e.index,word:"",actualIndexInSrp:-1}));g(e),b(h(e))}},[l]);const C=t?e:e.map((e,t)=>d[t%d.length]);return a.default.createElement(r.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:4},a.default.createElement(r.Box,{padding:4,borderRadius:c.BorderRadius.LG,display:c.Display.Grid,width:c.BlockSize.Full,backgroundColor:c.BackgroundColor.backgroundSection,className:"recovery-phrase__secret"},a.default.createElement(r.Box,{key:"recovery-phrase-chips",display:c.Display.Grid,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,gap:2,"data-testid":"recovery-phrase-chips","data-recovery-phrase":e.join(":"),"data-quiz-words":JSON.stringify(l),className:(0,o.default)("recovery-phrase__chips",{"recovery-phrase__chips--hidden":!t})},C.map((e,t)=>{var n;const o=m.includes(t),s=o?(null===(n=f.find(e=>e.index===t))||void 0===n?void 0:n.word)||"":e,l=t===y;return o||!i?a.default.createElement(r.Box,{as:o?"button":"div","data-testid":`recovery-phrase-chip-${t}`,className:"recovery-phrase__text",display:c.Display.Flex,alignItems:c.AlignItems.center,backgroundColor:c.BackgroundColor.backgroundDefault,borderColor:l?c.BorderColor.primaryDefault:c.BorderColor.borderDefault,borderWidth:l?2:1,borderRadius:c.BorderRadius.LG,paddingInline:2,paddingTop:1,paddingBottom:1,gap:1,onClick:()=>{o&&(""===s?b(t):k(s))}},a.default.createElement(r.Text,{color:c.TextColor.textAlternative,className:"recovery-phrase__word-index"},t+1,"."),a.default.createElement(r.Text,null,o?s:e)):a.default.createElement(r.TextField,{testId:`recovery-phrase-chip-${t}`,key:t,value:s,startAccessory:a.default.createElement(r.Text,{color:c.TextColor.textAlternative,className:"recovery-phrase__word-index"},t+1,"."),type:"password",disabled:!0,readOnly:!0})})),!t&&a.default.createElement(r.Box,{key:"recovery-phrase__secret-blocker-container",width:c.BlockSize.Full,height:c.BlockSize.Full,className:"recovery-phrase__secret-blocker-container"},a.default.createElement(r.Box,{display:c.Display.Flex,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,borderRadius:c.BorderRadius.SM,width:c.BlockSize.Full,height:c.BlockSize.Full,paddingTop:2,paddingBottom:9,paddingInline:0,className:"recovery-phrase__secret-blocker"}),a.default.createElement(r.Box,{as:"button",display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,backgroundColor:c.BackgroundColor.transparent,height:c.BlockSize.Full,width:c.BlockSize.Full,gap:2,className:"recovery-phrase__secret-blocker-text",onClick:()=>{null==n||n()},"data-testid":"recovery-phrase-reveal"},a.default.createElement(r.Icon,{name:r.IconName.EyeSlash,color:c.IconColor.iconDefault,size:r.IconSize.Md}),a.default.createElement(r.Text,{variant:c.TextVariant.bodyMd,color:c.TextColor.textDefault,fontWeight:c.FontWeight.Medium},p("tapToReveal")),a.default.createElement(r.Text,{variant:c.TextVariant.bodySm,color:c.TextColor.textDefault},p("tapToRevealNote"))))),3===l.length&&a.default.createElement(r.Box,{display:c.Display.Flex,gap:2,width:c.BlockSize.Full},l.map(t=>{const n=t.index;return f.some(e=>e.actualIndexInSrp===n)?a.default.createElement(r.ButtonBase,{"data-testid":`recovery-phrase-quiz-answered-${n}`,key:t.index,color:c.TextColor.textAlternative,borderRadius:c.BorderRadius.LG,block:!0,onClick:()=>{k(t.word)}},e[n]):a.default.createElement(r.Button,{"data-testid":`recovery-phrase-quiz-unanswered-${n}`,key:t.index,variant:r.ButtonVariant.Secondary,borderRadius:c.BorderRadius.LG,block:!0,borderColor:c.BorderColor.primaryDefault,color:c.TextColor.primaryDefault,onClick:()=>{E(t.word,n)}},e[n])})))}p.propTypes={secretRecoveryPhrase:i.default.array,phraseRevealed:i.default.bool,revealPhrase:i.default.func,confirmPhase:i.default.bool,quizWords:i.default.array,setInputValue:i.default.func}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/recovery-phrase-chips.js"}],[7784,{"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../store/actions":7975,react:5258,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({setSecretRecoveryPhrase:e}){const t=(0,o.useNavigate)(),n=(0,i.useI18nContext)(),{search:u}=(0,o.useLocation)(),d=new URLSearchParams(u),p=d.get("isFromReminder"),m=d.get("isFromSettingsSecurity"),f=new URLSearchParams;p&&f.set("isFromReminder",p);m&&f.set("isFromSettingsSecurity",m);const g=f.toString(),[h,y]=(0,a.useState)(""),[b,E]=(0,a.useState)(!1),k=(0,a.useCallback)(async n=>{try{const a=await(0,c.getSeedPhrase)(n);e(a),t(`${l.ONBOARDING_REVIEW_SRP_ROUTE}${g?`?${g}`:""}`,{replace:!0})}catch(e){E(!0)}},[e,t,g]),C=(0,a.useCallback)(()=>{t(m?l.REVEAL_SRP_LIST_ROUTE:l.DEFAULT_ROUTE,{replace:!0})},[t,m]);return a.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.center,height:s.BlockSize.Full,gap:6,className:"reveal-recovery-phrase","data-testid":"reveal-recovery-phrase"},a.default.createElement(r.Box,{width:s.BlockSize.Full},a.default.createElement(r.Box,{className:"recovery-phrase__header",display:s.Display.Grid,alignItems:s.AlignItems.center,gap:3,marginBottom:4,width:s.BlockSize.Full},a.default.createElement(r.ButtonIcon,{iconName:r.IconName.ArrowLeft,color:s.IconColor.iconDefault,size:r.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-back-button",onClick:C,ariaLabel:n("back")}),a.default.createElement(r.Text,{variant:s.TextVariant.headingSm,textAlign:s.TextAlign.Center},n("revealSecretRecoveryPhrase")),a.default.createElement(r.ButtonIcon,{iconName:r.IconName.Close,color:s.IconColor.iconDefault,size:r.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-close-button",onClick:C,ariaLabel:n("close")})),a.default.createElement(r.Box,{width:s.BlockSize.Full,as:"form",onSubmit:e=>{e.preventDefault(),k(h)}},a.default.createElement(r.FormTextField,{size:r.FormTextFieldSize.Lg,id:"account-details-authenticate",label:n("enterYourPasswordContinue"),onChange:e=>{y(e.target.value),E(!1)},value:h,error:b,helpText:b?n("unlockPageIncorrectPassword"):null,type:r.TextFieldType.Password,labelProps:{fontWeight:s.FontWeight.Medium},autoFocus:!0}))),a.default.createElement(r.Box,{width:s.BlockSize.Full},a.default.createElement(r.Button,{width:s.BlockSize.Full,variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,"data-testid":"reveal-recovery-phrase-continue",className:"reveal-recovery-phrase__footer--button",onClick:()=>k(h)},n("continue"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("../../../hooks/useI18nContext"),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),c=e("../../../store/actions"),l=e("../../../helpers/constants/routes");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/reveal-recovery-phrase.tsx"}],[7785,{"../../../../shared/constants/app":5781,"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/lib/trace":5888,"../../../../shared/modules/browser-runtime.utils":5897,"../../../components/app/srp-details-modal":6340,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/constants/routes":7028,"../../../hooks/useI18nContext":7157,"../../../selectors":7947,"../../../store/actions":7975,"./recovery-phrase-chips":7783,"prop-types":5074,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=x;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),i=e("react-redux"),r=C(e("prop-types")),s=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/routes"),l=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/metametrics"),p=e("../../../contexts/metametrics"),m=e("../../../selectors"),f=C(e("../../../components/app/srp-details-modal")),g=e("../../../store/actions"),h=e("../../../../shared/lib/trace"),y=e("../../../../shared/modules/browser-runtime.utils"),b=e("../../../../shared/constants/app"),E=e("../../../../shared/constants/onboarding"),k=C(e("./recovery-phrase-chips"));function C(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function x({secretRecoveryPhrase:e}){const t=(0,o.useNavigate)(),n=(0,s.useI18nContext)(),{search:r}=(0,o.useLocation)(),C=(0,i.useDispatch)(),v=(0,i.useSelector)(m.getFirstTimeFlowType),x=(0,a.useContext)(p.MetaMetricsContext),{bufferedEndTrace:_}=x,T=(0,i.useSelector)(m.getHDEntropyIndex),[S,I]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),O=new URLSearchParams(r),A=O.get("isFromReminder"),M=O.get("isFromSettingsSecurity"),B=new URLSearchParams;A&&B.set("isFromReminder",A),M&&B.set("isFromSettingsSecurity",M);const R=B.toString();(0,a.useEffect)(()=>{e||t({pathname:c.ONBOARDING_REVEAL_SRP_ROUTE,search:R?`?${R}`:""},{replace:!0})},[t,e,R]);const P=(0,a.useCallback)(()=>{x({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecurityPhraseWrittenDown,properties:{hd_entropy_index:T}}),t({pathname:c.ONBOARDING_CONFIRM_SRP_ROUTE,search:R?`?${R}`:""})},[T,t,x,R]),D=(0,a.useCallback)(()=>{x({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.SrpDefinitionClicked,properties:{location:"review_recovery_phrase"}}),N(!0)},[x]),F=(0,a.useCallback)(async()=>{await C((0,g.setSeedPhraseBackedUp)(!1)),x({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecuritySkipConfirmed,properties:{hd_entropy_index:T}}),null==_||_({name:h.TraceName.OnboardingNewSrpCreateWallet}),null==_||_({name:h.TraceName.OnboardingJourneyOverall}),(0,y.getBrowserName)()===b.PLATFORM_FIREFOX||v===E.FirstTimeFlowType.restore?t(c.ONBOARDING_COMPLETION_ROUTE,{replace:!0}):t(c.ONBOARDING_METAMETRICS,{replace:!0})},[_,C,v,T,t,x]),L=(0,a.useCallback)(()=>{t(`${c.ONBOARDING_REVEAL_SRP_ROUTE}${R?`?${R}`:""}`,{replace:!0})},[t,R]),j=(0,a.useCallback)(()=>{t(c.REVEAL_SRP_LIST_ROUTE,{replace:!0})},[t]);return a.default.createElement(l.Box,{display:u.Display.Flex,flexDirection:u.FlexDirection.Column,justifyContent:u.JustifyContent.spaceBetween,alignItems:u.AlignItems.Center,height:u.BlockSize.Full,gap:6,className:"recovery-phrase","data-testid":"recovery-phrase"},a.default.createElement(l.Box,null,w&&a.default.createElement(f.default,{onClose:()=>N(!1)}),A&&M?a.default.createElement(l.Box,{className:"recovery-phrase__header",display:u.Display.Grid,alignItems:u.AlignItems.center,gap:3,marginBottom:4,width:u.BlockSize.Full},a.default.createElement(l.ButtonIcon,{iconName:l.IconName.ArrowLeft,color:u.IconColor.iconDefault,size:l.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-review-back-button",onClick:L,ariaLabel:n("back")}),a.default.createElement(l.Text,{variant:u.TextVariant.headingSm,textAlign:u.TextAlign.Center},n("seedPhraseReviewTitleSettings")),a.default.createElement(l.ButtonIcon,{iconName:l.IconName.Close,color:u.IconColor.iconDefault,size:l.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-review-close-button",onClick:j,ariaLabel:n("close")})):a.default.createElement(l.Box,{justifyContent:u.JustifyContent.flexStart,marginBottom:4,width:u.BlockSize.Full},a.default.createElement(l.Text,{variant:u.TextVariant.headingLg,as:"h2"},n("seedPhraseReviewTitle"))),a.default.createElement(l.Box,{marginBottom:6},a.default.createElement(l.Text,{variant:u.TextVariant.bodyMd,color:u.TextColor.textAlternative,marginBottom:6},n("seedPhraseReviewDetails",[a.default.createElement(l.ButtonLink,{key:"seedPhraseReviewDetails",size:l.ButtonLinkSize.Inherit,onClick:D},n("secretRecoveryPhrase")),a.default.createElement(l.Text,{key:"seedPhraseReviewDetails2",fontWeight:u.FontWeight.Medium,color:u.TextColor.textAlternative},n("seedPhraseReviewDetails2"))]))),a.default.createElement(k.default,{secretRecoveryPhrase:e.split(" "),phraseRevealed:S,revealPhrase:()=>{x({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecurityPhraseRevealed,properties:{hd_entropy_index:T}}),I(!0)}})),a.default.createElement(l.Box,{width:u.BlockSize.Full,display:u.Display.Flex,flexDirection:u.FlexDirection.Column,gap:2},a.default.createElement(l.Button,{width:u.BlockSize.Full,variant:l.ButtonVariant.Primary,size:l.ButtonSize.Lg,"data-testid":"recovery-phrase-continue",className:"recovery-phrase__footer--button",disabled:!S,onClick:P},n("continue")),!A&&a.default.createElement(l.Button,{width:u.BlockSize.Full,variant:l.ButtonVariant.Link,size:l.ButtonSize.Lg,onClick:F,type:"button","data-testid":"recovery-phrase-remind-later"},n("secureWalletRemindLaterButton"))))}x.propTypes={secretRecoveryPhrase:r.default.string}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/review-recovery-phrase.js"}],[7786,{"../../../../shared/constants/metametrics":5796,"../../../components/component-library":6469,"../../../contexts/metametrics":6985,"../../../helpers/constants/common":7021,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"./types":7788,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onClose:e,loginError:t}){const n=(0,i.useI18nContext)(),d=(0,a.useContext)(l.MetaMetricsContext);return a.default.createElement(r.Modal,{isOpen:!0,onClose:e,"data-testid":"login-error-modal"},a.default.createElement(r.ModalOverlay,null),a.default.createElement(r.ModalContent,{alignItems:o.AlignItems.center},a.default.createElement(r.ModalHeader,{onClose:e},a.default.createElement(r.Box,{textAlign:o.TextAlign.Center},a.default.createElement(r.Icon,{name:r.IconName.Danger,size:r.IconSize.Xl,color:o.IconColor.warningDefault}),a.default.createElement(r.Text,{variant:o.TextVariant.headingMd,textAlign:o.TextAlign.Center,marginTop:4},t===u.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectTitle"):t===u.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredTitle"):n("loginErrorGenericTitle")))),a.default.createElement(r.Box,{paddingLeft:4,paddingRight:4},a.default.createElement(r.Text,{variant:o.TextVariant.bodyMd},t===u.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectDescription"):t===u.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredDescription"):n("loginErrorGenericDescription",[a.default.createElement(r.ButtonLink,{key:"loginErrorGenericDescription",size:r.ButtonLinkSize.Inherit,externalLink:!0,href:c.SUPPORT_LINK,onClick:()=>{d({category:s.MetaMetricsEventCategory.Onboarding,event:s.MetaMetricsEventName.SupportLinkClicked,properties:{url:c.SUPPORT_LINK,location:"Welcome page"}},{contextPropsIntoEventProperties:[s.MetaMetricsContextProp.PageTitle]})}},n("loginErrorGenericSupport"))])),a.default.createElement(r.Box,{marginTop:6},a.default.createElement(r.Button,{"data-testid":"login-error-modal-button",variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,onClick:e,block:!0},t===u.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectButton"):t===u.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredButton"):n("loginErrorGenericButton"))))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../helpers/constants/design-system"),i=e("../../../hooks/useI18nContext"),r=e("../../../components/component-library"),s=e("../../../../shared/constants/metametrics"),c=e("../../../helpers/constants/common"),l=e("../../../contexts/metametrics"),u=e("./types");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/login-error-modal.tsx"}],[7787,{"../../../../shared/constants/preferences":5805,"../../../components/component-library":6469,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"./types":7788,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SocialButton=void 0,n.default=function({onClose:e,loginOption:t,handleLogin:n}){const a=(0,s.useI18nContext)();return o.default.createElement(i.Modal,{isOpen:!0,onClose:e,className:"options-modal",isClosedOnOutsideClick:!1,"data-theme":c.ThemeType.dark},o.default.createElement(i.ModalContent,{size:i.ModalContentSize.Sm,alignItems:r.AlignItems.center},o.default.createElement(i.ModalHeader,{onClose:e},a("onboardingOptionTitle")),o.default.createElement(i.Box,{paddingInline:4},o.default.createElement(d,{"data-testid":t===l.LOGIN_OPTION.EXISTING?"onboarding-import-with-google-button":"onboarding-create-with-google-button",icon:o.default.createElement("img",{src:"images/icons/google.svg",className:"options-modal__social-icon",alt:a("onboardingOptionIcon",["Google"])}),label:t===l.LOGIN_OPTION.EXISTING?a("onboardingSignInWith",["Google"]):a("onboardingContinueWith",["Google"]),marginBottom:4,onClick:()=>n(l.LOGIN_TYPE.GOOGLE)}),o.default.createElement(d,{"data-testid":t===l.LOGIN_OPTION.EXISTING?"onboarding-import-with-apple-button":"onboarding-create-with-apple-button",icon:o.default.createElement(i.Icon,{name:i.IconName.Apple,color:r.IconColor.infoInverse,size:i.IconSize.Lg}),label:t===l.LOGIN_OPTION.EXISTING?a("onboardingSignInWith",["Apple"]):a("onboardingContinueWith",["Apple"]),marginBottom:2,onClick:()=>n(l.LOGIN_TYPE.APPLE)}),o.default.createElement(i.Box,{alignItems:r.AlignItems.center,marginBottom:4,className:"options-modal__or"},o.default.createElement(i.Text,{width:r.BlockSize.Min,variant:r.TextVariant.bodyMd,fontWeight:r.FontWeight.Medium,color:r.TextColor.textMuted,backgroundColor:r.BackgroundColor.backgroundDefault,paddingInline:2,marginInline:"auto",textTransform:r.TextTransform.Lowercase,as:"div",style:{position:"relative",zIndex:1}},a("or"))),o.default.createElement(i.Button,{"data-testid":t===l.LOGIN_OPTION.EXISTING?"onboarding-import-with-srp-button":"onboarding-create-with-srp-button",variant:i.ButtonVariant.Secondary,width:r.BlockSize.Full,size:i.ButtonSize.Lg,onClick:()=>n(l.LOGIN_TYPE.SRP)},t===l.LOGIN_OPTION.EXISTING?a("onboardingSrpImport"):a("onboardingSrpCreate")),o.default.createElement(i.Text,{variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,textAlign:r.TextAlign.Center,paddingTop:8,width:r.BlockSize.Full,margin:"auto"},a("onboardingLoginFooter",[o.default.createElement(i.Text,{as:"a",href:"https://consensys.io/terms-of-use",target:"_blank",rel:"noopener noreferrer",variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,color:r.TextColor.primaryDefault,key:"onboardingLoginFooterTermsOfUse"},a("onboardingLoginFooterTermsOfUse")),o.default.createElement(i.Text,{as:"a",variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,href:"https://consensys.io/privacy-notice",target:"_blank",rel:"noopener noreferrer",color:r.TextColor.primaryDefault,key:"onboardingLoginFooterPrivacyNotice"},a("onboardingLoginFooterPrivacyNotice"))])))))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},i=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=e("../../../hooks/useI18nContext"),c=e("../../../../shared/constants/preferences"),l=e("./types");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(null,arguments)}const d=n.SocialButton=o.default.forwardRef(({icon:e,label:t,...n},a)=>o.default.createElement(i.Button,u({ref:a,className:"options-modal__plain-button",variant:i.ButtonVariant.Primary,size:i.ButtonSize.Lg,block:!0,"data-theme":c.ThemeType.dark},n),o.default.createElement(i.Box,{display:r.Display.Flex,alignItems:r.AlignItems.center,justifyContent:r.JustifyContent.center,width:r.BlockSize.Full,gap:2},e,o.default.createElement(i.Box,null,t))))}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/login-options.tsx"}],[7788,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LOGIN_TYPE=n.LOGIN_OPTION=n.LOGIN_ERROR=void 0;n.LOGIN_TYPE={GOOGLE:"google",APPLE:"apple",SRP:"srp"},n.LOGIN_OPTION={NEW:"new",EXISTING:"existing"},n.LOGIN_ERROR={UNABLE_TO_CONNECT:"unable_to_connect",GENERIC:"generic",SESSION_EXPIRED:"session_expired"}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/types.ts"}],[7789,{"../../../../shared/constants/preferences":5805,"../../../../shared/modules/environment":5901,"../../../components/component-library":6469,"../../../components/ui/mascot":6917,"../../../helpers/constants/design-system":7023,"../../../helpers/utils/build-types":7049,"../../../hooks/useI18nContext":7157,"../../../store/actions":7975,"./login-options":7787,"./types":7788,classnames:4094,events:4361,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onLogin:e}){const t=(0,u.useI18nContext)(),n=(0,o.useRef)(new a.default),[y,b]=(0,o.useState)(!1),[E,k]=(0,o.useState)(null),C=(0,p.getIsSeedlessOnboardingFeatureEnabled)(),v=(0,r.useDispatch)(),x=(0,o.useCallback)(async t=>{E&&(b(!1),await v((0,f.setTermsOfUseLastAgreed)((new Date).getTime())),await e(t,E))},[v,E,e]);return o.default.createElement(c.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,justifyContent:l.JustifyContent.spaceBetween,gap:4,marginInline:"auto",marginTop:2,padding:6,className:"welcome-login","data-testid":"get-started"},o.default.createElement(c.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,className:"welcome-login__content"},o.default.createElement(c.Box,{className:(0,i.default)("welcome-login__mascot",{"welcome-login__mascot--image":(0,d.isFlask)()||(0,d.isBeta)()})},(0,d.isFlask)()||(0,d.isBeta)()?o.default.createElement("img",{src:"./images/logo/metamask-fox.svg",width:"178",height:"178"}):o.default.createElement(s.default,{animationEventEmitter:n.current,width:"268",height:"268"})),o.default.createElement(c.Text,{marginInline:5,textAlign:l.TextAlign.Center,as:"h2",className:"welcome-login__title","data-testid":"onboarding-welcome"},t("welcomeToMetaMask"),"!")),o.default.createElement(c.Box,{"data-theme":m.ThemeType.light,display:l.Display.Flex,flexDirection:l.FlexDirection.Column,gap:4},o.default.createElement(c.Button,{"data-testid":"onboarding-create-wallet",variant:c.ButtonVariant.Primary,size:c.ButtonSize.Lg,block:!0,onClick:async()=>{b(!0),k(h.LOGIN_OPTION.NEW),C||await e(h.LOGIN_TYPE.SRP,h.LOGIN_OPTION.NEW)}},t("onboardingCreateWallet")),o.default.createElement(c.Button,{"data-testid":"onboarding-import-wallet",variant:c.ButtonVariant.Secondary,size:c.ButtonSize.Lg,block:!0,onClick:async()=>{b(!0),k(h.LOGIN_OPTION.EXISTING),C||await e(h.LOGIN_TYPE.SRP,h.LOGIN_OPTION.EXISTING)}},t(C?"onboardingImportWallet":"onboardingSrpImport"))),C&&y&&E&&o.default.createElement(g.default,{loginOption:E,onClose:()=>{k(null)},handleLogin:x}))};var a=b(e("events")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=b(e("classnames")),r=e("react-redux"),s=b(e("../../../components/ui/mascot")),c=e("../../../components/component-library"),l=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/utils/build-types"),p=e("../../../../shared/modules/environment"),m=e("../../../../shared/constants/preferences"),f=e("../../../store/actions"),g=b(e("./login-options")),h=e("./types");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/welcome-login.tsx"}],[7790,{"../../../../shared/constants/app":5781,"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/onboarding":5803,"../../../../shared/lib/trace":5888,"../../../../shared/modules/browser-runtime.utils":5897,"../../../../shared/modules/environment":5901,"../../../../shared/modules/error":5902,"../../../components/ui/loading-screen":6911,"../../../contexts/metametrics":6985,"../../../helpers/constants/routes":7028,"../../../selectors":7947,"../../../store/actions":7975,"./login-error-modal":7786,"./types":7788,"./welcome-login":7789,loglevel:4824,react:5258,"react-redux":5202,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useDispatch)(),t=(0,i.useNavigate)(),n=(0,o.useSelector)(c.getCurrentKeyring),v=(0,f.getIsSeedlessOnboardingFeatureEnabled)(),x=(0,o.useSelector)(c.getFirstTimeFlowType),_=(0,o.useSelector)(c.getIsSocialLoginUserAuthenticated),T=(0,o.useSelector)(c.getIsParticipateInMetaMetricsSet),[S,I]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[O,A]=(0,a.useState)(null),M=(0,g.getBrowserName)()===h.PLATFORM_FIREFOX;(0,a.useEffect)(()=>{n&&!S?x===l.FirstTimeFlowType.import||x===l.FirstTimeFlowType.restore?t(T?s.ONBOARDING_COMPLETION_ROUTE:s.ONBOARDING_METAMETRICS,{replace:!0}):x===l.FirstTimeFlowType.socialCreate?t(s.ONBOARDING_COMPLETION_ROUTE,{replace:!0}):t(s.ONBOARDING_REVIEW_SRP_ROUTE,{replace:!0}):_&&(x===l.FirstTimeFlowType.socialCreate?t(s.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0}):t(s.ONBOARDING_UNLOCK_ROUTE,{replace:!0}))},[n,t,x,S,T,_,M]);const B=(0,a.useContext)(u.MetaMetricsContext),{bufferedTrace:R,bufferedEndTrace:P,onboardingParentContext:D}=B,F=(0,a.useCallback)(async()=>{N(!0),I(!0),await e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.create)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:m.MetaMetricsEventAccountType.Default}}),null==R||R({name:b.TraceName.OnboardingNewSrpCreateWallet,op:b.TraceOperation.OnboardingUserJourney,parentContext:null==D?void 0:D.current}),t(s.ONBOARDING_CREATE_PASSWORD_ROUTE)},[e,t,B,D,R]),L=(0,a.useCallback)(async()=>{N(!0),await e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.import)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImportStarted,properties:{account_type:m.MetaMetricsEventAccountType.Imported}}),null==R||R({name:b.TraceName.OnboardingExistingSrpImport,op:b.TraceOperation.OnboardingUserJourney,parentContext:null==D?void 0:D.current}),t(s.ONBOARDING_IMPORT_WITH_SRP_ROUTE)},[e,t,B,D,R]),j=(0,a.useCallback)(async t=>{if(v){null==R||R({name:b.TraceName.OnboardingSocialLoginAttempt,op:b.TraceOperation.OnboardingUserJourney,tags:{provider:t},parentContext:null==D?void 0:D.current});const n=await e((0,d.startOAuthLogin)(t,R,P));return null==P||P({name:b.TraceName.OnboardingSocialLoginAttempt}),n}return!0},[e,v,D,R,P]),W=(0,a.useCallback)((e,t)=>{const n=e instanceof Error?e.message:"Unknown error";n!==y.OAuthErrorMessages.USER_CANCELLED_LOGIN_ERROR?(null==R||R({name:b.TraceName.OnboardingSocialLoginError,op:b.TraceOperation.OnboardingError,tags:{provider:t,errorMessage:n},parentContext:D.current}),null==P||P({name:b.TraceName.OnboardingSocialLoginError}),null==P||P({name:b.TraceName.OnboardingSocialLoginAttempt,data:{success:!1}}),n!==y.OAuthErrorMessages.INVALID_OAUTH_STATE_ERROR?n!==y.OAuthErrorMessages.NO_REDIRECT_URL_FOUND_ERROR&&n!==y.OAuthErrorMessages.NO_AUTH_CODE_FOUND_ERROR?A(k.LOGIN_ERROR.GENERIC):A(k.LOGIN_ERROR.UNABLE_TO_CONNECT):A(k.LOGIN_ERROR.SESSION_EXPIRED)):A(null)},[D,R,P]),$=(0,a.useCallback)(async n=>{N(!0),I(!0),await e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.socialCreate)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:`${m.MetaMetricsEventAccountType.Default}_${n}`}});try{const e=await j(n);B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.SocialLoginCompleted,properties:{account_type:`${m.MetaMetricsEventAccountType.Default}_${n}`}}),e?(null==R||R({name:b.TraceName.OnboardingNewSocialCreateWallet,op:b.TraceOperation.OnboardingUserJourney,parentContext:D.current}),t(s.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})):t(s.ONBOARDING_ACCOUNT_EXIST,{replace:!0})}catch(e){W(e,n)}finally{N(!1)}},[e,j,B,t,D,W,R]),U=(0,a.useCallback)(async n=>{N(!0),e((0,d.setFirstTimeFlowType)(l.FirstTimeFlowType.socialImport)),B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.WalletImportStarted,properties:{account_type:`${m.MetaMetricsEventAccountType.Imported}_${n}`}});try{const e=await j(n);B({category:m.MetaMetricsEventCategory.Onboarding,event:m.MetaMetricsEventName.SocialLoginCompleted,properties:{account_type:`${m.MetaMetricsEventAccountType.Imported}_${n}`}}),e?t(s.ONBOARDING_ACCOUNT_NOT_FOUND):(null==R||R({name:b.TraceName.OnboardingExistingSocialLogin,op:b.TraceOperation.OnboardingUserJourney,parentContext:D.current}),t(s.ONBOARDING_UNLOCK_ROUTE))}catch(e){W(e,n)}finally{N(!1)}},[e,j,B,t,D,W,R]),z=(0,a.useCallback)(e=>{r.default.error("handleLoginError::error",e);e.message===y.OAuthErrorMessages.USER_CANCELLED_LOGIN_ERROR?A(null):A(k.LOGIN_ERROR.GENERIC)},[]),G=(0,a.useCallback)(async(t,n)=>{try{if(M||e((0,d.setParticipateInMetaMetrics)(null)),t===k.LOGIN_TYPE.SRP)return void(n===k.LOGIN_OPTION.NEW?await F():n===k.LOGIN_OPTION.EXISTING&&await L());if(!v)return;n===k.LOGIN_OPTION.NEW?await $(t):n===k.LOGIN_OPTION.EXISTING&&await U(t),M||e((0,d.setParticipateInMetaMetrics)(!0))}catch(e){z(e)}},[v,e,F,L,$,M,U,z]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(E.default,{onLogin:G}),w&&a.default.createElement(p.default,null),null!==O&&a.default.createElement(C.default,{onClose:()=>A(null),loginError:O}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("react-router-dom-v5-compat"),r=v(e("loglevel")),s=e("../../../helpers/constants/routes"),c=e("../../../selectors"),l=e("../../../../shared/constants/onboarding"),u=e("../../../contexts/metametrics"),d=e("../../../store/actions"),p=v(e("../../../components/ui/loading-screen")),m=e("../../../../shared/constants/metametrics"),f=e("../../../../shared/modules/environment"),g=e("../../../../shared/modules/browser-runtime.utils"),h=e("../../../../shared/constants/app"),y=e("../../../../shared/modules/error"),b=e("../../../../shared/lib/trace"),E=v(e("./welcome-login")),k=e("./types"),C=v(e("./login-error-modal"));function v(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/welcome.js"}],[7791,{"../../../components/app/permissions-connect-footer":6191,"../../../components/component-library":6469,"../../../components/ui/account-list":6850,"../../../components/ui/page-container":6929,"../../../helpers/constants/design-system":7023,"../../../hooks/useI18nContext":7157,"@metamask/keyring-api":2060,"@metamask/permission-controller":2334,"prop-types":5074,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=f(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("@metamask/permission-controller"),r=e("@metamask/keyring-api"),s=e("../../../hooks/useI18nContext"),c=f(e("../../../components/app/permissions-connect-footer")),l=f(e("../../../components/ui/account-list")),u=e("../../../components/ui/page-container"),d=e("../../../helpers/constants/design-system"),p=e("../../../components/component-library");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}const g=({selectedAccountAddresses:e,addressLastConnectedMap:t={},accounts:n,selectAccounts:a,selectNewAccountViaModal:m,cancelPermissionsRequest:f,permissionsRequestId:g,targetSubjectMetadata:h,nativeCurrency:y})=>{const[b,E]=(0,o.useState)(e),k=n.filter(e=>(0,r.isEvmAccountType)(e.type)),C=(0,s.useI18nContext)(),v=Object.keys(e).length>k.length,x=0===n.length?C("connectAccountOrCreate"):(null==h?void 0:h.subjectType)===i.SubjectType.Snap?C("selectAccountsForSnap"):C("selectAccounts");return o.default.createElement(o.default.Fragment,null,o.default.createElement(p.Box,{className:"permissions-connect-choose-account__content",display:d.Display.Flex,flexDirection:d.FlexDirection.Column,backgroundColor:d.BackgroundColor.backgroundAlternative,width:d.BlockSize.Full,height:d.BlockSize.Full,paddingLeft:6,paddingRight:6},o.default.createElement(p.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.center,alignItems:d.AlignItems.center,paddingTop:4,paddingBottom:4},o.default.createElement(p.Text,{variant:d.TextVariant.headingMd},C("connectWithMetaMask")),o.default.createElement(p.Text,{variant:d.TextVariant.bodyMd},x)),o.default.createElement(l.default,{accounts:n,selectNewAccountViaModal:m,addressLastConnectedMap:t,nativeCurrency:y,selectedAccounts:b,allAreSelected:()=>k.length===b.size,deselectAll:()=>{E(new Set)},selectAll:()=>{const e=new Set(k.map(e=>e.address));E(e)},handleAccountClick:e=>{const t=new Set(b);t.has(e)?t.delete(e):t.add(e),E(t)}})),o.default.createElement(p.Box,{backgroundColor:d.BackgroundColor.backgroundAlternative,className:"permissions-connect-choose-account__footer",paddingTop:4},(null==h?void 0:h.subjectType)!==i.SubjectType.Snap&&o.default.createElement(c.default,null),o.default.createElement(u.PageContainerFooter,{cancelButtonType:"default",onCancel:()=>f(g),cancelText:C("cancel"),onSubmit:()=>a(b),submitText:C("next"),disabled:v||0===b.size})))};g.propTypes={accounts:a.default.arrayOf(a.default.shape({address:a.default.string,addressLabel:a.default.string,lastConnectedDate:a.default.string,balance:a.default.string})).isRequired,selectAccounts:a.default.func.isRequired,selectNewAccountViaModal:a.default.func.isRequired,nativeCurrency:a.default.string.isRequired,addressLastConnectedMap:a.default.object,cancelPermissionsRequest:a.default.func.isRequired,permissionsRequestId:a.default.string.isRequired,selectedAccountAddresses:a.default.object.isRequired,targetSubjectMetadata:a.default.shape({extensionId:a.default.string,iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,subjectType:a.default.string})};n.default=g}}},{package:"$root$",file:"ui/pages/permissions-connect/choose-account/choose-account.js"}],[7792,{"./choose-account":7791},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./choose-account"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/choose-account/index.js"}],[7793,{"../../../../shared/constants/metametrics":5796,"../../../../shared/constants/network":5800,"../../../../shared/lib/caip25-caveat-merger":5830,"../../../../shared/modules/selectors/networks":5918,"../../../components/component-library":6469,"../../../components/multichain":6702,"../../../components/multichain/create-solana-account-modal/create-solana-account-modal":6676,"../../../components/multichain/pages/page":6806,"../../../components/multichain/pages/review-permissions-page/site-cell/site-cell":6813,"../../../components/ui/tabs":6954,"../../../contexts/metametrics":6985,"../../../helpers/constants/design-system":7023,"../../../helpers/utils/util":7082,"../../../hooks/useI18nContext":7157,"../../../hooks/useOriginTrustSignals":7176,"../../../hooks/useTrustSignals":7197,"../../../selectors":7947,"../../../selectors/multichain":7956,"./utils":7794,"@metamask/chain-agnostic-permission":1329,"@metamask/utils":2908,lodash:4816,react:5258,"react-redux":5202,"react-tippy":5240},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),i=e("@metamask/chain-agnostic-permission"),r=e("@metamask/utils"),s=e("lodash"),c=e("react-tippy"),l=e("../../../hooks/useI18nContext"),u=e("../../../selectors"),d=e("../../../../shared/modules/selectors/networks"),p=e("../../../components/component-library"),m=e("../../../components/multichain/pages/page"),f=e("../../../components/multichain/pages/review-permissions-page/site-cell/site-cell"),g=e("../../../helpers/constants/design-system"),h=e("../../../../shared/constants/network"),y=e("../../../selectors/multichain"),b=e("../../../components/ui/tabs"),E=e("../../../components/multichain"),k=e("../../../helpers/utils/util"),C=e("../../../../shared/constants/metametrics"),v=e("../../../contexts/metametrics"),x=e("../../../components/multichain/create-solana-account-modal/create-solana-account-modal"),_=e("../../../../shared/lib/caip25-caveat-merger"),T=e("../../../hooks/useOriginTrustSignals"),S=e("../../../hooks/useTrustSignals"),I=e("./utils");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}n.ConnectPage=({request:e,permissionsRequestId:t,rejectPermissionsRequest:n,approveConnection:w,targetSubjectMetadata:N})=>{const O=(0,l.useI18nContext)(),A=(0,a.useContext)(v.MetaMetricsContext),M=(0,o.useSelector)(t=>{var n;return(0,u.getPermissions)(t,null===(n=e.metadata)||void 0===n?void 0:n.origin)}),B=(0,a.useMemo)(()=>M?(0,I.getCaip25CaveatValueFromPermissions)(M):null,[M]),R=(0,I.getCaip25CaveatValueFromPermissions)(e.permissions),P=B?(0,_.mergeCaip25CaveatValues)(R,B):R,D=(0,i.getCaipAccountIdsFromCaip25CaveatValue)(P),F=(0,i.getAllScopesFromCaip25CaveatValue)(P),{promptToCreateSolanaAccount:L,isEip1193Request:j}=e.metadata??{},W=(0,o.useSelector)(d.getAllNetworkConfigurationsByCaipChainId),[$,U]=(0,a.useMemo)(()=>Object.entries(W).reduce(([e,t],[n,a])=>{const o=n;return(h.CAIP_FORMATTED_EVM_TEST_CHAINS.includes(o)?t:e).push({...a,caipChainId:o}),[e,t]},[[],[]]),[W]),z=(0,a.useMemo)(()=>[...$,...U].map(({caipChainId:e})=>e),[$,U]),[G,V]=(0,a.useState)(!1),[q,J]=(0,a.useState)(!1),[K,H]=(0,a.useState)(!1),Y=(0,o.useSelector)(y.getMultichainNetwork).chainId,X=U.find(e=>e.caipChainId===Y);let Q=X?[...$,X].map(({caipChainId:e})=>e):$.map(({caipChainId:e})=>e),Z=F.filter(e=>z.includes(e));if(j){Q=Q.filter(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155});!Z.some(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155})&&B&&(Z=Array.from(new Set([...Q,...Z])))}const ee=Z.length>0?Z:Q,[te,ne]=(0,a.useState)(ee),ae=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&V(!0),ne(e)},[V,ne]),oe=(0,o.useSelector)(u.getUpdatedAndSortedAccountsWithCaipAccountId),ie=(0,i.getAllNamespacesFromCaip25CaveatValue)(P).filter(e=>e!==r.KnownCaipNamespace.Wallet),re=oe.filter(e=>{const{chain:{namespace:t}}=(0,r.parseCaipAccountId)(e.caipAccountId);return ie.includes(t)}),se=re.filter(e=>(0,i.isCaipAccountIdInPermittedAccountIds)(e.caipAccountId,D)),ce=(0,I.getDefaultAccounts)(ie,se,re).map(({caipAccountId:e})=>e),[le,ue]=(0,a.useState)(ce),de=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&V(!0);let n=[...te];e.forEach(e=>{const{chain:{namespace:t}}=(0,r.parseCaipAccountId)(e);if(!n.some(e=>{try{const{namespace:n}=(0,r.parseCaipChainId)(e);return t===n}catch(e){return!1}})){const e=z.filter(e=>{try{const{namespace:n}=(0,r.parseCaipChainId)(e);return t===n}catch(e){return!1}});n=Array.from(new Set([...n,...e]))}}),ae(n,{isUserModified:t}),ue(e)},[V,ue,te,ae,z]);(0,a.useEffect)(()=>{G||(0,s.isEqual)(ce,le)||de(ce,{isUserModified:!1})},[G,de,le,JSON.stringify(ce)]);const pe=oe.filter(({caipAccountId:e})=>le.some(t=>t===e)),me=(0,a.useMemo)(()=>oe.some(({caipAccountId:e})=>{const{chain:t}=(0,r.parseCaipAccountId)(e);return t.namespace===r.KnownCaipNamespace.Solana}),[oe]),fe=(0,a.useCallback)(()=>{J(!0),A({category:C.MetaMetricsEventCategory.Navigation,event:C.MetaMetricsEventName.ViewPermissionedAccounts,properties:{location:"Connect view (accounts tab), Permissions toast, Permissions (dapp)"}})},[A]),ge=(0,a.useCallback)(()=>{H(!0)},[]),he=(0,a.useCallback)(()=>{H(!1)},[]),ye=(0,a.useCallback)(()=>{J(!1)},[]),be=(0,a.useCallback)(()=>{n(t)},[t,n]),Ee=(0,a.useCallback)(()=>{const t={...e,permissions:{...e.permissions,...(0,i.generateCaip25Caveat)(P,le,te)}};w(t)},[e,P,le,te,w]),ke=(0,k.transformOriginToTitle)(N.origin),Ce=(0,T.useOriginTrustSignals)(N.origin);return a.default.createElement(m.Page,{"data-testid":"connect-page",className:"main-container connect-page",backgroundColor:g.BackgroundColor.backgroundDefault},a.default.createElement(m.Header,{paddingTop:8,paddingBottom:4},a.default.createElement(p.Box,{display:g.Display.Flex,justifyContent:g.JustifyContent.center,marginBottom:8},N.iconUrl?a.default.createElement(a.default.Fragment,null,a.default.createElement(p.Box,{style:{filter:"blur(16px) brightness(1.1)",position:"absolute"}},a.default.createElement(p.AvatarFavicon,{backgroundColor:g.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Xl,src:N.iconUrl,name:ke})),a.default.createElement(p.AvatarFavicon,{backgroundColor:g.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Lg,src:N.iconUrl,name:ke,style:{zIndex:1,background:"transparent"}})):a.default.createElement(p.AvatarBase,{size:p.AvatarBaseSize.Lg,display:g.Display.Flex,alignItems:g.AlignItems.center,justifyContent:g.JustifyContent.center,color:g.TextColor.textAlternative,style:{borderWidth:"0px"},backgroundColor:g.BackgroundColor.backgroundMuted},(0,k.isIpAddress)(ke)?"?":(0,k.getAvatarFallbackLetter)(ke))),a.default.createElement(p.Box,{display:g.Display.Flex,alignItems:g.AlignItems.center,justifyContent:g.JustifyContent.center,gap:2,marginBottom:1},a.default.createElement(p.Text,{variant:g.TextVariant.headingLg,style:{wordBreak:"break-word",whiteSpace:"normal"}},ke),Ce.state===S.TrustSignalDisplayState.Verified&&a.default.createElement(c.Tooltip,{title:O("alertReasonOriginTrustSignalVerified"),position:"bottom",style:{display:"flex"}},a.default.createElement(p.Icon,{name:p.IconName.VerifiedFilled,color:g.IconColor.infoDefault,size:p.IconSize.Sm}))),a.default.createElement(p.Box,{display:g.Display.Flex,justifyContent:g.JustifyContent.center},a.default.createElement(p.Text,{color:g.TextColor.textAlternative},O("connectionDescription")))),a.default.createElement(m.Content,{paddingLeft:4,paddingRight:4,backgroundColor:g.BackgroundColor.transparent},a.default.createElement(b.Tabs,{defaultActiveTabKey:"accounts"},a.default.createElement(b.Tab,{name:O("accounts"),tabKey:"accounts","data-testid":"accounts-tab"},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(p.Box,{backgroundColor:g.BackgroundColor.backgroundDefault,borderRadius:g.BorderRadius.XL,style:{overflow:"auto",maxHeight:"268px",scrollbarColor:"var(--color-icon-muted) transparent"}},pe.map(e=>a.default.createElement(E.AccountListItem,{showConnectedStatus:!1,account:e,key:e.caipAccountId,selected:!1})),0===pe.length&&!L&&a.default.createElement(p.Box,{className:"connect-page__accounts-empty",display:g.Display.Flex,justifyContent:g.JustifyContent.center,alignItems:g.AlignItems.center,borderRadius:g.BorderRadius.XL},a.default.createElement(p.ButtonLink,{onClick:fe,"data-testid":"edit"},O("selectAccountToConnect")))),pe.length>0&&a.default.createElement(p.Box,{marginTop:4,display:g.Display.Flex,justifyContent:g.JustifyContent.center},a.default.createElement(p.ButtonLink,{onClick:fe,"data-testid":"edit"},O("editAccounts"))),L&&!me&&a.default.createElement(p.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,justifyContent:g.JustifyContent.center,alignItems:g.AlignItems.center,marginTop:4,gap:2},a.default.createElement(p.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternative,textAlign:g.TextAlign.Center},0===pe.length?O("solanaAccountRequired"):O("solanaAccountRequested")),a.default.createElement(p.Button,{variant:p.ButtonVariant.Secondary,width:g.BlockSize.Full,size:p.ButtonSize.Lg,onClick:ge,"data-testid":"create-solana-account"},O("createSolanaAccount"))),K&&a.default.createElement(x.CreateSolanaAccountModal,{onClose:he}),q&&a.default.createElement(E.EditAccountsModal,{accounts:oe,defaultSelectedAccountAddresses:le,onClose:ye,onSubmit:de}))),a.default.createElement(b.Tab,{name:O("permissions"),tabKey:"permissions","data-testid":"permissions-tab",disabled:L&&!me&&0===pe.length},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(f.SiteCell,{nonTestNetworks:$,testNetworks:U,accounts:oe,onSelectAccountAddresses:de,onSelectChainIds:ae,selectedAccountAddresses:le,selectedChainIds:te,isConnectFlow:!0}))))),a.default.createElement(m.Footer,null,a.default.createElement(p.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:4,width:g.BlockSize.Full},a.default.createElement(p.Box,{display:g.Display.Flex,gap:4,width:g.BlockSize.Full},a.default.createElement(p.Button,{block:!0,variant:p.ButtonVariant.Secondary,size:p.ButtonSize.Lg,"data-testid":"cancel-btn",onClick:be},O("cancel")),a.default.createElement(p.Button,{block:!0,"data-testid":"confirm-btn",size:p.ButtonSize.Lg,onClick:Ee,disabled:0===le.length||0===te.length},O("connect"))))))}}}},{package:"$root$",file:"ui/pages/permissions-connect/connect-page/connect-page.tsx"}],[7794,{"../../../helpers/utils/util":7082,"@metamask/chain-agnostic-permission":1329,"@metamask/utils":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaip25CaveatValueFromPermissions=function(e){var t;return(null==e||null===(t=e[o.Caip25EndowmentPermissionName])||void 0===t||null===(t=t.caveats)||void 0===t||null===(t=t.find(e=>e.type===o.Caip25CaveatType))||void 0===t?void 0:t.value)??{optionalScopes:{},requiredScopes:{},sessionProperties:{},isMultichainOrigin:!1}},n.getCaip25PermissionsResponse=function(e,t,n){const a=(0,o.setPermittedEthChainIds)(e,n),i=(0,o.setEthAccounts)(a,t);return{[o.Caip25EndowmentPermissionName]:{caveats:[{type:o.Caip25CaveatType,value:i}]}}},n.getDefaultAccounts=function(e,t,n){const o=[],r=new Set;t.forEach(t=>{const{chain:{namespace:n}}=(0,a.parseCaipAccountId)(t.caipAccountId);e.includes(n)&&(o.push(t),r.add(n))});const s=e.filter(e=>!r.has(e));if(s.length>0){const e=(0,i.sortSelectedInternalAccounts)(n);for(const t of s){const n=e.find(e=>{const{chain:{namespace:n}}=(0,a.parseCaipAccountId)(e.caipAccountId);return n===t});n&&o.push(n)}}return o};var a=e("@metamask/utils"),o=e("@metamask/chain-agnostic-permission"),i=e("../../../helpers/utils/util")}}},{package:"$root$",file:"ui/pages/permissions-connect/connect-page/utils.ts"}],[7795,{"./permissions-connect.container":7797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./permissions-connect.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/index.js"}],[7796,{"../../../app/scripts/lib/multichain/address":262,"../../../shared/constants/time":5817,"../../../shared/lib/multichain/scope-utils":5877,"../../components/app/permission-page-container":6185,"../../components/app/snaps/snap-authorship-header/snap-authorship-header":6222,"../../components/component-library":6469,"../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-account-wrapper":6572,"../../components/multichain-accounts/state2-wrapper/state2-wrapper":6579,"../../helpers/constants/routes":7028,"../../hooks/useAccountGroupsForPermissions":7134,"../multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page":7726,"../routes/utils":7814,"./choose-account":7792,"./connect-page/connect-page":7793,"./connect-page/utils":7794,"./redirect":7798,"./snaps/snap-install":7800,"./snaps/snap-result":7802,"./snaps/snap-update":7804,"./snaps/snaps-connect":7806,"@metamask/chain-agnostic-permission":1329,"@metamask/permission-controller":2334,"@metamask/rpc-errors":2485,"@metamask/snaps-utils":2785,"@metamask/utils":2908,"prop-types":5074,react:5258,"react-router-dom-v5-compat":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=M(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-router-dom-v5-compat"),r=e("@metamask/rpc-errors"),s=e("@metamask/permission-controller"),c=e("@metamask/snaps-utils"),l=e("@metamask/chain-agnostic-permission"),u=e("@metamask/utils"),d=e("../routes/utils"),p=e("../../../app/scripts/lib/multichain/address"),m=e("../../../shared/constants/time"),f=e("../../helpers/constants/routes"),g=M(e("../../components/app/permission-page-container")),h=e("../../components/component-library"),y=M(e("../../components/app/snaps/snap-authorship-header/snap-authorship-header")),b=e("../../components/multichain-accounts/state2-wrapper/state2-wrapper"),E=e("../multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page"),k=e("../../hooks/useAccountGroupsForPermissions"),C=e("../../../shared/lib/multichain/scope-utils"),v=e("../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-account-wrapper"),x=M(e("./choose-account")),_=M(e("./redirect")),T=M(e("./snaps/snaps-connect")),S=M(e("./snaps/snap-install")),I=M(e("./snaps/snap-update")),w=M(e("./snaps/snap-result")),N=e("./connect-page/connect-page"),O=e("./connect-page/utils");function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=1200*m.MILLISECOND;function P(e,t){const n=(0,O.getCaip25CaveatValueFromPermissions)(t),a=(0,l.getEthAccounts)(n);return a.length>0?new Set(a.map(e=>e.toLowerCase()).filter(p.isEthAddress)):new Set((0,p.isEthAddress)(e)?[e]:[])}function D(e){const t=(0,O.getCaip25CaveatValueFromPermissions)(e);return(0,l.getPermittedEthChainIds)(t)}class F extends o.Component{constructor(...e){var t;super(...e),B(this,"state",{redirecting:!1,selectedAccountAddresses:P(this.props.currentAddress,null===(t=this.props.permissionsRequest)||void 0===t?void 0:t.permissions),permissionsApproved:null,origin:this.props.origin,targetSubjectMetadata:this.props.targetSubjectMetadata||{},snapsInstallPrivacyWarningShown:this.props.snapsInstallPrivacyWarningShown}),B(this,"selectAccounts",e=>{const{confirmPermissionPath:t,requestType:n,snapsConnectPath:a,snapInstallPath:o,snapUpdatePath:i,snapResultPath:r,navigate:s}=this.props;this.setState({selectedAccountAddresses:e},()=>{switch(n){case"wallet_installSnap":s(o);break;case"wallet_updateSnap":s(i);break;case"wallet_installSnapResult":s(r);break;case"wallet_connectSnaps":s(a,{replace:!0});break;default:s(t)}})}),B(this,"cancelPermissionsRequest",async e=>{const{rejectPermissionsRequest:t}=this.props;e&&(await t(e),this.redirect(!1))}),B(this,"renderSnapChooseAccountState1",()=>{const{accounts:e,nativeCurrency:t,showNewAccountModal:n,newAccountNumber:a,addressLastConnectedMap:i,permissionsRequestId:r,targetSubjectMetadata:s}=this.props,{selectedAccountAddresses:c}=this.state;return o.default.createElement(x.default,{accounts:e,nativeCurrency:t,selectAccounts:e=>this.selectAccounts(e),selectNewAccountViaModal:e=>{n({onCreateNewAccount:t=>e(t),newAccountNumber:a})},addressLastConnectedMap:i,cancelPermissionsRequest:e=>this.cancelPermissionsRequest(e),permissionsRequestId:r,selectedAccountAddresses:c,targetSubjectMetadata:s})}),B(this,"renderSnapChooseAccountState2",()=>{const{permissionsRequestId:e,accountGroups:t,permissionsRequest:n}=this.props,{t:a}=this.context,i=(0,O.getCaip25CaveatValueFromPermissions)(null==n?void 0:n.permissions),r=[],s=(0,l.getAllScopesFromCaip25CaveatValue)(i).filter(e=>{const{namespace:t}=(0,u.parseCaipChainId)(e);return t!==u.KnownCaipNamespace.Wallet}),c=(0,l.getAllNamespacesFromCaip25CaveatValue)(i);return s.length>0&&s.forEach(e=>{r.push(e)}),c.includes(u.KnownCaipNamespace.Eip155)&&r.push(`${u.KnownCaipNamespace.Eip155}:0`),o.default.createElement(v.MultichainEditAccountsPageWrapper,{title:a("connectWithMetaMask"),permissions:null==n?void 0:n.permissions,onSubmit:e=>{const n=t.filter(t=>e.includes(t.id)&&(0,k.supportsChainIds)(t,r)),a=(0,C.getCaip25AccountIdsFromAccountGroupAndScope)(n,r).map(e=>(0,u.parseCaipAccountId)(e).address);this.selectAccounts(new Set(a))},onClose:()=>this.cancelPermissionsRequest(e)})}),B(this,"renderConnectPageState1",()=>{const e={rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),activeTabOrigin:this.state.origin,request:this.props.permissionsRequest||{},permissionsRequestId:this.props.permissionsRequestId,approveConnection:this.approveConnection,targetSubjectMetadata:this.props.targetSubjectMetadata};return o.default.createElement(N.ConnectPage,e)}),B(this,"renderConnectPageState2",()=>{const e={rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),activeTabOrigin:this.state.origin,request:this.props.permissionsRequest||{},permissionsRequestId:this.props.permissionsRequestId,approveConnection:this.approveConnection,targetSubjectMetadata:this.props.targetSubjectMetadata};return o.default.createElement(E.MultichainAccountsConnectPage,e)}),B(this,"approveConnection",(...e)=>{const{approvePermissionsRequest:t}=this.props;t(...e),this.redirect(!0)})}componentDidMount(){const{connectPath:e,confirmPermissionPath:t,snapsConnectPath:n,snapInstallPath:a,snapUpdatePath:o,snapResultPath:i,requestType:r,getRequestAccountTabIds:s,permissionsRequest:c,navigate:l,location:u,isRequestingAccounts:d}=this.props;if(s(),c){if(u.pathname===e&&!d)switch(r){case"wallet_installSnap":l(a,{replace:!0});break;case"wallet_updateSnap":l(o,{replace:!0});break;case"wallet_installSnapResult":l(i,{replace:!0});break;case"wallet_connectSnaps":l(n,{replace:!0});break;default:l(t,{replace:!0})}}else l(f.DEFAULT_ROUTE,{replace:!0})}componentDidUpdate(e){var t;const{permissionsRequest:n,lastConnectedInfo:a,targetSubjectMetadata:o}=this.props,{redirecting:i,origin:r}=this.state;if(null!=o&&o.origin&&(null===(t=e.targetSubjectMetadata)||void 0===t?void 0:t.origin)!==(null==o?void 0:o.origin)&&this.setState({targetSubjectMetadata:o}),!n&&e.permissionsRequest&&!i){var s,c;const t=((null===(s=a[r])||void 0===s?void 0:s.lastApproved)||0)>((null===(c=e.lastConnectedInfo[r])||void 0===c?void 0:c.lastApproved)||0);this.redirect(t)}}redirect(e){const{navigate:t,permissionsRequest:n}=this.props;let a=!0;a=!((null==n?void 0:n.permissions)&&Object.keys(n.permissions).includes("wallet_snap")),this.setState({redirecting:a,permissionsApproved:e}),a&&e?setTimeout(()=>t(f.DEFAULT_ROUTE),R):t(f.DEFAULT_ROUTE)}goBack(){const{navigate:e,connectPath:t}=this.props;e(t)}renderTopBar(e){const{targetSubjectMetadata:t}=this.state;return o.default.createElement(h.Box,{style:{boxShadow:t.subjectType===s.SubjectType.Snap&&"var(--shadow-size-lg) var(--color-shadow-default)"}},t.subjectType===s.SubjectType.Snap&&o.default.createElement(y.default,{snapId:t.origin,boxShadow:"none",onCancel:()=>{this.cancelPermissionsRequest(e)}}))}render(){var e;const{accounts:t,permissionsRequest:n,permissionsRequestId:a,connectPath:s,hideTopBar:l,targetSubjectMetadata:u,requestState:p,approvePendingApproval:m,rejectPendingApproval:h,setSnapsInstallPrivacyWarningShownStatus:y,approvePermissionsRequest:E,navigate:k,location:C}=this.props,{selectedAccountAddresses:v,permissionsApproved:x,redirecting:N,snapsInstallPrivacyWarningShown:O}=this.state,A=(0,c.isSnapId)(null==n||null===(e=n.metadata)||void 0===e?void 0:e.origin),M=(0,d.getRelativeLocationForNestedRoutes)(C,s);return o.default.createElement("div",{className:"permissions-connect"},!l&&this.renderTopBar(a),N&&x?o.default.createElement(_.default,{subjectMetadata:u}):o.default.createElement(i.Routes,{location:M},o.default.createElement(i.Route,{path:"/",element:(()=>A?o.default.createElement(b.State2Wrapper,{state1Component:this.renderSnapChooseAccountState1,state2Component:this.renderSnapChooseAccountState2}):o.default.createElement(b.State2Wrapper,{state1Component:this.renderConnectPageState1,state2Component:this.renderConnectPageState2}))()}),o.default.createElement(i.Route,{path:f.CONNECT_CONFIRM_PERMISSIONS_ROUTE,element:o.default.createElement(g.default,{request:n||{},approvePermissionsRequest:(...e)=>{E(...e),this.redirect(!0)},rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),selectedAccounts:t.filter(e=>v.has(e.address)),requestedChainIds:D(null==n?void 0:n.permissions),targetSubjectMetadata:u,navigate:k,connectPath:s,snapsInstallPrivacyWarningShown:O,setSnapsInstallPrivacyWarningShownStatus:y})}),o.default.createElement(i.Route,{path:f.CONNECT_SNAPS_CONNECT_ROUTE,element:o.default.createElement(T.default,{request:n||{},approveConnection:this.approveConnection,rejectConnection:e=>this.cancelPermissionsRequest(e),targetSubjectMetadata:u,snapsInstallPrivacyWarningShown:O,setSnapsInstallPrivacyWarningShownStatus:y})}),o.default.createElement(i.Route,{path:f.CONNECT_SNAP_INSTALL_ROUTE,element:o.default.createElement(S.default,{request:n||{},requestState:p||{},approveSnapInstall:e=>{m(e,{...n,permissions:p.permissions,approvedAccounts:[...v]}),this.setState({permissionsApproved:!0})},rejectSnapInstall:e=>{h(e,(0,r.serializeError)(r.providerErrors.userRejectedRequest())),this.setState({permissionsApproved:!0})},targetSubjectMetadata:u})}),o.default.createElement(i.Route,{path:f.CONNECT_SNAP_UPDATE_ROUTE,element:o.default.createElement(I.default,{request:n||{},requestState:p||{},approveSnapUpdate:e=>{m(e,{...n,permissions:p.permissions,approvedAccounts:[...v]}),this.setState({permissionsApproved:!0})},rejectSnapUpdate:e=>{h(e,(0,r.serializeError)(r.providerErrors.userRejectedRequest())),this.setState({permissionsApproved:!1})},targetSubjectMetadata:u})}),o.default.createElement(i.Route,{path:f.CONNECT_SNAP_RESULT_ROUTE,element:o.default.createElement(w.default,{request:n||{},requestState:p||{},approveSnapResult:e=>{m(e),this.setState({permissionsApproved:!0})},targetSubjectMetadata:u})})))}}n.default=F,B(F,"propTypes",{approvePermissionsRequest:a.default.func.isRequired,rejectPermissionsRequest:a.default.func.isRequired,getRequestAccountTabIds:a.default.func.isRequired,accounts:a.default.arrayOf(a.default.shape({id:a.default.string.isRequired,address:a.default.string.isRequired,metadata:a.default.shape({name:a.default.string.isRequired,snap:a.default.shape({id:a.default.string.isRequired,name:a.default.string,enabled:a.default.bool}),keyring:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,addressLabel:a.default.string.isRequired,label:a.default.string.isRequired,balance:a.default.string.isRequired})).isRequired,accountGroups:a.default.arrayOf(a.default.shape({id:a.default.string.isRequired,accounts:a.default.arrayOf(a.default.object.isRequired)})).isRequired,currentAddress:a.default.string.isRequired,origin:a.default.string,showNewAccountModal:a.default.func.isRequired,newAccountNumber:a.default.number.isRequired,nativeCurrency:a.default.string,permissionsRequest:a.default.object,addressLastConnectedMap:a.default.object.isRequired,lastConnectedInfo:a.default.object.isRequired,permissionsRequestId:a.default.string,navigate:a.default.func.isRequired,location:a.default.object.isRequired,connectPath:a.default.string.isRequired,confirmPermissionPath:a.default.string.isRequired,requestType:a.default.string.isRequired,snapsConnectPath:a.default.string.isRequired,snapInstallPath:a.default.string.isRequired,snapUpdatePath:a.default.string.isRequired,snapResultPath:a.default.string.isRequired,requestState:a.default.object.isRequired,approvePendingApproval:a.default.func.isRequired,rejectPendingApproval:a.default.func.isRequired,setSnapsInstallPrivacyWarningShownStatus:a.default.func.isRequired,snapsInstallPrivacyWarningShown:a.default.bool.isRequired,hideTopBar:a.default.bool,targetSubjectMetadata:a.default.shape({extensionId:a.default.string,iconUrl:a.default.string,name:a.default.string,origin:a.default.string,subjectType:a.default.string}),isRequestingAccounts:a.default.bool.isRequired}),B(F,"defaultProps",{origin:"",nativeCurrency:"",permissionsRequest:undefined,permissionsRequestId:""}),B(F,"contextTypes",{t:a.default.func})}}},{package:"$root$",file:"ui/pages/permissions-connect/permissions-connect.component.js"}],[7797,{"../../ducks/metamask/metamask":7010,"../../helpers/constants/routes":7028,"../../helpers/utils/util":7082,"../../selectors":7947,"../../selectors/multichain-accounts/account-tree":7951,"../../store/actions":7975,"./permissions-connect.component":7796,"@metamask/chain-agnostic-permission":1329,"@metamask/keyring-api":2060,"@metamask/permission-controller":2334,"@metamask/snaps-rpc-methods":2615,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("@metamask/permission-controller"),i=e("@metamask/snaps-rpc-methods"),r=e("react-redux"),s=e("@metamask/keyring-api"),c=e("@metamask/chain-agnostic-permission"),l=e("../../selectors"),u=e("../../ducks/metamask/metamask"),d=e("../../helpers/utils/util"),p=e("../../store/actions"),m=e("../../helpers/constants/routes"),f=e("../../selectors/multichain-accounts/account-tree"),g=(a=e("./permissions-connect.component"))&&a.__esModule?a:{default:a};const h=(0,r.connect)((e,t)=>{var n,a,r;const{match:{params:{id:p}},location:{pathname:g}}=t;let h=(0,l.getPermissionsRequests)(e);h=[...h,...(0,l.getSnapInstallOrUpdateRequests)(e)];const{address:y}=(0,l.getSelectedInternalAccount)(e),b=h.find(e=>e.metadata.id===p),{metadata:E={},diff:k={}}=b||{},{origin:C}=E,v=(0,u.getNativeCurrency)(e),x=Boolean(null==k?void 0:k.permissionDiffMap),_=Boolean((null==b||null===(n=b.permissions)||void 0===n?void 0:n[c.Caip25EndowmentPermissionName])&&!x),T=(0,l.getTargetSubjectMetadata)(e,C)??{name:(0,d.getURLHostName)(C)||C,origin:C,iconUrl:null,extensionId:null,subjectType:o.SubjectType.Unknown};let S=(0,l.getRequestType)(e,p);b&&1===Object.keys(b.permissions||{}).length&&null!==(a=b.permissions)&&void 0!==a&&a[i.WALLET_SNAP_PERMISSION_KEY]&&(S="wallet_connectSnaps");const I=(0,l.getRequestState)(e,p)||{},w=(0,l.getAccountsWithLabels)(e).filter(e=>(0,s.isEvmAccountType)(e.type)),N=(0,l.getLastConnectedInfo)(e)||{},O=(null===(r=N[C])||void 0===r?void 0:r.accounts)||{};Object.keys(O).forEach(e=>{O[e]=(0,d.formatDate)(O[e],"yyyy-MM-dd")});const A=`${m.CONNECT_ROUTE}/${p}`,M=`${A}${m.CONNECT_CONFIRM_PERMISSIONS_ROUTE}`,B=`${A}${m.CONNECT_SNAPS_CONNECT_ROUTE}`,R=`${A}${m.CONNECT_SNAP_INSTALL_ROUTE}`,P=`${A}${m.CONNECT_SNAP_UPDATE_ROUTE}`,D=`${A}${m.CONNECT_SNAP_RESULT_ROUTE}`,F=g===R||g===P||g===D;let L=1+_;L+=F,L=L.toString();let j="";if(g===A)j="1";else if(g===M)j=_?"2":"1";else if(F)j=_?"3":"2";else{if(g!==B)throw new Error("Incorrect path for permissions-connect component");j=1}return{isRequestingAccounts:_,requestType:S,snapsConnectPath:B,snapInstallPath:R,snapUpdatePath:P,snapResultPath:D,confirmPermissionPath:M,requestState:I,hideTopBar:F,snapsInstallPrivacyWarningShown:(0,l.getSnapsInstallPrivacyWarningShown)(e),permissionsRequest:b,permissionsRequestId:p,accounts:w,accountGroups:(0,f.getAccountGroupWithInternalAccounts)(e),currentAddress:y,origin:C,newAccountNumber:w.length+1,nativeCurrency:v,addressLastConnectedMap:O,lastConnectedInfo:N,connectPath:A,totalPages:L,page:j,targetSubjectMetadata:T}},e=>({approvePermissionsRequest:t=>e((0,p.approvePermissionsRequest)(t)),rejectPermissionsRequest:t=>e((0,p.rejectPermissionsRequest)(t)),approvePendingApproval:(t,n)=>e((0,p.resolvePendingApproval)(t,n)),rejectPendingApproval:(t,n)=>e((0,p.rejectPendingApproval)(t,n)),setSnapsInstallPrivacyWarningShownStatus:t=>{e((0,p.setSnapsInstallPrivacyWarningShownStatus)(t))},showNewAccountModal:({onCreateNewAccount:t,newAccountNumber:n})=>e((0,p.showModal)({name:"NEW_ACCOUNT",onCreateNewAccount:t,newAccountNumber:n})),getRequestAccountTabIds:()=>e((0,p.getRequestAccountTabIds)())}))(g.default);n.default=h}}},{package:"$root$",file:"ui/pages/permissions-connect/permissions-connect.container.js"}],[7798,{"./permissions-redirect.component":7799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./permissions-redirect.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/redirect/index.js"}],[7799,{"../../../components/app/permissions-connect-footer":6191,"../../../components/component-library":6469,"../../../contexts/i18n":6980,"../../../helpers/constants/design-system":7023,"prop-types":5074,react:5258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=l(e("prop-types")),i=e("../../../helpers/constants/design-system"),r=e("../../../contexts/i18n"),s=e("../../../components/component-library"),c=l(e("../../../components/app/permissions-connect-footer"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d({subjectMetadata:e}){const t=(0,a.useContext)(r.I18nContext),[n,o]=(0,a.useState)(e);return(0,a.useEffect)(()=>{e&&e.origin&&o(e)},[e]),a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,width:i.BlockSize.Full,height:i.BlockSize.Full,justifyContent:i.JustifyContent.spaceBetween},a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center,justifyContent:i.JustifyContent.center,width:i.BlockSize.Full,height:i.BlockSize.Full,backgroundColor:i.BackgroundColor.backgroundDefault,borderRadius:i.BorderRadius.XS,border:`1px solid ${i.BorderColor.borderMuted}`,boxShadow:"var(--shadow-size-lg) var(--color-shadow-default)"},a.default.createElement(s.Box,{display:i.Display.Flex,marginBottom:4},a.default.createElement(s.Text,{variant:i.TextVariant.headingMd},t("connecting"))),a.default.createElement(s.Box,{display:i.Display.Flex,backgroundColor:i.BackgroundColor.infoMuted,borderRadius:i.BorderRadius.pill,padding:2},a.default.createElement(s.AvatarToken,{src:n.iconUrl,name:n.name,size:s.AvatarTokenSize.Lg}),a.default.createElement(s.Box,{display:i.Display.Flex,alignItems:i.AlignItems.center,justifyContent:i.JustifyContent.center,paddingLeft:4,paddingRight:4},a.default.createElement(s.Icon,{name:s.IconName.Confirmation,size:s.IconSize.Xl,color:i.IconColor.infoDefault})),a.default.createElement(s.AvatarToken,{src:"/images/logo/metamask-fox.svg",size:s.AvatarTokenSize.Lg,name:"metamask-fox"}))),a.default.createElement(s.Box,{backgroundColor:i.BackgroundColor.backgroundDefault,padding:4},a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column},a.default.createElement(c.default,null),a.default.createElement(s.Box,{display:i.Display.Flex,paddingTop:4,width:i.BlockSize.Full,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center},a.default.createElement(s.Button,{variant:s.ButtonVariant.Secondary,size:s.ButtonSize.Lg,width:i.BlockSize.Full,marginRight:2,disabled:!0},t("back")),a.default.createElement(s.Button,{variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,width:i.BlockSize.Full,marginLeft:2,disabled:!0,loading:!0})))))}d.propTypes={subjectMetadata:o.default.shape({extensionId:o.default.string,iconUrl:o.default.string,subjectType:o.default.string,name:o.default.string.isRequired,origin:o.default.string.isRequired})}}}},{package:"$root$",file:"ui/pages/permissions-connect/redirect/permissions-redirect.component.js"}],[7800,{"./snap-install":7801},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-install"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-install/index.js"}],[7801,{"../../../../components/app/permission-connect-header":6183,"../../../../components/app/snaps/install-error/install-error":6213,"../../../../components/app/snaps/snap-authorship-header":6221,"../../../../components/app/snaps/snap-install-warning":6234,"../../../../components/app/snaps/snap-permissions-list":6246,"../../../../components/component-library":6469,"../../../../components/ui/page-container":6929,"../../../../components/ui/pulse-loader/pulse-loader":6938,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/util":7082,"../../../../hooks/useI18nContext":7157,"../../../../hooks/useOriginMetadata":7175,"../../../../hooks/useScrollRequired":7179,"../../../../selectors":7947,"../util":7808,"@metamask/snaps-utils":2785,"prop-types":5074,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var a=x(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("@metamask/snaps-utils"),s=e("../../../../components/ui/page-container"),c=e("../../../../hooks/useI18nContext"),l=x(e("../../../../components/app/snaps/snap-install-warning")),u=e("../../../../helpers/constants/design-system"),d=e("../util"),p=x(e("../../../../components/ui/pulse-loader/pulse-loader")),m=x(e("../../../../components/app/snaps/snap-authorship-header")),f=e("../../../../components/component-library"),g=x(e("../../../../components/app/snaps/snap-permissions-list")),h=e("../../../../hooks/useScrollRequired"),y=x(e("../../../../components/app/snaps/install-error/install-error")),b=e("../../../../hooks/useOriginMetadata"),E=e("../../../../selectors"),k=e("../../../../helpers/utils/util"),C=x(e("../../../../components/app/permission-connect-header"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function x(e){return e&&e.__esModule?e:{default:e}}function _({request:e,requestState:t,approveSnapInstall:n,rejectSnapInstall:a,targetSubjectMetadata:v}){var x,_,T;const S=(0,c.useI18nContext)(),I=(0,b.useOriginMetadata)(null==e||null===(x=e.metadata)||void 0===x?void 0:x.dappOrigin)||{},{origin:w,iconUrl:N}=I,[O,A]=(0,o.useState)(!1),M=(0,i.useSelector)(E.getSnapsMetadata),[B,R]=(0,o.useState)(!1),{isScrollable:P,hasScrolledToBottom:D,scrollToBottom:F,ref:L,onScroll:j}=(0,h.useScrollRequired)([t]),W=(0,o.useCallback)(()=>a(e.metadata.id),[e,a]),$=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),{name:U}=(0,i.useSelector)(e=>(0,E.getSnapMetadata)(e,v.origin)),z=!t.loading&&t.error,G=t.loading,V=(0,r.isSnapId)(null==e||null===(_=e.metadata)||void 0===_?void 0:_.dappOrigin),q=(0,d.getSnapInstallWarnings)((null==t?void 0:t.permissions)??{},S,U,(0,k.getSnapName)(M)),J=q.length>0;return o.default.createElement(f.Box,{className:"snap-install",display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween,height:u.BlockSize.Full,borderStyle:u.BorderStyle.none,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundAlternative},!G&&!z||V?o.default.createElement(m.default,{snapId:G&&V?null==e||null===(T=e.metadata)||void 0===T?void 0:T.dappOrigin:v.origin,onCancel:W}):o.default.createElement(C.default,{origin:w,iconUrl:N}),o.default.createElement(f.Box,{ref:G||z?undefined:L,onScroll:j,className:"snap-install__content",style:{overflowY:"auto",flex:!G&&!z&&"1"},paddingLeft:4,paddingRight:4},G&&o.default.createElement(f.Box,{display:u.Display.Flex,className:"snap-install__content__loader-container",flexDirection:u.FlexDirection.Column,alignItems:u.AlignItems.center,justifyContent:u.JustifyContent.center},o.default.createElement(p.default,null)),z&&o.default.createElement(y.default,{iconName:f.IconName.Warning,title:S("connectionFailed"),description:S("connectionFailedDescription",[o.default.createElement(f.Text,{as:"span",key:"1",fontWeight:u.FontWeight.Medium},U)]),error:t.error}),!z&&!G&&o.default.createElement(o.default.Fragment,null,o.default.createElement(f.Text,{variant:u.TextVariant.headingMd,paddingTop:4,paddingBottom:2,textAlign:"center"},S("installRequest")),o.default.createElement(f.Text,{className:"snap-install__content__permission-description",paddingBottom:4,paddingLeft:4,paddingRight:4,textAlign:u.TextAlign.Center},S("snapInstallRequest",[o.default.createElement(f.Text,{as:"span",key:"2",variant:u.TextVariant.bodyMd,fontWeight:u.FontWeight.Medium},U)])),o.default.createElement(f.Box,{display:u.Display.Flex,backgroundColor:u.BackgroundColor.backgroundDefault,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,borderRadius:u.BorderRadius.XL},o.default.createElement(g.default,{snapId:v.origin,snapName:U,permissions:t.permissions||{},connections:t.connections||{},onShowAllPermissions:()=>{R(!0)}})),o.default.createElement(f.Box,{className:"snap-install__scroll-button-area"},!P||D||B?null:o.default.createElement(f.AvatarIcon,{className:"snap-install__scroll-button","data-testid":"snap-install-scroll",iconName:f.IconName.Arrow2Down,backgroundColor:u.BackgroundColor.infoDefault,color:u.IconColor.primaryInverse,onClick:F,style:{cursor:"pointer"}})))),o.default.createElement(f.Box,{className:"snap-install__footer",display:u.Display.Flex,alignItems:u.AlignItems.center,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundAlternative},o.default.createElement(s.PageContainerFooter,{cancelButtonType:"default",hideCancel:z,disabled:G||!z&&P&&!D,onCancel:W,cancelText:S("cancel"),onSubmit:()=>{!z&&J?A(!0):z?W():$()},submitText:S(z?"ok":G?"connect":"confirm")})),O&&o.default.createElement(l.default,{onCancel:()=>A(!1),onSubmit:$,warnings:q,snapName:U}))}_.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapInstall:a.default.func.isRequired,rejectSnapInstall:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-install/snap-install.js"}],[7802,{"./snap-result":7803},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-result"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-result/index.js"}],[7803,{"../../../../components/app/snaps/install-error/install-error":6213,"../../../../components/app/snaps/snap-authorship-header":6221,"../../../../components/component-library":6469,"../../../../components/ui/box/box":6856,"../../../../components/ui/page-container":6929,"../../../../components/ui/pulse-loader/pulse-loader":6938,"../../../../helpers/constants/design-system":7023,"../../../../hooks/useI18nContext":7157,"../../../../selectors":7947,"prop-types":5074,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var a=h(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("../../../../components/ui/page-container"),s=e("../../../../hooks/useI18nContext"),c=h(e("../../../../components/ui/box/box")),l=e("../../../../helpers/constants/design-system"),u=e("../../../../components/component-library"),d=h(e("../../../../components/ui/pulse-loader/pulse-loader")),p=h(e("../../../../components/app/snaps/install-error/install-error")),m=h(e("../../../../components/app/snaps/snap-authorship-header")),f=e("../../../../selectors");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function y({request:e,requestState:t,approveSnapResult:n,targetSubjectMetadata:a}){const g=(0,s.useI18nContext)(),h=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),y=!t.loading&&t.error,b=t.loading,{name:E}=(0,i.useSelector)(e=>(0,f.getSnapMetadata)(e,a.origin));return o.default.createElement(c.default,{className:"page-container snap-result",justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,borderStyle:l.BorderStyle.none,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(m.default,{snapId:a.origin,onCancel:h}),o.default.createElement(c.default,{className:"snap-result__content",paddingLeft:4,paddingRight:4,alignItems:l.AlignItems.center,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative,height:l.BlockSize.Full,justifyContent:l.JustifyContent.center},b&&o.default.createElement(c.default,{className:"snap-result__content__loader-container",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,height:l.BlockSize.Full},o.default.createElement(d.default,null)),!b&&!y&&function(e,t){let n;switch(e){case"wallet_installSnap":n=g("snapInstallSuccess");break;case"wallet_updateSnap":n=g("snapUpdateSuccess");break;default:n=g("snapResultSuccess")}return o.default.createElement(c.default,{flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,height:l.BlockSize.Full,paddingTop:2,paddingBottom:2,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(u.AvatarIcon,{className:"snap-result__header__icon",iconName:u.IconName.Confirmation,size:u.AvatarIconSize.Xl,color:l.IconColor.successDefault,backgroundColor:l.BackgroundColor.successMuted}),o.default.createElement(u.Text,{fontWeight:l.FontWeight.Bold,textAlign:l.TextAlign.Center,variant:l.TextVariant.headingLg,paddingBottom:2,marginTop:4},n),o.default.createElement(u.Text,{textAlign:l.TextAlign.Center},g("snapResultSuccessDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},t)])))}(t.type,E),y&&function(e,n){let a,i;switch(e){case"wallet_installSnap":a=g("snapInstallationErrorTitle"),i=g("snapInstallationErrorDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},n)]);break;case"wallet_updateSnap":a=g("snapUpdateErrorTitle"),i=g("snapUpdateErrorDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},n)]);break;default:a=g("snapResultError")}return o.default.createElement(p.default,{error:t.error,title:a,description:i,iconName:u.IconName.Warning})}(t.type,E)),o.default.createElement(c.default,{className:"snap-result__footer",alignItems:l.AlignItems.center,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(r.PageContainerFooter,{hideCancel:!0,disabled:b,onSubmit:h,submitText:g("ok").toUpperCase()})))}y.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapResult:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-result/snap-result.js"}],[7804,{"./snap-update":7805},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-update"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-update/index.js"}],[7805,{"../../../../components/app/snaps/install-error/install-error":6213,"../../../../components/app/snaps/snap-authorship-header":6221,"../../../../components/app/snaps/snap-install-warning":6234,"../../../../components/app/snaps/update-snap-permission-list":6338,"../../../../components/component-library":6469,"../../../../components/ui/page-container":6929,"../../../../components/ui/pulse-loader/pulse-loader":6938,"../../../../helpers/constants/design-system":7023,"../../../../helpers/utils/util":7082,"../../../../hooks/useI18nContext":7157,"../../../../hooks/useScrollRequired":7179,"../../../../selectors":7947,"../util":7808,"prop-types":5074,react:5258,"react-redux":5202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=C;var a=k(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(e("react")),i=e("react-redux"),r=e("../../../../components/ui/page-container"),s=e("../../../../hooks/useI18nContext"),c=k(e("../../../../components/app/snaps/snap-install-warning")),l=e("../../../../helpers/constants/design-system"),u=k(e("../../../../components/app/snaps/update-snap-permission-list")),d=e("../util"),p=k(e("../../../../components/ui/pulse-loader/pulse-loader")),m=k(e("../../../../components/app/snaps/install-error/install-error")),f=k(e("../../../../components/app/snaps/snap-authorship-header")),g=e("../../../../components/component-library"),h=e("../../../../hooks/useScrollRequired"),y=e("../../../../selectors"),b=e("../../../../helpers/utils/util");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function k(e){return e&&e.__esModule?e:{default:e}}function C({request:e,requestState:t,approveSnapUpdate:n,rejectSnapUpdate:a,targetSubjectMetadata:E}){const k=(0,s.useI18nContext)(),[C,v]=(0,o.useState)(!1),[x,_]=(0,o.useState)(!1),{isScrollable:T,hasScrolledToBottom:S,scrollToBottom:I,ref:w,onScroll:N}=(0,h.useScrollRequired)([t]),O=(0,i.useSelector)(y.getSnapsMetadata),A=(0,o.useCallback)(()=>a(e.metadata.id),[e,a]),M=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),{name:B}=(0,i.useSelector)(e=>(0,y.getSnapMetadata)(e,E.origin)),R=t.approvedPermissions??{},P=t.unusedPermissions??{},D=t.newPermissions??{},F=t.approvedConnections??{},L=t.unusedConnections??{},j=t.newConnections??{},{newVersion:W}=t,$=t.loading,U=!$&&t.error,z=(0,d.getSnapInstallWarnings)(D,k,B,(0,b.getSnapName)(O)),G=z.length>0;return o.default.createElement(g.Box,{className:"snap-update",display:l.Display.Flex,justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,borderStyle:l.BorderStyle.none,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(f.default,{snapId:E.origin,onCancel:A}),o.default.createElement(g.Box,{ref:w,onScroll:N,className:"snap-update__content",style:{overflowY:"auto",flex:!$&&"1"},paddingLeft:4,paddingRight:4},!$&&!U&&o.default.createElement(g.Text,{paddingTop:4,paddingBottom:2,variant:l.TextVariant.headingMd,textAlign:"center"},k("updateRequest")),$&&o.default.createElement(g.Box,{className:"snap-update__content__loader-container",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center},o.default.createElement(p.default,null)),U&&o.default.createElement(m.default,{iconName:g.IconName.Warning,error:t.error,title:k("snapUpdateErrorTitle"),description:k("snapUpdateErrorDescription",[o.default.createElement(g.Text,{as:"span",key:"1",fontWeight:l.FontWeight.Medium},B)])}),!U&&!$&&o.default.createElement(o.default.Fragment,null,o.default.createElement(g.Text,{className:"snap-update__content__permission-description",paddingBottom:4,paddingLeft:4,paddingRight:4,textAlign:l.TextAlign.Center},k("snapUpdateRequest",[o.default.createElement(g.Text,{as:"span",key:"2",variant:l.TextVariant.bodyMd,fontWeight:l.FontWeight.Medium},B),o.default.createElement(g.Text,{as:"span",key:"3",variant:l.TextVariant.bodyMd,fontWeight:l.FontWeight.Medium},W)])),o.default.createElement(g.Box,{display:l.Display.Flex,backgroundColor:l.BackgroundColor.backgroundDefault,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,borderRadius:l.BorderRadius.XL},o.default.createElement(u.default,{approvedPermissions:R,revokedPermissions:P,newPermissions:D,approvedConnections:F,revokedConnections:L,newConnections:j,targetSubjectMetadata:E,showAllPermissions:()=>{_(!0)}})),o.default.createElement(g.Box,{className:"snap-update__scroll-button-area"},!T||S||x?null:o.default.createElement(g.AvatarIcon,{className:"snap-install__scroll-button","data-testid":"snap-update-scroll",iconName:g.IconName.Arrow2Down,backgroundColor:l.BackgroundColor.infoDefault,color:l.IconColor.primaryInverse,onClick:I,style:{cursor:"pointer"}})))),o.default.createElement(g.Box,{className:"snap-update__footer",display:l.Display.Flex,alignItems:l.AlignItems.center,flexDirection:l.FlexDirection.Column,backgroundColor:l.BackgroundColor.backgroundAlternative},o.default.createElement(r.PageContainerFooter,{cancelButtonType:"default",hideCancel:U,disabled:$||!U&&T&&!S,onCancel:A,cancelText:k("cancel"),onSubmit:()=>{!U&&G?v(!0):U?A():M()},submitText:k(U?"ok":"confirm")})),C&&o.default.createElement(c.default,{onCancel:()=>v(!1),onSubmit:M,snapName:B,warnings:z}))}C.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapUpdate:a.default.func.isRequired,rejectSnapUpdate:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-update/snap-update.js"}],[7806,{"./snaps-connect":7807},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snaps-connect"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snaps-connect/index.js"}]],[],{});